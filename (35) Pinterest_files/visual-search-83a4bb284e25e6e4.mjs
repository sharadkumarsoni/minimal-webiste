(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[14865,51879,51798,13047,50157,97372,39395,24661,90984,75970,93204,28153],{248639:e=>{var t,i,n,o,r,a={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"NuxHomefeedLoaderQuery",selections:[{alias:null,args:t=[{kind:"Literal",name:"includeFavoritedTopics",value:!0}],concreteType:null,kind:"LinkedField",name:"v3OrientationTopicsQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[i={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"data",plural:!1,selections:[{kind:"InlineFragment",selections:[i,{alias:null,args:n=[{kind:"Literal",name:"first",value:105}],concreteType:"V3OrientationTopicsDataConnection",kind:"LinkedField",name:"connection",plural:!1,selections:[{alias:null,args:null,concreteType:"V3OrientationTopicsDataEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Interest",kind:"LinkedField",name:"node",plural:!1,selections:[o={alias:null,args:null,kind:"ScalarField",name:"isFollowed",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"connection(first:105)"}],type:"V3OrientationTopicsDataConnectionContainer",abstractKey:null}],storageKey:null}],type:"V3OrientationTopics",abstractKey:null}],storageKey:"v3OrientationTopicsQuery(includeFavoritedTopics:true)"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"NuxHomefeedLoaderQuery",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"v3OrientationTopicsQuery",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"data",plural:!1,selections:[i,{kind:"InlineFragment",selections:[{alias:null,args:n,concreteType:"V3OrientationTopicsDataConnection",kind:"LinkedField",name:"connection",plural:!1,selections:[{alias:null,args:null,concreteType:"V3OrientationTopicsDataEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"Interest",kind:"LinkedField",name:"node",plural:!1,selections:[o,r,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"connection(first:105)"}],type:"V3OrientationTopicsDataConnectionContainer",abstractKey:null}],storageKey:null}],type:"V3OrientationTopics",abstractKey:null}],storageKey:"v3OrientationTopicsQuery(includeFavoritedTopics:true)"}]},params:{id:"a9bf783b9d875a30fe98739f3ffca410758baf5ba070ca4d8f27327fc986fbf1",metadata:{},name:"NuxHomefeedLoaderQuery",operationKind:"query",text:null}};a.hash="aef2f8a5b90b995cabe88f9752f12af1",e.exports=a},7745:e=>{var t,i,n,o,r,a,s,l={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"invite_code"}],kind:"Fragment",metadata:null,name:"PinCardSharedHeaderQuery",selections:[{alias:null,args:i=[{kind:"Variable",name:"inviteCode",variableName:"invite_code"}],concreteType:null,kind:"LinkedField",name:"v3GetInviteCodeQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"InviteCode",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sender",plural:!1,selections:[o={alias:"first_name",args:null,kind:"ScalarField",name:"firstName",storageKey:null},r={alias:"is_default_image",args:null,kind:"ScalarField",name:"isDefaultImage",storageKey:null},a={alias:"image_medium_url",args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null}],storageKey:null}],storageKey:null}],type:"InviteCodeResponse",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"PinCardSharedHeaderQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetInviteCodeQuery",plural:!1,selections:[n,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"InviteCode",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sender",plural:!1,selections:[o,r,a,s={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},s],storageKey:null}],type:"InviteCodeResponse",abstractKey:null}],storageKey:null}]},params:{id:"6ecc0f5ef5b300806765351890d4c30338f4cba0f2ed6262aebb971f8d13cedd",metadata:{},name:"PinCardSharedHeaderQuery",operationKind:"query",text:null}};l.hash="6113bb3593481961950c5053449014f3",e.exports=l},906587:e=>{var t,i,n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinRecipe_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"474x")'},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"diets",storageKey:null},{alias:null,args:null,concreteType:"CookTimes",kind:"LinkedField",name:"cookTimes",plural:!1,selections:[{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"cook",plural:!1,selections:t=[{alias:null,args:null,kind:"ScalarField",name:"m",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"CookTime",kind:"LinkedField",name:"total",plural:!1,selections:t,storageKey:null}],storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,concreteType:"ParsedIngredientMetadata",kind:"LinkedField",name:"ingredients",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"amt",storageKey:null},i],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ServingsSummary",kind:"LinkedField",name:"servingsSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"summary",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};n.hash="72951c99039e6492a3eb8e9fcb5a22c3",e.exports=n},276667:e=>{var t,i,n,o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SeeMoreButton_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[t={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null}],storageKey:null},i,{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},n,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageLargeUrl",storageKey:null}],storageKey:null},t,{args:null,kind:"FragmentSpread",name:"VaseSection_pin"}],type:"Pin",abstractKey:null};o.hash="64effb4f1e63deaf1d53b77187d996de",e.exports=o},166379:e=>{var t,i,n,o,r={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"inviteType"},{defaultValue:null,kind:"LocalArgument",name:"objectId"}],kind:"Fragment",metadata:null,name:"ShareInviteCreateExternalInviteGraphQLQuery",selections:[{alias:null,args:i=[{kind:"Variable",name:"inviteType",variableName:"inviteType"},{kind:"Variable",name:"objectId",variableName:"objectId"}],concreteType:null,kind:"LinkedField",name:"v3InviteUserExternalQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,concreteType:"InviteUserExternal",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:"invite_code",args:null,kind:"ScalarField",name:"inviteCode",storageKey:null},{alias:"invite_url",args:null,kind:"ScalarField",name:"inviteUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}],type:"V3InviteUserExternal",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"ShareInviteCreateExternalInviteGraphQLQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3InviteUserExternalQuery",plural:!1,selections:[n,{kind:"InlineFragment",selections:[o],type:"V3InviteUserExternal",abstractKey:null}],storageKey:null}]},params:{id:"ab55ea9f382837bc92cb5dab03686e16868a27912a9e4237e2ddbe7a15540d21",metadata:{},name:"ShareInviteCreateExternalInviteGraphQLQuery",operationKind:"query",text:null}};r.hash="9c91c46b70b37b163403747442a8c1d4",e.exports=r},380465:e=>{var t,i,n,o,r={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"invite_category"},{defaultValue:null,kind:"LocalArgument",name:"url"}],kind:"Fragment",metadata:null,name:"ShareInviteCreateShareLinkGraphQLQuery",selections:[{alias:null,args:i=[{kind:"Variable",name:"inviteCategory",variableName:"invite_category"},{kind:"Literal",name:"name",value:""},{kind:"Variable",name:"url",variableName:"url"}],concreteType:null,kind:"LinkedField",name:"v3CreateShareLinkQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o={alias:null,args:null,concreteType:"ShareLink",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:"invite_code",args:null,kind:"ScalarField",name:"inviteCode",storageKey:null},{alias:"invite_url",args:null,kind:"ScalarField",name:"inviteUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}],type:"V3CreateShareLink",abstractKey:null},{kind:"InlineFragment",selections:[n],type:"ClientError",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"ShareInviteCreateShareLinkGraphQLQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3CreateShareLinkQuery",plural:!1,selections:[n,{kind:"InlineFragment",selections:[o],type:"V3CreateShareLink",abstractKey:null}],storageKey:null}]},params:{id:"8d8e9da7f5f5830ad00711d5fa1aa68c48b859aac0680cc0e49d58d3c1ccea88",metadata:{},name:"ShareInviteCreateShareLinkGraphQLQuery",operationKind:"query",text:null}};r.hash="e485abf49d319ba9c47587981f2a86be",e.exports=r},656177:e=>{var t,i,n,o,r,a,s,l,c={fragment:{argumentDefinitions:[t={defaultValue:null,kind:"LocalArgument",name:"inviteCode"},i={defaultValue:null,kind:"LocalArgument",name:"inviteType"},n={defaultValue:null,kind:"LocalArgument",name:"objectId"}],kind:"Fragment",metadata:null,name:"ShareInviteMutation",selections:[{alias:null,args:o=[{fields:[{kind:"Variable",name:"inviteCode",variableName:"inviteCode"},{kind:"Variable",name:"inviteType",variableName:"inviteType"},{kind:"Variable",name:"objectId",variableName:"objectId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3InviteSentExternalMutation",plural:!1,selections:[{kind:"InlineFragment",selections:[r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"InviteCode",kind:"LinkedField",name:"data",plural:!1,selections:[a={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"fromUserId",storageKey:null}],storageKey:null}],type:"V3InviteSentExternal",abstractKey:null},{kind:"InlineFragment",selections:[r,l={alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null}],storageKey:null}],type:"InvalidParameters",abstractKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[i,t,n],kind:"Operation",name:"ShareInviteMutation",selections:[{alias:null,args:o,concreteType:null,kind:"LinkedField",name:"v3InviteSentExternalMutation",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"InviteCode",kind:"LinkedField",name:"data",plural:!1,selections:[a,s,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3InviteSentExternal",abstractKey:null},{kind:"InlineFragment",selections:[l],type:"InvalidParameters",abstractKey:null}],storageKey:null}]},params:{id:"30e03e1f3b6dded5c6d93bfecfb50065b254f1307aec34dfa67719890b615b82",metadata:{},name:"ShareInviteMutation",operationKind:"mutation",text:null}};c.hash="c33b898a613c3dc2792113fb7e97b0f5",e.exports=c},584818:e=>{var t,i,n,o,r,a,s,l,c,d,u={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"TodayArticleModule",selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"contentPin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:"images170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r=[i={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"170x")'},{alias:"images236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"236x")'},{alias:"images736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:r,storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:d=[t,a={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},c={alias:null,args:null,concreteType:"VerifiedIdentity",kind:"LinkedField",name:"verifiedIdentity",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"verified",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[t,l,s,a,c],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pageCount",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"contentPinOfficialUser",plural:!1,selections:d,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"feedSource",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"headerPinId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageUrls",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isProductPinFeed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showCreator",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"videoPin",plural:!1,selections:[t,{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"videos",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoList",kind:"LinkedField",name:"videoList",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoDetail",kind:"LinkedField",name:"v720P",plural:!1,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"thumbnail",storageKey:null},n,o],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"TodayArticle",abstractKey:null};u.hash="3afdada2f3d905a39bf4a6d5bf55a160",e.exports=u},133132:e=>{var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"TopicImageWithText_topic",selections:[{alias:"background_color",args:null,kind:"ScalarField",name:"backgroundColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:"follower_count",args:null,kind:"ScalarField",name:"followerCount",storageKey:null},{alias:null,args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null}],storageKey:'images(spec:"236x")'}],type:"Interest",abstractKey:null,hash:"b5b71fb4390c1d3835e468a25f687669"};e.exports=t},964820:e=>{var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"TopicRepFragment_topic",selections:[{alias:"is_followed",args:null,kind:"ScalarField",name:"isFollowed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"TopicImageWithText_topic"}],type:"Interest",abstractKey:null,hash:"e5a0b7dce2aa2313e4cf2c9871cbedf7"};e.exports=t},12617:e=>{var t,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnauthDesktopContextMenu_pin",selections:[{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:t=[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:t,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:t,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:t,storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null},{alias:null,args:null,concreteType:"SeoBreadcrumbs",kind:"LinkedField",name:"seoBreadcrumbs",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"usePinImagesFragment_pin"}],type:"Pin",abstractKey:null};i.hash="6cc486603fe4bb19b18741c21346a49b",e.exports=i},167074:e=>{var t,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnauthMobileContextMenu_pin",selections:[{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:t=[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:t,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:t,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:t,storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null},{alias:null,args:null,concreteType:"SeoBreadcrumbs",kind:"LinkedField",name:"seoBreadcrumbs",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{args:null,kind:"FragmentSpread",name:"usePinImagesFragment_pin"}],type:"Pin",abstractKey:null};i.hash="74f28c48f3a5ddb4a53f101389981c63",e.exports=i},85934:e=>{var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VaseAnnotations_pin",selections:[{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useAnnotationsWithLinksFragment_pin"}],type:"Pin",abstractKey:null,hash:"594237c2ea6ccfb8bbc0e3e8c62cac9f"};e.exports=t},877821:e=>{var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VaseSection_pin",selections:[{args:null,kind:"FragmentSpread",name:"VaseAnnotations_pin"}],type:"Pin",abstractKey:null,hash:"5645b1c5850647c98e4d2fefbb484bf4"};e.exports=t},569772:e=>{var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useAnnotationsWithLinksFragment_pin",selections:[{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,concreteType:"AnnotationsWithLinks",kind:"LinkedField",name:"annotationsWithLinksArray",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null,hash:"35075da6e1f4b526ac4314727015c44d"};e.exports=t},96795:e=>{var t,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinImagesFragment_pin",selections:[{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"60x60")'},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"170x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"236x")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"474x")'},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"736x")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"600x315")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"orig")'}],type:"Pin",abstractKey:null};i.hash="8dd4c9c753d2a67c0606dfff23b820e9",e.exports=i},110767:e=>{var t,i,n,o,r,a,s={fragment:{argumentDefinitions:t=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"useUnauthContextMenuQuery",selections:[{alias:null,args:i=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"UnauthDesktopContextMenu_pin"},{args:null,kind:"FragmentSpread",name:"UnauthMobileContextMenu_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"useUnauthContextMenuQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:o=[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:o,storageKey:null},n],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null},{alias:null,args:null,concreteType:"SeoBreadcrumbs",kind:"LinkedField",name:"seoBreadcrumbs",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],storageKey:null},{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"60x60")'},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"170x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"236x")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"474x")'},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"736x")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"600x315")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},n],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"a3c7af73694bf4bca337151ae03a4ab0cd268d45aad7d6a29c9cab3ffedebaa3",metadata:{},name:"useUnauthContextMenuQuery",operationKind:"query",text:null}};s.hash="28d48aeed76d97d5b2fc59af2e75669f",e.exports=s},850115:e=>{e.exports="https://s.pinimg.com/webapp/goodIdea-b770896d.svg"},379507:e=>{e.exports="https://s.pinimg.com/webapp/haha-e2800d2d.svg"},637956:e=>{e.exports="https://s.pinimg.com/webapp/love-c31e0b8d.svg"},909745:e=>{e.exports="https://s.pinimg.com/webapp/thanks-62775475.svg"},128206:e=>{e.exports="https://s.pinimg.com/webapp/wow-3cb697ef.svg"},422908:e=>{e.exports="https://s.pinimg.com/webapp/CS@2x-ecc1d35a.png"},832637:e=>{e.exports="https://s.pinimg.com/webapp/DA@2x-0a8213db.png"},986021:e=>{e.exports="https://s.pinimg.com/webapp/DE@2x-e398675a.png"},252881:e=>{e.exports="https://s.pinimg.com/webapp/EL@2x-5895bc67.png"},216462:e=>{e.exports="https://s.pinimg.com/webapp/EN@2x-c3eda626.png"},435574:e=>{e.exports="https://s.pinimg.com/webapp/ES@2x-d867d9a4.png"},890398:e=>{e.exports="https://s.pinimg.com/webapp/FI@2x-47fa27f7.png"},597437:e=>{e.exports="https://s.pinimg.com/webapp/FR@2x-bf910b39.png"},358787:e=>{e.exports="https://s.pinimg.com/webapp/HI@2x-58486090.png"},403529:e=>{e.exports="https://s.pinimg.com/webapp/HU@2x-1705acdc.png"},687096:e=>{e.exports="https://s.pinimg.com/webapp/ID@2x-1dc864b9.png"},720069:e=>{e.exports="https://s.pinimg.com/webapp/IT@2x-60e3683e.png"},154047:e=>{e.exports="https://s.pinimg.com/webapp/JA@2x-15535147.png"},899338:e=>{e.exports="https://s.pinimg.com/webapp/KO@2x-1099f44a.png"},532492:e=>{e.exports="https://s.pinimg.com/webapp/ML@2x-e7a6773b.png"},361316:e=>{e.exports="https://s.pinimg.com/webapp/MS@2x-58f3c917.png"},671307:e=>{e.exports="https://s.pinimg.com/webapp/NL@2x-5f1515db.png"},450914:e=>{e.exports="https://s.pinimg.com/webapp/NN@2x-f061e9b4.png"},888784:e=>{e.exports="https://s.pinimg.com/webapp/NO@2x-d7864990.png"},979730:e=>{e.exports="https://s.pinimg.com/webapp/PL@2x-7b44a0ea.png"},267569:e=>{e.exports="https://s.pinimg.com/webapp/PT@2x-1cf70049.png"},554154:e=>{e.exports="https://s.pinimg.com/webapp/RO@2x-112e3f0c.png"},234540:e=>{e.exports="https://s.pinimg.com/webapp/RU@2x-7e4486d9.png"},209153:e=>{e.exports="https://s.pinimg.com/webapp/SK@2x-2a81803e.png"},271648:e=>{e.exports="https://s.pinimg.com/webapp/SV@2x-61ea661d.png"},108806:e=>{e.exports="https://s.pinimg.com/webapp/TH@2x-0a53c197.png"},505944:e=>{e.exports="https://s.pinimg.com/webapp/TL@2x-3af02ef3.png"},373750:e=>{e.exports="https://s.pinimg.com/webapp/TR@2x-ec2d7ab5.png"},354593:e=>{e.exports="https://s.pinimg.com/webapp/UK@2x-5787bbf9.png"},523673:e=>{e.exports="https://s.pinimg.com/webapp/VI@2x-09999946.png"},934348:e=>{e.exports="https://s.pinimg.com/webapp/arSA@2x-024c511e.png"},70098:e=>{e.exports="https://s.pinimg.com/webapp/zhCN@2x-d3d7eda9.png"},692169:e=>{e.exports="https://s.pinimg.com/webapp/zhTW@2x-af9e1419.png"},908601:e=>{e.exports="https://s.pinimg.com/webapp/CS@2x-488e8cc6.png"},198667:e=>{e.exports="https://s.pinimg.com/webapp/DA@2x-e5d12354.png"},324637:e=>{e.exports="https://s.pinimg.com/webapp/DE@2x-22831293.png"},669639:e=>{e.exports="https://s.pinimg.com/webapp/EL@2x-e764ccf8.png"},882786:e=>{e.exports="https://s.pinimg.com/webapp/EN@2x-ca0773fb.png"},598188:e=>{e.exports="https://s.pinimg.com/webapp/ES@2x-55483593.png"},143832:e=>{e.exports="https://s.pinimg.com/webapp/FI@2x-695433d6.png"},484974:e=>{e.exports="https://s.pinimg.com/webapp/FR@2x-62177ec4.png"},629958:e=>{e.exports="https://s.pinimg.com/webapp/HI@2x-e55c64e4.png"},7747:e=>{e.exports="https://s.pinimg.com/webapp/HU@2x-2916bbea.png"},939492:e=>{e.exports="https://s.pinimg.com/webapp/ID@2x-34da9a4a.png"},800202:e=>{e.exports="https://s.pinimg.com/webapp/IT@2x-5749beff.png"},799486:e=>{e.exports="https://s.pinimg.com/webapp/JA@2x-a57c5839.png"},511036:e=>{e.exports="https://s.pinimg.com/webapp/KO@2x-c909bac5.png"},83365:e=>{e.exports="https://s.pinimg.com/webapp/ML@2x-8998d852.png"},309285:e=>{e.exports="https://s.pinimg.com/webapp/MS@2x-fa38b8b6.png"},186665:e=>{e.exports="https://s.pinimg.com/webapp/NL@2x-d31d4a18.png"},452833:e=>{e.exports="https://s.pinimg.com/webapp/NN@2x-c4b8da55.png"},759050:e=>{e.exports="https://s.pinimg.com/webapp/NO@2x-fd9bd702.png"},9046:e=>{e.exports="https://s.pinimg.com/webapp/PL@2x-5685a97f.png"},27322:e=>{e.exports="https://s.pinimg.com/webapp/PT@2x-2939b38c.png"},501796:e=>{e.exports="https://s.pinimg.com/webapp/RO@2x-188b728d.png"},791841:e=>{e.exports="https://s.pinimg.com/webapp/RU@2x-888d9aa1.png"},50486:e=>{e.exports="https://s.pinimg.com/webapp/SK@2x-bfa2f8d5.png"},417658:e=>{e.exports="https://s.pinimg.com/webapp/SV@2x-0e099997.png"},461619:e=>{e.exports="https://s.pinimg.com/webapp/TH@2x-988a46e6.png"},350421:e=>{e.exports="https://s.pinimg.com/webapp/TL@2x-1e888ea6.png"},97776:e=>{e.exports="https://s.pinimg.com/webapp/TR@2x-c216b517.png"},394445:e=>{e.exports="https://s.pinimg.com/webapp/UK@2x-fb5c6e06.png"},948992:e=>{e.exports="https://s.pinimg.com/webapp/VI@2x-abdc2e13.png"},993235:e=>{e.exports="https://s.pinimg.com/webapp/arSA@2x-1bf8e802.png"},137404:e=>{e.exports="https://s.pinimg.com/webapp/zhCN@2x-0b2349f4.png"},697072:e=>{e.exports="https://s.pinimg.com/webapp/zhTW@2x-0ef5b95c.png"},604077:e=>{e.exports="https://s.pinimg.com/webapp/handle_bottom_left-80eb8fea.svg"},777506:e=>{e.exports="https://s.pinimg.com/webapp/handle_bottom_right-61aecc74.svg"},641696:e=>{e.exports="https://s.pinimg.com/webapp/handle_top_left-892a69ad.svg"},105879:e=>{e.exports="https://s.pinimg.com/webapp/handle_top_right-ee54bc08.svg"},639693:e=>{e.exports=function(e){for(var t=-1,i=null==e?0:e.length,n=0,o=[];++t<i;){var r=e[t];r&&(o[n++]=r)}return o}},542473:e=>{var t=function(){};e.exports=t},269458:(e,t,i)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin/[id]/visual-search"]=function(){return i(294591).Z}},6637:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(328531),o=i(643913),r=i(204088),a=i(432300),s=i(172071),l=i(170815),c=i(584595),d=i(826067),u=i(7789);function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let h=null;class m{constructor(e,t){p(this,"abortCallback",null),p(this,"isBackgroundSyncEnabled",!1),this.name=e,this.options=t?{...t}:{}}static setDefaultConstructorFn(e){h=e}static create(e,t){if(h){return new h(e,t||{})}throw new Error("Couldn't find constructor function for "+e)}_isUrlShortEnoughForHttpGet(e,t){return(e+"?"+(0,o.Z)(t)).length<=2e3}abort(){this.abortCallback&&(this.abortCallback(),this.abortCallback=null)}isCalling(){return!!this.abortCallback}callGet(e,t={}){u.DQ&&(t["X-B3-Flags"]="1");const{logNetworkTimer:i,loggerComponentName:n}=this.options,o=i?new l.Z:null;return o&&o.start(),this.call("get",e,t).then((e=>{var t;o&&(o.end(),null===(t=m.logTimerComplete)||void 0===t||t.call(m,{timing:o.getCompletedTime(),component:n||this.name}));return e}))}callCreate(e,t){return this.call("create",e,t)}callUpdate(e,t){return this.call("update",e,t)}callDelete(e,t){return this.call("delete",e,t)}async call(e,t,i){navigator.onLine||this.isBackgroundSyncEnabled||s.Z.increment("resource_factory_not_online",1,{resourceName:this.name});const n=!t||void 0===t.async||t.async,o=t&&t.timeout||null,r=this._call(e,n,o,i);try{const e=await r;this.onResponseSuccess(e)}catch(a){m.customCallErrorHandlers&&m.customCallErrorHandlers({error:a,name:this.name,showError:!(!t||!t.showError)})}return r}getAjaxParams({async:e,headers:t,method:i,timeoutSeconds:n}){var o;const a={options:this.options,context:{}},l=`/resource/${this.name}/${i}/`,c={source_url:(0,d.JJ)(),data:JSON.stringify(a)},u="get"===i&&this._isUrlShortEnoughForHttpGet(l,c);!u&&this.isBackgroundSyncEnabled&&s.Z.increment("background_sync_request_header",1,{resourceName:this.name});return[{cache:!1,url:l,async:e,data:c,headers:{...(0,r.Z)({experimentHash:(null===(o=m.experimentsClient)||void 0===o?void 0:o.latestExperimentHashFromServer)||"",windowIsInFocus:m.getWindowInFocus()}),...t},timeout:n||0,type:u?"GET":"POST"},a]}_call(e,t,i,n){throw new Error(`Resource _call must be implemented by child class - ${this.name} ${e}`)}onResponseSuccess(e){if(m.customResponseSuccessHandlers&&m.customResponseSuccessHandlers(e,this.options),m.contextLogger&&e.client_context&&!this.options.disable_event_log_info){const{event_log_info:t}=e.client_context;t&&"event_type"in t&&m.contextLogger.logContextEvent({...t,..."aux_data"in t?{aux_data:{...t.aux_data}}:null})}n.Z.onResourceResponse()}getLoginState(){throw new Error(`Resource getUser must be implemented by child class - ${this.name}`)}redirectToLoginPage(){throw new Error(`Resource redirectToLoginPage must be implemented by child class - ${this.name}`)}logoutUser(e){throw new Error(`Resource logoutUser must be implemented by child class - ${this.name}`)}showLimitedLoginPrompt(e,t){throw new Error(`Resource showLimitedLoginPrompt must be implemented by child class - ${this.name}`)}shouldRedirectToLoginPage(e,t,i,n,o){return!(0,d.JJ)().startsWith("/login")&&((403!==e||2831!==n)&&(403===e&&o!==a.Z.DEFAULT||(401===e&&1001===n&&!t||(401!==e||n!==c.hE||"/resource/SentExternalInviteCallbackResource/create/"!==i)&&(401===e&&n===c.hE&&"/resource/UserSessionResource/delete/"!==i&&(this.logoutUser(i),!0)))))}}p(m,"i18n",null),p(m,"customCallErrorHandlers",null),p(m,"customResponseSuccessHandlers",null),p(m,"logTimerComplete",null),p(m,"getWindowInFocus",(()=>!1)),p(m,"normalizeResponse",null),p(m,"customDataManipulations",null)},479218:(e,t,i)=>{i.d(t,{H:()=>d,Z:()=>c});var n=i(983722),o=i(914671),r=i(204088),a=i(6637);function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class l{constructor(e,t=5e3){s(this,"_flushTimer",null),s(this,"_listeningForWindowClose",!1),s(this,"_queue",[]),s(this,"flush",(()=>{if(this._flushTimer&&(clearTimeout(this._flushTimer),this._flushTimer=null),0!==this._queue.length)try{this._send(),this._queue=[]}catch(e){}})),this._queueMapper=e,this._flushTimeoutDelay=t}_send(){}enqueue(e){if(this._queue=[...this._queue,e],!this._flushTimer)try{this._flushTimer=setTimeout(this.flush,this._flushTimeoutDelay)}catch(t){this.flush()}this._listeningForWindowClose||(window.addEventListener("beforeunload",this.flush),this._listeningForWindowClose=!0)}}class c extends l{constructor(e,t,i=5e3){super(t,i),this._resourceName=e}_send(){a.Z.create(this._resourceName,this._queueMapper(this._queue)).callCreate()}}class d extends l{constructor(e,t,i,n=5e3){super(i,n),s(this,"_failedKeepAlive",!1),s(this,"_stickyFallback",!0),this._url=e,this._resourceName=t}_shouldFallback(){return this._failedKeepAlive&&this._stickyFallback}fetch(e){var t;const{getCsrfToken:s}=i(628551),l=null===(t=(0,n.Z)())||void 0===t?void 0:t.experimentsClient,c=(0,r.Z)({experimentHash:(null==l?void 0:l.latestExperimentHashFromServer)||"",windowIsInFocus:o.Z.windowIsInFocus});window.fetch(this._url,{method:"POST",mode:"same-origin",keepalive:!0,headers:{...c,"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":s(),"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({data:{options:e}})}).catch((()=>{this._failedKeepAlive=!0,e.keepAlive="failed";a.Z.create(this._resourceName,e).callCreate()}))}_send(){if(this._shouldFallback()){const e=this._queueMapper(this._queue);e.keepAlive="fallback";a.Z.create(this._resourceName,e).callCreate()}else{const e=this._queueMapper(this._queue);e.keepAlive=!0,this.fetch(e)}}}},983722:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(608832);function o(){return(0,n.l)()}},172071:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(441143),o=i.n(n),r=i(479218);let a=null;const s=[];let l=null;function c(){s.length&&s.forEach((e=>e.flush()))}function d(e,t,i,n,l){o()(n>=0&&n<=1,`sampleRate must be between 0 and 1. Found ${String(n)}`);const c=[e,t,i,n,l];a||(a=new r.H("/resource/StatsLogResource/create/","StatsLogResource",(e=>({source:"browser",stats:e})),5e3),s.push(a)),a.enqueue(c)}const u={increment(e,t=.1,i={}){d(e,1,"c",t,i)},count(e,t,i=.1,n={}){d(e,t,"c",i,n)},timing(e,t,i=.1,n={}){d(e,t,"ms",i,n)},gauge(e,t,i=.1,n={}){d(e,t,"g",i,n)},incrementNow(e,t=.1,i={}){d(e,1,"c",t,i),c()},countNow(e,t,i=.1,n={}){d(e,t,"c",i,n),c()},timingNow(e,t,i=.1,n={}){d(e,t,"ms",i,n),c()},initServer(e){l=e},__test_only_get_queue:()=>a?a._queue:[],__test_only_clear(){a=null}}},832654:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(349700);function o(e,t){const{alt_text:i,auto_alt_text:o}=e;return i?(0,n.nk)(t._('This contains: {{ altText }}', 'web.altText', 'Alt text input by a human'),{altText:i}).join(""):o?(0,n.nk)(t._('This may contain: {{ autoAltText }}', 'web.altText', 'Alt text generated by a computer'),{autoAltText:o}).join(""):null}},695014:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(667294),o=i(702664),r=i(616211),a=i(898781),s=i(6637);var l=i(883119),c=i(785893);function d({favorited:e,favoriteCount:t,isCloseupButton:i,onFavorite:d,onUnfavorite:u,pinId:p,size:h}){const m=(0,a.ZP)(),_=(0,o.useDispatch)(),[g,v]=(0,n.useState)(!1),[f,y]=(0,n.useState)(e),[x,b]=(0,n.useState)(null!=t?t:0),w=async()=>{var e;y(!f),v(!0),f?(b(x-1),await _((e=p,async t=>{await s.Z.create("ApiResource",{url:`/v3/pins/${e}/favorite/`}).callDelete(),t(function(e){return{type:"PIN_FAVORITE",payload:{id:e,increment:-1,value:!1}}}(e))})),u(),v(!1)):(b(x+1),await _(function(e){return async t=>{await s.Z.create("ApiResource",{url:`/v3/pins/${e}/favorite/`}).callCreate(),t(function(e){return{type:"PIN_FAVORITE",payload:{id:e,increment:1,value:!0}}}(e))}}(p)),d(),v(!1))},P=x<10?x:m._('9+', 'favoriteButton.favoriteCountText', 'Text shown when greater than 9 favorites on Pin');return(0,c.jsxs)(l.kC,{alignItems:"center",gap:{row:1,column:0},children:[void 0!==t&&x>0&&(0,c.jsx)(l.xv,{size:"200",weight:"bold",children:P}),(0,c.jsx)(r.Z,{isCloseupButton:i,isDisabled:g,isFavorited:f,onTap:()=>{w()},size:h})]})}},578722:(e,t,i)=>{i.d(t,{H1:()=>c,HW:()=>r,iL:()=>l,pN:()=>s,s_:()=>a});var n=i(19121),o=i(773285);const r=new Date(2022,1,1);function a(){const{checkExperiment:e}=(0,o.F)(),t=["enabled_public","employees"].includes(e("web_ip_plays",{dangerouslySkipActivation:!0}).group),i=e("web_ip_pinner_plays",{dangerouslySkipActivation:!0}).anyEnabled,n=e("android_ios_web_ip_plays_dark_reads").anyEnabled;return t||i||n}function s({isOwnPin:e,isStoryPin:t,pinCreationDate:i,surface:a}){const s=(0,n.Z)(),{checkExperiment:l}=(0,o.F)(),c=l("web_play_playtime_pin_stats",{dangerouslySkipActivation:!0}).anyEnabled,d=!!("CreatorProfileStoryPinGrid"===a&&t&&i&&i.getTime()>=r.getTime()&&c&&s.isPartner&&e)&&l("web_ip_plays").anyEnabled,u=["enabled_public","employees"].includes(l("web_ip_plays",{dangerouslySkipActivation:!0}).group);if("CreatorProfileStoryPinGrid"===a&&t&&i&&i.getTime()>=r.getTime()){if(s.isPartner)return e&&d||!e&&u;if(l("web_ip_pinner_plays").anyEnabled)return!0}return!1}function l({isOwnPin:e,isPartner:t}){const{checkExperiment:i}=(0,o.F)(),n=["enabled_public","employees"].includes(i("web_ip_plays",{dangerouslySkipActivation:!0}).group),r=i("web_ip_pinner_plays",{dangerouslySkipActivation:!0}).anyEnabled;return!(e||!(r&&!t||n&&t))}function c({isOwnPin:e,isPartner:t}){const{checkExperiment:i}=(0,o.F)(),n=i("web_ip_plays",{dangerouslySkipActivation:!0}).anyEnabled,r=i("web_ip_pinner_plays",{dangerouslySkipActivation:!0}).anyEnabled;return!(!e||!(n&&t||r&&!t))}},397066:(e,t,i)=>{i.d(t,{b:()=>d,h:()=>u});var n=i(983722),o=i(768559),r=i(43760),a=i(170168),s=i(619937),l=i(48714),c=i(366284);const d=({href:e,pinId:t,pin:i,location:r,auxData:d},u)=>{if(i&&i.is_promoted){var p,h,m,_;const w=(0,o.Z)({boardUrl:null===(p=i.board)||void 0===p?void 0:p.url,callToCreateSourcePinId:i.call_to_create_source_pin_id,location:r,pinId:i.id,pinnerUserName:null===(h=i.pinner)||void 0===h?void 0:h.username,storyPinDataId:i.story_pin_data_id,trackingParams:i.tracking_params,trackingParamsMap:i.tracking_params_map}),P=(0,l.nS)({url:e,pinId:t,csrId:null,clientTrackingParams:w,auxData:d}),S=(0,n.Z)();if((0,c.G6)(null!==(m=null==S?void 0:S.userAgent.browserName)&&void 0!==m?m:"")){var g,v;const{group:n}=null!==(g=null==S?void 0:S.experimentsClient.checkExperiment("m10n_event_conversion_measurement"))&&void 0!==g?g:{},o=null!=S&&null!==(v=S.userAgent)&&void 0!==v&&v.browserVersion?S.userAgent.browserVersion:"0.0",r=parseFloat(o.split(".")[0]+"."+o.split(".")[1]);if(void 0!==i.campaign_id&&r>=14.1&&["enabled_safari"].includes(n)){var f;const n=i.attribution_source_id?((e,t,i)=>{const n=document.createElement("a");return n.setAttribute("href",t),n.setAttribute("target","_blank"),n.setAttribute("rel","noopener nofollow noreferrer"),n.style.cursor="pointer",n.style.display="block",n.setAttribute(s.$N.ATTRIBUTION_SOURCE_ID,e),n.setAttribute(s.$N.ATTRIBUTE_DESTINATION,i),n.setAttribute(s.$N.ATTRIBUTE_ON,i),n.click(),e})(i.attribution_source_id,P,e):((e,t,i)=>{const n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("target","_blank"),n.setAttribute("rel","noopener nofollow noreferrer"),n.style.cursor="pointer",n.style.display="block";const o=""+(e%32*8+Math.floor(((new Date).getTime()-16409952e5)/864e5)%8);return n.setAttribute(s.$N.ATTRIBUTION_SOURCE_ID,o),n.setAttribute(s.$N.ATTRIBUTE_DESTINATION,i),n.setAttribute(s.$N.ATTRIBUTE_ON,i),n.click(),o})(null!==(f=i.pin_promotion_id)&&void 0!==f?f:0,P,e);return u({event_type:101,clientTrackingParams:w,object_id_str:t||"",aux_data:{pin_id:t||"",click_measurement_ppid:i.pin_promotion_id||"",click_measurement_campaign_id:i.campaign_id||"",is_pcm:!0,attribution_source_id:n,page_url:e}}),!0}}else if((0,c.i7)(null!==(_=null==S?void 0:S.userAgent.browserName)&&void 0!==_?_:"")){var y,x;const{group:n}=null!==(y=null==S?void 0:S.experimentsClient.checkExperiment("m10n_event_conversion_measurement_chrome"))&&void 0!==y?y:{},o=null!=S&&null!==(x=S.userAgent)&&void 0!==x&&x.browserVersion?parseInt(S.userAgent.browserVersion.split(".")[0],10):0;if(void 0!==i.attribution_source_id&&o>=101&&["enabled"].includes(n)){var b;const n=((e,t,i)=>{const n=new URL(`${a.C0}/attribution_source/`);n.searchParams.set(s.NR.ATTRIBUTION_SOURCE_EVENT_ID,e),n.searchParams.set(s.NR.ATTRIBUTION_DESTINATION,i),n.searchParams.set(s.NR.ATTRIBUTION_EXPIRY,""+s.uV);const o=document.createElement("a");return o.setAttribute("href",t),o.setAttribute("target","_blank"),o.setAttribute("rel","noopener nofollow noreferrer"),o.style.cursor="pointer",o.style.display="block",o.setAttribute(s.NR.ATTRIBUTION_SOURCE,n.toString()),o.click(),e})(null!==(b=i.attribution_source_id)&&void 0!==b?b:"0",P,e);return u({event_type:101,clientTrackingParams:w,object_id_str:t||"",aux_data:{pin_id:t||"",click_measurement_ppid:i.pin_promotion_id||"",click_measurement_campaign_id:i.campaign_id||"",is_arapi:!0,attribution_source_id:n,page_url:e}}),!0}}}return!1},u=({href:e,pinId:t,pin:i,location:n,auxData:a},s)=>{if("undefined"!=typeof window&&window.Windows)(0,r.Z)({url:e,pinId:t,pin:i,location:n,auxData:a});else{var c,u;if(d({href:e,pinId:t,pin:i,location:n,auxData:a},s))return;(0,l.Gj)({url:e,pinId:t,csrId:null,clientTrackingParams:(0,o.Z)({boardUrl:null==i||null===(c=i.board)||void 0===c?void 0:c.url,callToCreateSourcePinId:null==i?void 0:i.call_to_create_source_pin_id,location:n,pinId:null==i?void 0:i.id,pinnerUserName:null==i||null===(u=i.pinner)||void 0===u?void 0:u.username,storyPinDataId:null==i?void 0:i.story_pin_data_id,trackingParams:null==i?void 0:i.tracking_params,trackingParamsMap:null==i?void 0:i.tracking_params_map}),auxData:a})}}},955362:(e,t,i)=>{i.r(t),i.d(t,{default:()=>v});var n=i(667294),o=i(702664),r=i(205202),a=i(248975),s=i(420370),l=i(883561),c=i(898781),d=i(199387),u=i(447948),p=i(623568),h=i(116674),m=i(576440),_=i(883119),g=i(785893);function v({feedbackData:e,feedbackType:t,pin:i,pinTitle:v,setForcePrimary:f,transparentBackground:y}){var x,b;const w=(0,c.ZP)(),P=(0,o.useDispatch)(),{viewParameter:S,viewType:T}=(0,m.E)(),{reportPin:I}=(0,h.f)(),[k,E]=(0,n.useState)(!1),[A,C]=(0,n.useState)(),{ad_match_reason:j,show_ad_reasons:R,board:D,category:O,description:L,id:M="",images:N,is_promoted:z,pinner:F,promoter:Z,recommendation_reason:B,source_interest:U,videos:H}=i;var V;const W=(V=z?60:50,function(e){return(0,l.ZP)((e||"").trim(),V)})(null!=L?L:""),$=(0,r.Z)(N,"236x"),G=(0,p.iR)(H),K=(0,d.Z)(101,{component:0,element:981,object_id_str:M,aux_data:{feedback_type:t}}),q=()=>{R||(f(!1),P((0,u.i0)(M)),E(!1))};return(0,g.jsxs)(n.Fragment,{children:[(0,g.jsx)(_.xu,{"data-test-id":"feedback-button",ref:C,children:(0,g.jsx)(_.hU,{accessibilityLabel:w._('More information', 'accessibility label for overflow menu button', 'accessibility label for overflow menu button'),bgColor:y?"transparent":"white",icon:"ellipsis",iconColor:"darkGray",onClick:()=>{k?q():(f(!0),E(!0)),K()},size:"sm"})}),k&&(0,g.jsx)(_.xu,{onFocus:e=>e.stopPropagation(),children:(0,g.jsx)(s.Z,{anchor:A,ad_match_reason:j,bestPinImgSrc:(0,a.Z)({images:i.images,embedSrc:null===(x=i.embed)||void 0===x?void 0:x.src,embedType:null===(b=i.embed)||void 0===b?void 0:b.type}),board:D,feedbackData:e,feedbackType:t,hideDownload:G,isPromoted:z,onLinkClick:()=>{k&&q()},onDismiss:q,onHide:q,onDownloadHideFlyout:()=>{f(!1),E(!1)},pinCategory:O,pinDescription:W,pinId:M,pinImgSrc:$,pinner:F,pinTitle:v,promoter:Z,recommendationReason:B,reportPin:()=>I(i,S,T),sourceInterest:U,viewParameter:S,viewType:T})})]})}},420370:(e,t,i)=>{i.d(t,{Z:()=>F});var n=i(667294),o=i(702664),r=i(941646),a=i(883119),s=i(785893);function l({iconAccessibilityLabel:e,icon:t,linkAccessibilityLabel:i,showNavigationIcon:n,text:o}){return(0,s.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,s.jsx)(r.Z,{id:"ad-reason-icon",children:(0,s.jsx)(a.Sj,{accessibilityLabel:e,bgColor:"lightGray",icon:t,iconColor:"darkGray"})}),(0,s.jsx)(a.xu,{alignSelf:"center","data-test-id":"ad-location-targeting-reason",height:"100%",marginStart:2,children:(0,s.jsx)(a.xv,{children:o})}),n&&i&&(0,s.jsx)(a.kC,{direction:"column",justifyContent:"center",children:(0,s.jsx)(a.JO,{accessibilityLabel:i,color:"default",icon:"arrow-forward"})})]})}var c=i(121151),d=i(898781),u=i(170168),p=i(349700),h=i(407043),m=i(773285),_=i(966113);function g({onDismiss:e,brandName:t,country:i,language:n,geoRegion:o,geoPostalCode:g,ageBucketMatch:v,localeMatch:f,interestMatch:y,genderMatch:x,deviceMatch:b,isAgeMatched:w,isBehaviorTargetingMatched:P,isCustomerListMatched:S,isGeoPostalCodeMatched:T,isGeoRegionMatched:I,isShoppingTargetingRematched:k,isActAlikeMatched:E,isEngagementMatched:A,isExpandTargetingMatched:C,isFromGPSLocation:j,isVisitorMatched:R,gender:D,device:O}){const{logContextEvent:L}=(0,h.v)(),M=(0,d.ZP)(),N=T||I||w||P||k||S||A||E||C||j||R||""!==v||""!==f||""!==y||""!==x||""!==b||""!==o||""!==g,{checkExperiment:z}=(0,m.F)(),F=z("ads_web_waista_v2").anyEnabled;return(0,s.jsx)(c.ZP,{accessibilityModalLabel:M._('Why am I seeing this Ad?', 'app.common.react.components.PinRep.components.AdReasonsModal', 'Modal for explaining the reasons an advertiser is targeting a user'),onDismiss:e,children:(0,s.jsxs)(a.xu,{paddingX:8,paddingY:6,children:[(0,s.jsxs)(a.xu,{display:"flex",justifyContent:"center",marginBottom:6,position:"relative",children:[(0,s.jsx)(a.xu,{position:"absolute",left:!0,children:(0,s.jsx)(a.hU,{accessibilityLabel:M._('Close', 'app.common.react.components.PinRep.components.AdReasonsModal.closeModal', 'Close ad reasons modal'),icon:"cancel",iconColor:"darkGray",onClick:e,size:"sm"})}),(0,s.jsx)(a.X6,{align:"center",size:"500",children:M._('Why am I seeing this ad?', 'Heading for promoted Pins explanation', 'Heading for promoted pins explanation')})]}),(0,s.jsxs)(a.xu,{children:[(0,s.jsxs)(a.kC,{direction:"column",gap:{row:0,column:4},children:[(0,s.jsx)(a.xu,{children:(0,s.jsx)(a.xv,{children:(0,p.nk)(M._('{{ brandName }} wants to get their ads in front of people like you. {{ learnMoreLink }}', 'app.common.react.components.PinRep.components.AdReasonsModal.advertiserExplanation', 'text informing the user about who is the advertiser'),{brandName:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:t},"ad-reasons-brand-name"),learnMoreLink:(0,s.jsx)(r.Z,{id:"ad-reasons-learn-more-link",children:(0,s.jsx)(a.xv,{inline:!0,children:(0,s.jsx)(a.rU,{href:_.UF,display:"inlineBlock",onClick:()=>{L({event_type:101,component:13756,element:12057})},target:"blank",underline:"hover",children:M._('Learn more', 'app.common.react.components.PinRep.components.AdReasonsModal.learnMoreLink', 'Learn more link for info about the reasons an ad is shown')})},"ad-reasons-learn-more-link")})})})}),N&&(0,s.jsx)(a.xu,{marginBottom:4,children:(0,s.jsx)(a.xv,{children:(0,p.nk)(M._('{{ brandName }} is trying to reach people who fit the following criteria:', 'app.common.react.components.PinRep.components.AdReasonsModal.audienceExplanation', 'text informing the user about who is the advertiser\'s target audience'),{brandName:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:t},"ad-reasons-brand-name")})})})]}),(0,s.jsx)(r.Z,{id:"ad-reasons",children:(0,s.jsxs)(a.kC,{direction:"column",flex:"none",gap:{row:0,column:4},children:[""!==v&&F&&(0,s.jsx)(l,{iconAccessibilityLabel:M._('Icon for ad targeting age bucket', 'app.common.react.components.PinRep.components.AdReasons.ageIcon', 'Icon for ad targeting age bucket'),icon:"person",text:(0,p.nk)(M._('Age {{ ageBucketMatch }}', 'app.common.react.components.PinRep.components.AdReasonsModal.ageBucketMatch', 'Ad explanation for targeting age range, ageBucketMatch: Users age range'),{ageBucketMatch:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:v},"ad-reasons-age-bucket")})}),""!==x&&F&&(0,s.jsx)(l,{iconAccessibilityLabel:M._('Icon for ad targeting gender', 'app.common.react.components.PinRep.components.AdReasons.genderIcon', 'Icon for ad targeting gender'),icon:"person",text:(0,p.nk)(M._('{{ gender }}', 'app.common.react.components.PinRep.components.AdReasonsModal.genderMatch', 'Ad explanation for targeting gender, gender: Users gender'),{gender:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:D},"ad-reasons-gender")})}),""!==f&&F&&(0,s.jsx)(l,{iconAccessibilityLabel:M._('Icon for ad targeting locale', 'app.common.react.components.PinRep.components.AdReasons.localeIcon', 'Icon for ad targeting locale'),icon:"globe",text:(0,p.nk)(M._('Primary language {{ language }}', 'app.common.react.components.PinRep.components.AdReasonsModal.localeMatch', 'Ad explanation for targeting age range, language: Users language'),{language:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:n},"ad-reasons-locale")})}),""!==b&&F&&(0,s.jsx)(l,{iconAccessibilityLabel:M._('Icon for ad targeting device', 'app.common.react.components.PinRep.components.AdReasons.deviceIcon', 'Icon for ad targeting device'),icon:"overview",text:(0,p.nk)(M._('Using {{ device }}', 'app.common.react.components.PinRep.components.AdReasonsModal.deviceMatch', 'Ad explanation for targeting device, device: Users device'),{device:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:O},"ad-reasons-device")})}),""!==y&&F&&(0,s.jsx)(l,{iconAccessibilityLabel:M._('Icon for ad targeting interest', 'app.common.react.components.PinRep.components.AdReasons.interestIcon', 'Icon for ad targeting interest'),icon:"heart",text:(0,p.nk)(M._('Interested in {{ interestMatch }}', 'app.common.react.components.PinRep.components.AdReasonsModal.interestMatch', 'Ad explanation for targeting interest, interestMatch: Users interest'),{interestMatch:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:y},"ad-reasons-interest")})}),!T&&!I||F?null:(0,s.jsx)(a.iP,{role:"link",href:`${u.C0}${_.QL}`,onTap:()=>{L({event_type:101,component:13756,element:12059})},target:"blank",children:(0,s.jsx)(l,{iconAccessibilityLabel:M._('Icon for ad targeting location', 'app.common.react.components.PinRep.components.AdReasons.locationIcon', 'Icon for ad targeting location'),icon:"location",linkAccessibilityLabel:M._('Navigate to account settings', 'app.common.react.components.PinRep.components.AdReasonRow.icon', 'An icon for navigating to account settings'),showNavigationIcon:!0,text:(0,p.nk)(M._('Your primary location is in {{countryName}} and your primary language is {{language}}', 'app.common.react.components.PinRep.components.AdReasonsModal.locationTargeting', 'Ad explanation for targeting location'),{countryName:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:i},"ad-reasons-country-name"),language:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:n},"ad-reasons-language")})})}),""!==o&&F?(0,s.jsx)(l,{iconAccessibilityLabel:M._('Icon for ad targeting location', 'app.common.react.components.PinRep.components.AdReasons.locationIcon', 'Icon for ad targeting location, v2'),icon:"location",text:(0,p.nk)(M._('Based in {{geoRegion}}', 'app.common.react.components.PinRep.components.AdReasonsModal.locationTargetingV2', 'Ad explanation for targeting location v2, geoRegion: location user is based in'),{geoRegion:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:o},"ad-reasons-country-name")})}):null,""!==g&&F?(0,s.jsx)(l,{iconAccessibilityLabel:M._('Icon for ad targeting location', 'app.common.react.components.PinRep.components.AdReasons.locationIcon', 'Icon for ad targeting location, v2'),icon:"location",text:(0,p.nk)(M._('Based in {{geoPostalCode}}', 'app.common.react.components.PinRep.components.AdReasonsModal.locationTargetingV2', 'Ad explanation for targeting location v2, geoPostalCode: location user is based in'),{geoPostalCode:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:g},"ad-reasons-country-name")})}):null,w&&!F&&(0,s.jsx)(l,{iconAccessibilityLabel:M._('Icon for ad targeting age', 'app.common.react.components.PinRep.components.AdReasons.ageIcon', 'Icon for ad targeting age'),icon:"person",text:(0,p.nk)(M._('{{ brandName }} is trying to reach people in your age range', 'app.common.react.components.PinRep.components.AdReasonsModal.ageTargeting', 'Ad explanation for targeting age range'),{brandName:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:t},"ad-reasons-age-brand-name")})}),P&&!F&&(0,s.jsx)(l,{iconAccessibilityLabel:M._('Icon for ad targeting search history', 'app.common.react.components.PinRep.components.AdReasons.searchIcon', 'Icon for ad targeting search history'),icon:"search",text:M._('Your Pinterest browsing history and search behavior', 'app.common.react.components.PinRep.components.AdReasonsModal.searchTargeting', 'Ad explanation for targeting the search history of the user')}),k&&!F?(0,s.jsx)(l,{iconAccessibilityLabel:M._('Icon for ad targeting customers who interacted with this brand previously', 'app.common.react.components.PinRep.components.AdReasonsModal.shoppingTargetingIcon', 'Ad explanation for targeting users who have interacted with an advertiser brand'),icon:"clock",text:(0,p.nk)(M._('You\'ve interacted with {{brandName}} before', 'app.common.react.components.PinRep.components.AdReasonsModal.shoppingTargetingText', 'Text explaining the ad reason for targeting users who interacted with brand previously, brandName: promoter name'),{brandName:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:t},"retargeting-ad-reason")})}):null,k&&F?(0,s.jsx)(l,{iconAccessibilityLabel:M._('Icon for ad targeting user on an audience list', 'app.common.react.components.PinRep.components.AdReasons.shoppingTargeting', 'Icon for ad targeting shopping targeting'),icon:"history",text:(0,p.nk)(M._('Interacted with {{brandName}}', 'app.common.react.components.PinRep.components.AdReasonsModal.shoppingTargeting', 'Ad explanation for shopping targeting, brandName: promoter name'),{brandName:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:t},"ad-reasons-shopping-targeting")})}):null,R&&F&&(0,s.jsx)(l,{iconAccessibilityLabel:M._('Icon for ad targeting customers who interacted with this brand previously, visitor matched', 'app.common.react.components.PinRep.components.AdReasonsModal.visitorMatchIcon', 'Ad explanation for visitor targeting users who have interacted with an advertiser brand'),icon:"history",text:(0,p.nk)(M._('Interacted with {{brandName}}', 'app.common.react.components.PinRep.components.AdReasonsModal.visitorTargetingText', 'Text explaining the ad reason for visitor targeting users who interacted with brand previously, brandName: promoter name'),{brandName:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:t},"ad-reason-visitor")})}),S&&!F?(0,s.jsx)(l,{iconAccessibilityLabel:M._('Icon for ad targeting user on an audience list', 'app.common.react.components.PinRep.components.AdReasons.genderIcon', 'Icon for ad targeting gender'),icon:"menu",text:(0,p.nk)(M._('You\'re on an audience list provided by {{brandName}}', 'app.common.react.components.PinRep.components.AdReasonsModal.customerListTargeting', 'Ad explanation for targeting customer list, brandName: promoter name'),{brandName:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:t},"ad-reasons-customer-list")})}):null,S&&F?(0,s.jsx)(l,{iconAccessibilityLabel:M._('Icon for ad targeting user on an audience list', 'app.common.react.components.PinRep.components.AdReasons.listIcon', 'Icon for ad targeting customer list'),icon:"menu",text:(0,p.nk)(M._('On a list provided by {{brandName}}', 'app.common.react.components.PinRep.components.AdReasonsModal.customerListTargetingV2', 'Ad explanation for targeting customer list v2, brandName: promoter name'),{brandName:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:t},"ad-reasons-customer-list")})}):null,A&&F&&(0,s.jsx)(l,{iconAccessibilityLabel:M._('Icon for ad targeting user on engagement audience', 'app.common.react.components.PinRep.components.AdReasons.engagementIcon', 'Icon for ad targeting engagement'),icon:"pin",text:(0,p.nk)(M._('Interacted with {{brandName}} on Pinterest', 'app.common.react.components.PinRep.components.AdReasonsModal.engagementTargeting', 'Ad explanation for targeting engagement audience, brandName: promoter name'),{brandName:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:t},"ad-reasons-engagement")})}),E&&F&&(0,s.jsx)(l,{iconAccessibilityLabel:M._('Icon for ad targeting user on act alike', 'app.common.react.components.PinRep.components.AdReasons.actAlikeIcon', 'Icon for ad targeting act alike'),icon:"graph-bar",text:(0,p.nk)(M._('Similar demographic or interest as other {{brandName}} customers', 'app.common.react.components.PinRep.components.AdReasonsModal.', 'Ad explanation for targeting act alike, brandName: promoter name'),{brandName:(0,s.jsx)(a.xv,{inline:!0,weight:"bold",children:t},"ad-reasons-act-alike")})}),C&&F&&(0,s.jsx)(l,{iconAccessibilityLabel:M._('Icon for ad targeting user on expand targeting', 'app.common.react.components.PinRep.components.AdReasons.expandTargeting', 'Icon for ad expand targeting'),icon:"pinterest",text:M._('Relevant activity on Pinterest', 'app.common.react.components.PinRep.components.AdReasonsModal.expandTargeting', 'Ad explanation for targeting ')}),j&&F&&(0,s.jsx)(l,{iconAccessibilityLabel:M._('Icon for ad targeting user on GPS', 'app.common.react.components.PinRep.components.AdReasons.GPS', 'Icon for ad targeting GPS'),icon:"location",text:M._('GPS Location', 'app.common.react.components.PinRep.components.AdReasonsModal.GPS', 'Ad explanation for targeting GPS')}),N&&(0,s.jsx)(a.xu,{marginBottom:1,children:(0,s.jsx)(a.xv,{children:M._('There could also be more factors not listed here.', 'app.common.react.components.PinRep.components.AdReasonsModal.miscFactors', 'Text explaining there are more targeting factors')})}),N&&F?(0,s.jsx)(a.xu,{marginBottom:1,children:(0,s.jsx)(a.iP,{role:"link",href:`${u.C0}${_.AH}`,onTap:()=>{L({event_type:101,component:13756,element:13361})},target:"blank",children:(0,s.jsx)(a.xv,{weight:"bold",children:M._('Change user settings', 'app.common.react.components.PinRep.components.AdReasonsModal.miscFactors', 'Text linking to user settings in case targeting is incorrect')})})}):null]})}),(0,s.jsxs)(a.kC,{direction:"column",gap:{row:0,column:1},children:[(0,s.jsx)(a.xu,{marginBottom:3,marginTop:3,children:(0,s.jsx)(a.iz,{})}),(0,s.jsx)(a.xu,{marginBottom:1,marginTop:1,children:(0,s.jsx)(a.X6,{size:"400",children:M._('I don\'t want to see this ad', 'app.common.react.components.PinRep.components.AdReasonsModal.hideThisAdHeading', 'Text for explaining how to hide an ad')})}),(0,s.jsx)(a.xu,{marginBottom:4,children:(0,s.jsx)(a.xv,{children:(0,p.nk)(M._('If you don\'t want to see ads from a specific advertiser you can block the advertiser\'s Pinterest profile. {{learnMoreLink}}', 'app.common.react.components.PinRep.components.AdReasonsModal.blockAdvertiserText', 'Text explaining how to block an advertiser profile'),{learnMoreLink:(0,s.jsx)(a.xv,{inline:!0,children:(0,s.jsx)(a.rU,{display:"inlineBlock",href:_.K_,onClick:()=>{L({event_type:101,component:13756,element:12058})},target:"blank",underline:"hover",children:M._('Learn more', 'app.common.react.components.PinRep.components.AdReasonsModal.learnMoreLink', 'Learn more link for info about the reasons an ad is shown')})},"ad-reasons-learn-more-link")})})})]})]})]})})}var v=i(784590),f=i(19121),y=i(350118),x=i(780280);const b="Female",w="Male",P="Web";function S({pinId:e,onDismiss:t}){var i,o,r,a;const{logContextEvent:l}=(0,h.v)(),{locale:c}=(0,x.B)(),{country:d=""}=(0,f.Z)(),u=(0,v.Z)({name:"CountriesResource",options:{hasEmptyState:!0}}),p=(0,v.Z)({name:"LocalesResource"}),m=(0,y.S6)()(e);(0,n.useEffect)((()=>{l({event_type:120,component:13756})}),[l]);const{ad_targeting_attribution:_,promoter:S}=null!=m?m:{},{is_age_matched:T=!1,is_behavior_targeting_matched:I=!1,is_customer_list_matched:k=!1,is_geo_postal_code_matched:E=!1,is_geo_region_matched:A=!1,is_shopping_retargeting_matched:C=!1,is_actalike_matched:j=!1,is_engagement_matched:R=!1,is_expand_targeting_matched:D=!1,is_from_gps_location:O=!1,is_visitor_matched:L=!1,matched_age_bucket:M="",matched_locale:N="",matched_interest:z="",matched_gender:F="",matched_device:Z="",geo_region:B="",geo_postal_code:U=""}=null!==(i=function(e=null,t=4){return e&&Object.keys(e).filter((t=>"boolean"==typeof e[t]||"string"==typeof e[t])).slice(0,t).reduce(((t,i)=>({...t,[i]:e[i]})),{})}(_))&&void 0!==i?i:{},H=null!==(o=null==S?void 0:S.full_name)&&void 0!==o?o:"",V=function(e,t){var i;const{name:n=""}=null!==(i=e.find((e=>e.key===t)))&&void 0!==i?i:{};return n}(null!==(r=u.data)&&void 0!==r?r:[],d),W=function(e,t){var i;const{name:n=""}=null!==(i=e.find((e=>e.key===t)))&&void 0!==i?i:{};return n}(null!==(a=p.data)&&void 0!==a?a:[],c),$=function(e){return"FEMALE"===e?b:"MALE"===e?w:""}(F),G=function(e){return"AppType_WEB"===e||"AppType_WEB_DENZEL"===e?P:""}(Z);return(0,s.jsx)(g,{brandName:H,country:V,language:W,ageBucketMatch:M,localeMatch:N,interestMatch:z,genderMatch:$,deviceMatch:G,isAgeMatched:T,isBehaviorTargetingMatched:I,isCustomerListMatched:k,isGeoPostalCodeMatched:E,isGeoRegionMatched:A,isShoppingTargetingRematched:C,isActAlikeMatched:j,isEngagementMatched:R,isExpandTargetingMatched:D,isFromGPSLocation:O,isVisitorMatched:L,onDismiss:t,gender:$,device:G,geoRegion:B,geoPostalCode:U})}var T=i(920085),I=i(149230),k=i(379884),E=i(852964),A=i(814197),C=i(760372),j=i(813401),R=i(680046),D=i(827896),O=i(447948),L=i(55275),M=i(276775);function N(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class z extends n.Component{constructor(e){super(e),N(this,"getRecommendationDescription",(()=>{const{ad_match_reason:e,board:t,feedbackType:i,pinner:n,promoter:o,recommendationReason:r,sourceInterest:a}=this.props;return this.feedbackHelpers.getRecommendationDescription({ad_match_reason:e,board:t,feedbackType:i,makeNavigateLink:this.makeNavigateLink,pinner:n,promoter:o,recommendationReason:r,sourceInterest:a})})),N(this,"getRecommendationDescriptionImage",(()=>{const{board:e,feedbackType:t,pinner:i,recommendationReason:n}=this.props;if("followed"!==t&&"pfyBoard"!==t)return null;let o,r,l;return i&&i.explicitly_followed_by_me?(o=i.image_small_url,r="50%",l=`/${i.username}`):e&&e.image_thumbnail_url&&(o=e.image_thumbnail_url,r="4px",l=n&&n.board&&n.board.url||e.url),o?(0,s.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{borderRadius:r}},flex:"none",marginStart:3,overflow:"hidden",children:(0,s.jsx)(a.iP,{onTap:()=>{var e;return this.props.history.push(null!==(e=l)&&void 0!==e?e:"")},children:(0,s.jsx)(a.zd,{height:40,wash:!0,width:40,children:(0,s.jsx)(a.Ee,{alt:"",fit:"cover",naturalHeight:1,naturalWidth:1,src:o})})})}):null})),N(this,"getUnfollowAction",(()=>{const{board:e,feedbackType:t,pinner:i,sourceInterest:n}=this.props;return this.feedbackHelpers.getUnfollowAction({board:e,feedbackType:t,makeNavigateLink:this.makeNavigateLink,pinner:i,sourceInterest:n})})),N(this,"getUndoText",(e=>"unfollowPinner"===e||"unfollowBoard"===e?this.props.i18n._('Follow again', 'Caption for button to undo a unfollowing of a topic', 'Caption for button to undo a unfollowing of a topic'):"")),N(this,"feedbackHelpers",(0,R.ZP)({i18n:this.props.i18n,interpolateNamedTemplate:p.nk})),N(this,"makeNavigateLink",((e,t,i,n)=>(0,s.jsx)(a.rU,{onClick:this.props.onLinkClick,href:t,display:"inlineBlock",underline:"hover",children:(0,s.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:n?{display:"inline",color:"white",textDecorationColor:"white"}:{display:"inline"}},children:i})},e))),N(this,"reportPinOption",(()=>({action:"reportPin",elementType:974,text:this.props.i18n._('Report Pin', 'Report a pin in the dropdown', 'Report a pin in the dropdown'),description:this.props.i18n._('This goes against Pinterest\'s community guidelines', 'Description for the report pin option', 'Description for the report pin option'),callback:this.props.reportPin,dataTestId:"report-pin-option"}))),N(this,"hidePinOption",(e=>{const{clientTrackingParams:t,feedbackData:i,feedbackType:n,pinId:o,recommendationReason:r}=this.props,a="search"===n?973:982,{action:s,actionOptions:l}=this.feedbackHelpers.getHidePinAction({feedbackData:i,feedbackType:n,pinId:o,recommendationReasonId:(0,E.Z)(r),pinFeedbackType:"pfy"===n?4:10,throughId:r&&(0,R.yl)(r),throughProperties:r&&(0,R.XZ)(r),clientTrackingParams:t(o)}),c=this.props.i18n._('Hide Pin', 'message displayed in pin feedback list', 'message displayed in pin feedback list');return{action:s,actionOptions:l,feedbackText:this.pinHiddenFeedbackText(e),text:c,description:this.props.i18n._('See fewer Pins like this', 'Description for the hide pin option', 'Description for the hide pin option'),elementType:a}})),N(this,"stopRecommendationOption",(()=>{const{clientTrackingParams:e,feedbackData:t,feedbackType:i,pinId:n,recommendationReason:o}=this.props,{board:r}=null!=o?o:{},a=(0,E.Z)(o),s=o&&(0,R.yl)(o),l=o&&(0,R.XZ)(o),c="pfyBoard"===i,{action:d,actionOptions:u}=this.feedbackHelpers.getHidePinAction({feedbackData:t,feedbackType:i,pinId:n,recommendationReasonId:a,pinFeedbackType:c?2:4,throughId:s,throughProperties:l,clientTrackingParams:e(n)}),h=r?this.makeNavigateLink("boardUrl",r.url,r.name,!0):"";return{action:d,actionOptions:u,feedbackText:{subTitle:c&&r?(0,p.nk)(this.props.i18n._('We won\'t show you Pins inspired by your board {{ formattedBoard }} anymore.', 'Primary caption displayed in pin feedback list to unfollow a board', 'Primary caption displayed in pin feedback list to unfollow a board'),{formattedBoard:h}):this.props.i18n._('Got it! We won\'t show you Pins like this in the future.', 'message displayed after stopping recommendations from a pin', 'message displayed after stopping recommendations from a pin')},text:c&&r?(0,p.nk)(this.props.i18n._('Stop seeing Pins inspired by {{ boardName }}', 'Primary caption displayed in pin feedback list to unfollow a board', 'Primary caption displayed in pin feedback list to unfollow a board'),{boardName:r.name}):this.props.i18n._('See fewer Pins like this', 'Feedback option to stop recommendations inspired by this Pin', 'Feedback option to stop recommendations inspired by this Pin'),elementType:284}})),N(this,"unfollowBoardOption",(()=>{var e,t;const{board:i}=this.props,n=i?this.makeNavigateLink("boardUrl",null!==(e=i.url)&&void 0!==e?e:"",null!==(t=i.name)&&void 0!==t?t:"",!0):"",o=(0,p.nk)(this.props.i18n._('Unfollow {{ boardName }}', 'Primary caption displayed in pin feedback list to unfollow a board', 'Primary caption displayed in pin feedback list to unfollow a board'),{boardName:null==i?void 0:i.name}),r=(0,p.nk)(this.props.i18n._('Got it! You unfollowed {{ formattedBoard }} and won\'t see Pins saved to it in the future.', 'Confirmation text after unfollowing a board', 'Confirmation text after unfollowing a board'),{formattedBoard:n});return{action:"unfollowBoard",actionOptions:{board_id:null==i?void 0:i.id},feedbackText:{title:"",subTitle:r},text:o,description:(0,p.nk)(this.props.i18n._('Stop seeing Pins from the board "{{ boardName }}"', 'Secondary caption displayed in pin feedback list to unfollow a board', 'Secondary caption displayed in pin feedback list to unfollow a board'),{boardName:null==i?void 0:i.name}),elementType:10614}})),N(this,"unfollowTopicOption",(()=>{const{sourceInterest:e}=this.props;if(e){const{id:t,name:i="",url_name:n=""}=e,o=`/topics/${n}`,r=this.makeNavigateLink("topicUrl",o,i,!0),a=(0,p.nk)(this.props.i18n._('See fewer Pins from {{ topicName }}', 'Primary caption displayed in pin feedback list to unfollow a topic', 'Primary caption displayed in pin feedback list to unfollow a topic'),{topicName:i}),s=(0,p.nk)(this.props.i18n._('We\'ll show you fewer Pins from {{ formattedTopic }} in the future.', 'Confirmation text after unfollowing a topic', 'Confirmation text after unfollowing a topic'),{formattedTopic:r});return{action:"unfollowTopic",actionOptions:{interest_id:t,interest_list:C.X},feedbackText:{title:"",subTitle:s},text:a,description:(0,p.nk)(this.props.i18n._('Stop seeing Pins from the topic "{{ topicName }}"', 'Secondary caption displayed in pin feedback list to unfollow a topic', 'Secondary caption displayed in pin feedback list to unfollow a topic'),{topicName:e.name}),elementType:976}}return null})),N(this,"unfollowUserOption",(()=>{const{pinner:e}=this.props,{id:t,username:i,full_name:n}=null!=e?e:{},o=`/${i}`,r=e?this.makeNavigateLink("pinnerUrl",o,null!=n?n:"",!0):"";return{action:"unfollowPinner",actionOptions:{user_id:t},feedbackText:{title:"",subTitle:(0,p.nk)(this.props.i18n._('Got it! You unfollowed {{ formattedUser }} and won\'t see Pins they save in the future.', 'Confirmation text after unfollowing a user', 'Confirmation text after unfollowing a user'),{formattedUser:r})},text:(0,p.nk)(this.props.i18n._('Unfollow {{ fullName }}', 'Primary caption displayed in pin feedback list to unfollow a user', 'Primary caption displayed in pin feedback list to unfollow a user'),{fullName:n}),description:this.props.i18n._('Stop seeing all their Pins', 'Secondary caption displayed in pin feedback list to unfollow a user', 'Secondary caption displayed in pin feedback list to unfollow a user'),elementType:10640}})),N(this,"downloadPinOption",(()=>({action:"downloadPin",text:this.props.i18n._('Download image', 'Button to download Pin image', 'Button to download Pin image'),elementType:10836}))),N(this,"_pinFeedbackText",(()=>{const{location:e,feedbackType:t,hideDownload:i,pinner:n}=this.props,o="followed"===this.props.feedbackType,r=e.pathname.includes("following"),a=(o||"topic"===t)&&!r,s=this.hidePinOption(a),l=this.reportPinOption(),c="promoted"!==t&&!i;switch(t){case"followed":const e=r,i=!e&&this.getRecommendationDescription(),o=null!=n&&n.explicitly_followed_by_me?this.unfollowUserOption():this.unfollowBoardOption();return{...i?{description:i}:{},options:[s,...a||e?[o]:[],..."promoted"!==t?[this.downloadPinOption()]:[],l]};case"promoted":const{pinId:d,showAdReasonsModal:u}=this.props,p=[s,{dataTestId:"why-am-i-seeing-this-ad-reasons",action:"showAdReasons",text:this.props.i18n._('Why am I seeing this ad?', 'app.common.react.components.PinFeedbackDropdown.adReasonText', 'Text to promoted pins explanation modal'),callback:()=>{u(d)}},l];return{description:this.getRecommendationDescription(),options:p};case"topic":const h=this.unfollowTopicOption(),m=[s,...a&&h?[h]:[],...c?[this.downloadPinOption()]:[],l];return{description:this.getRecommendationDescription(),options:m};case"pfy":case"pfyBoard":const _=[s,..."pfyBoard"===t?[this.stopRecommendationOption()]:[],...c?[this.downloadPinOption()]:[],l];return{description:this.getRecommendationDescription(),options:_};default:const g=[s,...c?[this.downloadPinOption()]:[],l];return{description:this.getRecommendationDescription(),options:g}}})),N(this,"pinHiddenFeedbackText",(e=>{const{isPromoted:t,promoter:i}=this.props,n=e?null:this.getUnfollowAction();return t&&null!=i&&i.full_name?{title:"",subTitle:(0,p.nk)(this.props.i18n._('{{ promoter }} has paid to have this pin show up where you\'d be more likely to notice it.', 'webapp.app.pinFeedbackDropdown.promotedFeedbackText.subtitle', 'Message displayed after hiding a promoted pin. promoter: the name of the person who promoted the pin.'),{promoter:i.full_name})}:n?{title:"",subTitle:this.getRecommendationDescription(),unfollow:n}:{title:"",subTitle:this.props.i18n._('Got it! We won\'t show you this Pin in the future.', 'message displayed after hiding a pin', 'message displayed after hiding a pin')}}));const t=this._pinFeedbackText();this.state={pinFeedbackConfig:t,showSecondary:!1}}onPinFeedbackActionButtonClick(e,t,i){e.stopPropagation(),t.auxData?this.handleClickLogging(t.elementType,t.auxData):this.handleClickLogging(t.elementType),(0,L.t)(t.action,t.actionOptions,i)}onPinHide(e,t,i,n){const{hidePinFeedback:o,onHide:r,pinId:a,showPinFeedback:s,showPinFeedbackOverlay:l,showPinFeedbackUndo:c,viewParameter:d,viewType:u,logContextEvent:p}=this.props;t&&i&&n?c(a,e,(0,R.EF)(i,n,a,u,d,o,p),this.getUndoText(n)):s(a,e),!i||i.promoted||10!==i.feedback_type&&4!==i.feedback_type?r():(this.setState({showSecondary:!0}),l(a))}handleClickLogging(e,t={}){const{feedbackType:i,viewParameter:n,viewType:o,logContextEvent:r}=this.props;r({event_type:101,view_type:o,view_parameter:n,element:e,component:(0,R.nb)(i),aux_data:{...t}})}renderButtons(){const{hideDownload:e,onDownloadHideFlyout:t,pinId:i,viewType:n,viewParameter:o,logContextEvent:r,isWindowsPwa:l}=this.props,{pinFeedbackConfig:c}=this.state,{options:d}=c,u=[],p=d.length;for(let h=0;h<p;h+=1){const c=d[h],p=L.P.includes(c.action),m=c.callback?c.callback:()=>this.onPinHide(c.feedbackText,p,c.actionOptions,c.action);if("downloadPin"!==c.action){const e=(0,I.Z)({url:c.link||""});let t="";Array.isArray(c.text)?t=c.text.join(""):"string"!=typeof c.text&&"number"!=typeof c.text||(t=c.text.toString()),u.push(c.link?(0,s.jsx)(a.Lt.Link,{href:c.link,isExternal:e,option:{value:c.action||"",label:t},dataTestId:c.dataTestId||""}):(0,s.jsx)(a.Lt.Item,{onSelect:({event:e})=>this.onPinFeedbackActionButtonClick(e,c,m),option:{value:c.action||"",label:t},dataTestId:c.dataTestId||""}))}else if(!e&&!1===l){const{bestPinImgSrc:e,pinTitle:l,pinDescription:c,pinCategory:d}=this.props;u.push((0,s.jsx)(a.Lt.Item,{onSelect:()=>{(0,T.Z)({category:d,filename:l||c,imageDownloadSuccessCallback:()=>{t&&t()},imgSrc:e,pinId:i,viewParameter:o,viewType:n},r)},option:{value:"downloadImage",label:this.props.i18n._('Download image', 'pinRep.pinFeedbackDropdown.downloadImage', 'Label to download the pin image')}}))}}return u}render(){const{pinFeedbackConfig:e,showSecondary:t}=this.state,{anchor:i,onDismiss:o,feedbackData:r,feedbackType:l,hideAdReasonsModal:c,pinId:d,onHide:u,recommendationReason:p,showAdReasons:h,viewParameter:m,viewType:_}=this.props,{description:g}=e,v=this.getRecommendationDescriptionImage();return(0,s.jsxs)(n.Fragment,{children:[t?(0,s.jsx)(k.Z,{anchor:i,feedbackData:r,feedbackType:l,pinId:d,onDismiss:o,onHide:u,recommendationReason:p,viewParameter:m,viewType:_}):(0,s.jsx)(a.Lt,{anchor:i,id:"pin-action-dropdown",idealDirection:"down",onDismiss:o,zIndex:A.lI,headerContent:g&&(0,s.jsxs)(a.kC,{alignItems:"center",children:[(0,s.jsx)(a.xu,{"data-pin-recommendation-reason":null==p?void 0:p.reason,maxHeight:56,overflow:"hidden",children:(0,s.jsx)(a.xv,{color:"default",overflow:"normal",size:"200",children:g})}),v]}),children:this.renderButtons()}),h&&(0,s.jsx)(S,{onDismiss:()=>c(d),pinId:d})]})}}function F(e){const{logContextEvent:t}=(0,h.v)(),i=(0,D.Z)(),n=(0,d.ZP)(),r=(0,y.S6)()(e.pinId),{ad_targeting_attribution:a,show_ad_reasons:l=!1}=null!=r?r:{},c=(0,j.kf)(),u=(0,o.useDispatch)();return(0,s.jsx)(z,{...e,clientTrackingParams:i,showAdReasons:l,adTargetingAttribution:a,history:(0,M.useHistory)(),i18n:n,isWindowsPwa:c,location:(0,M.useLocation)(),logContextEvent:t,hidePinFeedback:e=>u((0,O.I1)(e)),showPinFeedback:(e,t)=>u((0,O.q1)(e,t)),showPinFeedbackOverlay:e=>u((0,O.Ib)(e)),showPinFeedbackUndo:(e,t,i,n)=>u((0,O.NA)({id:e,text:t,undoAction:i,undoText:n})),showAdReasonsModal:e=>u((0,O.b9)(e)),hideAdReasonsModal:e=>u((0,O.yj)(e))})}},361259:(e,t,i)=>{i.d(t,{$:()=>d,r:()=>u});var n=i(667294),o=i(829407),r=i(497529),a=i(773285),s=i(425288),l=i(785893);const{Provider:c,useHook:d}=(0,s.Z)("PinRep");function u({children:e}){const[t,i]=(0,n.useState)(!0),[s,d]=(0,n.useState)(!1),u=(0,r.Z)(1000069),{checkExperiment:p}=(0,a.F)();(0,o.Z)((()=>{u.triggerExperimentsForPlacement(1000069);const e=p("web_simplify_pin_grid",{dangerouslySkipActivation:!0}).group.includes("enabled");(async()=>{var t,n,o,r;const a=e?await u.fetchAllExperiences():{};a&&a.payload&&500417===(null===(t=a.payload.experiences)||void 0===t||null===(n=t[1000069])||void 0===n?void 0:n.experience_id)&&null!==(o=a.payload.experiences)&&void 0!==o&&null!==(r=o[1000069])&&void 0!==r&&r.display_data.hide_footer||i(!1),d(!0)})()}));const h=(0,n.useMemo)((()=>({hasSimplifiedPinGridExpLoaded:s,hidePinRepFooter:t})),[s,t]);return(0,l.jsx)(c,{value:h,children:e})}},441707:(e,t,i)=>{i.d(t,{Z:()=>f});var n=i(294184),o=i.n(n),r=i(876371),a=i(832654);const s={debugPinImpressions:999,max:9999,pinActionWrapper:101,saved:102,storyPinImage:-1};var l=i(773285),c=i(883119),d=i(785893);function u({alt:e,dominantColor:t,naturalHeight:i,naturalWidth:n,onError:o,onLoad:r,url:a}){return(0,d.jsx)(c.xu,{position:"relative",dangerouslySetInlineStyle:{__style:{paddingTop:"177.77777777777777%"}},children:(0,d.jsx)(c.xu,{position:"absolute",top:!0,left:!0,width:"100%",height:"100%",dangerouslySetInlineStyle:{__style:{zIndex:s.storyPinImage}},children:(0,d.jsx)(c.Ee,{alt:e,color:t||"transparent",naturalHeight:null!=i?i:1,naturalWidth:null!=n?n:1,onError:o,onLoad:r,src:a,fit:"cover"})})})}function p({alt:e,dominantColor:t,naturalHeight:i,naturalWidth:n,onError:o,onLoad:r,url:a}){return(0,d.jsx)(c.xu,{width:"100%",dangerouslySetInlineStyle:{__style:{zIndex:s.storyPinImage}},children:(0,d.jsx)(c.Ee,{alt:e,color:t||"transparent",naturalHeight:null!=i?i:1,naturalWidth:null!=n?n:1,onError:o,onLoad:r,src:a})})}function h({alt:e,onError:t=(()=>{}),onLoad:i=(()=>{}),pin:n}){const{checkExperiment:o}=(0,l.F)(),{anyEnabled:r}=o("web_idea_pin_flexible_aspect_ratio_display"),{dominant_color:a,images:s={}}=n,{height:c,width:h,url:m}=function(e){var t;return"number"==typeof(null===(t=e["474x"])||void 0===t?void 0:t.width)&&"number"==typeof e["474x"].height&&e["474x"].width>e["474x"].height?e["736x"]:e["474x"]}(s)||{},_=r?p:u;return(0,d.jsx)(_,{alt:e,dominantColor:a,naturalHeight:c,naturalWidth:h,onError:t,onLoad:i,url:m||""})}var m=i(898781),_=i(349700),g=i(310227),v=i(243943);const f=({cropHeight:e,cropWidth:t,fallbackColor:i,highResOnly:n,imageFit:s,lowResOnly:l,mediumResOnly:u,onError:p,onLoad:f,pin:y,saved:x=!1,animateGif:b})=>{var w,P,S;const T=(0,m.ZP)(),I=(0,v.Xx)(),{carousel_data:k,description:E="",dominant_color:A,grid_title:C,id:j,images:R,title:D}=y,O=(0,_.nk)(T._('This contains an image of: {{ pinTitle }}', 'web.altText', 'Alt text input for PinImage by a human'),{pinTitle:D||C}).join(""),L=(0,a.Z)(y,T)||E.trim().length>0&&E||O;if(k)return(0,d.jsx)(r.Z,{onError:p,onLoad:f,highResOnly:n,lowResOnly:l,pinId:j});let M,N="",z=0,F=0;if(R){var Z,B,U;let e=R["236x"];var H,V,W,$,G;if(n?e=R["736x"]||R.orig||R["474x"]||R["236x"]:u&&(e=R["474x"]||R.orig||R["236x"]),z=null===(Z=e)||void 0===Z?void 0:Z.height,F=null===(B=e)||void 0===B?void 0:B.width,N=null===(U=e)||void 0===U?void 0:U.url,l||u||n)M=null!==(H=e)&&void 0!==H&&H.url?`${e.url} 1x`:"";else M=[(null===(V=R["236x"])||void 0===V?void 0:V.url)&&`${R["236x"].url} 1x`,(null===(W=R["474x"])||void 0===W?void 0:W.url)&&`${R["474x"].url} 2x`,(null===($=R["736x"])||void 0===$?void 0:$.url)&&`${R["736x"].url} 3x`,(null===(G=R.orig)||void 0===G?void 0:G.url)&&`${R.orig.url} 4x`].filter(Boolean).join(", ")}if(b){const e=Math.max(y.embed&&y.embed.width||0,236),t=Math.max(y.embed&&y.embed.height||0,236),i=y.embed?y.embed.src:"";i&&(z=t,F=e,N=i,M="")}return null!=I&&I.image&&(z=I.image.height,F=I.image.width,N=I.image.url),(0,d.jsx)(c.kC,{alignItems:"center",justifyContent:"start",minHeight:g.Ml,children:(0,d.jsx)(c.xu,{flex:"grow",children:(0,d.jsx)("div",{className:o()({savedGradient:x}),children:y.story_pin_data_id?(0,d.jsx)(h,{alt:L,pin:y,onError:p,onLoad:f}):(0,d.jsx)(c.xu,{height:t?e:void 0,width:t||void 0,"data-test-id":"non-story-pin-image",children:(0,d.jsx)(c.Ee,{alt:L,color:"dominant"===i?A:i,fit:s,naturalHeight:null!==(w=z)&&void 0!==w?w:1,naturalWidth:null!==(P=F)&&void 0!==P?P:1,onError:p,onLoad:f,src:null!==(S=N)&&void 0!==S?S:"",srcSet:M})})})})})}},118334:(e,t,i)=>{i.d(t,{Z:()=>S});var n=i(667294),o=i(964082),r=i(983722),a=i(357787),s=i(36971),l=i(463045),c=i(965900),d=i(108529),u=i(441707),p=i(350445),h=i(898781),m=i(46584),_=i(926749),g=i(883119),v=i(623568),f=i(785893);const y=new Set(["ConversationView","TodayTabFeed"]);function x({inAdsDesktopVideoExperiment:e,isAutoplay:t,cropHeight:i,currentTime:o,lowResOnly:r,highResOnly:a,onLoad:s,onError:l,saved:x,onTimeChange:b,isExperimentalPinRep:w,pin:P,surface:S,playing:T,rootMargin:I,viewType:k,viewParameter:E,onVisibilityChanged:A,trackFullVisible:C,inVisibilityChangedHookExperiment:j,imageHeightModifier:R,cropWidth:D}){var O,L;const M=(0,h.ZP)(),[N,z]=(0,n.useState)(!1),[F,Z]=(0,n.useState)(!0),B=(0,v.jL)(P),U=B&&!P.is_eligible_for_web_closeup,H=w&&B&&P.is_eligible_for_web_closeup&&!y.has(S),{setCurrentVideo:V}=(0,c.I)(),W=U||!w||!B,$=(0,m.Z)({onVisibilityChanged:A,inAdsDesktopVideoExperiment:e,trackFullVisible:C,rootMargin:I});let G=!T;e&&(G=F,t&&T&&F&&Z(!1));const{url:K}=(null===(O=P.images)||void 0===O?void 0:O["236x"])||{},{id:q,is_promoted:Y}=P,X=(0,n.useCallback)((({event:e})=>{e.preventDefault(),e.stopPropagation(),V({pinId:q,isPromoted:Boolean(Y),currentTime:0}),z(!1)}),[Y,q,V]),J=(0,n.useCallback)((()=>{Y&&z(H)}),[H,Y]);if(!P.videos||null===(L=P.videos.video_list)||void 0===L||!L.V_HLSV4)return null;const{height:Q,thumbnail:ee,width:te,url:ie}=P.videos.video_list.V_HLSV4||{},ne=P.videos.id,oe=[{type:"video/m3u8",src:ie}];let re,ae=(null!=te?te:1)/(null!=Q?Q:1);const se=e&&S&&(0,d.Z)(S);if(se&&(ae=1,re="transparent",R&&(ae-=R-1)),N&&B)return(0,f.jsx)(g.xu,{ref:j?$:null,children:(0,f.jsx)(p.Z,{backgroundImage:null!=K?K:"",naturalHeight:null!=Q?Q:1,naturalWidth:null!=te?te:1,pin:P,onRestartVideo:X})});if(G){let e={highResOnly:a,lowResOnly:r,onError:l,onLoad:s,pin:P,saved:x};return se&&(e={...e,cropHeight:i,cropWidth:D,imageFit:"contain"}),(0,f.jsx)(g.xu,{ref:j?$:null,children:(0,f.jsx)(u.Z,{...e})})}return(0,f.jsx)(g.xu,{ref:j?$:null,children:(0,f.jsx)(_.ZP,{isAutoPlay:!!t,cropHeight:i,rootMargin:I,surface:S,inAdsDesktopVideoExperiment:e,contextLogData:{viewParameter:E,component:0,objectId:P.id,video_id:ne,view:k},accessibilityMaximizeLabel:M._('Maximize', 'Maximize button on video', 'Maximize button on video'),accessibilityMinimizeLabel:M._('Minimize', 'Minimize button on video', 'Minimize button on video'),accessibilityMuteLabel:M._('Mute', 'Mute button on video', 'Mute button on video'),accessibilityPauseLabel:M._('Pause', 'Pause button on video', 'Pause button on video'),accessibilityPlayLabel:M._('Play', 'Play button on video', 'Play button on video'),accessibilityProgressBarLabel:M._('Progress bar', 'PinVideo.accessibilityProgressBarLabel', 'Video progress bar accessibility label'),accessibilityUnmuteLabel:M._('Unmute', 'Unmute button on video', 'Unmute button on video'),aspectRatio:ae,backgroundColor:re,captions:"",hlsConfig:{capLevelToPlayerSize:!0,startPosition:o||-1},loop:W,onTimeChange:b,playing:T,onPlay:()=>{},onPlayError:()=>{},poster:K||ee,src:null!=oe?oe:[],videoStartTime:o,volume:0,onEnded:J})})}function b(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const w=(0,a.Z)(x);class P extends n.Component{constructor(...e){super(...e),b(this,"calculateCurrentVideoTime",(()=>{const{currentTimeFromPinRep:e,pin:t,videosAutoplaying:i}=this.props,{id:n}=t,o=(0,s.Z)(n,i);return this.currentVideoCurrentTime||o||e})),b(this,"handleVisibilityChanged",(e=>{const{currentTimeFromPinRep:t,pin:i,setCurrentVideo:n,pauseAutoplay:a,videosAutoplaying:s}=this.props,{id:c,is_promoted:d}=i,u=(0,l.Z)(c,s),p=(0,o.Z)(c,s);if(e){if(d)n({pinId:c,isPromoted:d,currentTime:this.calculateCurrentVideoTime()});else if(p){const e=(0,r.Z)(),{anyEnabled:t}=(null==e?void 0:e.experimentsClient.checkExperiment("hfp_web_video_autoplay_in_grid"))||{};n({pinId:c,isPromoted:Boolean(d),currentTime:this.calculateCurrentVideoTime(),inVideoGridAutoplayExp:t})}}else!e&&u&&a({pinId:c,isPromoted:Boolean(d),currentTime:t||this.currentVideoCurrentTime})})),b(this,"handleVideoTimeChange",(e=>{const{pin:t,onTimeChange:i,videosAutoplaying:n}=this.props,{id:o}=t;(0,l.Z)(o,n)&&(this.currentVideoCurrentTime=e.time),i&&i(e)}))}componentDidMount(){this.props.onLoad&&this.props.onLoad()}componentDidUpdate(e){const{appInFocus:t}=e,{appInFocus:i,currentTimeFromPinRep:n,pauseAutoplay:o,pin:r,setCurrentVideo:a,videosAutoplaying:s}=this.props,{id:c,is_promoted:d}=r,u=(0,l.Z)(c,s);i!==t&&!i&&u?(this.pausedDueToBrowserOutOfFocus=!0,o({pinId:c,isPromoted:Boolean(d),currentTime:n||this.currentVideoCurrentTime})):this.pausedDueToBrowserOutOfFocus&&i&&(this.pausedDueToBrowserOutOfFocus=!1,a({pinId:c,isPromoted:Boolean(d),currentTime:this.calculateCurrentVideoTime()}))}componentWillUnmount(){const{currentTimeFromPinRep:e,pauseAutoplay:t,pin:i,videosAutoplaying:n}=this.props,{id:o,is_promoted:r}=i;(0,l.Z)(o,n)&&t({pinId:o,isPromoted:Boolean(r),currentTime:e||this.currentVideoCurrentTime})}render(){const{cropHeight:e,isAutoplay:t,pin:i,surface:n,videosAutoplaying:o,viewParameter:r,viewType:a,highResOnly:c,lowResOnly:d,onError:u,onLoad:p,saved:h,inAdsDesktopVideoExperiment:m,isExperimentalPinRep:_,rootMargin:g,cropWidth:v,imageHeightModifier:y}=this.props,{id:x}=i,b=(0,s.Z)(x,o),P=(0,l.Z)(x,o)&&t;return(0,f.jsx)(w,{cropHeight:e,rootMargin:g,currentTime:b,inAdsDesktopVideoExperiment:m,isAutoplay:t,viewParameter:r,viewType:a,onTimeChange:this.handleVideoTimeChange,onVisibilityChanged:this.handleVisibilityChanged,pin:i,surface:n,playing:P,trackFullVisible:!1,highResOnly:c,lowResOnly:d,onError:u,onLoad:p,saved:h,isExperimentalPinRep:_,cropWidth:v,imageHeightModifier:y})}}function S(e){const{appUI:{appInFocus:t,isAutoplay:i,videosAutoplaying:n},pauseAutoplay:o,setCurrentVideo:r}=(0,c.I)();return(0,f.jsx)(P,{...e,appInFocus:t,isAutoplay:i,pauseAutoplay:o,setCurrentVideo:r,videosAutoplaying:n})}},745868:(e,t,i)=>{i.d(t,{Z:()=>Hi});var n=i(667294),o=i(702664),r=i(41233),a=i(605028),s=i(333155);function l({isGroupBoard:e,pin:t,surface:i}){const{carousel_data:n,grid_title:o,rich_summary:r,title:l}=t,{isOwnPin:c,isPromoted:d}=(0,a.Z)(t);if(n){const{carousel_slots:e=[],index:t=0}=n;if(e[t]&&e[t].title)return e[t].title.trim()}if(d){if(s.ZF.includes(i))return o||"";if(c&&!e&&!n&&"UserProfilePinGrid"!==i)return"";const t=r&&"mobile application"!==r.type_name&&r.display_name;return l||t||o||""}return o||""}var c=i(623568);const d=["EngagementDetails","OtherProfilePinGrid","UserProfilePinGrid"];var u=i(35495);function p(e,t){const{isProduct:i}=(0,a.Z)(e);return(i||"ShoppingGridShippedMetadataWithVisitButton"===t&&(0,u.bA)(e))&&(0,u.QY)(e)||""}var h=i(807592),m=i(4294),_=i(18857);const g=["CloseupRelatedProducts","ConversationView","CreatorProfileStoryPinGrid","CreatorProfileActivityPinGrid","ProductPinsFeed","UserProfilePinGrid"];function v({attributionOption:e,board:t,contentType:i,experimentsClient:n,feedbackData:o,feedbackType:r,hasCarouselData:s,isGroupBoard:c,isORBACProfileManager:d,isOwnBoard:u,pin:v,showImageOnly:f,showNativeReactions:y,showPromotedShoppingPrice:x,surface:b,viewer:w,variantData:P}){var S;const{isPromoted:T,isSponsored:I}=(0,a.Z)(v),{pin_note:k}=v,E=function({attributionOption:e,feedbackType:t,isGroupBoard:i,pin:n,showImageOnly:o,surface:r}){const{is_downstream_promotion:a,native_creator:s,promoter:l,sponsorship:c,story_pin_data_id:d}=n;if("promoted"===t||l&&!a||c)return"default";if("ConversationView"!==r&&g.includes(r))return"none";if(i)return"none";let u="default";return"SearchItem"===r&&d?u:(e&&("image-only"===e?u="image-only-credit":"hide"===e&&(u="none")),"followed"!==t||o?["IdeasHubSeasonalRow","TodayArticleFeed","ShoppingPackageItem"].includes(r)&&"hide"===e?u:"TodayArticleFeed"===r&&"show"===e?"show-for-claimed-content":s?"default":"none":u)}({attributionOption:e,feedbackType:r,isGroupBoard:c,pin:v,showImageOnly:f,surface:b}),A=null!=P&&P.title?P.title:l({isGroupBoard:c,pin:v,surface:b}),C=f?"":A,j=!["ShoppingPackageItem","ShoppingSquareGridDomain","ShoppingSquareGridStorefrontDomain","ShoppingSquareGridStorefront"].includes(b)&&!T&&!f&&Boolean(p(v,b)),R=["ShoppingGridShippedMetadataWithVisitButton"].includes(b),D="BaseBoardPinGrid"===b&&k?null===(S=k.text)||void 0===S?void 0:S.trim():null,O=T,L="shopping"===i;"AuthHomefeed"!==b||T||(y=!1);let M,N,z,F,Z=2;if(T?Z=3:(j||"none"!==E)&&(Z=L?2:1),L||x){var B,U;const e=null===(B=v.rich_summary)||void 0===B||null===(U=B.products)||void 0===U?void 0:U[0],{offer_summary:t}=e||{};M=t?t.standard_price:void 0,N=t?(0,h.Z)(t):void 0}if(P){const{offerSummary:e}=P;M=e?e.standard_price:void 0,N=e?e.price||e.max_price:void 0}if(L&&!T){var H,V,W;const{rating_count:e,rating_value:t,review_count:i}=(null===(H=v.rich_summary)||void 0===H?void 0:H.aggregate_rating)||{};(e||i)&&parseFloat(t)&&(z={count:e||i,rating:t}),F=null===(V=v.rich_metadata)||void 0===V||null===(W=V.products)||void 0===W?void 0:W[0].shipping_info}const $=(0,_.rh)(v,w,n),G="CreatorProfileStoryPinGrid"===b||"CreatorProfileActivityPinGrid"===b,K=!G,q=c&&!I;return{attributionType:E,board:t,contentType:i,feedbackData:o,feedbackType:r,pinNoteText:D,pinTitle:C,productCurrentPrice:N,productOriginalPrice:M,productRating:z,productShipping:F,showCarouselEllipsis:s,showFavoriteButton:!d&&("BaseBoardPinGrid"===b&&u||Boolean((null==t?void 0:t.is_collaborative)&&(0,m.Z)({board:t,viewer:w})))&&!G,showGroupBoardAvatar:q,showNativeReactions:y,showOverflowMenu:O,showPinStats:$,showSource:j,showTextContent:K,showVisitSiteButton:R,showAttribution:!0,titleLines:Z}}var f=i(27255),y=i(121630),x=i(704177),b=i(841478),w=i(53325);const P=["ShoppingCatalogsProductsMetadata"];const S=["BoardCreateUpsell","BoardCoverSelectablePin","BoardNoteSelectablePin","BoardNotePin","BulkEditMode","EngagementDetails","SectionSuggestedPins","SelectableBoardlessPin"],T=["BoardCreateUpsell","BoardCoverSelectablePin","BoardNoteSelectablePin","BoardNotePin","BulkEditMode","ConversationView","EngagementDetails","SectionSuggestedPins","SelectableBoardlessPin","ShoppingCatalogsProductsMetadata"];var I=i(221263),k=i(319915);function E(e={},t=[]){return Object.keys(e).reduce(((i,n)=>t.includes(n)?i:{...i,[n]:e[n]}),{})}var A=i(675725),C=i(687551),j=i(954571);var R=i(976071),D=i(411938),O=i(108529),L=i(463045),M=i(947599),N=i(898781),z=i(717615),F=i(436395),Z=i(19121),B=i(883119),U=i(407043),H=i(785893);const V=["CreatorProfileStoryPinGrid","CreatorProfileActivityPinGrid"],W={component:210,view_type:4,view_parameter:3106},$={view_type:5,view_parameter:3069},G={component:13668,view_type:4,view_parameter:3106};function K({pinId:e,surface:t}){const{logContextEvent:i}=(0,U.v)(),n=(0,N.ZP)(),o=()=>{const e=V.includes(t)?G:"BaseBoardPinGrid"===t?$:"UserProfilePinGrid"===t?W:{};i({event_type:101,element:10573,...e})},r=n._('See more stats', 'pinRep.actionBar.seeStatsButton', 'Button that will re-direct user to detailed stats page');return(0,H.jsx)(B.xu,{"data-test-id":"see-stats-button",paddingX:3,paddingY:3,children:V.includes(t)?(0,H.jsx)(B.zx,{role:"link",accessibilityLabel:n._('Go to pin stats details page', 'pinRep.actionBar.seeStatsButton', 'This button will take the user to their detailed pin stats page for the pin'),color:"semiTransparentWhite",fullWidth:!0,href:`/pin/${e}/analytics`,onClick:o,size:"sm",text:(a=r,a.length>14?`${a.substring(0,12).trim()}...`:a)}):(0,H.jsx)(B.hU,{role:"link",accessibilityLabel:n._('Go to pin stats details page', 'pinRep.actionBar.seeStatsButton', 'This icon button will take the user to their detailed pin stats page for the pin'),bgColor:"white",href:`/pin/${e}/analytics`,icon:"ads-stats",iconColor:"darkGray",onClick:o,size:"sm"})});var a}var q=i(681227),Y=i(697247),X=i(576440),J=i(965900),Q=i(773285),ee=i(578722),te=i(130460),ie=i(350118),ne=i(329734),oe=i(243943),re=i(99137),ae=i(698330),se=i(241244),le=i(95551),ce=i(699825),de=i(768559),ue=i(89254);function pe(e,t){const{carousel_data:i,domain:n,ad_destination_url:o}=e;let r=n||"";return o&&(r=(0,ue.Z)(o).hostname||""),i&&i.id&&(r=function(e,t){const i=t||e&&e.index||0,n=e&&e.carousel_slots||[],o=n[i]&&n[i].link||"";return o&&(0,ue.Z)(o).hostname||""}(i,t)),r.replace("www.","")}var he=i(287072),me=i(199387),_e=i(276775);const ge={container:{backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:18,height:"32px",maxWidth:"132px"},containerHovered:{backgroundColor:"rgba(255, 255, 255, 1.0)"},containerTruncated:{maxWidth:"87px"},text:{color:"#333333"}};function ve({pin:e,sourceLinkStyle:t,surface:i,url:o}){var r,a;const s=(0,N.ZP)(),[l,c]=(0,n.useState)(!1),{id:d}=e,p=pe(e),h=(0,_e.useLocation)(),m=(0,u.Kl)(e)||{},{slotIndex:_}=(0,X.E)(),g=(0,de.Z)({boardUrl:null===(r=e.board)||void 0===r?void 0:r.url,callToCreateSourcePinId:e.call_to_create_source_pin_id,location:h,pinId:e.id,pinnerUserName:null===(a=e.pinner)||void 0===a?void 0:a.username,storyPinDataId:e.story_pin_data_id,trackingParams:e.tracking_params,trackingParamsMap:e.tracking_params_map}),v=(0,me.Z)(12,{object_id_str:d,clientTrackingParams:g,aux_data:{grid_index:_,...(0,u.Kl)(e)||{}}}),f=(0,me.Z)(101,{element:162,object_id_str:d,clientTrackingParams:g,aux_data:{...(0,u.Kl)(e)||{}}}),y=(0,me.Z)(8948,{object_id_str:d,clientTrackingParams:g,aux_data:{click_type:"clickthrough",closeup_navigation_type:"click",grid_index:_,...(0,u.Kl)(e)||{}}}),x=()=>{v(),f(),y()},b=(0,he.Z)({href:o,target:"blank",externalData:{auxData:m,pin:e,surface:i}});return"icon-only"===t?(0,H.jsx)(B.hU,{accessibilityLabel:s._('link', 'Website url link', 'Website url link'),bgColor:"white",href:o,icon:"arrow-up-right",iconColor:"darkGray",onClick:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),x(),b({event:e})},role:"link",rel:"nofollow",size:"sm"}):(0,H.jsx)(B.xu,{dangerouslySetInlineStyle:{__style:{...ge.container,...l?ge.containerHovered:Object.freeze({}),..."truncated-text"===t?ge.containerTruncated:Object.freeze({})}},"data-test-id":"pinrep-source-link",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),position:"relative",children:(0,H.jsx)(ce.Z,{hovered:l,pin:e,slotIndex:_,viewType:1,children:(0,H.jsx)(B.iP,{fullWidth:!1,href:o,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),x(),b({event:e})},rel:"nofollow",role:"link",rounding:4,children:(0,H.jsxs)(B.xu,{alignItems:"baseline",dangerouslySetInlineStyle:{__style:ge.text},display:"flex",justifyContent:"between",children:[(0,H.jsx)(B.xu,{display:"flex",flex:"none",marginTop:3,marginBottom:3,marginStart:3,children:(0,H.jsx)(B.JO,{accessibilityLabel:s._('link', 'Website url link', 'Website url link'),color:"default",icon:"arrow-up-right",size:9})}),(0,H.jsx)(B.xu,{alignItems:"center",display:"flex",height:18,marginStart:2,marginEnd:3,overflow:"hidden",children:(0,H.jsx)(B.xv,{color:"default",size:"200",weight:"bold",lineClamp:1,children:p})})]})})})})}var fe=i(538232),ye=i(50286),xe=i(780280);const be=(0,n.lazy)((()=>Promise.all([i.e(97270),i.e(78120),i.e(66286),i.e(48035)]).then(i.bind(i,43819)))),we=(0,n.lazy)((()=>Promise.resolve().then(i.bind(i,955362)))),Pe=(0,n.lazy)((()=>i.e(5035).then(i.bind(i,351326))));const Se=({pinId:e})=>{const{onSendButtonClick:t}=(0,fe.R)(),i=(0,me.Z)(101,{element:72,object_id_str:e});return(0,H.jsx)(le.Z,{onSendButtonClick:t,trackShareTap:i,size:"sm",bgColor:"white"})},Te=(0,n.memo)((function({actionBarEditBeforeShare:e,feedbackData:t,feedbackType:i,layout:o,onToggleFlyout:r,pin:s,pinTitle:l,setForcePrimary:c,showEditButton:d,showOverflowMenu:u,showShareButton:p,showSourceLinkButton:h,sourceLinkStyle:m,surface:_}){var g,v;const f=(0,N.ZP)(),y=(0,B.JZ)(),{isRTL:x}=(0,xe.B)(),b=!(0,ye.HG)(),{viewParameter:w,viewType:P}=(0,X.E)(),{carousel_data:S,id:T,savedInfo:I,tracked_link:E,link:A,ad_destination_url:C}=s,j=null!==(g=null!==(v=null!=C?C:E)&&void 0!==v?v:A)&&void 0!==g?g:"",{isLeadPin:R}=(0,a.Z)(s),[D,O]=(0,n.useState)(d),[L,z]=(0,n.useState)(d),[F,Z]=(0,n.useState)(d),U={...x?{marginLeft:d&&u?-44:0}:{marginRight:d&&u?-44:0},transition:x?"margin-left .2s ease-in-out":"margin-right .2s ease-in-out"},V={opacity:F?1:0,transition:"opacity .2s ease-in-out",pointerEvents:"auto"},W={...x?{marginRight:L?4:0}:{marginLeft:L?4:0},transition:x?"margin-right .2s ease-in-out":"margin-left .2s ease-in-out"};(0,n.useEffect)((()=>{let e;return d&&u?(z(!0),e=setTimeout((()=>{requestAnimationFrame((()=>{O(!0),requestAnimationFrame((()=>{Z(!0)}))}))}),800)):(z(d),O(d),requestAnimationFrame((()=>{Z(d)}))),()=>{clearTimeout(e)}}),[d,u]);let $=null;h&&($=(0,H.jsx)(se.Z,{children:R?(0,H.jsx)(B.zx,{role:"button",accessibilityLabel:f._('Link for closeup view and sign up', '[m10n] pinRep.actionBar.signup', 'Content for sign up link'),size:"sm",text:f._('Sign up', '[m10n] pinRep.actionBar.signup', 'Content for sign up link')}):(0,H.jsx)(ve,{pin:s,sourceLinkStyle:m,surface:_,url:j})}));const G=p&&(0,H.jsx)(k.Z,{name:"SafeSuspense_PinRep_SendShareLink",children:(0,H.jsx)(M.Z,{children:(0,H.jsx)(B.xu,{"data-test-id":"send-share-link",children:(0,H.jsx)(se.Z,{children:b?(0,H.jsx)(Se,{pinId:s.id}):(0,H.jsx)(Pe,{pin:s,setForcePrimary:c})})})})}),K=Boolean(null==I?void 0:I.localPinId)?null==I?void 0:I.localPinId:T,q=D&&(0,H.jsx)(k.Z,{name:"SafeSuspense_PinRep_EditButton",children:(0,H.jsx)(M.Z,{children:(0,H.jsx)(B.xu,{"data-test-id":"edit-button",dangerouslySetInlineStyle:y?void 0:{__style:V},children:(0,H.jsx)(se.Z,{children:(0,H.jsx)(be,{carouselSlotCurrentIndex:S&&S.index,component:0,onToggleModal:r,pinId:K,style:{size:"sm"},view:P,viewParameter:w,useLegoStyles:!0})})})})});return"equally-spaced"===o?(0,H.jsxs)(B.xu,{display:"flex",justifyContent:"between",alignItems:"center",padding:3,children:[(0,H.jsx)(B.xu,{dangerouslySetInlineStyle:{__style:{flexBasis:32}},children:$}),e?q:G,e?G:q]}):(0,H.jsxs)(B.xu,{alignItems:"center",display:"flex",padding:3,children:[(0,H.jsx)(B.xu,{flex:"shrink",children:$}),(0,H.jsx)(B.xu,{alignItems:"center",display:"flex",flex:"none",marginStart:"auto",dangerouslySetInlineStyle:y?void 0:{__style:U},children:(0,H.jsxs)(B.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"end",children:[e?q:G,e?G:q,u&&(0,H.jsx)(k.Z,{name:"SafeSuspense_PinRep_OverflowMenu",children:(0,H.jsx)(M.Z,{children:(0,H.jsx)(B.xu,{"data-test-id":"overflow-menu-button",dangerouslySetInlineStyle:y?void 0:{__style:W},children:(0,H.jsx)(se.Z,{children:(0,H.jsx)(we,{feedbackData:t,feedbackType:i,pin:s,pinTitle:l,setForcePrimary:c})})})})})]})})]})}));var Ie=i(834911),ke=i(447948);function Ee({direction:e,swipeHandler:t}){const i=(0,N.ZP)(),n={left:i._('View Previous', 'Button to advance carousel to the previous image', 'Button to advance carousel to the previous image'),right:i._('View Next', 'Button to advance carousel to the next image', 'Button to advance carousel to the next image')};return(0,H.jsx)(B.xu,{position:"absolute",bottom:!0,top:!0,left:"left"===e,right:"right"===e,children:(0,H.jsx)(B.iP,{fullHeight:!0,fullWidth:!0,onTap:t,children:(0,H.jsx)(B.xu,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",padding:2,width:"100%","data-test-id":`carousel-slider-${e}`,children:(0,H.jsx)(B.JO,{accessibilityLabel:n[e],color:"inverse",icon:{left:"arrow-back",right:"arrow-forward"}[e]})})})})}const Ae=(0,o.connect)(null,(function(e){return{changeCarouselSlotIndex:(t,i)=>e((0,ke.yR)(t,i))}}))((({pin:e,changeCarouselSlotIndex:t})=>{const{logContextEvent:i}=(0,U.v)(),{componentType:n,viewParameter:o,viewType:r}=(0,X.E)(),a=(0,Ie.Z)({carouselData:e.carousel_data,images:e.images,richMetadata:e.rich_metadata,richSummary:e.rich_summary});if(!a)return null;const{id:s=""}=e,{carousel_slots:l=[],index:c=0,id:d}=a;function p(a){return()=>{const p="left"===a?c-1:c+1;t(s,p),((t=0,a)=>{i({event_type:108,object_id_str:s,component:n,view_type:r,view_parameter:o,event_data:{pinCarouselSlotEventData:{carouselSlotId:l[t]&&Number(l[t].id),carouselDataId:Number(d),carouselSlotIndex:t,toCarouselSlotIndex:a}},aux_data:{...(0,u.Kl)(e)||{}}})})(c,p)}}return(0,H.jsxs)(B.xu,{height:"100%",position:"relative",width:"100%",children:[c>0&&(0,H.jsx)(se.Z,{children:(0,H.jsx)(Ee,{direction:"left",swipeHandler:p("left")})}),c<l.length-1&&(0,H.jsx)(se.Z,{children:(0,H.jsx)(Ee,{direction:"right",swipeHandler:p("right")})})]})}));var Ce=i(337986),je=i(116303);function Re({accessibilityLabel:e,attributionNameLink:t,avatarUrl:i,fullWidth:n=!0,name:o="",onClick:r,outline:a=!1,size:s=32,shouldRenderAdsOnlyProfileClick:l=!1}){const c=(0,H.jsx)(B.xu,{"data-test-id":"attribution-avatar",height:s,width:s,children:(0,H.jsx)(je.Z,{name:o,src:i,accessibilityLabel:"",outline:a})});return t?(0,H.jsx)(B.iP,{fullWidth:n,role:"link",href:t,rel:l?"nofollow":void 0,target:l?"blank":void 0,onTap:r,accessibilityLabel:e,children:c}):c}function De({isHover:e,attributionNameLink:t,name:i,onClick:n,regularWeight:o}){const{checkExperiment:r}=(0,Q.F)(),a=!t&&r("web_disable_ads_blocker").anyEnabled;return(0,H.jsx)(B.xu,{children:(0,H.jsx)(B.xv,{underline:e,size:"200",lineClamp:1,weight:o?"normal":"bold",children:t?(0,H.jsx)(B.rU,{onClick:n,href:t,children:i}):a?(0,H.jsx)("span",{children:i}):i})})}function Oe({isHover:e,link:t,onClick:i,title:n,weight:o}){return n?(0,H.jsx)(B.xv,{inline:!0,underline:e,size:"200",weight:o,children:t?(0,H.jsx)(B.rU,{onClick:i,href:t,children:n}):n}):null}var Le=i(865607),Me=i(807532);function Ne({attributionNameLink:e,attributionTitle:t,avatarUrl:i,display:o="default",isPromotedByPinCreator:r,pin:s,name:l,url:c,verifiedIdentity:d,isVerifiedMerchant:u,shouldRenderAdsOnlyProfileClick:p}){const h=(0,Me.f)(),[m,_]=(0,n.useState)(!1),{id:g,sponsorship:v,story_pin_data_id:f}=s,{isPromoted:y}=(0,a.Z)(s),{logContextEvent:x}=(0,U.v)(),{creator:b}=v||{},{id:w}=b||{},P=!!f,S=(0,me.Z)(101,{view_type:3,element:y?283:27,object_id_str:g,component:P?230:void 0,aux_data:{...w?{creator_id:w,pin_id:g}:{}}}),T=()=>{h.setMostRecentPinId(g),S()},I=()=>{_((e=>!e))},k=c&&!e,E=k?"":l,A="overlay"===o,C=(0,H.jsxs)(B.xu,{alignItems:"center",display:A?void 0:"flex",dangerouslySetInlineStyle:{__style:{marginLeft:"-3px",marginRight:"-3px"}},children:[(0,H.jsx)(B.xu,{flex:"none",dangerouslySetInlineStyle:{__style:{marginLeft:"3px",marginRight:"3px"}},display:A?"flex":void 0,justifyContent:"center",children:(0,H.jsx)(B.xu,{dangerouslySetInlineStyle:A?{__style:{marginTop:-45}}:void 0,children:(0,H.jsx)(Re,{attributionNameLink:E?e:void 0,avatarUrl:i,name:E,onClick:()=>T(),accessibilityLabel:E,size:A?64:32,outline:A})})}),(0,H.jsxs)(B.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:"3px",marginRight:"3px"}},flex:"grow",overflow:"hidden",display:A?"flex":void 0,justifyContent:"center",marginTop:A?2:void 0,children:[(0,H.jsx)(B.xu,{dangerouslySetInlineStyle:{__style:{marginBottom:"2px"}},children:(0,H.jsxs)(B.kC,{gap:{row:1,column:0},children:[(0,H.jsx)(De,{attributionNameLink:e,name:l,onClick:()=>T(),regularWeight:!(y&&!v||r),isHover:m}),(0,H.jsx)(Le.Z,{size:"sm",hasVerifiedIdentity:d,isVerifiedMerchant:u})]})}),(0,H.jsx)(Oe,{isHover:m,title:t,weight:"normal"})]})]});return k?(0,H.jsx)(B.iP,{role:"link",onTap:({event:e})=>{p&&x({event_type:9371,element:13382,aux_data:{aop_origin:"Attribution"}}),e.stopPropagation(),T()},href:c,rel:p?"nofollow":void 0,target:p?"blank":void 0,onMouseEnter:I,onMouseLeave:I,children:C}):C}var ze=i(356725),Fe=i(333312),Ze=i(695014),Be=i(676464),Ue=i(596493),He=i(422946),Ve=i(956800),We=i(852025);function $e({board:e,favoriteCount:t,favorited:i,pinId:r}){const{logContextEvent:a}=(0,U.v)(),s=(0,o.useDispatch)(),{slotIndex:l}=(0,X.E)(),{currentFilter:c,eligibleFilters:d,refreshData:u=(()=>{}),sectionId:p,setShowExperienceTooltip:h}=(0,We.s)(),m=(0,n.useRef)(null),_=(0,Z.Z)(),g=(0,I.Z)(_,e),v=c===Ue.Ac&&(!t||1===t),f=(0,Be.E)(d,Ue.Ac),y=e=>{a({event_type:101,component:0,element:e?12225:12226,object_id_str:r,view_type:5,view_parameter:g?3069:3070})};return(0,H.jsxs)(n.Fragment,{children:[(0,H.jsx)(B.xu,{ref:m,children:(0,H.jsx)(Ze.Z,{favorited:i,favoriteCount:t,onFavorite:()=>{y(!0),f&&u(),h&&h(!0)},onUnfavorite:()=>{y(!1),e&&v&&s((0,Ve.EX)({feedId:p||e.id,feedType:p?He.DV.BOARD_SECTION_PINS:He.DV.BOARDFEED,itemIds:[r],itemType:"pin"}))},pinId:r,size:20})}),m&&!i&&!p&&0===l&&(0,H.jsx)(B.mh,{children:(0,H.jsx)(Fe.default,{anchor:m.current,experienceIds:[502973],flyoutSize:312,idealDirection:"up",placementId:18,positionRelativeToAnchor:!1,showCaret:!0,textAlign:"center"})})]})}var Ge=i(850115),Ke=i.n(Ge),qe=i(379507),Ye=i.n(qe),Xe=i(637956),Je=i.n(Xe),Qe=i(694379),et=i(909745),tt=i.n(et),it=i(128206),nt=i.n(it);const ot={goodIdea:Ke(),love:Je(),thanks:tt(),wow:nt(),haha:Ye()},rt={7:"goodIdea",1:"love",13:"thanks",11:"wow",5:"haha"},at=["CreatorProfileStoryPinGrid"];const st=function({alignment:e="start",pinId:t,pinner:i,reactionCounts:n,surface:o}){const r=(0,Z.Z)(),a=n?(0,q.At)(n):null,s=n?(0,q.Ud)(n):0,l=Boolean(r.isAuth&&(null==i?void 0:i.id)===r.id),c=!!a&&a.length>0&&a.map(((e,t)=>{const i=ot[rt[e]];return(0,H.jsx)(B.xu,{dangerouslySetInlineStyle:{__style:{marginRight:2}},children:(0,H.jsx)(B.xu,{width:17,height:17,dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${i})`,backgroundPosiiton:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}}})},t)})),d=!!c&&(0,H.jsx)(B.iP,{role:"link",href:`/pin/${t}/`,children:(0,H.jsxs)(B.xu,{display:"flex",direction:"row",alignItems:"center",justifyContent:e,height:19,paddingY:3,children:[(0,H.jsx)(B.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",children:c}),(0,H.jsx)(B.xu,{paddingX:1,children:(0,H.jsx)(B.xv,{size:"200",children:(0,H.jsx)(Qe.Z,{value:s,shortform:!0,shortformMaximumFractionDigits:1})})})]})}),u=l&&at.includes(o)&&(0,H.jsx)(B.xu,{height:24});return d||u};var lt=i(62700),ct=i(862628);function dt({feedbackType:e,pin:t}){const i=(0,N.ZP)(),{pinner:n,source_interest:o}=t,{full_name:r,username:a}=n||{},{name:s}=o||{},l="topic"===e,c=!l&&"followed"===e,d=`/${a}/`,u=(0,ct.Z)(s),p=`/search/pins/?q=${encodeURIComponent(u)}&rs=image_only_attribution`,h=l?p:d,m={topic:i._('From {topic}', 'attribution on pin rep', 'attribution on pin rep'),followed:i._('From {pinnerName}', 'attribution on pin rep', 'attribution on pin rep'),pfyBoard:i._('Picked for you', 'attribution on pin rep', 'attribution on pin rep'),pfy:i._('Picked for you', 'attribution on pin rep', 'attribution on pin rep')}[e];if(!m)return null;if(c||l){const e=0===m.indexOf("{"),t=l?s:r,i=e?m.slice(m.indexOf("}")+1):m.slice(0,m.indexOf("{"));return e?(0,H.jsxs)(B.xu,{children:[(0,H.jsx)(B.rU,{display:"inlineBlock",href:h,underline:"hover",children:(0,H.jsx)(B.xv,{weight:"bold",inline:!0,size:"200",lineClamp:1,children:t})}),(0,H.jsx)(B.xv,{inline:!0,size:"200",children:i})]}):(0,H.jsxs)(B.xu,{children:[(0,H.jsx)(B.xv,{inline:!0,size:"200",children:i}),(0,H.jsx)(B.rU,{display:"inlineBlock",href:h,underline:"hover",children:(0,H.jsx)(B.xv,{color:"default",weight:"bold",inline:!0,size:"200",lineClamp:1,children:t})})]})}return(0,H.jsx)(B.xu,{children:(0,H.jsx)(lt.Z,{pin:t,children:(0,H.jsx)(B.xv,{color:"default",overflow:"normal",size:"200",weight:"bold",children:m})})})}var ut=i(955362),pt=i(397066),ht=i(48714);function mt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class _t extends n.Component{constructor(...e){super(...e),mt(this,"state",{spamCheck:null}),mt(this,"mounted",!1),mt(this,"handleSpammyDomainCheck",(()=>{const{location:e,pin:t,surface:i,url:n}=this.props;n&&t&&(0,ht.$3)({location:e,pin:t,surface:i})&&(0,ht.iw)({isMounted:this.mounted,pin:t,location:e,spamCheckCallback:e=>this.setState({spamCheck:e}),href:n})})),mt(this,"handleClick",(e=>{const{auxData:t,location:i,onClick:n,pin:o,pinId:r,url:a,logContextEvent:s}=this.props;(0,ht.gV)({isOffsiteUrl:!0,event:e})||(e.preventDefault(),n&&n(e),a&&(0,pt.h)({href:a,pinId:r,pin:o,location:i,auxData:t},s))}))}componentDidMount(){this.mounted=!0,this.handleSpammyDomainCheck()}componentWillUnmount(){this.mounted=!1}componentDidUpdate(){const{spamCheck:e}=this.state;null===e&&this.handleSpammyDomainCheck()}render(){const{children:e,pin:t,url:i}=this.props;return(0,H.jsx)("a",{"aria-label":(null==t?void 0:t.domain)||"",href:i,onClick:this.handleClick,rel:"nofollow",style:{color:"inherit",textDecoration:"none",outline:"none",cursor:"pointer",display:"block"},target:null,children:e})}}function gt(e){var t;const{logContextEvent:i}=(0,U.v)(),n=(0,ie.S6)()(null!==(t=e.pinId)&&void 0!==t?t:"");return(0,H.jsx)(_t,{...e,history:(0,_e.useHistory)(),location:(0,_e.useLocation)(),logContextEvent:i,match:(0,_e.useRouteMatch)(),pin:n})}function vt(e){if(!window||!window.prefetchCompletion||!window.prefetchCompletion[e])return"0";const{downloadedAssets:t,totalAssets:i}=window.prefetchCompletion[e];return i?(t/i*100).toFixed(3).toString():"-1"}var ft=i(941646),yt=i(385740);function xt({children:e,componentType:t,contextLogData:i,pin:n,surface:o,viewParameter:r,viewType:a}){const{logContextEvent:s}=(0,U.v)(),l=(0,X.E)(),{ad_destination_url:c,carousel_data:d,id:u,link:p,tracked_link:h}=n;let m,_=c||h||p||"",g="one-tap-desktop";const v=(0,yt.SU)();if(d){const{carousel_slots:e=[],id:t,index:i=0}=d;e[i]&&e[i].link&&(_=e[i].link),m={carousel_slot_id:e[i]&&e[i].id,carousel_data_id:t,carousel_slot_index:i},g+="-carousel"}return(0,H.jsx)(B.xu,{"data-test-id":"otpp",children:(0,H.jsx)(ft.Z,{id:g,children:(0,H.jsx)(gt,{auxData:m,onClick:()=>{s({event_type:12,view_type:a||l.viewType,view_parameter:r||l.viewParameter,component:t||l.componentType,object_id_str:u,aux_data:{...i,grid_index:l.slotIndex,pin_id:u,prefetch_percentage_complete:vt(p||"")}}),s({event_type:8948,view_type:a||l.viewType,view_parameter:r||l.viewParameter,component:t||l.componentType,object_id_str:u,aux_data:{...i,click_type:"clickthrough",closeup_navigation_type:"click",grid_index:l.slotIndex,pin_id:u,prefetch_percentage_complete:vt(p||"")}}),s({event_type:13,object_id_str:u,component:t||l.componentType,view_type:3,aux_data:{closeup_navigation_type:"web_closeup",...l.contextLogData,...i}}),s({event_type:13,view_type:v.viewType,view_parameter:v.viewParameter,view_data:v.viewData})},pinId:u,surface:o,url:_,children:e})})})}function bt(e){const{pin:t,surface:i}=e,{isOneTap:n,isVideo:o,isPromoted:r,isLeadPin:s}=(0,a.Z)(t),l=!s&&(n||o&&r)?xt:lt.Z;return(0,H.jsx)(l,{surface:n?i:void 0,...E(e,["surface"])})}function wt({pin:e,pinNoteText:t}){return(0,H.jsx)(bt,{pin:e,children:(0,H.jsx)(B.xv,{lineClamp:1,overflow:"normal",size:"200",children:t})})}var Pt=i(81226);function St({value:e,valueFormat:t}){const i=(0,N.ZP)();return e||0===e?"TIME"===t?(0,Pt.Z)(e):(0,H.jsx)(Qe.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:e}):(0,H.jsx)(B.u,{idealDirection:"up",text:i._('This stat is not available yet', 'closeup.partnerAnalytics.unavailableStat', 'when data for this field has not populated yet'),children:"—"})}function Tt({pin:e}){var t;const i=(0,N.ZP)(),n=(0,Z.Z)(),{isStoryPin:o,isVideo:r}=(0,a.Z)(e),s=n.isAuth&&(null===(t=e.pinner)||void 0===t?void 0:t.id)===n.id&&!e.is_repin,l=n.isAuth&&n.isPartner,c=(0,ee.iL)({isOwnPin:s,isPartner:l}),d=(0,ee.H1)({isOwnPin:s,isPartner:l}),u=e.created_at?new Date(e.created_at):null,p=(c||d)&&u&&u.getTime()<=ee.HW.getTime(),h=c?function(e){const{public_creator_analytics:t}=e,{isStoryPin:i}=(0,a.Z)(e);return i&&t?t:null}(e):function(e){const{aggregated_pin_data:t,creator_analytics:i}=e,{creator_analytics:n}=t||{},{isStoryPin:o}=(0,a.Z)(e);return!i||!o&&n?n:i}(e),m=function({isVideo:e,isStoryPin:t,i18n:i,showPublicPinStats:n,showPrivateFullScreenPinStats:o}){return e?[{align:"start",displayText:i._('Video views', 'pinRep.pinStats.videoViews', 'Label for views of a video pin on pinrep'),field:"video_views",iconType:"play"},{align:"center",displayText:i._('Avg. time', 'pinRep.pinStats.videoAverageTime', 'Label for average time of a video pin on pinrep'),field:"video_average_time",iconType:"clock",valueFormat:"TIME"},{align:"end",displayText:i._('Saves', 'pinRep.pinStats.save', 'Label for saves of a video pin on pinrep'),field:"save",iconType:"angled-pin"}]:t?n?[{align:"start",displayText:i._('Full screen plays', 'pinRep.pinStats.fullScreenPlays', 'Label for how many times the Idea Pin has been played full screen'),field:"full_screen_play",iconType:"play"}]:o?[{align:"start",displayText:i._('Full screen plays', 'pinRep.pinStats.fullScreenPlays', 'Label for how many times the Idea Pin has been played full screen'),field:"full_screen_play",iconType:"play"},{align:"center",displayText:i._('Impressions', 'pinRep.pinStats.impression', 'Label for impressions of a pin on pinrep'),field:"impression",iconType:"eye"},{align:"end",displayText:i._('Saves', 'pinRep.pinStats.save', 'Label for saves of a pin on pinrep'),field:"save",iconType:"angled-pin"}]:[{align:"start",displayText:i._('Impressions', 'pinRep.pinStats.impression', 'Label for impressions of a pin on pinrep'),field:"impression",iconType:"eye"},{align:"center",displayText:i._('Closeups', 'pinRep.pinStats.closeups', 'Label for closeups of a pin on pinrep'),field:"closeup",iconSize:10,iconType:"hand-pointing"},{align:"end",displayText:i._('Saves', 'pinRep.pinStats.save', 'Label for saves of a pin on pinrep'),field:"save",iconType:"angled-pin"}]:[{align:"start",displayText:i._('Impressions', 'pinRep.pinStats.impression', 'Label for impressions of a pin on pinrep'),field:"impression",iconType:"eye"},{align:"center",displayText:i._('Saves', 'pinRep.pinStats.save', 'Label for saves of a pin on pinrep'),field:"save",iconType:"angled-pin"},{align:"end",displayText:i._('Link clicks', 'pinRep.pinStats.clickthrough', 'Label for click-throughs of a pin on pinrep'),field:"clickthrough",iconSize:10,iconType:"arrow-up-right"}]}({isVideo:r,isStoryPin:o,i18n:i,showPublicPinStats:c,showPrivateFullScreenPinStats:d}),_=r||o?null==h?void 0:h.all_time_realtime:null==h?void 0:h["30d_realtime"];return(0,H.jsx)(B.kC,{alignItems:"stretch",justifyContent:"start",children:m.map((({align:e,displayText:t,field:i,iconType:n,iconSize:o=12,valueFormat:r})=>(0,H.jsxs)(B.xu,{alignItems:"center",column:4,display:"flex",justifyContent:e,children:[(0,H.jsx)(B.xu,{display:"inlineBlock",marginEnd:1,children:(0,H.jsx)(B.JO,{accessibilityLabel:t,color:"default",icon:n,size:o})}),(0,H.jsx)(B.xv,{inline:!0,size:"200",children:(0,H.jsx)(St,{value:"full_screen_play"===i&&p?null:null==_?void 0:_[i],valueFormat:r})})]},i)))})}function It({currentPrice:e,disableLink:t,originalPrice:i,pin:n,surface:o}){const r=i&&i!==e,a=(0,H.jsxs)(B.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",children:[e&&(0,H.jsx)(B.xv,{color:"default",size:"200",weight:"bold",children:e}),r&&(0,H.jsx)(B.xu,{dangerouslySetInlineStyle:{__style:{textDecoration:"line-through",textDecorationColor:"#767676"}},marginStart:1,children:(0,H.jsx)(B.xv,{color:"subtle",size:"200",weight:"bold",children:i})})]});return t?a:(0,H.jsx)(bt,{pin:n,surface:o,children:a})}function kt({disableLink:e,pin:t,surface:i}){const n=(0,H.jsx)(B.kC,{alignItems:"stretch",justifyContent:"start",children:(0,H.jsx)(B.xv,{color:"default",lineClamp:1,overflow:"normal",size:"200",weight:"normal",children:p(t,i)})});return e?n:(0,H.jsx)(bt,{pin:t,surface:i,children:n})}var Et=i(202870);function At({disableLink:e,numberOfLines:t=2,pin:i,pinTitle:n,surface:o}){const r=e?n:(0,H.jsx)(bt,{pin:i,surface:o,children:n});return(0,H.jsx)(B.xv,{color:"default",lineClamp:t,size:"200",weight:"bold",children:r})}var Ct=i(225692);const jt={container:{padding:"8px 6px 16px"},productContainer:{padding:"12px 6px 16px"},imageOnlyAttribution:{hidden:{opacity:0,transition:`opacity ${Ct.X}ms ease`},visible:{opacity:1}}};function Rt({attributionType:e,board:t,feedbackData:i,feedbackType:r,hasTextContent:s,hasTitleOrSource:l,hoverTransitionState:c,pin:d,pinNoteText:u,pinTitle:p,productCurrentPrice:h,productOriginalPrice:_,setForcePrimary:g,showCarouselEllipsis:v,showFavoriteButton:f,showGroupBoardAvatar:y,showNativeReactions:x,showOverflowMenu:b,showPinStats:w,showSource:P,showTextContent:S,showAttribution:T,surface:I,titleLines:k}){var E,A,C,j;const R=(0,N.ZP)(),D=(0,Z.Z)(),O=(0,o.useDispatch)(),{favorited_by_me:L,favorite_user_count:M,id:z,pinner:F,reaction_counts:U,sponsorship:V,story_pin_data:W}=d,{has_affiliate_products:$}=W||{},{checkExperiment:G}=(0,Q.F)(),K=function(e,t,i,n){var o,r,s,l,c;const{board:d,link_domain:u={},promoter:p,sponsorship:h,native_creator:m}=e,{sponsor:_}=h||{},{isPromoted:g}=(0,a.Z)(e),{official_user:v}=u||{},f=g&&!!h&&(null==m?void 0:m.id)!==(null==p?void 0:p.id),y=e.pinner||{};let x="",b="",w="",P="",S="",T="",I=!1,k=!1,E=!1;function A(e,t){return n&&!!e&&!!t}var C,j,R,D,O,L,M,N;if(f)x=null!==(C=null!==(j=null==m?void 0:m.image_medium_url)&&void 0!==j?j:null==m?void 0:m.image_small_url)&&void 0!==C?C:"",b=A(null==m?void 0:m.is_ads_only_profile,null==m?void 0:m.ads_only_profile_site)?null!==(R=m.ads_only_profile_site)&&void 0!==R?R:"":`/${null!==(D=null==m?void 0:m.username)&&void 0!==D?D:""}/`,w=null==p?void 0:p.full_name,P=null==m?void 0:m.full_name,T=A(null==m?void 0:m.is_ads_only_profile,null==m?void 0:m.ads_only_profile_site)?null!==(O=m.ads_only_profile_site)&&void 0!==O?O:"":`/${null!==(L=null==m?void 0:m.username)&&void 0!==L?L:""}/`,S=`/${null!==(M=null==p?void 0:p.username)&&void 0!==M?M:""}/`,I=null==m||null===(N=m.verified_identity)||void 0===N?void 0:N.verified,k=null==m?void 0:m.is_verified_merchant,E=A(null==m?void 0:m.is_ads_only_profile,null==m?void 0:m.ads_only_profile_site);else if(g&&p)x=p.image_medium_url||p.image_small_url,w=p.full_name,P=i._('Promoted by', 'indicating the username of the person who promoted the pin', 'indicating the username of the person who promoted the pin'),T=A(p.is_ads_only_profile,p.ads_only_profile_site)?p.ads_only_profile_site:`/${p.username}/`,E=A(p.is_ads_only_profile,p.ads_only_profile_site);else if(h&&null!=_&&_.username){var z,F,Z,B,U,H,V,W,$;x=null!==(z=null!==(F=null!==(Z=null==m?void 0:m.image_large_url)&&void 0!==Z?Z:null==m?void 0:m.image_medium_url)&&void 0!==F?F:null==m?void 0:m.image_small_url)&&void 0!==z?z:"",b=A(null==m?void 0:m.is_ads_only_profile,null==m?void 0:m.ads_only_profile_site)?null!==(B=m.ads_only_profile_site)&&void 0!==B?B:"":`/${null!==(U=null==m?void 0:m.username)&&void 0!==U?U:""}/`,w=_.full_name,P=null==m?void 0:m.full_name,T=A(null==m?void 0:m.is_ads_only_profile,null==m?void 0:m.ads_only_profile_site)?null!==(H=m.ads_only_profile_site)&&void 0!==H?H:"":`/${null!==(V=null==m?void 0:m.username)&&void 0!==V?V:""}/`,S=`/${null!==(W=_.username)&&void 0!==W?W:""}/`,I=null==m||null===($=m.verified_identity)||void 0===$?void 0:$.verified,k=null==m?void 0:m.is_verified_merchant,E=A(null==m?void 0:m.is_ads_only_profile,null==m?void 0:m.ads_only_profile_site)}else if(m){var G,K,q,Y;x=null!==(G=null!==(K=null!==(q=m.image_large_url)&&void 0!==q?q:m.image_medium_url)&&void 0!==K?K:m.image_small_url)&&void 0!==G?G:"",P=m.full_name,T=A(m.is_ads_only_profile,m.ads_only_profile_site)?m.ads_only_profile_site:`/${m.username}/`,I=null===(Y=m.verified_identity)||void 0===Y?void 0:Y.verified,k=m.is_verified_merchant,E=A(m.is_ads_only_profile,m.ads_only_profile_site)}else if("show-for-claimed-content"===t){var X,J,Q,ee,te;null!=v&&v.is_primary_website_verified&&v.username&&(x=null!==(X=null!==(J=null!==(Q=v.image_large_url)&&void 0!==Q?Q:v.image_medium_url)&&void 0!==J?J:v.image_small_url)&&void 0!==X?X:"",P=v.full_name,T=A(v.is_ads_only_profile,v.ads_only_profile_site)?v.ads_only_profile_site:`/${null!==(ee=v.username)&&void 0!==ee?ee:""}/`,I=null===(te=v.verified_identity)||void 0===te?void 0:te.verified,k=v.is_verified_merchant,E=A(v.is_ads_only_profile,v.ads_only_profile_site))}else{var ie,ne,oe,re;x=null!==(ie=null!==(ne=null!==(oe=y.image_large_url)&&void 0!==oe?oe:y.image_medium_url)&&void 0!==ne?ne:y.image_small_url)&&void 0!==ie?ie:"",b=`/${y.username}/`,P=y.full_name,T=d?d.url:"",I=null===(re=y.verified_identity)||void 0===re?void 0:re.verified,k=y.is_verified_merchant}return{avatarUrl:null!==(o=x)&&void 0!==o?o:"",attributionNameLink:null!==(r=b)&&void 0!==r?r:"",attributionTitle:null!==(s=w)&&void 0!==s?s:"",name:null!==(l=P)&&void 0!==l?l:"",sponsorUrl:S,url:null!==(c=T)&&void 0!==c?c:"",verifiedIdentity:!!I,isVerifiedMerchant:!!k,shouldRenderAdsOnlyProfileClick:!!E}}(d,e,R,G("web_ads_only_profiles_link_redirect").anyEnabled),{avatarUrl:q,attributionNameLink:Y,attributionTitle:X,name:J,sponsorUrl:ee,url:te,verifiedIdentity:ie,isVerifiedMerchant:ne,shouldRenderAdsOnlyProfileClick:oe}=K,re=!!d.promoter&&!d.is_downstream_promotion,ae=re&&(null===(E=d.native_creator)||void 0===E?void 0:E.id)===(null===(A=d.promoter)||void 0===A?void 0:A.id),se=(0,me.Z)(101,{view_type:3,element:27,object_id_str:z,component:d.story_pin_data_id?230:void 0,aux_data:{pin_id:z,...null!=V&&null!==(C=V.creator)&&void 0!==C&&C.id&&null!==(j=V.sponsor)&&void 0!==j&&j.id?{creator_id:V.creator.id,sponsor_id:V.sponsor.id}:{}}}),le=e=>O(le(e)),{full_name:ce}=(null==V?void 0:V.sponsor)||{},de="ConversationView"===I?{padding:"8px"}:jt.container;return(0,H.jsxs)(B.xu,{dangerouslySetInlineStyle:{__style:de},children:[v&&(0,H.jsx)(B.xu,{dangerouslySetInlineStyle:{__style:l||y||"none"!==e?{marginBottom:"6px"}:{}},display:"flex",justifyContent:"center",children:(0,H.jsx)(ze.default,{pinId:z})}),w&&(0,H.jsx)(B.xu,{dangerouslySetInlineStyle:{__style:{marginBottom:"6px"}},flex:"grow",width:"100%",children:(0,H.jsx)(Tt,{pin:d})}),(0,H.jsx)(B.kC,{alignItems:"stretch",justifyContent:"start",children:(0,H.jsxs)(B.xu,{flex:"grow",children:[(!!V||$&&!re)&&!ae&&(0,H.jsx)(B.xu,{marginBottom:1,children:(0,H.jsx)(B.xu,{flex:"grow",overflow:"hidden",children:(0,H.jsx)(Et.Z,{hasAffiliateProducts:$,href:ee||te,isPromoted:re,sponsorName:ce,sponsorshipStatus:null==V?void 0:V.status,onNavigateSponsorClick:()=>{le(z),se()},textWeight:"bold"})})}),(S&&s||f)&&(0,H.jsxs)(B.xu,{marginBottom:1,children:[(_||h)&&(0,H.jsx)(B.xu,{marginBottom:1,children:(0,H.jsx)(It,{currentPrice:h,originalPrice:_,pin:d,surface:I})}),f?(0,H.jsxs)(B.kC,{alignItems:"start",children:[(0,H.jsx)(B.kC,{flex:"grow",children:(0,H.jsx)(At,{numberOfLines:k,pin:d,pinTitle:p,surface:I})}),(0,H.jsx)(B.xu,{marginStart:3,children:(0,H.jsx)($e,{board:t,favorited:!!L,favoriteCount:null!=t&&t.is_collaborative&&(0,m.Z)({board:t,viewer:D})?null!=M?M:0:void 0,pinId:z})})]}):(0,H.jsx)(At,{numberOfLines:k,pin:d,pinTitle:p,surface:I}),P&&(0,H.jsx)(B.xu,{marginBottom:2,children:(0,H.jsx)(kt,{pin:d,surface:I})})]}),T&&(0,H.jsxs)(B.kC,{alignItems:"center",justifyContent:"start",children:[(0,H.jsx)(B.xu,{flex:"grow",children:(()=>{const t=(0,H.jsx)(Ne,{attributionNameLink:Y,attributionTitle:re&&!V||ae?X:"",avatarUrl:q,isPromotedByPinCreator:!!ae,isVerifiedMerchant:ne,shouldRenderAdsOnlyProfileClick:oe,name:J,pin:d,url:te,verifiedIdentity:ie});switch(e){case"none":return null;case"image-only-credit":return(0,H.jsx)(B.xu,{dangerouslySetInlineStyle:{__style:jt.imageOnlyAttribution["active"===c?"visible":"hidden"]},children:(0,H.jsx)(dt,{pin:d,feedbackType:r})});default:return Object.values(K).some((e=>Boolean(e)))?t:null}})()}),b&&(0,H.jsx)(B.xu,{flex:"none",children:(0,H.jsx)(ut.default,{feedbackData:i,feedbackType:r,pin:d,pinTitle:p,setForcePrimary:g,transparentBackground:!0})})]}),x&&!!U&&Object.keys(U).length>0&&(0,H.jsx)(B.xu,{marginTop:"ConversationView"===I?2:void 0,children:(0,H.jsx)(st,{pinId:z,pinner:F,reactionCounts:U,surface:I})}),u&&(0,H.jsx)(B.xu,{marginBottom:1,children:(0,H.jsx)(wt,{pin:d,pinNoteText:u})}),y&&!f&&(0,H.jsx)(B.xu,{alignItems:"center",display:"flex",marginTop:1,marginBottom:1,children:(0,H.jsxs)(n.Fragment,{children:[(0,H.jsx)(Re,{attributionNameLink:Y||te,avatarUrl:q,fullWidth:!1,name:J,accessibilityLabel:J,shouldRenderAdsOnlyProfileClick:oe}),(0,H.jsx)(B.xu,{marginStart:2,flex:"grow",children:(0,H.jsx)(B.xv,{size:"200",children:J})})]})})]})},`${d.id}-sponsor-name-link`)]})}var Dt=i(149230);function Ot(){const e=(0,N.ZP)();return(0,H.jsx)(B.xv,{color:"subtle",overflow:"normal",size:"200",weight:"normal",children:e._('Sold out', 'pinrep.footer.outOfStock', 'Footer text to indicate that product pin is out of stock.')})}var Lt=i(104389);function Mt(){const e=(0,N.ZP)();return(0,H.jsx)(B.xv,{color:"subtle",overflow:"normal",size:"200",weight:"normal",children:e._('See price on site', 'pinrep.footer.staleProduct', 'Footer text to indicate that is a stale(untrustworthy) product pin.')})}const Nt=18;function zt({dimension:e,color:t,isSelected:i,img:n,selectVariant:o}){var r,a,s;const l=(0,N.ZP)(),c=(0,H.jsx)(B.iP,{fullHeight:!0,fullWidth:!0,rounding:1,onMouseEnter:({event:i})=>{i.preventDefault(),i.stopPropagation(),o({dimensionName:e,variant:t})},onFocus:()=>{o({dimensionName:e,variant:t})},children:(0,H.jsx)(B.xu,{"data-test-id":`primary-variant-preview-icon-${t}`,height:Nt,width:Nt,rounding:1,display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{border:i?"1px solid black":"1px solid #EFEFEF"}},children:(0,H.jsx)(B.xu,{height:14,width:14,position:"absolute",rounding:1,overflow:"hidden",children:(0,H.jsx)(B.xu,{"data-test-id":`${t}-variant-preview-wrapper`,dangerouslySetInlineStyle:{__style:{transform:"scale(10,10)"}},children:(0,H.jsx)(B.zd,{height:14,width:14,rounding:1,children:(0,H.jsx)(B.Ee,{alt:l._('Color variant preview image', 'MerchantStorefront.Variant.VariantPreviewIcon.Image', 'Alt text for color variant preview image'),naturalHeight:null!==(r=n.height)&&void 0!==r?r:1,naturalWidth:null!==(a=n.width)&&void 0!==a?a:1,src:null!==(s=n.url)&&void 0!==s?s:"",fit:"contain"})})})})})});return(0,H.jsx)(B.xu,{"data-test-id":`primary-variant-main-${t}`,display:"inlineBlock",height:Nt,rounding:1,width:Nt,children:c})}function Ft(){const{logContextEvent:e}=(0,U.v)(),t=(0,oe.Xx)(),i=t&&t.primaryVariants.filter((e=>e.image)).length>0;if((0,n.useEffect)((()=>{e({event_type:120,component:14092})}),[i,e]),!t)return null;const{primaryVariants:o,primaryDimName:r}=t,a=o.slice(0,6).map((e=>{const i=e.value,n=e.value===t.selectedMap[r],o=e.image;return o?(0,H.jsx)(zt,{dimension:r,color:i,isSelected:n,img:o,selectVariant:t.selectVariant},i):null})).filter(Boolean);if(o.length>6){const e=o.length-6;a.push((0,H.jsx)(B.xu,{"data-test-id":"plus-number",display:"flex",height:Nt,rounding:1,width:Nt,justifyContent:"center",children:(0,H.jsxs)(B.iP,{fullHeight:!0,fullWidth:!0,rounding:1,onTap:({event:e})=>{e.stopPropagation()},children:["+",e]})},6))}return(0,H.jsx)(B.kC,{justifyContent:"start",alignItems:"center",gap:3,children:a})}function Zt({contentType:e,hasTextContent:t,pin:i,pinTitle:o,productCurrentPrice:r,productOriginalPrice:a,productRating:s,productShipping:l,showSource:c,showVisitSiteButton:d,surface:p,titleLines:h}){var m;const{logContextEvent:_}=(0,U.v)(),g=(0,N.ZP)(),{checkExperiment:v}=(0,Q.F)(),{anyEnabled:f,group:y}=v("web_shopping_grid_metadata_ratings_shipping",{dangerouslySkipActivation:!0}),x=(null===(m=i.rich_summary)||void 0===m?void 0:m.url)||i.link;"shopping"!==e||y.includes("pwt")||v("web_shopping_grid_metadata_ratings_shipping");let b=null;if((0,oe.Xx)()){const{anyEnabled:e}=v("storefront_variant_pins");e&&(b=(0,H.jsx)(Ft,{}))}const w=(0,Dt.Z)({url:x})?"nofollow":"none";return(0,H.jsx)(B.xu,{dangerouslySetInlineStyle:{__style:jt.productContainer},height:"100%",children:(0,H.jsx)(B.kC,{direction:"column",flex:"grow",height:"100%",justifyContent:"between",children:t&&(0,H.jsxs)(n.Fragment,{children:[(0,H.jsx)(bt,{pin:i,surface:p,children:(0,H.jsxs)(B.kC,{direction:"column",gap:1,children:[(a||r)&&(0,H.jsx)(It,{currentPrice:r,disableLink:!0,originalPrice:a,pin:i,surface:p}),(0,u.qN)(i)&&(0,H.jsx)(Ot,{}),(0,u.SP)(i)&&(0,H.jsx)(Mt,{}),(0,H.jsx)(At,{disableLink:!0,numberOfLines:h,pin:i,pinTitle:o,surface:p}),c&&(0,H.jsx)(kt,{disableLink:!0,pin:i,surface:p}),"shopping"===e&&f&&(s||Number.isFinite(null==l?void 0:l.free_shipping_value))&&(0,H.jsx)(Lt.Z,{count:null==s?void 0:s.count,countFormat:"number",isGridView:!0,ratingValue:null==s?void 0:s.rating,shippingInfo:l}),b]})}),d&&x?(0,H.jsx)(B.xu,{marginTop:2,children:(0,H.jsx)(B.zx,{role:"link",fullWidth:!0,href:x,rel:w,onClick:()=>{_({event_type:12,view_type:1,view_parameter:3563})},target:"blank",text:g._('Visit site', 'ShoppingList.Pin.CTA.Button.VisitSite.Text', 'Text on CTA button on ShoppingList Pin to Visit Site')})}):null]})})})}const Bt=(0,n.memo)((function({attributionType:e,blockClickEvents:t,board:i,contentType:n,feedbackData:o,feedbackType:r,hoverTransitionState:a,pin:s,pinNoteText:l,pinTitle:c,productCurrentPrice:d,productOriginalPrice:u,productRating:p,productShipping:h,setForcePrimary:m,showCarouselEllipsis:_,showFavoriteButton:g,showGroupBoardAvatar:v,showNativeReactions:f,showOverflowMenu:y,showPinStats:x,showSource:b,showTextContent:w,showVisitSiteButton:P,showAttribution:S=!0,surface:T,titleLines:I}){const k=c||b,E="shopping"===n?(0,H.jsx)(Zt,{contentType:n,hasTextContent:!!k,pin:s,pinTitle:c,productCurrentPrice:d,productOriginalPrice:u,productRating:p,productShipping:h,showSource:b,showVisitSiteButton:P,surface:T,titleLines:I}):(0,H.jsx)(Rt,{attributionType:e,board:i,feedbackData:o,feedbackType:r,hasTextContent:!!k,hasTitleOrSource:!!k,hoverTransitionState:a,pin:s,pinNoteText:l,pinTitle:c,productCurrentPrice:d,productOriginalPrice:u,setForcePrimary:m,showCarouselEllipsis:_,showFavoriteButton:g,showGroupBoardAvatar:v,showNativeReactions:f,showOverflowMenu:y,showPinStats:x,showSource:b,showTextContent:w,showAttribution:S,surface:T,titleLines:I});return t?(0,H.jsx)(B.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},children:E}):(0,H.jsx)(B.kC,{flex:"grow",children:(0,H.jsx)(se.Z,{fullWidth:!0,children:E})})}));var Ut=i(685909),Ht=i(784590),Vt=i(990823);const Wt=(0,n.lazy)((()=>i.e(34979).then(i.bind(i,91540)))),$t=(0,n.lazy)((()=>Promise.all([i.e(97270),i.e(78120),i.e(75690),i.e(66286),i.e(43473)]).then(i.bind(i,666258)))),Gt=(0,n.lazy)((()=>Promise.all([i.e(97270),i.e(51672),i.e(78120),i.e(46760),i.e(22347)]).then(i.bind(i,494424)))),Kt=(0,n.lazy)((()=>Promise.all([i.e(97270),i.e(22538)]).then(i.bind(i,450564)))),qt=(0,n.lazy)((()=>i.e(1593).then(i.bind(i,331806))));function Yt({derivedSaveButtonOptions:e,forcePrimaryContent:t,showEnabledSaveBehavior:i,onToggleFlyout:r,onToggleModal:a,pin:s}){const l=(0,oe.Xx)(),c=function(e){return(0,Ht.Z)(e?{name:"PinResource",options:{id:e}}:null)}(null==l?void 0:l.variantUrl),d=c&&c.data?c.data:s,{id:u,savedInfo:p}=d,h=(0,n.useRef)(!!p),m=(0,o.useSelector)((({experiences:e})=>{const t=e[1000294];return 502450===(null==t?void 0:t.experience_id)?t:null})),{saveBehaviorType:_}=(0,Vt.tY)(i);void 0!==_&&["classic","controlled","inline"].includes(e.type)&&(e=_);const{viewParameter:g,viewType:v}=(0,X.E)(),f=(0,me.Z)(101,{element:0,object_id_str:u});let y=null;const x={onToggleModal:r,view:v,viewParameter:g,useLegoStyles:!0};if(!e.hidePinBetterSaveDropdown&&(m||i&&["classic","controlled"].includes(e.type))&&["classic","controlled","inline"].includes(e.type)){const{renderPinSaveTooltip:n}=e;y=(0,H.jsx)(k.Z,{name:"SafeSuspense_PinRepPrimaryContent_QuickSaveButton",children:(0,H.jsx)(M.Z,{children:(0,H.jsx)(se.Z,{children:(0,H.jsx)(Kt,{experience:m||void 0,forcePrimaryContent:t,pin:d,renderPinSaveTooltip:n,showEnabledSaveBehavior:i,viewParameter:g})})})})}else if("classic"===e.type||"controlled"===e.type){const{renderPinSaveTooltip:t}=e;y=(0,H.jsx)(k.Z,{name:"SafeSuspense_PinRepPrimaryContent_PinSaveButton",children:(0,H.jsx)(M.Z,{children:(0,H.jsx)(B.xu,{"data-test-id":"pin-save-button",maxWidth:"100%",children:(0,H.jsx)(se.Z,{children:(0,H.jsx)($t,{onClickCallback:f,onToggleModal:a,oneTapSave:"controlled"===e.type?e:void 0,pin:d,renderPinSaveTooltip:t,renderSavedStatus:()=>!!p&&(0,H.jsx)(se.Z,{children:(0,H.jsx)(Ut.Z,{isNewlySaved:!h.current,name:p.title,type:p.type,url:p.url})}),variant:"lego",viewParameter:g})})})})})}else if("inline"===e.type){const t=d,{initialSelection:i,onSave:n,renderPinSaveTooltip:o,hidePinBetterSaveDropdown:s}=e;y=(0,H.jsx)(k.Z,{name:"SafeSuspense_PinRepPrimaryContent_PinBetterSave",children:(0,H.jsx)(M.Z,{children:(0,H.jsx)(B.xu,{"data-test-id":"better-save",children:(0,H.jsx)(se.Z,{children:(0,H.jsx)(Gt,{initialSelection:i,onSave:n,onToggleFlyout:r,onToggleModal:a,pin:t,renderPinSaveTooltip:o,renderSavedStatus:({savedInfo:e})=>e&&(0,H.jsx)(se.Z,{children:(0,H.jsx)(Ut.Z,{isNewlySaved:!h.current,name:e.title,type:e.type,url:e.url,shouldUseLegoStyles:!0})}),variant:"pin",viewParameter:g,hideDropdown:s})})})})})}else"persistentOneClickSave"===e.type?y=(0,H.jsx)(k.Z,{name:"SafeSuspense_PinRepPrimaryContent_PersistentOneClickSave",children:(0,H.jsx)(M.Z,{children:(0,H.jsx)(B.xu,{"data-test-id":"persistent-one-click-save",children:(0,H.jsx)(se.Z,{children:(0,H.jsx)(Wt,{...x,saveOptions:e,pin:d})})})})}):"promote"===e.type&&(y=(0,H.jsx)(B.kC,{alignItems:"stretch",justifyContent:"end",children:(0,H.jsx)(k.Z,{name:"SafeSuspense_PinRepPrimaryContent_PinPromoteButton",children:(0,H.jsx)(M.Z,{children:(0,H.jsx)(B.xu,{"data-test-id":"pin-promote-button",children:(0,H.jsx)(se.Z,{children:(0,H.jsx)(qt,{pin:d})})})})})}));return(0,H.jsx)(k.Z,{name:"PinRepPrimaryContent",children:(0,H.jsx)(B.xu,{display:"flex",margin:3,children:y&&(0,H.jsx)(B.xu,{marginStart:"auto",flex:"grow",children:y})})})}var Xt=i(64446),Jt=i(40706),Qt=i(876371),ei=i(441707),ti=i(118334);const ii={__style:{boxShadow:"inset 0 0 0 2px black,  inset 0 0 0 4px white",transition:"all 300ms ease"}};function ni({isSelected:e}){const t=(0,N.ZP)();return(0,H.jsx)(B.xu,{bottom:!0,left:!0,position:"absolute",right:!0,rounding:4,top:!0,dangerouslySetInlineStyle:e?ii:{},children:(0,H.jsx)(B.xu,{position:"absolute",bottom:!0,right:!0,padding:3,children:(0,H.jsx)(B.xu,{alignItems:"center",color:e?"dark":"default",display:"flex",height:"24px",justifyContent:"center",rounding:2,width:"24px",dangerouslySetInlineStyle:{__style:{transition:"all 300ms ease"}},children:(0,H.jsx)(B.JO,{accessibilityLabel:t._('Pin is selected to be saved', 'SectionSuggestionPin.iconOnPin.selectedPin', 'accessibility label on an icon'),color:"inverse",icon:"check",size:12})})})})}var oi=i(124364),ri=i(802933),ai=i(674915),si=i(944546),li=i(428258),ci=i(172071);const di={},ui=e=>{ci.Z.increment("web_prefetch_via_xhr.attempt",1);const t=(0,ue.Z)(e);return new Promise(((i,n)=>{if(window.navigator&&window.navigator.connection){const e=window.navigator.connection;e.saveData&&(ci.Z.increment("web_prefetch_via_xhr.saveDataOn",1),i()),/2g/.test(e.effectiveType)&&(ci.Z.increment("web_prefetch_via_xhr.poorConnection",1),i())}const o=new XMLHttpRequest;o.open("GET",e),o.onload=()=>{200===o.status?(di[e]&&(di[e].loaded=!0),ci.Z.increment("web_prefetch_via_xhr.load.success",1,{hostname:t.hostname||"unknown"}),i(o.response)):(ci.Z.increment("web_prefetch_via_xhr.load.error",1,{hostname:t.hostname||"unknown"}),n())},di[e]||(o.send(),di[e]={added:!0,xhr:o},ci.Z.increment("web_prefetch_via_xhr.xhrSent",1,{hostname:t.hostname||"unknown"}))}))},pi={},hi=(e,t)=>{const i="string"==typeof e?e:e.url;if(t&&i){const e="control"===t?"v3.pinimg.com":"v2.pinimg.com";return i.replace("v.pinimg.com",e)}return i};function mi(e,t){return(hi("https://v.pinimg.com/videos/mc/hls/",t)||"")+`${e.slice(0,2)}/${e.slice(2,4)}/${e.slice(4,6)}/${e}`}function _i(e){const{id:t}=e;t&&pi[t]&&pi[t].length>0&&pi[t].forEach((e=>{(e=>{di[e]&&di[e].xhr&&!di[e].loaded&&(ci.Z.increment("web_prefetch_abort_xhr",1),di[e].xhr.abort(),di[e].aborted=!0)})(e)}))}function gi({autoplaySettingOff:e,blockClickEvents:t,fallbackColor:i,imageFit:o,imageHeightModifier:r,isDenseView:s,isHovering:l,isSocialSeasonalBoard:c=!1,onError:d,onLoad:u,pin:p,pinImageCrop:h,resolution:m="default",rootMargin:_,selectionState:g,showCarousel:v,showPromotedVideos:f,showUnavailablePin:y,surface:x}){const{contextLogData:b,slotIndex:w,viewParameter:P,viewType:S}=(0,X.E)(),{checkExperiment:T}=(0,Q.F)(),{group:I}=T("web_prefetch_video_in_feed"),{id:k="",aggregated_pin_data:E,image_signature:A,story_pin_data:C}=p,{pin_tags_chips:j}=E||{},{isOneTap:R,isVideo:D,isPromoted:O,isGif:L}=(0,a.Z)(p),{cropHeight:M,cropWidth:N}=(e=>"string"==typeof e?{cropHeight:0,cropWidth:0}:{cropHeight:e.height,cropWidth:e.width})(h);let z=null;if(y)z=(0,H.jsx)(oi.Z,{isDenseView:s,height:s?250:420,rounding:0,width:s?164:236});else if(e||!D||!f&&O||"BoardCoverSelectablePin"===x)if(v)z=(0,H.jsx)(B.xu,{"data-test-id":"pinrep-carousel",children:(0,H.jsx)(Qt.Z,{cropHeight:M,cropWidth:N,onError:d,onLoad:u,highResOnly:"high-res"===m,lowResOnly:"low-res"===m,pinId:k,showCarouselBadge:!1,pin:p})});else{const e="backend"===h?function({images:e,image_crop:t}){var i;const n=e&&(null===(i=e["236x"])||void 0===i?void 0:i.height);if(t&&(0!==t.min_y||1!==t.max_y)){const{min_y:e=0,max_y:i=0}=t;return{marginTop:(e>0?-1*e*(null!=n?n:0):0)+"px",marginBottom:`${i<1?Math.round(-1*(1-i)*(null!=n?n:0)):0}px`}}return{}}(p):{};z=(0,H.jsx)(B.xu,{dangerouslySetInlineStyle:{__style:e},"data-test-id":"pinrep-image",minHeight:55,children:(0,H.jsx)(ei.Z,{animateGif:L&&c,cropHeight:M,cropWidth:N,fallbackColor:i,imageFit:o,highResOnly:"high-res"===m,lowResOnly:"low-res"===m,mediumResOnly:"medium-res"===m,onLoad:u,onError:d,pin:p})})}else z=(0,H.jsx)(B.xu,{"data-test-id":"pinrep-video",direction:"column",display:"flex",height:M||void 0,justifyContent:"center",children:(0,H.jsx)(ti.Z,{cropHeight:M,cropWidth:N,highResOnly:"high-res"===m,imageHeightModifier:r,inAdsDesktopVideoExperiment:D&&f,isExperimentalPinRep:!0,lowResOnly:"low-res"===m,onError:d,onLoad:u,pin:p,rootMargin:_,surface:x,viewParameter:P,viewType:S})});const F=(0,H.jsx)(B.zd,{wash:!0,children:(0,H.jsx)(ce.Z,{hovered:l,pin:p,slotIndex:w,viewType:1,children:z})}),Z=["selected-image-only","deselected-image-only"].includes(g),U="selected-image-only"===g,V=(0,n.useRef)(!0),W=(0,n.useRef)(!1),$=(0,n.useRef)(!1),G=T("web_video_quic").group;if((0,n.useEffect)((()=>{V.current||!l||R||t||W.current?l||!W.current||$.current||(_i(C||p),$.current=!0):C?(!function(e,t){var i;const{id:n,pages:o,pages_preview:r}=e;if(!r&&!o)return;const a=r?r[0]:null==o?void 0:o[0],s=null==a||null===(i=a.blocks)||void 0===i?void 0:i.find((e=>3===e.block_type));if(s&&s.video){const{hlsv3:e,mp4:i}=(0,li.Z)(s.video)||{},o=i||e;if(o&&n){var l;const e=null!==(l=hi(o,t))&&void 0!==l?l:"";pi[n]=pi[n]?pi[n].concat(e):[e],ui(e)}}}(C,G),W.current=!0):(!function(e,t){const{id:i,videos:n}=e,{video_list:o}=n||{},r=(0,ri.Z)({pin:e}),{video:a}=(0,ai.Z)(r)||{},{hls:s,hlsv3:l}=a||{};if(o){const e=(0,li.t)(o)||{},n=l||s||{};if(n.url){var c;const e=null!==(c=hi(n.url,t))&&void 0!==c?c:"";pi[i]=pi[i]?pi[i].concat(e):[e],ui(e).then((e=>{let n=[];if("string"==typeof e&&(n=e.split("\n").filter((e=>e.endsWith(".m3u8")))),n&&n[si.VS]){const e=mi(n[si.VS],t);return pi[i]=pi[i].concat(e),ui(null!=e?e:"")}return null})).then((e=>{let n=[];if("string"==typeof e&&(n=e.split("\n").filter((e=>e.endsWith(".ts")))),n&&n[0]){const e=mi(n[0],t);return pi[i]=pi[i].concat(e),ui(null!=e?e:"")}return null}))}else if(e.url){var d;const n=null!==(d=hi(e.url,t))&&void 0!==d?d:"";ui(n),pi[i]=pi[i]?pi[i].concat(n):[n]}}}(p,G),W.current=!0),V.current=!1}),[t,l,R,C,p,I,G]),t)return(0,H.jsxs)(n.Fragment,{children:[F,Z&&(0,H.jsx)(ni,{isSelected:U}),j&&(0,H.jsx)(B.xu,{dangerouslySetInlineStyle:{__style:{marginTop:1}},children:(0,H.jsx)(Jt.Z,{pin:p,enableCloseupLink:!0})})]});const{commerce_data:K,story_type:q,board_id:Y,board_pin_count:J}=b||{},ee=["RelatedProductsExploreTab","RelatedProductsFeed"].includes(x);return(0,H.jsxs)(bt,{contextLogData:{commerce_data:ee?K:void 0,grid_index:w,image_signature:A,story_type:q,board_id:Y,board_pin_count:J},elementType:C?12372:35,pin:p,surface:x,children:[F,j&&(0,H.jsx)(B.xu,{dangerouslySetInlineStyle:{__style:{marginTop:1}},children:(0,H.jsx)(Jt.Z,{pin:p,enableCloseupLink:!1})})]})}var vi=i(2396),fi=i(946984);const yi=(0,vi.Z)((({handleSendShareFlyoutButtonClick:e})=>{const t=(0,N.ZP)(),i=(0,fi.Z)();return(0,H.jsx)(B.zx,{fullWidth:!0,onClick:({event:t})=>{t.stopPropagation(),i?i():e()},text:t._('Send', 'Send a pin', 'Send a pin'),color:"gray",accessibilityLabel:t._('Send', 'Accessible label to send a pin', 'Accessible label to send a pin')})}));function xi(e){return e<160?"header-only":"none"}function bi(e){const[t,i]=(0,n.useState)(e.current?xi(e.current.clientHeight||0):"none");return function(e,t){const i=(0,n.useRef)();(0,n.useEffect)((()=>{const n=e.current;if(!n)return;const o=i.current;o&&o.width===n.offsetWidth&&o.height===n.offsetHeight||(i.current={width:n.offsetWidth||0,height:n.offsetHeight||0},t&&t(i.current))})),i.current}(e,(({height:e})=>{const n=xi(e);n!==t&&i(n)})),t}var wi=i(485308),Pi=i(704115);const Si={impressed:{backgroundColor:"#adebad"}};function Ti({debugImpressionState:e="paused",slotIndex:t}){return"paused"===e?null:(0,H.jsx)(B.xu,{dangerouslySetInlineStyle:{__style:Si.impressed},"data-test-id":"debug-pin-impressions",position:"absolute",top:!0,left:!0,right:!0,bottom:!0,opacity:.5,children:(0,H.jsx)(B.xu,{position:"absolute",top:!0,left:!0,padding:2,color:"selected",children:(0,H.jsx)(B.xv,{color:"inverse",children:(0,H.jsx)("span",{className:"deprecatedTextSizeXL",children:t})})})})}var Ii=i(43671),ki=i(841509),Ei=i(525199),Ai=i(310227);const Ci="#000000",ji="#ffffff";function Ri({selected:e=!1}){const t=(0,N.ZP)(),{isRTL:i}=(0,xe.B)();return(0,H.jsx)(B.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,zIndex:new B.Ry(1),"data-test-id":"pinRepSelectionBorder",dangerouslySetInlineStyle:{__style:{borderWidth:"3px",borderStyle:"solid",borderColor:e?Ci:ji,borderRadius:Ai.Oc,boxShadow:e?"inset 0 0 0 3px #fff":void 0}},children:e?(0,H.jsx)(B.xu,{position:"absolute",bottom:!0,right:!i,left:i,display:"flex",alignItems:"center",justifyContent:"center",margin:3,rounding:2,height:24,width:24,color:"dark",children:(0,H.jsx)(B.JO,{accessibilityLabel:t._('Check icon', 'pinRepSelectionBorder.checkIcon', 'Accessibility label for check icon on selected Pin'),icon:"check",color:"inverse",size:12})}):(0,H.jsx)(B.xu,{right:!i,left:i,position:"absolute",top:!0,margin:3,children:(0,H.jsx)(B.JO,{accessibilityLabel:t._('Handle icon', 'pinRepSelectionBorder.handleIcon', 'Accessibility label for handle icon on an organizable Pin'),icon:"handle",color:"light",size:24})})})}const Di={wrapper:{borderRadius:Ai.Oc,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},promotedPinBorderTreatment:{background:"#EFEFEF",padding:4,borderRadius:20},primaryContentContainer:{marginBottom:"auto"},visualOverlay:{backgroundColor:Ai.Dv.VISUAL},savedOverlay:{backgroundColor:Ai.Dv.SAVED},legoWashOverlay:{backgroundColor:Ai.Dv.LEGO_WASH}};function Oi({children:e,savedOverlayVisibility:t="none",visualOverlayVisibility:i="none",handleMouseOverPinContent:n,handleMouseLeavePinContent:o,primaryContent:r,primaryContentVisibility:a="none",secondaryContent:s,secondaryContentVisibility:l="none",accessoryContent:c,accessoryContentVisibility:d="none",actionBar:u,actionBarVisibility:p="none",seeStatsButton:h,footer:m,selectionState:_="no-selection",debugContent:g,signalDebuggerContent:v,signalDebuggerV2Content:f,signalDebuggerV2ContentVisibility:y="none",obscuredPinOverlay:x,showNoPinBorderRadius:b,showPromotedPinBorderTreatment:w,shouldUseLegoWash:P}){return(0,H.jsx)(B.xu,{dangerouslySetInlineStyle:{__style:w?Di.promotedPinBorderTreatment:{}},height:"100%","data-test-id":"pinRepPresentation",children:(0,H.jsxs)(B.xu,{dangerouslySetInlineStyle:{__style:b?{}:Di.wrapper},"data-test-id":"pinWrapper",display:"flex",direction:"column",height:"100%",overflow:"hidden",position:"relative",children:[["selected","deselected"].includes(_)&&(0,H.jsx)(Ri,{selected:"selected"===_}),(0,H.jsxs)(B.xu,{"aria-hidden":Boolean(x),children:[(0,H.jsxs)(B.xu,{dangerouslySetInlineStyle:{__style:b?{}:Di.wrapper},overflow:"hidden",position:"relative",onFocus:n,onBlur:o,onMouseEnter:n,onMouseLeave:o,children:[e,(0,H.jsx)(Ei.Z,{visibility:i,children:(0,H.jsx)(ki.Z,{additionalStyles:P?Di.legoWashOverlay:Di.visualOverlay})}),(0,H.jsx)(Ei.Z,{visibility:t,children:(0,H.jsx)(ki.Z,{additionalStyles:P?Di.legoWashOverlay:Di.savedOverlay})}),c&&(0,H.jsx)(Ei.Z,{visibility:d,children:(0,H.jsx)(ki.Z,{children:c})}),s&&(0,H.jsx)(Ei.Z,{visibility:l,children:(0,H.jsx)(ki.Z,{children:s})}),r&&(0,H.jsx)(Ei.Z,{visibility:a,children:(0,H.jsx)(ki.Z,{children:r})}),f&&(0,H.jsx)(Ei.Z,{visibility:y,children:(0,H.jsx)(ki.Z,{children:(0,H.jsx)(B.xu,{position:"absolute",left:!0,bottom:!0,marginBottom:12,marginStart:2,children:f})})}),u&&(0,H.jsx)(Ei.Z,{visibility:p,children:(0,H.jsx)(ki.Z,{children:(0,H.jsx)(B.xu,{position:"absolute",left:!0,right:!0,bottom:!0,children:u})})}),h&&(0,H.jsx)(ki.Z,{children:(0,H.jsx)(B.xu,{position:"absolute",bottom:!0,children:h})}),g&&(0,H.jsx)(ki.Z,{children:g}),v]}),m]}),x&&(0,H.jsx)(B.xu,{children:x})]})})}function Li(e){return"active"===e?"visible":"inactive"===e?"none":"hidden"}function Mi(...e){return e.includes("visible")?"visible":e.includes("hidden")?"hidden":"none"}const Ni=(0,n.memo)((function({actionBarProps:e,blockClickEvents:t,borderStyle:i,currentlyPlayingVideo:o,disableHover:r=!1,footerProps:a,impressionsDebuggerProps:l,obscuredPinOverlayProps:c,onError:d,onLoad:u,pin:p,pinVisualProps:h,presentationProps:m,primaryContentProps:_,rounding:g,secondaryContentProps:v,authDesktopSelectionState:f,showFooter:y,showImpressionsDebugger:x,showObscuredPinOverlay:b,showSeeStatsButton:w,showSignalDebugger:P,showUnavailablePin:S,surface:T,visibilityOverrides:I,imageHeightModifier:E}){var A,C;const{savedInfo:j}=p,{viewType:R}=(0,X.E)(),{showEnabledSaveBehavior:D}=(0,Vt.Yh)(s.ZF.includes(T)||(0,O.Z)(T)),[L,M]=(0,n.useState)(!1),N=(0,Ct.Z)(L);let{isHovering:z,hoverTransitionState:F,handleMouseOver:Z,handleMouseLeave:U}=function(){const[e,t]=(0,n.useState)(!1);return{isHovering:e,hoverTransitionState:(0,Ct.Z)(e,0,Ct.X),handleMouseOver:(0,n.useCallback)((()=>t(!0)),[t]),handleMouseLeave:(0,n.useCallback)((()=>t(!1)),[t])}}();r&&(z=!1,F="inactive");const V=(0,Ct.Z)(!!j),W=Li(V),$=Li(F),G=Li(F),q=Li(N),Y=Li(V),J=["HomefeedMoreIdeasTabs","BoardMoreIdeasTabContent"].includes(T),Q="visible"!==W||J?W:"none",ee={primaryContentVisibility:null!==(A=I.primaryContent)&&void 0!==A?A:Mi(G,q,"visible"===Y?"none":Y),secondaryContentVisibility:(te=Mi(G,q,Y),"none"===te?"visible":"visible"===te?"none":"hidden"),actionBarVisibility:Mi(G,q),accessoryContentVisibility:"none",signalDebuggerV2ContentVisibility:"visible"};var te;const ie=e=>M(e),ne=e=>M(e),oe=e=>{M(e),e||U()};let re=null;"none"!==ee.primaryContentVisibility&&(re=(0,H.jsx)(Yt,{forcePrimaryContent:ie,showEnabledSaveBehavior:D,onToggleFlyout:ne,onToggleModal:oe,pin:p,..._}));let ae=null;const le=(0,n.useRef)(!0),ce=le.current;le.current=!1;const de=function(e,t){const{carousel_data:i}=e,{index:o}=i||{},[r,a]=(0,n.useState)(!i||t),s=(0,n.useRef)(o),l=(0,n.useRef)(null);if(i){const e=s.current;s.current=o,(o!==e||t)&&(l.current&&clearTimeout(l.current),a(!0),l.current=setTimeout((()=>{a(!1),l.current=null}),4e3))}return(0,n.useEffect)((()=>()=>{l.current&&clearTimeout(l.current)}),[]),r}(p,ce),ue=Li((0,Ct.Z)(de));ee.secondaryContentVisibility=null!==(C=I.secondaryContent)&&void 0!==C?C:function(...e){return e.includes("none")?"none":e.includes("hidden")?"hidden":"visible"}(ee.secondaryContentVisibility,ue),ae=(v.allowShoppingPriceIndicator||v.shoppingLabelColor||"none"!==ee.secondaryContentVisibility)&&!o&&(0,H.jsx)(B.xu,{margin:2,children:(0,H.jsx)(Xt.Z,{pin:p,...v})});let pe=null;"visible"===I.accessoryContent&&(pe=(0,H.jsx)(Ae,{pin:p}),ee.accessoryContentVisibility=Li(F)),h.isSocialSeasonalBoard&&(e.showShareButton=!1);let he=null;w&&(e.showSourceLinkButton=!1,he=(0,H.jsx)(se.Z,{children:(0,H.jsx)(K,{pinId:p.id,surface:T})}));const me="visible"===I.actionBar?(0,H.jsx)(Te,{onToggleFlyout:ne,pin:p,setForcePrimary:M,surface:T,...e}):null;let _e=null;(y||(0,O.Z)(T))&&(_e=(0,H.jsx)(Bt,{blockClickEvents:t,hoverTransitionState:"image-only-credit"===a.attributionType?F:null,pin:p,setForcePrimary:M,surface:T,...a})),h.isSocialSeasonalBoard&&(_e=(0,H.jsx)(B.xu,{"data-test-id":"social-seasonal-footer",marginTop:2,marginBottom:3,width:"100%",children:(0,H.jsx)(B.xu,{margin:"auto",width:wi.J,children:(0,H.jsx)(yi,{isFlyoutOpen:L,onFlyoutDismiss:()=>ne(!L),onToggleFlyout:()=>ne(!L),pinId:p.id,sendType:"pin",shownWithinMasonry:!0,viewType:R,element:72})})}));const ge=x&&(0,H.jsx)(Ti,{...l}),ve=P&&p.debug_info_html&&(0,H.jsx)(B.xu,{paddingY:1,children:(0,H.jsx)("pre",{children:p.debug_info_html})}),fe=(0,H.jsx)(Ce.Z,{pin:p}),ye=(0,n.useRef)();"header-only"===bi(ye)&&(ee.actionBarVisibility="none",ee.accessoryContentVisibility="none");const xe=b?(0,H.jsx)(Ii.ZP,{pin:p,...c}):null,be="ShoppingGridShippedMetadataWithVisitButton"===T?{height:"100%"}:{},we=y&&"default"===a.attributionType&&s.ZF.includes(T),Pe=!p.is_promoted&&!r&&we;return(0,H.jsx)(k.Z,{name:"PinRepContainer",children:(0,H.jsx)(B.xu,{"data-test-id":"pin","data-test-pin-id":p.id,onFocus:Z,onBlur:U,onMouseEnter:Z,onMouseLeave:U,dangerouslySetInlineStyle:{__style:be},rounding:"ConversationView"===T?g:void 0,borderStyle:"ConversationView"===T?i:"none",overflow:"ConversationView"===T?"hidden":"visible",children:(0,H.jsx)(Oi,{visualOverlayVisibility:$,savedOverlayVisibility:Q,handleMouseOverPinContent:Pe?Z:()=>{},handleMouseLeavePinContent:Pe?U:()=>{},primaryContent:re,primaryContentVisibility:ee.primaryContentVisibility,secondaryContent:ae,secondaryContentVisibility:ee.secondaryContentVisibility,accessoryContent:pe,accessoryContentVisibility:ee.accessoryContentVisibility,actionBar:me,actionBarVisibility:ee.actionBarVisibility,seeStatsButton:he,footer:_e,selectionState:f,debugContent:ge,signalDebuggerV2Content:fe,signalDebuggerV2ContentVisibility:ee.signalDebuggerV2ContentVisibility,signalDebuggerContent:ve,obscuredPinOverlay:xe,...m,children:(0,H.jsx)(B.xu,{height:"100%",ref:ye,children:(0,H.jsx)(gi,{blockClickEvents:t,showUnavailablePin:S,isHovering:z,onError:d,onLoad:u,pin:p,surface:T,selectionState:f,imageHeightModifier:E,...h})})})})})}));var zi=i(231947),Fi=i(53987);const Zi=(0,n.lazy)((()=>Promise.all([i.e(97270),i.e(46760),i.e(92982)]).then(i.bind(i,576070)))),Bi=["ArticleProductsStory","BoardCoverSelectablePin","BoardNoteSelectablePin","BulkEditMode","CommentReply","EngagementDetails","IdeasHubSeasonalRow","OtherProfilePinGrid","SectionSuggestedPins","SelectableBoardlessPin","TopicBestPinNarrow","TopicBestPinWide"],Ui=["BaseBoardPinGrid","UserProfilePinGrid",...V];function Hi({attributionOption:e,blockClickEvents:t,debugImpressionState:i,disableReaction:u,feedback:p,imageOnlyOption:h="default",pin:m,pinId:g,pinImageCrop:B,pinImageFit:U,resolution:V="default",saveButtonOptions:W,authDesktopSurface:$,trackingParameters:G,...K}){var se,le,ce,de,ue,pe,he,me;const ge=(0,ie.S6)()(g)||m,ve=null!==(se=null===(le=ge.board)||void 0===le?void 0:le.id)&&void 0!==se?se:"",fe=(0,te.gC)()(ve)||ge.board;ge.grid_title=ge.grid_title||m.grid_title;const ye=(0,N.ZP)(),xe=(0,Q.F)(),{checkExperiment:be}=xe,{collaborated_by_me:we,collaborator_count:Pe,is_collaborative:Se}=fe||{},{is_quick_promotable:Te,pinner:Ie,showFeedback:ke,sponsorship:Ee}=ge,{isPromoted:Ae}=(0,a.Z)(ge),Ce=(0,R.Z)(ge),je=(0,Z.Z)(),Re=(0,z.Z)(),{anyEnabled:De}=be("web_m10n_business_access_orbac_www"),{anyEnabled:Oe}=be("web_m10n_business_access_orbac_ga"),Le=Oe?(0,zi.lJ)(je,Re):"",Me=(0,_e.useLocation)(),{slotIndex:Ne,viewParameter:ze}=G,Fe=["AuthHomefeed","BaseBoardPinGrid"].includes($)&&be("web_repin_flow").anyEnabled,Ze=(0,re.x)(),Be=(0,ne.P)(),{appUI:{videosAutoplaying:Ue}}=(0,J.I)(),He=(0,L.Z)(ge.id,Ue),Ve=(0,o.useSelector)((({changeBoardFromToast:e})=>e))||{},We=function(e){const t=e.rich_metadata&&e.rich_metadata.products&&e.rich_metadata.products[0]&&e.rich_metadata.products[0].additional_images;return!!(t&&t.length>0)}(ge),$e=(0,C.Z)(ge),Ge=je.isAuth&&je.isEmployee,Ke=je.isAuth&&((0,j.Z)(je.createdAt)||(0,D.Z)(null,je))&&!je.isPartner;let qe=Ke;"TodayArticleFeed"===$&&(qe=!1),"default"!==h&&(qe="image-only"===h),(0,O.Z)($)&&(qe=!1),"ShoppingSquareGridDomainNoMetadata"===$&&(qe=!0);let Ye=e;(Ke&&!Ye||Be)&&(Ye="image-only");const Xe=(0,A.Z)({feedbackOptions:p,pin:ge,viewParameter:ze},ye),{data:Je}=p||{},Qe="number"==typeof Pe&&Pe>0||Se;let et=!1;"OtherProfilePinGrid"===$?et=!0:"BaseBoardPinGrid"===$?et="dense"===(null==Ze?void 0:Ze.boardPinDensity):"UserProfilePinGrid"===$&&(et="dense"===(null==Ze?void 0:Ze.profilePinDensity));const tt=Boolean(Qe&&"BaseBoardPinGrid"===$),it=(0,F.Z)(),nt=(0,ae.kW)(),ot=nt&&nt[null!==(ce=null===(de=it.data)||void 0===de?void 0:de.id)&&void 0!==ce?ce:""]?nt[null!==(ue=null===(pe=it.data)||void 0===pe?void 0:pe.id)&&void 0!==ue?ue:""]:it.data,rt=(0,I.Z)(je,fe);let at=!1;if(!!(0,_e.matchPath)(Me.pathname,{path:"/:username/_created/",exact:!0}))at=(0,zi.q6)(je,null==ot?void 0:ot.id,Re);else if((0,Fi.am)(Me)||(0,Fi.OJ)(Me)){const e=fe&&fe.owner&&fe.owner.id||"";at=(0,zi.q6)(je,e,Re)}const st=Boolean(je.isAuth&&Ie&&Ie.id===je.id),lt=Boolean(we||Qe&&rt),ct=je.isAuth&&je.isPartner,dt=!(null===(he=ge.story_pin_data)||void 0===he||!he.is_deleted),ut=(0,n.useMemo)((()=>function({hasCarouselData:e,isDeletedStoryPin:t,surface:i}){const n={primaryContent:null,secondaryContent:null,actionBar:T.includes(i)||t?"none":"visible",accessoryContent:e?"visible":"none"};return t||S.includes(i)?(n.primaryContent="none",n.secondaryContent="none"):["HomefeedMoreIdeasTabs","BoardMoreIdeasTabContent"].includes(i)&&(n.primaryContent="visible"),n}({hasCarouselData:$e,isDeletedStoryPin:dt,surface:$})),[$e,dt,$]),pt=(0,n.useMemo)((()=>function({board:e,isDenseView:t,isGroupBoard:i,isInlineBetterSave:n,isOwnBoard:o,isORBACProfileManager:r,isQuickPromotable:a,isRemovable:l,saveButtonOptions:c,surface:d,viewer:u,viewerIsCollaborator:p}){const h=u.isAuth?u.boardCount:void 0;let m=c||function(e=0){return 0===e?{type:"classic"}:{type:"inline"}}(h);a?m={type:"promote"}:(p||o||["OtherProfilePinGrid","UserProfilePinGrid"].includes(d))&&!["BoardlessPins","CreatorProfileActivityPinGrid","CreatorProfileStoryPinGrid","BaseBoardPinGrid"].includes(d)?m={type:"classic"}:(p||o)&&["BaseBoardPinGrid"].includes(d)&&null!=e&&e.name&&e.url&&e.id&&(m={type:"inline",initialSelection:{title:e.name,boardId:e.id,url:e.url}});return n&&(m={type:"inline",hidePinBetterSaveDropdown:"BaseBoardPinGrid"===d}),(l||P.includes(d)||r)&&(m={type:"none"}),{board:e,derivedSaveButtonOptions:m,showLikeButton:p&&i&&s.UP.includes(d),supportsReactionBar:!t}}({board:fe,isInlineBetterSave:Fe,isDenseView:et,isGroupBoard:tt,isOwnBoard:rt,isOwnPin:st,isORBACProfileManager:at,isQuickPromotable:Te,isRemovable:Ce,saveButtonOptions:W,surface:$,viewer:je,viewerIsCollaborator:lt})),[fe,Fe,et,tt,rt,st,at,Te,Ce,W,$,je,lt]),{anyEnabled:ht}=be("web_shopping_grid_metadata_ratings_shipping",{dangerouslySkipActivation:!0});let mt;["ShoppingDynamicHeightGrid","ShoppingGridShippedMetadata","ShoppingSquareGridStorefront","ShoppingSquareGridStorefrontDomain","ShoppingSquareGridDomain","ShoppingSquareGridDomainNoMetadata","ShoppingGridShippedMetadataWithVisitButton"].includes($)&&!Ae&&(mt="white");const _t=(0,n.useMemo)((()=>function({allowProductCarousel:e=!1,shoppingLabelColor:t,surface:i}){return{allowProductCarousel:e,allowShoppingPriceIndicator:s.Wv.includes(i),shoppingLabelColor:t}}({allowProductCarousel:We,shoppingLabelColor:mt,surface:$})),[We,mt,$]),gt=(0,n.useMemo)((()=>function({board:e,feedbackData:t,feedbackType:i,isDenseView:n,isGroupBoard:o,isOwnBoard:s,isORBACProfileManager:u,isORBACBeta:p,isORBACGA:h,pin:m,isRemovable:_,surface:g,viewer:v}){var f;const{isOwnPin:y,isPromoted:x}=(0,a.Z)(m),b=l({isGroupBoard:o,pin:m,surface:g}),w=e&&(0,r.Z)({action:4,board:e,viewer:v})||y,P=m.savedInfo&&m.savedInfo.localPinId,S=Boolean(s&&!o||"UserProfilePinGrid"===g&&w||P),T=Boolean(o&&w||S||u&&(!(0,c.hy)(m.story_pin_data_id)||p)),I=Boolean((null==e?void 0:e.is_collaborative)||S),k=!(x||s||o||d.includes(g)||u),E=(({surface:e,isORBACProfileManager:t,isORBACGA:i,isRemovable:n})=>"CloseupRelatedProducts"!==e&&!n&&(!t||null==i||i))({surface:g,isORBACProfileManager:u,isORBACGA:h,isRemovable:_}),{tracked_link:A,link:C}=m,j=!(null===(f=null!=A?A:C)||void 0===f||!f);let R=o&&n?"equally-spaced":"default",D="default";return n&&(D=o?"icon-only":"truncated-text"),n&&["UserProfilePinGrid","BaseBoardPinGrid","BoardlessPins"].includes(g)&&(D="icon-only",R="equally-spaced"),{actionBarEditBeforeShare:I,feedbackData:t,feedbackType:i,layout:R,pinTitle:b,showEditButton:T,showOverflowMenu:k,showShareButton:E,showSourceLinkButton:j,sourceLinkStyle:D}}({board:fe,feedbackData:Je,feedbackType:Xe,isDenseView:et,isGroupBoard:tt,isOwnBoard:rt,isORBACProfileManager:at,isORBACBeta:De,isORBACGA:Oe,isRemovable:Ce,pin:ge,surface:$,viewer:je})),[fe,Je,Xe,et,tt,rt,at,De,Oe,Ce,ge,$,je]),vt=(0,_.rh)(ge,je,xe,Le)&&Ui.includes($)&&(st||Oe&&at),ft=["ShoppingCatalogsProductsMetadata","ShoppingDynamicHeightGrid","ShoppingSquareGridDomain","ShoppingSquareGridDomainNoMetadata","ShoppingGridShippedMetadata","ShoppingGridShippedMetadataWithVisitButton","ShoppingSquareGridStorefront","ShoppingSquareGridStorefrontDomain"].includes($),yt=!Ae&&ft?"shopping":"standard";let xt=(u||"CreatorProfileStoryPinGrid"!==$||st)&&(0,q.J6)(ge,dt);const bt=(0,oe.Xx)();xt=!Be&&xt;const wt=(0,n.useMemo)((()=>v({attributionOption:Ye,board:fe,contentType:yt,experimentsClient:xe,feedbackData:Je,feedbackType:Xe,hasCarouselData:$e,isGroupBoard:tt,isORBACProfileManager:at,isOwnBoard:rt,pin:ge,showImageOnly:qe,showNativeReactions:xt,showPromotedShoppingPrice:ht&&Ae&&ft,surface:$,viewer:je,variantData:bt})),[Ye,fe,yt,xe,Je,Xe,$e,tt,at,rt,Ae,ft,ge,ht,qe,xt,$,je,bt]),Pt=!!ge.story_pin_data_id,St=ge.created_at?new Date(ge.created_at):null,Tt=(0,ee.pN)({isOwnPin:st,isStoryPin:Pt,pinCreationDate:St,surface:$});let It=Boolean(wt.pinTitle||wt.contentType||wt.userNote||wt.showSource||"none"!==wt.attributionType||wt.showNativeReactions||wt.productCurrentPrice||wt.productOriginalPrice||wt.showPinStats)||tt;"BaseBoardPinGrid"===$&&rt&&ct||Ee?It=!0:Bi.includes($)||et&&(rt||we)?It=!1:st||"CreatorProfileStoryPinGrid"!==$&&"CreatorProfileActivityPinGrid"!==$||(It=!1),!Be||Ae||Ee||(It=!1);const kt=Boolean(ke),Et={showNoPinBorderRadius:"TopicBestPinNarrow"===$||"TopicBestPinWide"===$||"ConversationView"===$,showPromotedPinBorderTreatment:"BaseBoardPinGrid"===$&&Ae,shouldUseLegoWash:!0},At={feedbackType:Xe},{anyEnabled:Ct}=be("ads_desktop_video_ads",{dangerouslySkipActivation:!0}),jt=(0,n.useMemo)((()=>function({hasCarouselData:e,isDenseView:t,isSocialSeasonalBoard:i,pinImageCrop:n,pinImageFit:o,resolution:r,showPromotedVideos:a,surface:l}){const c=s.zl.includes(l);let d="backend";"CloseupRelatedProducts"===l?d={height:w.GZ,width:w.OE}:"TopicBestPinWide"===l?d={height:b.m9,width:b.BS}:"TopicBestPinNarrow"===l?d={height:b._5,width:b.A6}:["ArticleProductsStory","ShoppingSquareGridCrop","ShoppingSquareGridDomainNoMetadata"].includes(l)||c?d={height:w.zX,width:w.zX}:n&&(d=n);let u="none",p=null!=r?r:"default";"string"!=typeof d&&(u="cover",(c||"ShoppingDynamicHeightGrid"===l&&!o||"ShoppingSquareGridDomainNoMetadata"===l)&&(u="contain",p="high-res"));const h=c||["ShoppingSquareGridDomainNoMetadata","ShoppingDynamicHeightGrid"].includes(l)?"transparent":"dominant",m=(0,y.e)(l);return{autoplaySettingOff:"undefined"!=typeof window&&0===x.Xb.getItem(f.Z.VIDEO_AUTOPLAY_LOCAL_STORAGE_KEY),fallbackColor:h,imageFit:u,isDenseView:t,isSocialSeasonalBoard:i,resolution:p,rootMargin:m,pinImageCrop:d,showCarousel:e&&!["ShoppingSquareGridStorefrontDomain","ShoppingSquareGridStorefront"].includes(l),showPromotedVideos:a}}({hasCarouselData:$e,isDenseView:et,isPromoted:Ae,isSocialSeasonalBoard:!1,pinImageCrop:B,pinImageFit:U,resolution:V,showPromotedVideos:Ct,surface:$})),[$e,et,Ae,B,U,V,Ct,$]),Rt=Ge&&void 0!==(0,Pi.Z)().debug_impression_log,Dt=(0,n.useMemo)((()=>({debugImpressionState:i,slotIndex:Ne})),[i,Ne]),Ot=(0,n.useMemo)((()=>({surface:$})),[$]);return(0,H.jsx)(k.Z,{name:"PinRepConfiguration",children:(0,H.jsx)(X.B,{value:G,children:(0,H.jsxs)(Y.B,{value:Ot,children:[(0,H.jsx)(Ni,{actionBarProps:gt,blockClickEvents:t,currentlyPlayingVideo:He,footerProps:wt,impressionsDebuggerProps:Dt,obscuredPinOverlayProps:At,pin:ge,pinVisualProps:jt,presentationProps:Et,primaryContentProps:pt,secondaryContentProps:_t,showFooter:It||Tt,showImpressionsDebugger:Rt,showObscuredPinOverlay:kt,showSeeStatsButton:vt,showSignalDebugger:Ge,showUnavailablePin:dt,surface:$,visibilityOverrides:ut,...E(K,["pinId"])}),Ve.shouldOpenModal&&Ve.newPin&&(null===(me=Ve.originalPin)||void 0===me?void 0:me.id)===ge.id&&(0,H.jsx)(k.Z,{name:"SafeSuspense_PinRepConfiguration_ChangeBoardModal",children:(0,H.jsx)(M.Z,{children:(0,H.jsx)(Zi,{experience:Ve.experience,newPin:Ve.newPin})})})]})})})}},656226:(e,t,i)=>{i.r(t),i.d(t,{default:()=>x});var n=i(667294),o=i(564194),r=i(768559),a=i(605028),s=i(868565),l=i(905723),c=i(152028),d=i(883119),u=i(785893);const p={overlay:{__style:{backgroundColor:"#000"}}};function h(e){var t,i,o,r;const{pin:{id:a,images:s,title:h,videos:m,video_status_message:_}}=e,g=_||{},v=s&&s["236x"],f=m&&(null===(t=m.video_list)||void 0===t?void 0:t[l.Z.V_HLSV4]),{duration:y}=f||{};return(0,u.jsx)(n.Fragment,{children:(0,u.jsx)(d.Zb,{children:(0,u.jsxs)(d.iP,{role:"link",href:`/pin/${a}`,rounding:2,children:[(0,u.jsxs)(d.xu,{overflow:"hidden",position:"relative",rounding:2,children:[v&&(0,u.jsx)(d.Ee,{alt:h||"",color:"lightGray",naturalHeight:null!==(i=v.height)&&void 0!==i?i:1,naturalWidth:null!==(o=v.width)&&void 0!==o?o:1,src:null!==(r=v.url)&&void 0!==r?r:""}),!!y&&(0,u.jsx)(d.xu,{padding:2,position:"absolute",bottom:!0,left:!0,display:"flex",children:(0,u.jsx)(c.Z,{duration:y})}),(0,u.jsx)(d.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,opacity:.4,dangerouslySetInlineStyle:p.overlay}),(0,u.jsxs)(d.xu,{position:"absolute",top:!0,left:!0,padding:5,width:"100%",children:[(0,u.jsx)(d.X6,{color:"light",overflow:"normal",size:"400",children:g.title}),(0,u.jsx)(d.xu,{marginTop:4,children:(0,u.jsx)(d.xv,{color:"light",size:"200",overflow:"normal",children:g.subtitle})})]})]}),(0,u.jsx)(d.xu,{display:"flex",alignItems:"start",justifyContent:"between",marginTop:1,paddingX:1,children:(0,u.jsx)(d.xu,{flex:"grow",children:h&&(0,u.jsx)(d.xu,{paddingY:1,children:(0,u.jsx)(d.xv,{inline:!0,size:"200",weight:"bold",children:h})})})})]})})})}var m=i(623568),_=i(350118),g=i(276775),v=i(813401),f=i(745868),y=i(35495);function x({trackingParams:e,objectIdStr:t,impressionData:i,auxData:l,componentType:c,slotIndex:d,viewData:p,viewParameter:x,viewType:b,pin:w,pinId:P,...S}){var T,I,k,E,A,C;const j=(0,g.useLocation)(),R=(0,_.S6)(),D=(P?R(P):null)||w,O=!(null===(T=D.story_pin_data)||void 0===T||!T.is_deleted),L=e||(0,r.Z)({boardUrl:null===(I=D.board)||void 0===I?void 0:I.url,callToCreateSourcePinId:D.call_to_create_source_pin_id,location:j,pinId:D.id,pinnerUserName:null===(k=D.pinner)||void 0===k?void 0:k.username,storyPinDataId:D.story_pin_data_id,trackingParams:D.tracking_params,trackingParamsMap:D.tracking_params_map}),M=(0,s.Z)(D),N=!!(M&&M.url&&M.height&&M.width)||void 0,z=M&&D.videos?D.videos.id:void 0,[F,Z]=(0,n.useState)(!1),B=(0,n.useCallback)((()=>Z(!O)),[O]),U=(0,n.useCallback)((()=>Z(!1)),[]),H=(0,v.yz)(),{isLeadPin:V}=(0,a.Z)(D);var W;V&&(l={lead_form_id:null===(W=D.promoted_lead_form)||void 0===W?void 0:W.lead_id});return(0,u.jsx)(o.Z,{componentType:c,contextLogData:{pwa_type:H,...l,...(0,y.Kl)(D,l)},impressionAuxFields:{...i||{},isNativeVideoAndWatchable:N,videoIdStr:z,clientTrackingParams:L||`${D.tracking_params||""}-0`,imageURL:null!==(E=null===(A=D.images)||void 0===A||null===(C=A["236x"])||void 0===C?void 0:C.url)&&void 0!==E?E:"",richTypes:(0,y.GT)(D)},impressionType:"Pin",isPaused:!F,loggingId:D.id,slotIndex:d,objectIdStr:t,viewData:p,viewParameter:x,viewType:b,children:(0,m._J)(D)?(0,u.jsx)(h,{pin:D}):(0,u.jsx)(f.Z,{...S,debugImpressionState:F?"started":"paused",onError:U,onLoad:B,pin:D,pinId:P,trackingParameters:{componentType:c,contextLogData:l,slotIndex:d,viewParameter:x,viewType:b}})})}},180549:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(898781),o=i(883119),r=i(276775),a=i(558068),s=i(785893);function l({pinId:e,isShopping:t}){const i=(0,n.ZP)(),l=(0,r.useHistory)(),{previous:c}=(0,a.Hv)();return(0,s.jsx)(o.hU,{accessibilityLabel:i._('Go back', 'Accessible icon for close button', 'Accessible icon for close button'),icon:t?"cancel":"directional-arrow-left",iconColor:"darkGray",onClick:()=>{0!==c.length?l.goBack():l.replace(`/pin/${e}/`)}})}},99739:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(305791),o=i(599611);const r=({initialCropArea:e,pin:t,disableInitialCrop:i,imageSignature:r})=>{let a;if(e)a={...e};else{const{visual_objects:e}=t,{width:s,height:l}=(0,n.Z)({pin:t,imageSignature:r});if(i)a={x:0,y:0,w:s,h:l};else if(e&&e.length){const{x:t,y:i,w:n,h:r}=e[0];a=(0,o.Z)({cropArea:{x:t,y:i,w:n,h:r},scaledWidth:s,scaledHeight:l})}else{const[e,t]=[s/6,l/6],[i,n]=[s-2*e,l-2*t];a={x:e,y:t,w:i,h:n}}}return{x:Math.floor(a.x),y:Math.floor(a.y),w:Math.floor(a.w),h:Math.floor(a.h)}}},243943:(e,t,i)=>{i.d(t,{Xx:()=>m,wA:()=>u,wH:()=>h});var n=i(667294),o=i(752802),r=i(835209),a=i(407043),s=i(789707),l=i(533655),c=i(785893);const d=(0,n.createContext)(undefined),u=e=>{const{variant_set:t}=(0,r.Z)({richPinData:e.rich_metadata})||{},{dimension_metadata:i,variants:n}=t||{};if(!i||!n)return!1;const o=i.find((e=>{var t;return"color"===(null===(t=e.name)||void 0===t?void 0:t.toLowerCase())}));return!!(o&&o.name&&o.values&&1!==o.values.length)},p=({pinId:e,children:t,dimensionMetadata:i,primaryDimName:r,variants:u,primaryDimensionThumbnailImages:p})=>{const h=(0,n.useCallback)((({selectedMap:e})=>{const t=(0,l.B)({dimensionMetadata:i,primaryDimName:r,primaryDimensionThumbnailImages:p,defaultStatus:"invalid"});return(0,l.U0)({variantMap:t,selectedMap:e,variants:u}),t}),[i,r,p,u]),{logContextEvent:m}=(0,a.v)(),_=u.find((e=>e.is_preselected)),g=(0,s.a)(),{pinsState:v,setPinState:f}=g||{},y=v&&v[e],x=y?y.selectedMap:(0,l.O5)(u),b=y?y.selectedVariants:(0,l.x1)({selectedMap:x,variants:u}),w=y?y.variantMap:h({selectedMap:x}),P=!!y&&y.isSelectedByUser,S=y?y.variantUrl:(null==_?void 0:_.pin_id)||e,T=(0,n.useCallback)(((t,i=!1)=>{const n=(0,l.x1)({selectedMap:t,variants:u}),o={selectedMap:t,selectedVariants:n,variantMap:h({selectedMap:t}),isSelectedByUser:i,variantUrl:""},r=n[0].pin_id;r&&(o.variantUrl=r),f&&f(e,o)}),[h,e,f,u]),I=(0,n.useCallback)((()=>{const e=(0,l.O5)(u);T(e)}),[T,u]),k=(0,n.useCallback)((({dimensionName:e,variant:t,isAutoSelection:i=!1})=>{var n;const o=null===(n=w[e])||void 0===n?void 0:n.find((({value:e})=>e===t));try{if(!o)throw new Error(`Unable to find the selected variant ${e}: ${t}`);if(x[e]===t)return;const n={..."invalid"!==o.status?x:{},[e]:t},r=(0,l.i8)({variantMap:w,status:"invalid"});(0,l.U0)({variantMap:r,selectedMap:n,variants:u}),T(n,!i),m({event_type:10240,component:14092})}catch(r){throw I(),r}}),[w,x,u,T,I,m]),{title:E}=b[0],A=(0,o.Z)({images:(b[0].additional_images||[])[0].canonical_images}),C=(0,l.$b)(b),j=(0,n.useMemo)((()=>{const e=((null==_?void 0:_.dimensions)||{})[r],t=w[r]||[];let n=t;if(e&&t){const i=t.find((t=>t.value===e));i&&(n=[i,...t.filter((t=>t.value!==e))])}return{dimensionMetadata:i,offerSummary:C,primaryVariants:n,primaryDimName:r,selectedMap:x,isSelectedByUser:P,selectVariant:k,title:E,variants:u,image:A,variantUrl:S}}),[_,r,w,i,C,x,P,k,E,u,A,S]);return(0,c.jsx)(d.Provider,{"data-test-id":"safe-product-pins-feed-context-provider",value:j,children:t})},h=({children:e,pin:t,isEligible:i})=>{if(!i)return(0,c.jsx)(d.Provider,{"data-test-id":"undefined-context-provider",value:void 0,children:e});const{variant_set:n}=(0,r.Z)({richPinData:t.rich_metadata})||{},{dimension_metadata:o,primary_dimension_thumbnail_images:a,variants:s}=n||{},l=null==o?void 0:o.find((e=>{var t;return"color"===(null===(t=e.name)||void 0===t?void 0:t.toLowerCase())}));return(0,c.jsx)(p,{pinId:t.id,dimensionMetadata:o||[],primaryDimName:(null==l?void 0:l.name)||"",primaryDimensionThumbnailImages:a,variants:s||[],children:e})},m=()=>(0,n.useContext)(d)},789707:(e,t,i)=>{i.d(t,{A:()=>a,a:()=>s});var n=i(667294),o=i(785893);const r=(0,n.createContext)(void 0),a=({children:e})=>{const[t,i]=(0,n.useState)({}),a=(0,n.useMemo)((()=>({setPinState:(e,n)=>{i({...t,[e]:{...t[e]||{},...n}})},pinsState:t})),[t]);return(0,o.jsx)(r.Provider,{value:a,children:e})},s=()=>(0,n.useContext)(r)},341866:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(229428);function o({pin:e}){const{visual_objects:t}=e||{};return(0,n.k)(t||[])}},104389:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(831539),o=i(869503),r=i(474236),a=i(883119),s=i(785893);const l=({count:e,countFormat:t,ratingValue:i,shippingInfo:l})=>(0,s.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,s.jsx)(n.Z,{count:e,countFormat:t,rating:i,textSize:"200"}),(0,s.jsx)(a.xu,{marginTop:(0,r.Z)({count:e,rating:i})?1:0,children:(0,s.jsx)(o.Z,{customStyles:{color:"subtle",size:"200"},freeShippingPrice:null==l?void 0:l.free_shipping_price,freeShippingValue:null==l?void 0:l.free_shipping_value})})]}),c=({count:e,countType:t,countFormat:i,ratingValue:l,shippingInfo:c})=>(0,s.jsxs)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{rowGap:8}},display:"flex",marginTop:1,wrap:!0,children:[(0,s.jsx)(n.Z,{count:e,countFormat:i,countType:t,rating:l,textSize:"300"}),(0,s.jsx)(o.Z,{customStyles:{color:"default",size:"300"},showPrevDot:(0,r.Z)({count:e,rating:l}),freeShippingPrice:null==c?void 0:c.free_shipping_price,freeShippingValue:null==c?void 0:c.free_shipping_value})]});function d(e){return e.isGridView?(0,s.jsx)(l,{...e}):(0,s.jsx)(c,{...e})}},533655:(e,t,i)=>{i.d(t,{$b:()=>l,A6:()=>d,B:()=>o,O5:()=>u,U0:()=>s,i8:()=>r,x1:()=>p,xD:()=>c});var n=i(752802);const o=({defaultStatus:e="available",dimensionMetadata:t,primaryDimName:i,primaryDimensionThumbnailImages:o})=>{const r={};for(const{values:n,name:a}of t)a&&n&&(r[a]=n.map((t=>({status:e,value:t}))));return(r[i]||[]).forEach(((e,t)=>{const i=o&&o[t.toString()];i&&(e.image=(0,n.Z)({images:i.canonical_images}))})),r},r=({status:e,variantMap:t})=>{const i={};for(const o in t){var n;i[o]=null===(n=t[o])||void 0===n?void 0:n.map((t=>({...t,status:e})))}return i},a=({dimensionName:e,variants:t,selectedTuple:i,variantStatuses:n})=>{const o=i.filter((([t])=>t!==e));for(const{dimensions:r={},offer_summary:a={}}of t){if(!o.every((([e,t])=>r[e]===t)))continue;const t=n.find((({value:t})=>t===r[e]));t&&(t.status=a.in_stock||"available"===t.status?"available":"outOfStock")}},s=({variants:e,selectedMap:t={},variantMap:i})=>{const n=Object.entries(t);for(const o in i){const t=i[o];t&&a({dimensionName:o,variants:e,selectedTuple:n,variantStatuses:t})}},l=e=>{let t,i,n,o,r=!1;const{percentage_off:a,standard_price:s}=1===e.length&&e[0].offer_summary||{};for(const l of e){const{max_price:e,max_price_val:a,min_price:s,min_price_val:c,price:d,price_val:u,price_in_micro_currency:p,in_stock:h}=l.offer_summary||{},m=u||Number(p);"number"==typeof c&&Number.isFinite(c)&&"number"==typeof a&&Number.isFinite(a)&&((void 0===i||c<i)&&(i=c,t=s),(void 0===o||a>o)&&(o=a,n=e),r=r||!!h),Number.isFinite(m)&&((null==i||m<i)&&(i=m,t=d),(null==o||m>o)&&(o=m,n=d),r=r||!!h)}if(n&&t)return t===n?{in_stock:r,percentage_off:a,price:t,standard_price:s}:{in_stock:r,max_price:n,min_price:t,percentage_off:a,price:t,standard_price:s}},c=(e,t)=>e.length===t.length&&e.every(((e,i)=>{var o,r;return(null===(o=(0,n.Z)({images:e.canonical_images}))||void 0===o?void 0:o.url)===(null===(r=(0,n.Z)({images:t[i].canonical_images}))||void 0===r?void 0:r.url)})),d=e=>{const t=new Set;return e.filter((e=>{const{url:i}=(0,n.Z)({images:e.canonical_images})||{};return!!i&&(!t.has(i)&&(t.add(i),!0))}))||[]},u=e=>{var t;const i={...(null===(t=e.find((e=>!!e.is_preselected)))||void 0===t?void 0:t.dimensions)||{}};for(const n in i)i[n]||delete i[n];return i},p=({selectedMap:e,variants:t})=>t.filter((({dimensions:t={}})=>{for(const i in e){const n=e[i];if(t[i]!==n)return!1}return!0}))},362810:(e,t,i)=>{i.d(t,{Z:()=>g});var n=i(667294),o=i(116303),r=i(841509),a=i(564194),s=i(525199),l=i(149230),c=i(310227),d=i(407043),u=i(883119),p=i(785893);const h={backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"18px",color:"#111",fontSize:"10px",fontWeight:"600",height:"24px",lineHeight:"24px",padding:"0 6px"};function m({productPin:e,isTopRow:t,disablePrice:i}){var n,o,r,a;if(!e)return null;const{title:s,description:l,images:c}=e||{},d=null===(n=e.rich_summary)||void 0===n?void 0:n.products,m=d&&d[0]||null,_=((null==m?void 0:m.offer_summary)||{}).price,g=c["474x"]||{};return(0,p.jsxs)(u.zd,{wash:!0,height:t?217:168,width:t?236:117,children:[(0,p.jsx)(u.Ee,{alt:s||l,fit:"cover",naturalHeight:null!==(o=g.height)&&void 0!==o?o:1,naturalWidth:null!==(r=g.width)&&void 0!==r?r:1,src:null!==(a=g.url)&&void 0!==a?a:""}),!!_&&!i&&(0,p.jsx)(u.xu,{margin:1,paddingY:1,paddingX:2,dangerouslySetInlineStyle:{__style:{...h}},"data-test-id":"shopping-upsell-price",left:!0,top:!0,position:"absolute",children:_})]})}const _={container:{borderRadius:`${c.Oc}px ${c.Oc}px 25px 25px`,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},content:{marginBottom:"2px"},visualOverlay:{backgroundColor:"rgba(0, 0, 0, .1)"}};function g({dangerouslySetActionUrl:e,query:t,story:i,slotIndex:c}){const{logContextEvent:h}=(0,d.v)(),{action:g,id:v,objects:f,story_type:y,subtitle:x}=i,{text:b,url:w}=g,[P,S]=(0,n.useState)(!1),T=(0,n.useCallback)((()=>S(!0)),[S]),I=(0,n.useCallback)((()=>S(!1)),[S]),k=["related_domain_collage","related_products_collage"].includes(y)?1:0,E=f[0].domain;let A,C;const j={};j.story_type=y,["search_product_collage_story","shop_article_story"].includes(y)?(A=2,C=43,j.story_id=v,j.entered_query=t):"shop_brand_story"===y||"shop_brand_affinity_story"===y?(A=1,C=92,E&&(j.commerce_data=JSON.stringify({domain:E}))):["stela_in_flashlight_card","stela_in_flashlight_onecol"].includes(y)?(A=72,C=3050):"related_domain_collage"===y?(A=72,C=3455):"related_products_collage"===y&&(A=1,C=3177);const R=x?4:2;let D,O;if(["related_domain_collage","shop_brand_story","shop_brand_affinity_story"].includes(y)){const e=g.user;D=e&&(e.image_medium_url||e.image_large_url),O=e&&e.full_name}const L=e||w,M=(0,l.Z)({url:L})?"nofollow":"none";return(0,p.jsx)(a.Z,{componentType:200,contextLogData:j||{},impressionType:"Story",loggingId:y,slotIndex:c,viewParameter:C,viewType:A,children:(0,p.jsx)(u.iP,{role:"link",rel:M,href:L,onTap:()=>h({event_type:101,element:372,component:200,view_type:A,view_parameter:C,aux_data:{story_type:y}}),children:(0,p.jsxs)(u.xu,{overflow:"hidden",position:"relative",onMouseEnter:T,onMouseLeave:I,dangerouslySetInlineStyle:{__style:_.container},children:[(0,p.jsxs)(u.xu,{overflow:"hidden",rounding:4,children:[(0,p.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:_.content},children:(0,p.jsx)(m,{productPin:f[k],isTopRow:!0})}),(0,p.jsxs)(u.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,p.jsx)(m,{productPin:f[k+1]}),(0,p.jsx)(m,{productPin:f[k+2]})]})]}),(0,p.jsx)(u.xu,{color:"secondary",display:"flex",paddingX:3,alignItems:"center",justifyContent:"center",marginTop:2,paddingY:R,rounding:"pill",children:(0,p.jsxs)(u.xu,{justifyContent:"center",alignContent:"start",display:"flex",direction:"column",margin:2,children:[x?(0,p.jsx)(u.xu,{marginBottom:1,children:(0,p.jsx)(u.xv,{align:"start",color:"subtle",children:x.format})}):null,(0,p.jsx)(u.xv,{align:"start",weight:"bold",children:b})]})}),O&&D&&(0,p.jsx)(u.xu,{position:"absolute",right:!0,top:!0,margin:2,children:(0,p.jsx)(o.Z,{name:O,size:"md",src:D,outline:!0})}),(0,p.jsx)(s.Z,{visibility:P?"visible":"none",children:(0,p.jsx)(r.Z,{additionalStyles:_.visualOverlay})})]})})})}},807592:(e,t,i)=>{function n(e){const{max_price:t,min_price:i,price:n}=e;return t&&i?`${i}-${t}`:n}i.d(t,{Z:()=>n})},859704:(e,t,i)=>{i.d(t,{F:()=>n,p:()=>o});const n=e=>({type:"PIN_BUILDER_LOADED_IMAGES",payload:e}),o=e=>({type:"UPDATE_PIN_BUILDER_INPUT",payload:e})},586542:(e,t,i)=>{i.d(t,{By:()=>l,IT:()=>s,N6:()=>o,br:()=>r,lU:()=>a});var n=i(6637);const o=(e,t)=>({type:"UPDATE_CURRENT_SEARCH",payload:{query:e,scope:t}}),r=(e,t)=>({type:"UPDATE_RECENT_SEARCHES",payload:{query:e,scope:t}}),a=(e,t,i)=>o=>{n.Z.create("ApiResource",{url:"/v3/search/recent/",data:{vertical:e}}).callDelete().then(t,i),o("PERSONAL"===e?{type:"CLEAR_RECENT_PERSONAL_SEARCHES"}:{type:"CLEAR_RECENT_SEARCHES"})},s=(e,t,i,o)=>r=>{n.Z.create("ApiResource",{url:"/v3/search/recent/",data:{query:e,vertical:t}}).callDelete().then(i,o),r("PERSONAL"===t?(e=>({type:"CLEAR_RECENT_PERSONAL_SEARCH",payload:{query:e}}))(e):(e=>({type:"CLEAR_RECENT_SEARCH",payload:{query:e}}))(e))},l=e=>t=>{t((e=>({type:"RELOAD_VISUAL_SEARCH_ANNOTATIONS",payload:{pinId:e}}))(e))}},987197:(e,t,i)=>{i.d(t,{OF:()=>d,Q_:()=>r,b8:()=>a,eR:()=>c});var n=i(962832),o=i(6637);const r=(e,t)=>i=>o.Z.create("UserStateResource",{state:e,value:t}).callCreate(),a=(e,t,i)=>(r,a)=>{o.Z.create("ApiResource",{url:"/v3/users/me/"}).callCreate().then((()=>{i({event_type:48,object_id_str:a().session.userId}),e(),(0,n.Dm)()}),t)};const s=async(e,t,i)=>{var n;const r=await o.Z.create("VIPResource",{upload_ids:[e]}).callGet();if(null!==(n=r.resource_response)&&void 0!==n&&n.data[e]){const n=r.resource_response.data[e],{status:o,signature:a}=n;if("processing"===o||"registered"===o)setTimeout((async()=>{s(e,t,i)}),5e3);else if("succeeded"===o){const e=((e,t="150x150")=>e&&`https://i.pinimg.com/${t}/${e.substring(0,2)}/${e.substring(2,4)}/${e.substring(4,6)}/${e}.jpg`||"")(a);t(e)}else i()}else i()},l=e=>new Promise(((t,i)=>{var n,r,a,l,c;n=e,r="pinimage",a=()=>{},l=e=>{t(e)},c=e=>{i(e)},(new FormData).append("img",n),o.Z.create("VIPResource",{type:r}).callCreate().then((e=>{var t;if(null!==(t=e.resource_response)&&void 0!==t&&t.data){const{upload_id:t,upload_url:i,upload_parameters:o}=e.resource_response.data,r=new XMLHttpRequest;r.open("POST",i,!0),r.onload=()=>{var e;(e=r.status)>=200&&e<400?(a(100),s(t,l,c)):c()},r.upload.onprogress=e=>{const t=Math.round(100*e.loaded/e.total);a(t)};const d=new FormData;for(const e in o)d.append(e,o[e]);d.append("file",n),r.send(d)}}),(()=>{c()}))})),c=e=>new Promise(((t,i)=>{"string"==typeof e?e.startsWith("data")&&l(function(e,t=512){const i=e.split(";"),n=i[0].split(":")[1],o=i[1].split(",")[1],r=atob(o),a=[];for(let s=0;s<r.length;s+=t){const e=r.slice(s,s+t),i=new Array(e.length);for(let t=0;t<e.length;t+=1)i[t]=e.charCodeAt(t);const n=new Uint8Array(i);a.push(n)}return new Blob(a,{type:n})}(e)).then((e=>t(e))):i("Invalid Image")})),d=e=>()=>o.Z.create("ApiResource",{url:"/v3/register/exists/",data:{email:e}}).callGet()},606441:(e,t,i)=>{i.d(t,{N:()=>o});var n=i(702664);function o(e){return(0,n.useSelector)((({pins:t})=>e?t[e]:null),n.shallowEqual)}},524309:(e,t,i)=>{i.d(t,{Qi:()=>c,RK:()=>l,$_:()=>s});var n=i(766935);var o=i(957161);const r="REDUX_STATE",a=()=>!!navigator.serviceWorker,s=()=>a()&&JSON.parse((0,o.qn)(r))||{},l=e=>(0,n.Z)((t=>{const i={};i[e]=t,a()&&(e=>{if(window.requestIdleCallback)return window.requestIdleCallback(e);{const t=Date.now();setTimeout((()=>{e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))})}),1)}})((()=>(e=>{a()&&(0,o.Nh)(r,JSON.stringify({...s(),...e}))})(i)))}),1e3),c=()=>{(0,o.L_)(r)}},157796:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294),o=i(883119),r=i(785893);function a({color:e="red",duration:t,finalProgress:i,shape:a="pill"}){const[s,l]=(0,n.useState)(!1);(0,n.useEffect)((()=>{const e=setTimeout((()=>{l(!0)}),0);return()=>{clearTimeout(e)}}),[]);const c="pill"===a;return(0,r.jsx)(o.xu,{color:e,height:c?8:6,rounding:c?"pill":2,width:`${i}%`,dangerouslySetInlineStyle:{__style:{transform:c?`translateX(${s?"-5px":"-100%"})`:`scaleX(${s?1:0})`,transformOrigin:"left",transitionDuration:`${t}ms`,transitionTimingFunction:"ease-in"}}})}},23086:(e,t,i)=>{i.d(t,{Z:()=>E});var n=i(116303),o=i(898781),r=i(349700),a=i(867820),s=i(883119),l=i(785893);const c=()=>{(0,a.NC)("click_best_pin_board",!0)},d=()=>{(0,a.NC)("click_best_pin_profile",!0)},u=e=>{const{pinner:t}=e,{username:i,full_name:o}=t,r=t.image_medium_url||t.image_small_url,a=`/${i}/`;return(0,l.jsx)(s.iP,{fullWidth:!1,rounding:"circle",role:"link",href:a,onTap:d,children:(0,l.jsx)(n.Z,{size:"sm",src:null!=r?r:"",name:null!=o?o:"",outline:!0})})},p=e=>{const t=(0,o.ZP)(),{board:i,pinner:n}=e,{name:a,privacy:u,url:p}=i,h=i.id||"",{username:m,full_name:_}=n,g=`/${m}/`,v=(0,l.jsx)(s.xv,{inline:!0,size:"200",weight:"bold",children:(0,l.jsx)(s.rU,{display:"inlineBlock",href:g,onClick:d,underline:"hover",children:_})},_);return"protected"===u?(0,r.nk)(t._('{{ pinnerName }} saved this Pin', 'Showing who saved this pin, but not which board (private board), on closeup', 'Showing who saved this pin, but not which board (private board), on closeup'),{pinnerName:v}):(0,r.nk)(t._('{{ pinnerName }} saved to {{ boardName }}', 'Showing who saved this pin to which board on closeup', 'Showing who saved this pin to which board on closeup'),{pinnerName:v,boardName:(0,l.jsx)(s.xv,{inline:!0,size:"200",weight:"bold",children:(0,l.jsx)(s.rU,{href:null!=p?p:"",onClick:c,children:a},"board")},h)})},h=e=>{const{pin:t}=e,{pinner:i={},board:n={}}=t;return(0,l.jsxs)(s.xu,{display:"flex",direction:"row",alignItems:"center",marginTop:3,"data-test-id":"pin-attribution",children:[(0,l.jsx)(u,{pinner:i}),(0,l.jsx)(s.xu,{marginEnd:2}),(0,l.jsx)(s.xv,{size:"200",children:(0,l.jsx)(p,{board:n,pinner:i})})]})};var m=i(692627),_=i(112690);const g=e=>{e.target&&e.target.style&&(e.target.style["text-decoration"]="underline")},v=e=>{e.target&&e.target.style&&(e.target.style["text-decoration"]="none")};function f({pageType:e,pinCreditPrefix:t,pin:i,pinLink:n}){var c,d;const u=(0,o.ZP)(),p=(0,_.Z)();if("topic"!==e.page&&(!i.domain||"Uploaded by user"===i.domain))return null;const h="topic"!==e.page||e.isAuth?"100":"200",f="topic"===e.page&&!!i.native_creator,y=f?null===(c=i.native_creator)||void 0===c?void 0:c.full_name:i.domain;return(0,l.jsx)(s.xu,{display:"flex",flex:"none",justifyContent:"start",marginBottom:2,children:(0,l.jsx)(s.rU,{display:"inlineBlock",href:f?`/${(null===(d=i.native_creator)||void 0===d?void 0:d.username)||""}/`:n,onClick:()=>{var t,n,o;"topic"===e.page?(0,a.NC)("click_topic_best_pin_link"):p({event_type:12,view_type:3,object_id_str:i.id,component:85,view_parameter:(0,m.Z)({hasPin:!!i,hasPinRichMetadata:!!i.rich_metadata,hasPinRichMetadataProducts:!(null===(t=i.rich_metadata)||void 0===t||!t.products),hasPinRichMetadataArticle:!(null===(n=i.rich_metadata)||void 0===n||!n.article),hasPinRichMetadataRecipe:!(null===(o=i.rich_metadata)||void 0===o||!o.recipe),hasPinStoryPinData:!!i.story_pin_data})})},rel:"nofollow",target:"blank",underline:"hover",children:(0,l.jsx)(s.xv,{size:h,children:(0,r.nk)(u._('{{ pinCreditPrefix }} {{ pinCredit }}', 'Tells the user where the pin is from in the form of "Saved from <website>"', 'Tells the user where the pin is from in the form of "Saved from <website>"'),{pinCreditPrefix:t,pinCredit:(0,l.jsx)(s.xv,{inline:!0,size:h,weight:"bold",children:"topic"===!e.page?(0,l.jsxs)("span",{onMouseOver:g,onMouseLeave:v,onFocus:g,onBlur:v,children:[" ",i.domain]}):y},f?"creatorProfile":"pinLinkDomain")})})})})}var y=i(248975),x=i(873441),b=i(694379),w=i(844897),P=i(469823),S=i(153209),T=i(782534),I=i(992750);const k=e=>{let t="";if(e.rich_metadata&&e.rich_metadata.article&&e.rich_metadata.article.date_published)return t;const i=(e=>{let t=null;e.last_repin_date&&(t=new Date(e.last_repin_date));let i=null;return e.created_at&&(i=new Date(e.created_at)),t?i?t>i?t:i:t:i})(e);if(i&&i.getFullYear()===(new Date).getFullYear()){const n=new Set(["film_music_books","art","home_decor","food_drink","womens_fashion","travel","weddings","hair_beauty","holidays_events","mens_fashion","products","celebrities","technology"]),o=e.category;n.has(o)&&(t=i?(0,l.jsx)(T.Z,{value:i,dateFormatType:T.k.LONG_MONTH_YEAR,useUTC:!1}):"")}return t};function E(e){var t,i,n,r,a,c,d,u,p,m,_,g,v,E,A,C,j,R,D,O;const L=(0,o.ZP)(),{pin:M,viewportSize:N,pageType:z}=e,{pinCreditPrefix:F,pinLink:Z}=(0,x.Z)(M,L),{description:B}=(0,I.eK)({richMetadataDescription:null===(t=M.rich_metadata)||void 0===t?void 0:t.description,richSummaryDisplayName:null===(i=M.rich_summary)||void 0===i?void 0:i.display_name,placeSummaryName:M.place_summary,closeupUnifiedDescription:M.closeup_unified_description}),U="wide"===N;let H=(0,I.Ly)({pinTitle:M.title,gridTitle:M.grid_title,richSummaryDisplayName:null!==(n=null===(r=M.rich_summary)||void 0===r?void 0:r.display_name)&&void 0!==n?n:"",richMetadataTitle:null!==(a=null===(c=M.rich_metadata)||void 0===c?void 0:c.title)&&void 0!==a?a:"",storyPinDataId:M.story_pin_data_id,storyPinDataMetadataPinTitle:null===(d=M.story_pin_data)||void 0===d||null===(u=d.metadata)||void 0===u?void 0:u.pin_title,placeSummaryName:null!==(p=M.place_summary)&&void 0!==p?p:"",pinJoinVisualAnnotation:null===(m=M.pin_join)||void 0===m?void 0:m.visual_annotation,pinJoinAnnotationsWithLinks:null===(_=M.pin_join)||void 0===_?void 0:_.annotations_with_links});(M.grid_title||"").trim()&&H!==M.grid_title&&(H=(0,I.EU)(M.grid_title,200));const V=(0,S.r)(null===(g=M.rich_metadata)||void 0===g||null===(v=g.recipe)||void 0===v?void 0:v.name,!(null===(E=M.rich_metadata)||void 0===E||null===(A=E.recipe)||void 0===A||!A.categorized_ingredients),null===(C=M.rich_metadata)||void 0===C||null===(j=C.recipe)||void 0===j?void 0:j.from_aggregated_data)&&(null===(R=M.rich_metadata)||void 0===R?void 0:R.recipe),W=!!(($=M).rich_metadata&&$.rich_metadata.article&&$.rich_metadata.article.date_published)&&((e,t)=>{var i,n,o;const r=new Date(null!==(i=null===(n=(null!==(o=e.rich_metadata)&&void 0!==o?o:{}).article)||void 0===n?void 0:n.date_published)&&void 0!==i?i:Date.now()),a=r.getTime(),s=(new Date).getTime();return null==t||s-a<=31536e6*t?(0,l.jsx)(T.Z,{value:r,dateFormatType:T.k.LONG_MONTH_YEAR,useUTC:!1}):""})(M,2);var $;const G=k(M)||W;return(0,l.jsx)(s.xu,{alignContent:"between","data-test-id":"UnauthBestPinCardBodyContainer",direction:"column",display:"flex",padding:8,position:"relative",width:"100%",flex:"grow",children:(0,l.jsxs)(s.xu,{position:"relative",direction:"column",display:"flex",flex:"grow",children:[(0,l.jsx)(f,{pageType:z,pin:M,pinCreditPrefix:"topic"===z.page&&M.native_creator?"Created by":F,pinLink:Z}),(0,l.jsx)(s.kC,{direction:"row",justifyContent:"between",children:(0,l.jsx)(s.xu,{display:"flex",overflow:"hidden",marginEnd:U?0:3,marginTop:U?3:0,children:H&&(0,l.jsx)("h2",{style:{fontWeight:"600",fontSize:"28px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},"data-test-id":"UnauthBestPinCardTitle",children:H})})}),G?(0,l.jsx)(s.xu,{marginTop:1,children:(0,l.jsx)(s.xv,{color:"subtle",children:G})}):null,B&&(0,l.jsx)(s.xu,{display:"flex",overflow:"hidden",marginTop:3,children:(0,l.jsxs)("h3",{style:{fontWeight:"normal",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",fontSize:"14px"},children:[V&&(0,l.jsx)(P.Z,{recipeData:V}),B]})}),V&&(0,l.jsx)(w.Z,{columnGap:(0,l.jsx)(s.xu,{width:16}),marginOverrides:V?{outerMarginTop:32,ingredientMarginBottom:4}:null,recipeProps:{recipe:{categorizedIngredients:V.categorized_ingredients,name:V.name,image:(0,y.Z)({images:M.images,embedSrc:null===(D=M.embed)||void 0===D?void 0:D.src,embedType:null===(O=M.embed)||void 0===O?void 0:O.type})}}}),(0,l.jsxs)(s.xu,{display:"flex",alignItems:"center",direction:"row",justifyContent:"between",marginTop:2,children:[(0,l.jsx)(h,{pin:M}),(0,l.jsx)(s.kC,{alignItems:"stretch",justifyContent:"end",children:!M.repin_count||M.repin_count<1?null:(0,l.jsxs)(s.kC,{alignItems:"center",justifyContent:"start",children:[(0,l.jsx)(s.JO,{icon:"pin",accessibilityLabel:"Pin",color:"subtle",size:12}),(0,l.jsx)(s.xv,{color:"default",inline:!0,size:"100",children:(0,l.jsx)(b.Z,{value:M.repin_count,shortform:!0,shortformMaximumFractionDigits:1})})]})})]})]})})}},841478:(e,t,i)=>{i.d(t,{A6:()=>l,BS:()=>a,EC:()=>o,_5:()=>s,m9:()=>r,z9:()=>n});const n=800,o=508,r=424,a=278,s=640,l=508},35495:(e,t,i)=>{i.d(t,{GT:()=>h,Gy:()=>a,Kl:()=>g,QY:()=>p,RR:()=>l,SP:()=>d,Sn:()=>_,Zs:()=>m,bA:()=>u,i8:()=>s,nn:()=>r,qN:()=>c});var n=i(834911),o=i(229428);const r=e=>!!e&&(e.shopping_flags||[]).includes(2),a=e=>{var t,i;return e.rich_summary&&e.rich_summary.products&&e.rich_summary.products.length>0||(null!==(t=null===(i=e.rich_metadata)||void 0===i?void 0:i.products)&&void 0!==t?t:[]).length>0},s=e=>{var t;return null===(t=e.aggregated_pin_data)||void 0===t?void 0:t.is_shop_the_look},l=e=>{var t,i;return null===(t=e.rich_summary)||void 0===t||null===(i=t.aggregate_rating)||void 0===i?void 0:i.rating_value},c=e=>e.is_oos_product,d=e=>e.is_stale_product,u=e=>c(e)||d(e),p=e=>{var t,i,n,o;const r=null==e||null===(t=e.link_domain)||void 0===t||null===(i=t.official_user)||void 0===i?void 0:i.full_name;if(r)return r;const a=null==e||null===(n=e.rich_summary)||void 0===n?void 0:n.site_name;if(a)return a;if(e.domain){if("Uploaded by user"===e.domain){return((e.is_repin?e.origin_pinner:e.pinner)||{}).full_name}return e.domain}const s=null==e||null===(o=e.via_pinner)||void 0===o?void 0:o.full_name;return e.is_repin&&s?s:void 0},h=e=>{if(e){const t=e.shopping_flags||[];return!t.includes(10)&&e.product_pin_data&&e.product_pin_data.items&&e.product_pin_data.items[0]&&e.product_pin_data.items[0].additional_images&&t.push(10),t}return[]};function m(e,t={}){var i,r,a,s,l,c;const d=h(e),u={...t.commerce_data};d.includes(2)&&(u.pin_is_shop_the_look=!0),d.includes(1)&&(u.is_available=!0),d.includes(5)&&(u.is_product_pin_v2=!0),d.includes(6)&&(u.is_rich_product_pin=!0),d.includes(10)&&(u.is_organic_product_carousel=!0);if((!!e.visual_objects&&(0,o.k)(e.visual_objects)||[]).some((e=>!0===e.is_stela))&&(u.pin_is_stela=!0),e.is_eligible_for_pdp||e.is_ooo_product||e.is_stale_product){e.is_oos_product?u.pin_show_pdp_oos=!0:e.is_stale_product?u.pin_show_pdp_stale=!0:u.pin_show_pdp=!0;const t=(0,n.Z)({carouselData:e.carousel_data,images:e.images,richMetadata:null==e?void 0:e.rich_metadata,richSummary:null==e?void 0:e.rich_summary});var p;if(t)u.image_count=null===(p=t.carousel_slots)||void 0===p?void 0:p.length,u.image_index=t.index}null!=e&&null!==(i=e.rich_summary)&&void 0!==i&&null!==(r=i.products)&&void 0!==r&&null!==(a=r[0])&&void 0!==a&&a.item_id&&(u.item_id=e.rich_summary.products[0].item_id),null!=e&&null!==(s=e.rich_summary)&&void 0!==s&&null!==(l=s.products)&&void 0!==l&&null!==(c=l[0])&&void 0!==c&&c.item_set_id&&(u.item_set_id=e.rich_summary.products[0].item_set_id);const m=e.aggregated_pin_data||{};return null!=m&&m.is_shop_the_look&&(u.pin_is_shop_the_look=!0),e.story_pin_data&&(u.story_pin_id=e.story_pin_data.id),u}function _(e){const t=JSON.stringify(e);return"{}"!==t?{commerce_data:t}:null}const g=(e,t={})=>{if(e){return _(m(e,t))}return null}},27255:(e,t,i)=>{i.d(t,{Z:()=>n});const n={AMP_TRACKING_DOMAIN:"amp.pinterest.com",BoardPrivacy:{SECRET:"secret",PUBLIC:"public",PROTECTED:"protected"},BoardType:{PROTECTED:"protected"},BulkAction:{MOVE:"bulkMove",COPY:"bulkCopy",CREATE_SECTION:"bulkCreateSection",DELETE:"bulkDelete"},MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION:500,MAX_CHARS_FOR_BOARD_TITLE:50,MAX_CHARS_FOR_FIRST_NAME:30,MAX_FETCH_NUM_FOLLOWERS_PER_PAGE:50,MAX_STORED_VISITED_PIN_PAGES:10,VIDEO_AUTOPLAY_LOCAL_STORAGE_KEY:"_video_autoplay_state",VIDEO_IFRAME_ID:"video-iframe"}},699825:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(102500),r=i(692627),a=i(47170),s=i(35495),l=i(623568),c=i(407043),d=i(785893);function u({children:e,hovered:t,pin:i,slotIndex:u,trafficSource:p,viewType:h}){var m,_,g;const{logContextEvent:v}=(0,c.v)(),[f,y]=(0,n.useState)(),[x,b]=(0,n.useState)(),{id:w,tracked_link:P,link:S}=i,T=P||S||"",I=()=>{y(!0)},k=(0,a.Z)(i),E=(0,r.Z)({hasPin:!!i,hasPinRichMetadata:!(null==i||!i.rich_metadata),hasPinRichMetadataProducts:!(null==i||null===(m=i.rich_metadata)||void 0===m||!m.products),hasPinRichMetadataArticle:!(null==i||null===(_=i.rich_metadata)||void 0===_||!_.article),hasPinRichMetadataRecipe:!(null==i||null===(g=i.rich_metadata)||void 0===g||!g.recipe),hasPinStoryPinData:!(null==i||!i.story_pin_data)}),A=(0,n.useCallback)((()=>{((e,t,i)=>{const n={check_only:i,pin_id:e.id,url:t,client_tracking_params:k,aux_data:JSON.stringify({clickthrough_type:"rightClick",objectId:w,...u||{},...(0,s.Kl)(e)||{}})};return(0,o.Z)(n)})(i,T,!1).callGet({showError:!1}).then((e=>{e&&(v({event_type:12,object_id_str:w,view_type:h,view_parameter:E,aux_data:{clickthrough_type:"rightClick",...u||{},...(0,s.Kl)(i)||{}}}),v({event_type:8948,view_type:h,object_id_str:w,view_parameter:E,aux_data:{click_type:"clickthrough",closeup_navigation_type:p&&(0,l.sV)(p)?"deeplink":"click",clickthrough_type:"rightClick",...u||{},...(0,s.Kl)(i)||{}}}))}))})),C=e=>{var t;f&&(/^\/pin/.test(null===(t=e.target.activeElement.attributes.href)||void 0===t?void 0:t.value)||(A(),y(!1)),window.removeEventListener(x,C,!1))};return(0,n.useEffect)((()=>{var e,t,i,n,o,r;void 0!==(null===(e=window)||void 0===e||null===(t=e.document)||void 0===t?void 0:t.hidden)?b("visibilitychange"):void 0!==(null===(i=window)||void 0===i||null===(n=i.document)||void 0===n?void 0:n.msHidden)?b("msvisibilitychange"):void 0!==(null===(o=window)||void 0===o||null===(r=o.document)||void 0===r?void 0:r.webkitHidden)&&b("webkitvisibilitychange")}),[]),(0,n.useEffect)((()=>(f&&window&&window.addEventListener(x,C,!1),()=>window.removeEventListener(x,C))),[f,x]),(0,n.useEffect)((()=>(t&&window.addEventListener("contextmenu",I),()=>{window.removeEventListener("contextmenu",I)})),[t]),(0,d.jsx)(n.Fragment,{children:e})}},628551:(e,t,i)=>{i.r(t),i.d(t,{cleanUpCookie:()=>c,clearSecondCookie:()=>l,getCsrfToken:()=>d,needsCsrfToken:()=>u});var n=i(231486),o=i(226198),r=i(826067),a=i(29538);const s=e=>{document.cookie=o.fS.name+"=bad; domain=."+e+"; expires=Thu, 01-Jan-1970 00:00:00 GMT; Max-Age=0; Path=/"},l=()=>{s(window.location.hostname)},c=()=>{const e=o.fS.name,t=document.cookie.match(new RegExp(e+"=.+?($|;)","g"));t&&t.length>1&&s(a.c)},d=()=>"undefined"!=typeof window?`${String(n.U2(o.fS))}`:"",u=(e,t)=>!(e=>/^(GET|HEAD|OPTIONS|TRACE)$/.test(e))(e)&&(0,r.Qg)(t)},403368:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(898781),r=i(883119),a=i(785893);function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const l=16,c=32;class d extends n.Component{constructor(...e){super(...e),s(this,"state",{isHovering:!1}),s(this,"handleMouseEnter",(e=>{this.setState({isHovering:!0}),this.props.onMouseEnter&&this.props.onMouseEnter(e)})),s(this,"handleMouseLeave",(e=>{this.setState({isHovering:!1}),this.props.onMouseLeave&&this.props.onMouseLeave(e)}))}render(){const{forwardedRef:e,icon:t,onClick:i,onMouseDown:n,onMouseUp:o,selected:s,style:d,text:u,x:p,y:h,zIndex:m,backdropDiameter:_=c,dotDiameter:g=l}=this.props,{isHovering:v}=this.state,f=v?_+4:_,y={zIndex:m,position:"absolute",top:h-f/2,left:p-f/2,outline:"none"},x={backgroundColor:"rgba(0, 0, 0, 0.1)",width:f,height:f,border:"none",borderRadius:f,cursor:i?"pointer":"default"};return(0,a.jsx)("div",{"data-test-id":"flashlight-dot",onClick:i,onKeyPress:i,onMouseDown:n,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:o,ref:e,role:"button",style:y,tabIndex:"0","aria-label":this.props.i18n._('Search this item', 'flashlight.dot.a11ylabel', 'accessibility label for flashlight dot'),children:(0,a.jsx)("div",{"data-test-id":"flashlight-dot-style",style:{...x,...d},children:(0,a.jsxs)(r.xu,{alignItems:"center",borderStyle:"none",color:"default",display:"flex",height:g,justifyContent:"center",position:"absolute",padding:0,width:g,dangerouslySetInlineStyle:{__style:{boxShadow:s?"0 0 0 3px #e60023":"none",borderRadius:g,top:(f-g)/2,left:(f-g)/2}},children:[!!u&&(0,a.jsx)(r.xv,{align:"center",color:"default",inline:!0,size:"100",weight:"bold",children:u}),t&&(0,a.jsx)(r.JO,{accessibilityLabel:this.props.i18n._('Tag anchor', 'accessibility label for an anchor for an object in a pin', 'accessibility label for an anchor for an object in a pin'),color:"error",icon:t,size:g/2,inline:!0})]})})})}}const u=(0,n.forwardRef)(((e,t)=>{const i=(0,o.ZP)();return(0,a.jsx)(d,{...e,forwardedRef:t,i18n:i})}))},247568:(e,t,i)=>{i.d(t,{Z:()=>A});var n=i(667294),o=i(523563),r=i(785893);const a={nw:0,ne:90,se:180,sw:270},s={ne:[6,-6],se:[6,6],sw:[-6,6],nw:[-6,-6]},l={nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},c=(e,t,i,n)=>{if("rounded"===n){const[n,o]=s[e];return`translate(${t+n}, ${i+o}), rotate(${a[e]})`}return`translate(${t}, ${i}), rotate(${a[e]})`};function d({corner:e,x:t,y:i,size:n,cornerStyle:o}){return(0,r.jsxs)("g",{transform:c(e,t,i,o),style:{cursor:l[e]},children:[(0,r.jsx)("rect",{fill:"rgba(0,0,0,0)",stroke:"none",x:0,y:0,width:n,height:n,className:`v2cropperHandle ${e}`}),"rounded"===o?(0,r.jsx)("path",{d:"M5,0C2.2,0,0,2.2,0,5v15h6V6h14V0H5z",fill:"#fff",className:`v2cropperHandle ${e}`}):(0,r.jsx)("path",{d:`M ${n} 0 L 0 0 L 0 ${n}`,fill:"none",stroke:"#fff",strokeWidth:6,className:`v2cropperHandle ${e}`})]})}const u={n:"ns-resize",s:"ns-resize",e:"ew-resize",w:"ew-resize"};function p({edge:e,x:t,y:i,w:n,h:o}){return(0,r.jsx)("rect",{fill:"rgba(0,0,0,0)",stroke:"none",x:t,y:i,width:n,height:o,className:`v2cropperHandle ${e}`,style:{cursor:u[e]}})}const h=20;function m({x:e,y:t,w:i,h:o}){const a="rounded";return(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(d,{corner:"nw",x:e,y:t,size:h,cornerStyle:a}),(0,r.jsx)(d,{corner:"ne",x:e+i,y:t,size:h,cornerStyle:a}),(0,r.jsx)(d,{corner:"sw",x:e,y:t+o,size:h,cornerStyle:a}),(0,r.jsx)(d,{corner:"se",x:e+i,y:t+o,size:h,cornerStyle:a}),(0,r.jsx)(p,{edge:"n",x:e+h,y:t-10,w:i-40,h:30}),(0,r.jsx)(p,{edge:"e",x:e+i-h,y:t+h,w:30,h:o-40}),(0,r.jsx)(p,{edge:"s",x:e+h,y:t+o-10,w:i-40,h:30}),(0,r.jsx)(p,{edge:"w",x:e-h,y:t+h,w:30,h:o-40})]})}var _=i(391254),g=i(883119),v=i(615071),f=i(112690);function y(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const x=10,b=48;class w extends n.Component{constructor(...e){super(...e),y(this,"state",{cropArea:this.props.initialCropArea||{h:0,w:0,x:0,y:0},cropChangeType:null}),y(this,"cropResizeDirection",null),y(this,"_cropperOverlay",(0,n.createRef)()),y(this,"_checkCropHandleValid",((e,t)=>{const{cropArea:{h:i,w:n,x:o,y:r}}=this.state;switch(this.cropResizeDirection){case"ne":e<o&&t>r+i?this.cropResizeDirection="sw":e<o?this.cropResizeDirection="nw":t>r+i&&(this.cropResizeDirection="se");break;case"nw":e>o+n&&t>r+i?this.cropResizeDirection="se":e>o+n?this.cropResizeDirection="ne":t>r+i&&(this.cropResizeDirection="sw");break;case"se":e<o&&t<r?this.cropResizeDirection="nw":e<o?this.cropResizeDirection="sw":t<r&&(this.cropResizeDirection="ne");break;case"sw":e>o+n&&t<r?this.cropResizeDirection="ne":e>o+n?this.cropResizeDirection="se":t<r&&(this.cropResizeDirection="nw");break;case"n":t>r+i&&(this.cropResizeDirection="s");break;case"s":t<r&&(this.cropResizeDirection="n");break;case"e":e<o&&(this.cropResizeDirection="w");break;case"w":e>o+n&&(this.cropResizeDirection="e")}})),y(this,"handleClickOutside",(e=>{const{enableClickOutside:t,entrySource:i,imageSize:n,onChange:o,viewParameter:r,logContextEvent:a}=this.props,{cropArea:s}=this.state,l=e.clientX-this._cropperOverlayCoor.x,c=e.clientY-this._cropperOverlayCoor.y;var d,u;t&&(l<s.x||c<s.y||l>s.x+s.w||c>s.y+s.h)&&(a({event_type:101,view_type:72,view_parameter:r,element:11677,aux_data:{commerce_data:JSON.stringify({entrypoint:i})}}),o({origCrop:{h:null!==(d=n.h)&&void 0!==d?d:1,w:null!==(u=n.w)&&void 0!==u?u:1,x:0,y:0}}))})),y(this,"handleOnMouseDown",(e=>{var t;e.preventDefault(),e.stopPropagation();const{clientX:i,clientY:n}=e,o=e.target,r=i-this._cropperOverlayCoor.x,a=n-this._cropperOverlayCoor.y,s=o.classList?Array.from(o.classList):o instanceof Element&&(null===(t=o.getAttribute("class"))||void 0===t?void 0:t.split(" "))||[];s.includes("v2cropperHandle")?(this.setState({cropChangeType:"resize"}),s.includes("ne")&&(this.cropResizeDirection="ne"),s.includes("nw")&&(this.cropResizeDirection="nw"),s.includes("se")&&(this.cropResizeDirection="se"),s.includes("sw")&&(this.cropResizeDirection="sw"),s.includes("n")&&(this.cropResizeDirection="n"),s.includes("s")&&(this.cropResizeDirection="s"),s.includes("e")&&(this.cropResizeDirection="e"),s.includes("w")&&(this.cropResizeDirection="w")):s.includes("v2cropSection")?(this.setState({cropChangeType:"move"}),this.cropChangeStartCoor={x:r,y:a}):s.includes("v2shadowMask")&&(this.cropChangeStartCoor={x:r,y:a},this.setState({cropArea:{h:0,w:0,x:r,y:a},cropChangeType:"select"}))})),y(this,"handleOnMouseMove",(e=>{const{cropArea:{h:t,w:i,x:n,y:o},cropChangeType:r}=this.state,{imageSize:a}=this.props,{clientX:s,clientY:l}=e,c=s-this._cropperOverlayCoor.x,d=l-this._cropperOverlayCoor.y;if("resize"===r){var u,p;const e=Math.max(Math.min(c,(null!==(u=a.w)&&void 0!==u?u:1)-x),x),r=Math.max(Math.min(d,(null!==(p=a.h)&&void 0!==p?p:1)-x),x);switch(this._checkCropHandleValid(e,r),this.cropResizeDirection){case"ne":{const i=Math.max(t+(o-r),b),a=Math.max(e-n,b);this.setState({cropArea:{h:i,w:a,x:n,y:i<=b?o:r}});break}case"nw":{const a=Math.max(i+(n-e),b),s=Math.max(t+(o-r),b);this.setState({cropArea:{h:s,w:a,x:a===b?n:e,y:s===b?o:r}});break}case"se":{const t=Math.max(r-o,b),i=Math.max(e-n,b);this.setState({cropArea:{h:t,w:i,x:n,y:o}});break}case"sw":{const t=Math.max(r-o,b),a=Math.max(i+(n-e),b);this.setState({cropArea:{h:t,w:a,x:a===b?n:e,y:o}});break}case"n":{const e=Math.max(o-r+t,b);this.setState({cropArea:{h:e,w:i,x:n,y:e===b?o:r}});break}case"s":{const e=Math.max(r-o,b);this.setState({cropArea:{h:e,w:i,x:n,y:o}});break}case"e":{const i=Math.max(e-n,b);this.setState({cropArea:{h:t,w:i,x:n,y:o}});break}case"w":{const r=Math.max(i-e+n,b);this.setState({cropArea:{h:t,w:r,x:r===b?n:e,y:o}});break}}}else if("move"===r){var h,m;const e=c-this.cropChangeStartCoor.x,r=d-this.cropChangeStartCoor.y,s=Math.max(Math.min(n+e,(null!==(h=a.w)&&void 0!==h?h:1)-i-x),x),l=Math.max(Math.min(o+r,(null!==(m=a.h)&&void 0!==m?m:1)-t-x),x);this.cropChangeStartCoor={x:c,y:d},this.setState({cropArea:{h:t,w:i,x:s,y:l}})}else if("select"===r){var _,g;const e=Math.max(Math.min(c,null!==(_=a.w)&&void 0!==_?_:1),0),t=Math.max(Math.min(d,null!==(g=a.h)&&void 0!==g?g:1),0),i=e-this.cropChangeStartCoor.x,n=t-this.cropChangeStartCoor.y;this.setState({cropArea:{h:Math.abs(n),w:Math.abs(i),x:Math.min(this.cropChangeStartCoor.x,e),y:Math.min(this.cropChangeStartCoor.y,t)}})}})),y(this,"handleOnMouseUp",(()=>{const{cropChangeType:e}=this.state;"resize"!==e&&"move"!==e&&"select"!==e||this.handleCrop(),this.cropResizeDirection=null}))}componentDidMount(){const{disableCrop:e}=this.props,t=document.body,i=this._cropperOverlay.current;if(i&&t){if(i){const e=i.getBoundingClientRect();this._cropperOverlayCoor={x:e.left,y:e.top}}e?e&&i.addEventListener("mousedown",this.handleClickOutside):(window.addEventListener("mouseup",this.handleOnMouseUp),t.addEventListener("mousemove",this.handleOnMouseMove),i.addEventListener("mousedown",this.handleOnMouseDown))}}componentWillUnmount(){const{disableCrop:e,entrySource:t}=this.props,i=document.body,n=this._cropperOverlay.current;n&&i&&(e?e&&"shopping"===t&&n.removeEventListener("mousedown",this.handleClickOutside):(window.removeEventListener("mouseup",this.handleOnMouseUp),i.removeEventListener("mousemove",this.handleOnMouseMove),n.removeEventListener("mousedown",this.handleOnMouseDown)))}handleCrop(){const{entrySource:e,imageSize:t,onChange:i,viewParameter:n,logContextEvent:o}=this.props,{cropChangeType:r,cropArea:a}=this.state;if(0===a.w&&0===a.h){var s,l;this.setState({cropChangeType:null}),i({origCrop:{h:(null!==(s=t.h)&&void 0!==s?s:1)-20,w:(null!==(l=t.w)&&void 0!==l?l:1)-20,x,y:x}})}else{var c,d,u,p;this.setState({cropChangeType:null});const s=Math.max(Math.min(a.x,(null!==(c=t.w)&&void 0!==c?c:1)-b-x),x),l=Math.max(Math.min(a.y,(null!==(d=t.h)&&void 0!==d?d:1)-b-x),x);let _,g;if(a.h<b)_=b;else if(l+a.h>(null!==(u=t.h)&&void 0!==u?u:1)-x){var h;_=(null!==(h=t.h)&&void 0!==h?h:1)-l-x}else _=a.h;if(a.w<b)g=b;else if(s+a.w>(null!==(p=t.w)&&void 0!==p?p:1)-x){var m;g=(null!==(m=t.w)&&void 0!==m?m:1)-s-x}else g=a.w;switch(r){case"move":o({event_type:7603,view_type:72,view_parameter:n,aux_data:{commerce_data:e?JSON.stringify({entrypoint:e}):void 0}});break;case"resize":o({event_type:7604,view_type:72,view_parameter:n,aux_data:{commerce_data:e?JSON.stringify({entrypoint:e}):void 0}})}i({origCrop:{h:_,w:g,x:s,y:l}})}}render(){const{children:e,previewCropArea:t,showPreviewArea:i,disableCrop:n}=this.props,{cropArea:{h:o,w:a,x:s,y:l},cropChangeType:c}=this.state;return(0,r.jsxs)(g.xu,{ref:this._cropperOverlay,position:"absolute",top:!0,left:!0,width:"100%",height:"100%",dangerouslySetInlineStyle:{__style:{cursor:n?"auto":"crosshair"}},children:[(0,r.jsx)(_.Z,{unsafeCSS:"\n.preview-crop-area-enter {\n  opacity: 0;\n}\n\n.preview-crop-area-enter-active {\n  opacity: 1;\n  transition: opacity 300ms;\n}\n\n.preview-crop-area-exit {\n  opacity: 1;\n}\n\n.preview-crop-area-exit-active {\n  opacity: 0;\n  transition: opacity 300ms;\n}\n\n.preview-crop-area-exit-done {\n  opacity: 0;\n}\n"}),(0,r.jsxs)("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("mask",{id:"Mask",children:[(0,r.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",rx:"0",ry:"0",fill:"#fff"}),(0,r.jsx)("rect",{x:s,y:l,width:a,height:o,id:"hole",rx:n?15:0,ry:n?15:0},`${s}${l}`),(0,r.jsx)(v.Z,{in:i&&!c,timeout:300,classNames:"preview-crop-area",mountOnEnter:!0,unmountOnExit:!0,children:(0,r.jsx)("rect",{x:t.x,y:t.y,width:t.w,height:t.h,id:"preview",rx:4,ry:4},`${t.x}${t.y}`)})]})}),(0,r.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",style:{fill:"rgba(0,0,0,0.5)"},mask:"url(#Mask)",className:"v2shadowMask"}),(0,r.jsx)("use",{href:"#hole",fill:"rgba(0,0,0,0)",stroke:n?"none":"#fff",strokeWidth:"2",className:"v2cropSection",style:{cursor:n?"auto":"move"}}),"select"!==c&&!n&&(0,r.jsx)(m,{x:s,y:l,w:a,h:o})]}),e]})}}function P(e){const t=(0,f.Z)();return(0,r.jsx)(w,{logContextEvent:t,...e})}var S=i(403368);function T({entrySource:e,showAnimation:t,auxData:i,index:o,isStela:a,onClick:s,onHover:l,onUnhover:c,spotlightCenter:d,viewParameter:u,viewType:p}){const h=(0,f.Z)();(0,n.useEffect)((()=>{h(e?{event_type:120,view_type:p,view_parameter:u,element:1221,aux_data:{commerce_data:JSON.stringify({entrypoint:e}),...i}}:{event_type:120,element:1260,aux_data:i})}),[]);const m=parseFloat((.1*(o+1)).toFixed(2)),_={animation:t?`spotlightDotPop 0.6s ease-out ${m}s both`:"none"};return(0,r.jsx)(S.Z,{x:d.x,y:d.y,onClick:e=>{e&&(e.stopPropagation(),e.preventDefault()),h({event_type:101,view_parameter:u,element:a?1221:1260,aux_data:i}),s(o)},onMouseEnter:e=>{e&&(e.stopPropagation(),e.preventDefault()),l(o)},onMouseLeave:e=>{e&&(e.stopPropagation(),e.preventDefault()),c()},style:_})}var I=i(599611);const k=({entrySource:e,showAnimation:t,pinId:i,imageSignature:o,imageSize:a,currentSpotlightIdx:s,spotlightAreas:l,handleSpotlightClick:c,handleSpotlightHover:d,handleSpotlightUnhover:u,viewParameter:p,viewType:h})=>(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(_.Z,{unsafeCSS:"\n@keyframes spotlightDotPop {\n  0% {\n    opacity: 0;\n    transform: scale(0);\n  }\n\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n}"}),l.map(((n,l)=>{if(l===s)return null;const m=(0,I.Z)({cropArea:n,scaledWidth:a.w,scaledHeight:a.h}),_={x:m.x+m.w/2,y:m.y+m.h/2},g={commerce_data:JSON.stringify({entrypoint:e}),pin_id:i,image_signature:o,visual_objects:JSON.stringify([{x:n.x,y:n.y,w:n.w,h:n.h}])},v=`${_.x}${_.y}`;return(0,r.jsx)(T,{entrySource:e,showAnimation:t,auxData:g,index:l,isStela:!!n.is_stela,onClick:c,onHover:d,onUnhover:u,spotlightCenter:_,viewParameter:p,viewType:h},v)}))]});var E=i(554383);function A({cropSource:e,disableCrop:t,entrySource:i,imageSize:a,imageSignature:s,initialCropArea:l,pin:c,onChange:d,showAnimation:u,searchQuery:p,spotlightAreas:h=[],trafficSource:m,viewParameter:_,viewType:v}){const[f,y]=(0,n.useState)(!1),[x,b]=(0,n.useState)({w:0,h:0,x:0,y:0}),[w,S]=(0,n.useState)(0);(0,n.useEffect)((()=>{const e=h.findIndex((e=>(0,o.Z)(l,(0,I.Z)({cropArea:e,scaledWidth:a.w,scaledHeight:a.h}),4)));S(e)}),[a,l,h]);const T=e=>{const t=h[e],n=(0,I.Z)({cropArea:t,scaledWidth:a.w,scaledHeight:a.h});d({origCrop:n,cropSource:t.is_stela?4:1,entrySource:i,trafficSource:m})},A=h&&!!h.length,{is_eligible_for_related_products:C}=c||{},j=C&&"shopping"===i;return(0,r.jsx)(n.Fragment,{children:j?(0,r.jsx)(g.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:A?{pointerEvents:"none",backgroundColor:"rgba(0, 0, 0, 0.2)"}:{}},left:!0,position:"absolute",right:!0,top:!0,children:A&&(0,r.jsx)(n.Fragment,{children:(0,r.jsx)(E.default,{alwaysShow:!0,cropSource:e,currentSpotlightIdx:w,height:a.h,pin:c,searchQuery:p,trafficSource:m,width:a.w,handleStelaClick:T,enablePointerEvents:!0})})}):(0,r.jsx)(P,{enableClickOutside:!f,entrySource:i,imageSize:a,initialCropArea:l,onChange:({origCrop:e})=>{d({origCrop:e,cropSource:6,entrySource:i,trafficSource:m})},previewCropArea:x,showPreviewArea:!1,disableCrop:t,viewParameter:_,children:A&&(0,r.jsx)(k,{entrySource:i,showAnimation:u,pinId:c.id,handleSpotlightHover:e=>{e!==w&&(y(!0),b((0,I.Z)({cropArea:h[e],scaledWidth:a.w,scaledHeight:a.h})))},handleSpotlightUnhover:()=>{y(!1)},imageSignature:s,imageSize:a,currentSpotlightIdx:w,spotlightAreas:h,handleSpotlightClick:T,viewParameter:_,viewType:v})},JSON.stringify(l))})}},558068:(e,t,i)=>{i.d(t,{Hv:()=>l,aX:()=>u,nK:()=>p});var n=i(667294),o=i(425288),r=i(276775),a=i(785893);const{Provider:s,useHook:l}=(0,o.Z)("HistoryStackContext",{previous:[],current:null,forward:[]}),c=e=>e&&e.pathname?e.pathname+(e.search||""):"";function d(e,t){var i;const n={action:t.type,location:t.location,match:t.match};if(t.location===(null===(i=e.current)||void 0===i?void 0:i.location))return e;switch(t.type){case"POP":return e.forward.length>0&&c(e.forward[0].location)===c(n.location)?{...e,forward:e.forward.slice(1),current:{...e.forward[0],action:t.type},previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous}:{...e,forward:e.current?[{action:e.current.action,location:e.current.location,match:e.current.match},...e.forward]:e.forward,current:{...e.previous.slice(-1)[0],action:t.type},previous:e.previous.slice(0,-1)};case"PUSH":return{...e,forward:e.forward.length>0?[]:e.forward,current:n,previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous};case"REPLACE":return{...e,current:n};default:return e}}function u(){const{current:e,previous:t}=l();return(0,n.useMemo)((()=>e?t.concat(e):t),[e,t])}function p({children:e}){const t=(0,r.useHistory)(),i=(0,r.useLocation)(),o=(0,r.useRouteMatch)(),l={forward:[],current:{action:t.action,location:i,match:o},previous:[]},[c,u]=(0,n.useReducer)(d,l);return(0,n.useEffect)((()=>{const{action:e}=t;u({type:e,location:i,match:o})}),[i]),(0,a.jsx)(s,{value:c,children:e})}},391254:(e,t,i)=>{i.d(t,{Z:()=>r});i(441143);var n=i(785893);class o{static factory(e){return e instanceof o?e:new o(String(e))}constructor(e){this._private_safe_value=e.trim().replace(">",">").replace("<","<").replace("&","&").replace('"','"').replace("'","'")}toString(){return this._private_safe_value}}function r(e){const{css:t,unsafeCSS:i,...r}=e,a=String(t||"")||i||"";return!!a?(0,n.jsx)("style",{...r,dangerouslySetInnerHTML:{__html:String(o.factory(a))}}):null}},241244:(e,t,i)=>{i.d(t,{N:()=>a,Z:()=>r});var n=i(883119),o=i(785893);function r({children:e,fullWidth:t}){return(0,o.jsx)(n.xu,{"data-test-id":"pointer-events-wrapper",dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",width:t?"100%":void 0}},children:e})}function a({children:e,enabled:t}){return t?(0,o.jsx)(r,{children:e}):e}},310227:(e,t,i)=>{i.d(t,{Dv:()=>r,Ml:()=>a,Oc:()=>n,mv:()=>o});const n=16,o=4,r={SAVED:"rgba(0, 0, 0, 0.33)",VISUAL:"rgba(0, 0, 0, 0.1)",LEGO_WASH:"rgba(0, 0, 0, 0.4)"},a=120},743473:(e,t,i)=>{i.d(t,{Z:()=>w});var n=i(567831),o=i(794230),r=i(107193),a=i(402201),s=i(704115),l=i(6637);const c={open(e){var t;const i=(d=e,c._validParams.reduce(((e,t)=>(d&&Object.prototype.hasOwnProperty.call(d,t)&&(e[t]=d[t]),e)),{}));var d;const u=c._getDialogType(e),p=c.generateFbRef(null!==(t=e.unauthId)&&void 0!==t?t:""),h=e.object_type&&e.object_id&&"feed"===u;let m=(0,n.Z)(e.path);const _=(0,s.Z)();if(_.ptrf&&(m=(0,o.Z)(m,{ptrf:_.ptrf})),h&&(m=(0,o.Z)(m,{fb_ref:p})),i.method=u,"feed"===i.method){const t=(0,a.Z)({width:e.width,height:e.height});let n="http://www.facebook.com/sharer/sharer.php?u="+m;i.picture&&(n+="&picture="+i.picture),i.name&&(n+="&title="+i.name),i.description&&(n+="&description="+i.description),i.caption&&(n+="&caption="+i.caption),window.open(encodeURI(n),"sharer",t)}else"send"===i.method?i.link=m:"share"===i.method&&(i.href=m),(0,r.default)((t=>{t.getLoginStatus((()=>{if("send"===i.method){t.ui(i);let n,o=10;const r=setInterval((()=>{n=function(){if(!document)return;const e=Array.from(document.querySelectorAll(".fb_dialog_iframe iframe"));if(!e.length)return;if(1===e.length)return e[0];const t=e.splice(0,e.length-1);for(let i=0;i<t.length;i+=1){const e=t[i].parentNode;e&&e.removeChild(t[i])}return e[0]}(),!n&&o||(clearInterval(r),n&&c.executeMessengerCallback(n,e.callback)),o-=1}),1e3)}else"share"===i.method&&t.ui(i,(t=>{h&&t&&!t.error_message&&l.Z.create("LogFacebookFeedShare",{object_type:e.object_type,object_id:e.object_id,fb_ref:p}).callCreate({showError:!1}),e.callback&&e.callback(t)}))}))}),e.viewer)},_validParams:["description","name","picture","to","href","caption","display"],_validOptions:["send","feed","share"],executeMessengerCallback(e,t){let i=10;const n=setInterval((()=>{"0px"!==e.style.width&&i||(clearInterval(n),e.style.width="575px"),i-=1}),1e3);t&&t()},generateFbRef(e){let t="";for(;t.length<20;)t+=Math.floor(65535*Math.random()).toString(16);return e+":"+t},_getDialogType:e=>c._validOptions.includes(e.type)?e.type:"feed"},d=c;function u(e,t,i){const n=function(e,t){const i=window.screen.width,n=window.screen.height;return"scrollbars=yes,resizable=yes,toolbar=no,location=yes,width="+e+",height="+t+",left="+Math.round((i-e)/2)+",top="+(n>t?Math.round((n-t)/2):0)}(t,i);window.open(e,void 0,n)}const p={DIALOG_WIDTH:510,DIALOG_HEIGHT:525,openDialog(e){u(p._getWindowUrl(e.share_path,e.share_text),p.DIALOG_WIDTH,p.DIALOG_HEIGHT)},_getWindowUrl:(e,t)=>(0,o.Z)("https://social-plugins.line.me/lineit/share",{url:e?(0,n.Z)(e):void 0,text:t})},h=p,m={DIALOG_WIDTH:550,DIALOG_HEIGHT:420,openDialog(e){u(m._getWindowUrl(e.tweet_path,e.tweet_text),m.DIALOG_WIDTH,m.DIALOG_HEIGHT)},_getWindowUrl:(e,t)=>(0,o.Z)("https://twitter.com/intent/tweet",{via:"pinterest",url:e?(0,n.Z)(e):void 0,text:t||void 0})},_=m;var g,v,f=i(167912);const y=void 0!==g?g:g=i(166379),x=void 0!==v?v:v=i(380465),b={ObjectTypeToInviteObject:{pin:1,board:2,pinner:3,article:5,did_it:6,today_article:8,search:0},_convertToInviteObject(e){return this.ObjectTypeToInviteObject[e]||0},_logShareInvite(e,t,i){const n=this._convertToInviteObject(e.object_type),o=e.invite_channel,r=null==e.invite_category?3:e.invite_category,a=e.object_id;return l.Z.create("SentExternalInviteCallbackResource",{invite_type:{invite_category:r,invite_object:n,invite_channel:o},invite_code:t,object_id:a,client_tracking_params:e.client_tracking_params}).callCreate()},createShareInviteData(e,t){const i=this._convertToInviteObject(e.object_type),n=e.invite_channel,o=null==e.invite_category?3:e.invite_category,r=e.orbac_subject_id;if(10===o&&e.path){if(t)return(async(e,t,i)=>{var n;const o=await(0,f.fetchQuery)(e,x,{invite_category:i.toString(),url:t}).toPromise();return(e=>{var t,i,n;return{invite_code:null!==(t=null==e?void 0:e.invite_code)&&void 0!==t?t:"",invite_url:null!==(i=null==e?void 0:e.invite_url)&&void 0!==i?i:"",title:null!==(n=null==e?void 0:e.title)&&void 0!==n?n:""}})(null==o||null===(n=o.v3CreateShareLinkQuery)||void 0===n?void 0:n.data)})(t,e.path,o);return l.Z.create("ShareLinkResource",{invite_category:o,url:e.path}).callCreate().then((e=>Promise.resolve(e.resource_response.data)),(e=>Promise.reject(e)))}if(t)return(async(e,t,i,n,o)=>{var r;const a={invite_category:t,invite_object:i,invite_channel:n},s=await(0,f.fetchQuery)(e,y,{inviteType:JSON.stringify(a),objectId:o}).toPromise();return(e=>{var t,i,n;return{invite_code:null!==(t=null==e?void 0:e.invite_code)&&void 0!==t?t:"",invite_url:null!==(i=null==e?void 0:e.invite_url)&&void 0!==i?i:"",title:null!==(n=null==e?void 0:e.title)&&void 0!==n?n:""}})(null==s||null===(r=s.v3InviteUserExternalQuery)||void 0===r?void 0:r.data)})(t,o,i,n.toString(),e.object_id);{const t=e.object_id;return l.Z.create("CreateExternalInviteResource",{invite_type:{invite_category:o,invite_object:i,invite_channel:n},object_id:t,...r?{orbac_subject_id:r}:{}}).callCreate().then((e=>Promise.resolve(e.resource_response.data)),(e=>Promise.reject(e)))}},logShareInvite(e,t,i){t&&b._logShareInvite(e,t.invite_code,i)},shareFacebookInvite(e,t){const{options:i,unauthId:n,viewer:o}=e;return b.createShareInviteData(i,t).then((e=>{const r=e.invite_url,a=e.invite_code;if(r){const s={type:"share",object_type:i.object_type,object_id:i.object_id,name:i.name,caption:e.title,description:i.description,path:r,picture:i.picture,callback(e){e&&!e.error_message&&b._logShareInvite(i,a,t)}};d.open({...s,display:"popup",unauthId:n,viewer:o})}return Promise.resolve(e)}),(e=>Promise.reject(e)))},shareTwitterInvite(e,t){const i=this._convertToInviteObject(e.object_type);return b.createShareInviteData(e,t).then((n=>{const o=n.invite_url,r=n.invite_code;let a=e.description;return 6===i&&e.name&&(a=e.name),a.trim()||(a=`${n.title}\n`),o&&_.openDialog({tweet_path:o,tweet_text:a}),b._logShareInvite(e,r,t),Promise.resolve(n)}),(e=>Promise.reject(e)))},shareLineInvite(e,t){const i=this._convertToInviteObject(e.object_type);return b.createShareInviteData(e,t).then((n=>{const o=n.invite_url,r=n.invite_code;let a=e.description;return 6===i&&e.name&&(a=e.name),a.trim()||(a=`${n.title}\n`),o&&h.openDialog({share_path:o,share_text:a}),b._logShareInvite(e,r,t),Promise.resolve(n)}),(e=>Promise.reject(e)))},shareFbMessengerInvite(e,t){const{options:i,unauthId:n,viewer:o}=e;return b.createShareInviteData(i,t).then((e=>{const r=e.invite_url,a=e.invite_code;return r&&d.open({type:"send",object_type:i.object_type,object_id:i.object_id,name:i.name,caption:e.title,description:i.description,path:r,picture:i.picture,callback(e){e&&e.success&&b._logShareInvite(i,a,t)},display:"popup",unauthId:n,viewer:o}),Promise.resolve(e)}),(e=>Promise.reject(e)))}},w=b},335174:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(483205);const o=e=>`@keyframes shopButtonSlideInThenOut {\n    0% {\n      width: 48px;\n    }\n\n    15% {\n      width: ${e+n.Nv}px;\n    }\n\n    85% {\n      width: ${e+n.Nv}px;\n    }\n\n    100% {\n      width: 40px;\n    }\n  }\n\n  @keyframes shopButtonSlideIn {\n    0% {\n      width: 48px;\n    }\n\n    100% {\n      width: ${e+n.Nv}px;\n    }\n  }\n\n  @keyframes shopButtonSlideOut {\n    0% {\n      width: ${e+n.Nv}px;\n    }\n\n    100% {\n      width: 48px;\n    }\n  }\n\n  @keyframes revealShopText {\n    from {\n      clip-path: inset(0 100% 0 0);\n    }\n    to {\n      clip-path: inset(0 0 0 0);\n    }\n  }\n\n\n  @keyframes stelaSlideIn {\n    0% {\n        opacity: 0;\n    }\n\n    100% {\n        opacity: 1;\n    }\n}\n\n@keyframes stelaSlideOut {\n    0% {\n        opacity: 1;\n    }\n\n    100% {\n        opacity: 0;\n    }\n}\n\n@keyframes stelaSlideInThenOut {\n    0% {\n        opacity: 0;\n    }\n\n    15% {\n        opacity: 0;\n    }\n\n    25% {\n        opacity: 1;\n    }\n\n    50% {\n        opacity: 1;\n    }\n\n    75% {\n        opacity: 1;\n    }\n\n    85% {\n        opacity: 0;\n    }\n\n    100% {\n        opacity: 0;\n    }\n}\n\n  `},554383:(e,t,i)=>{i.r(t),i.d(t,{default:()=>w});var n=i(341866),o=i(305791),r=i(599611),a=i(325016),s=i(667294),l=i(335174),c=i(391254),d=i(829407),u=i(112690),p=i(483205),h=i(241244),m=i(883119),_=i(785893);const g={};function v({alwaysShow:e,contextLogData:t,enablePointerEvents:i=!0,imageHeight:n,imageWidth:o,isSelected:r,label:a,labelPressState:v,xPos:f,yPos:y}){const x=(0,s.useRef)(),b=(0,u.Z)();(0,d.Z)((()=>{b({event_type:120,view_type:3,aux_data:{...t},...t})})),(0,s.useEffect)((()=>{g[a]={}}),[a]),(0,s.useEffect)((()=>{const e=x.current&&x.current.getBoundingClientRect().width;g[a].width=e}),[x.current]);const w={backgroundColor:e&&r?"#000":"rgba(255, 255, 255)",zIndex:5,whiteSpace:"nowrap",left:(g[a]||{}).left?-((g[a]||{}).width+p.b9):void 0},P={none:{...w,opacity:0},down:{...w,animation:"stelaSlideIn .3s ease-in-out forwards"},up:{...w,animation:"stelaSlideOut .3s ease-in-out forwards"}},S=(g[a]||{}).width;let T=f,I=y;return f+S>o?T=o-S:f<0&&(T=0),y+33>n?I=n-33:y<0&&(I=0),(0,_.jsx)(m.xu,{dangerouslySetInlineStyle:{__style:{top:I,left:T}},display:"flex",position:"absolute",children:(0,_.jsxs)(h.N,{enabled:i,children:[(0,_.jsx)(c.Z,{unsafeCSS:(0,l.Z)()}),(0,_.jsx)(m.xu,{ref:x,dangerouslySetInlineStyle:e?{__style:{...w,opacity:(g[a]||{}).width?1:0}}:{__style:(g[a]||{}).width?{...P[v||"none"]}:{opacity:0}},padding:2,position:"relative",rounding:"pill",children:(0,_.jsx)(m.xv,{align:"start",color:e&&r?"inverse":"default",overflow:"normal",size:"200",weight:"bold",children:a})})]})})}var f=i(276775),y=i(629377);const x=()=>{};function b({alwaysShow:e,cropSource:t,currentSpotlightIdx:i,enablePointerEvents:n,handleStelaClick:s,height:l=1,index:c,labelPressState:d,onStelaDotAnimationComplete:h,pin:g,searchQuery:b,stelaDotAnimationType:w,stelaArea:P,trafficSource:S,width:T=1}){const I=(0,f.useHistory)(),{selectStela:k}=(0,y.b)(),E=(0,u.Z)(),A={x:((P.label_x||P.x)+P.w/2)*T,y:((P.label_y||P.y)+P.h/2)*l},C={element:1221,image_signature:g.image_signature,visual_objects:JSON.stringify({x:P.x,y:P.y,w:P.w,h:P.h,object_category:P.label}),pin_id:g.id,commerce_data:JSON.stringify({pin_is_stela:!0})};return(0,_.jsxs)(m.iP,{onMouseEnter:x,onMouseLeave:x,onTap:()=>{if(E(e?{event_type:101,view_type:427,element:C.element,aux_data:{...C}}:{event_type:101,view_type:3,element:C.element,aux_data:{...C}}),e&&s&&P&&void 0!==c)k({selectedStelaItem:P}),s(c);else if(P&&I){const{height:e,width:t}=(0,o.Z)({pin:g,maxWidth:p.RZ}),i=(0,r.Z)({cropArea:P,scaledWidth:t,scaledHeight:e});let n=`/pin/${g.id}/related-products/?x=${i.x}&y=${i.y}&w=${i.w}&h=${i.h}&entrySource=shopping&cropSource=4`;b&&(n=n.concat(`&q=${b}`)),S&&(n=n.concat(`&rs=${S}`)),k({selectedStelaItem:P}),I.push(n)}},children:[(0,_.jsx)(m.xu,{dangerouslySetInlineStyle:{__style:{top:A.y,left:A.x}},display:"flex",position:"absolute","data-test-id":"stela-label-dot",children:("inOut"===w||!P.label&&("down"===d||e)||T<=400&&e)&&(0,_.jsx)(a.Z,{alwaysShow:e,contextLogData:C,isSelected:P.isSelected,onStelaDotAnimationComplete:h,stelaDotAnimationType:w,imageSignature:g.image_signature,enablePointerEvents:n})}),P.label&&!(e&&T<=400)&&(0,_.jsx)(v,{alwaysShow:e,contextLogData:C,imageWidth:T,imageHeight:l,isSelected:P.isSelected,label:P.label,labelPressState:d,xPos:A.x,yPos:A.y,enablePointerEvents:n})]})}function w({alwaysShow:e,cropSource:t,closeupImageHovered:i,currentSpotlightIdx:o,disableSelected:r,enablePointerEvents:a,handleStelaClick:s,height:l,labelPressState:c,onStelaDotAnimationComplete:d,pin:u,searchQuery:p,stelaDotAnimationType:h,trafficSource:g,width:v}){const{stela:f}=(0,y.b)(),x=(0,n.Z)({pin:u}).map((e=>{if(!r&&f.selectedStelaItem){const{x:t,y:i}=f.selectedStelaItem;if(e.x===t&&e.y===i)return{...e,isSelected:!0}}return{...e,isSelected:!1}}));return(0,_.jsx)(m.xu,{height:l,position:"absolute",width:v,dangerouslySetInlineStyle:{__style:"in"===h||i?{backgroundColor:"rgba(0, 0, 0, 0.2)"}:{}},children:x.map(((i,n)=>(0,_.jsx)(b,{alwaysShow:e,cropSource:t,currentSpotlightIdx:o,height:l,index:n,handleStelaClick:s,labelPressState:c,onStelaDotAnimationComplete:d,pin:u,searchQuery:p,stelaDotAnimationType:h,stelaArea:i,trafficSource:g,width:v,enablePointerEvents:a},`${i.x}${i.y}`)))})}},325016:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(335174),r=i(391254),a=i(112690),s=i(883119),l=i(483205),c=i(241244),d=i(785893);function u({alwaysShow:e,contextLogData:t,enablePointerEvents:i=!0,imageSignature:u,isSelected:p,onStelaDotAnimationComplete:h,stelaDotAnimationType:m}){const[_,g]=(0,n.useState)(!1),v=(0,a.Z)();(0,n.useEffect)((()=>{_||g(!0)}),[]);let f;(0,n.useEffect)((()=>{v({event_type:120,view_type:3,aux_data:{...t},...t})}),[]),"in"===m?f="stelaSlideIn .3s ease-in-out forwards":"out"===m?f="stelaSlideOut .3s ease-in-out forwards":"inOut"===m?f="stelaSlideInThenOut 3s ease-in-out forwards":"none"===m&&(f="none");const y=e?"black":"white",x=e?{opacity:1}:{animation:f,opacity:"none"===f?0:void 0};return(0,d.jsx)(n.Fragment,{children:(0,d.jsxs)(c.N,{enabled:i,children:[(0,d.jsx)(r.Z,{unsafeCSS:(0,o.Z)()}),(0,d.jsx)(s.xu,{"data-test-id":"closeup-stela-dot",height:l.b9,width:l.b9,onAnimationEnd:()=>{h&&"inOut"===m&&h()},dangerouslySetInlineStyle:{__style:x},children:(0,d.jsxs)("svg",{fill:"none",height:"36",viewBox:"0 0 36 36",width:"36",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("g",{filter:"url(#filter0_d)",children:(0,d.jsx)("circle",{cx:"18",cy:"18",fill:p?y:"white",r:"8"})}),(0,d.jsx)("defs",{children:(0,d.jsxs)("filter",{colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"36",id:"filter0_d",width:"36",x:"0",y:"0",children:[(0,d.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,d.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,d.jsx)("feOffset",{}),(0,d.jsx)("feGaussianBlur",{stdDeviation:"5"}),(0,d.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,d.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow"}),(0,d.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",mode:"normal",result:"shape"})]})})]})})]})})}},483205:(e,t,i)=>{i.d(t,{Nv:()=>o,RZ:()=>r,b9:()=>n});const n=36,o=44,r=446},700398:(e,t,i)=>{i.d(t,{Z:()=>o});const n=new Set([90,88,89,91,101,92,131]);function o(e){return n.has(e)}},941646:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(883119),o=i(785893);function r(e){const{children:t,display:i,id:r}=e;return(0,o.jsx)(n.xu,{"data-test-id":r,display:i,children:t})}},170815:(e,t,i)=>{i.d(t,{Z:()=>r});const n=!("undefined"==typeof window||!window.performance||!window.performance.now);function o(){return n?window.performance.now():Date.now()}class r{constructor(){var e,t,i;i=null,(t="startTime")in(e=this)?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}start(){this.startTime=o()}end(){this.elapsedTime=Math.round(o()-(this.startTime||Date.now())),this.startTime=n?Math.round(this.startTime||Date.now()):null}getCompletedTime(){return this.elapsedTime}}},594881:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(172071),o=i(6637),r=i(202139);var a=i(983722),s=i(635240);var l=i(385740),c=i(30287),d=i(172045);const u=function(){const e=(0,a.Z)();if(null!=e&&e.isAuthenticated&&!function(){const e=window.location.pathname.startsWith("/email/subscription")||window.location.pathname.startsWith("/email/remove"),t=window.location.pathname.startsWith("/pin/create/"),i="/pin-builder/"===window.location.pathname&&/url=/.test(window.location.href),n=t||i,{userAgent:o}=(0,a.Z)()||{userAgent:{isMobile:!1,isTablet:!1}};return!(o.isMobile||o.isTablet)&&n||e}()){var t,i;const{viewType:a,viewParameter:u}=null!==(t=(0,l.BE)())&&void 0!==t?t:{},p=(0,c.FB)(window);!function(e,t){const i=o.Z.create("ActiveUserResource",e);let a=3e4;i.callCreate().catch((o=>{let s=o.message;if(s&&"object"==typeof s){s._t_message&&delete s._t_message;try{s=JSON.stringify(s)}catch(l){s="Unable to serialize error message"}}n.Z.increment("webapp.metrics.dau.errors",1,{message:s,browser:e.data.browser,error_code:o.api_error_code,is_auth:t}),setTimeout((()=>{a>r.UK||(a*=2,i.callCreate())}),a)}))}({data:{appVersion:(0,s.Z)(),auxData:{pwa_type:p&&"unknown"!==p?p:void 0,stage:null!==(i=e.stage)&&void 0!==i?i:"unknown"},browser:e.userAgent.browserType,clientUUID:(0,d.Z)(),event_type:7137,time:1e6*Date.now(),unauth_id:e.unauthId,view_type:a,view_parameter:u}},e.isAuthenticated)}}},619937:(e,t,i)=>{i.d(t,{$N:()=>p,GY:()=>l,MZ:()=>a,NR:()=>d,Vn:()=>c,fm:()=>n,kM:()=>r,q6:()=>o,qp:()=>s,uV:()=>u});const n={DOWNLOAD_TEMPLATE:"DOWNLOAD_TEMPLATE",UPLOAD_TEMPLATE:"UPLOAD_TEMPLATE",HISTORY:"HISTORY",RESOURCES:"RESOURCES"},o={GENERAL:"GENERAL",CAMPAIGNS:"CAMPAIGNS",AD_GROUPS:"AD_GROUPS",ADS:"ADS",KEYWORDS:"KEYWORDS",PRODUCT_GROUPS:"PRODUCT_GROUPS",ERROR_CODES:"ERROR_CODES"},r={BILLING_HISTORY:"BILLING_HISTORY",BILLING_FORMS:"BILLING_FORMS",ORDER_LINES:"ORDER_LINES",PROMOTIONS:"PROMOTIONS",DOCUMENTS:"DOCUMENTS",PREPAID_CAMPAIGN_SPEND:"PREPAID_CAMPAIGN_SPEND_SUMMARY"},a={GOOGLE_TAG_MANAGER:"Google Tag Manager",SHOPIFY:"Shopify",WOO_COMMERCE:"WooCommerce",WORDPRESS:"WordPress",SQUARESPACE:"Squarespace",WEEBLY:"Weebly",TEALIUM:"Tealium",MAGENTO:"Magento",ECWID:"Ecwid",BIG_COMMERCE:"BigCommerce"},s={PINTEREST_TAG:"PINTEREST_TAG",PINTEREST_TAG_EVENTS:"PINTEREST_TAG_EVENTS",PINTEREST_TAG_HEALTH:"PINTEREST_TAG_HEALTH",CONVERSION_HEALTH:"CONVERSION_HEALTH",CONVERSION_UPLOAD:"CONVERSION_UPLOAD",UPLOAD_HISTORY:"UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD:"PCA_UPLOAD",CONVERSIONS_API:"CONVERSIONS_API",CONVERSIONS_API_ACCESS_TOKEN:"CONVERSIONS_API_ACCESS_TOKEN",CONVERSIONS_API_DEDUPLICATION:"CONVERSIONS_API_DEDUPLICATION",PINTEREST_EVENTS_OVERVIEW:"PINTEREST_EVENTS_OVERVIEW",PINTEREST_EVENT_HISTORY:"PINTEREST_EVENT_HISTORY"},l={PINTEREST_TAG_DASHBOARD:"PINTEREST_TAG_DASHBOARD",PINTEREST_TAG_LANDING:"PINTEREST_TAG_LANDING",PINTEREST_TAG_INSTRUCTIONS:"PINTEREST_TAG_INSTRUCTIONS",CONVERSION_UPLOAD_LANDING:"CONVERSION_UPLOAD_LANDING",CONVERSION_UPLOAD_VALIDATION:"CONVERSION_UPLOAD_VALIDATION",CONVERSION_UPLOAD_HISTORY:"CONVERSION_UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD_LANDING:"PCA_UPLOAD_LANDING",PCA_UPLOAD_VALIDATION:"PCA_UPLOAD_VALIDATION"},c={UNREAD:"UNREAD",READ:"READ",ACCEPTED:"ACCEPTED",REJECTED:"REJECTED",DISMISSED:"DISMISSED",INVALID:"INVALID",MUTED:"MUTED",SNOOZED:"SNOOZED",PMP_REPORTED:"PMP_REPORTED",EMAILED:"EMAILED",BULK_DOWNLOADED:"BULK_DOWNLOADED",FILTERED:"FILTERED",PUSHED:"PUSHED"},d={ATTRIBUTION_DESTINATION:"destination",ATTRIBUTION_EXPIRY:"expiry",ATTRIBUTION_SOURCE:"attributionsrc",ATTRIBUTION_SOURCE_EVENT_ID:"source_event_id"},u=604800,p={ATTRIBUTION_SOURCE_ID:"attributionsourceid",ATTRIBUTE_DESTINATION:"attributiondestination",ATTRIBUTE_ON:"attributeon"}},283698:(e,t,i)=>{function n(e){return"undefined"!=typeof window&&Object.prototype.hasOwnProperty.call(window,"requestAnimationFrame")||e&&e(),window.requestAnimationFrame((()=>{window.requestAnimationFrame((()=>{e&&e()}))}))}i.d(t,{Z:()=>n})},100183:(e,t,i)=>{i.d(t,{CC:()=>n,Ll:()=>r,XF:()=>o});const n=(e,t)=>((e,t,i)=>({x:Math.floor(e*Math.cos(i)),y:Math.floor(t*Math.sin(i))}))(t/2,e/2,2*Math.random()*Math.PI),o=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,r=e=>["@-webkit-keyframes","@keyframes"].map((t=>e.map((e=>t+" "+e)).join("\n"))).join("\n")},176532:(e,t,i)=>{function n({async:e,data:t,headers:i,timeout:n,type:o,updateProgress:r,url:a}){let s=!1;return{promise:new Promise(((r,l)=>{const c=n?setTimeout((()=>{s="timeout",l({type:"timeout"})}),n):void 0;fetch(a,{method:o,credentials:"include",mode:"same-origin",keepalive:!e,headers:i,...t?{body:t}:{}}).then((e=>{c&&clearTimeout(c),s?"timeout"!==s&&l({type:"abort"}):r({status:e.status,statusText:e.statusText,ok:e.status>=200&&e.status<300||304===e.status,headers:{get:t=>e.headers.get(t),_logString:()=>{const t=[];for(const[i,n]of e.headers.entries())t.push(`${i}: ${n}\r\n`);return t.join("")}},json:()=>e.json().then((e=>e instanceof Object?e:Promise.reject(new Error("JSON.parse did not return an object"))))})})).catch((()=>Promise.reject({type:"timeout"})))})),abort:()=>{s="manual"}}}i.d(t,{Z:()=>p});var o=i(635240);const r=(...e)=>{};function a({async:e,data:t,headers:i,timeout:n,type:o,updateProgress:a,url:s}){const l=new XMLHttpRequest;return{promise:new Promise(((c,d)=>{const u=n?setTimeout((()=>{l.onreadystatechange=r,l.abort(),d({type:"timeout"})}),n):void 0;l.onreadystatechange=()=>{if(4===l.readyState){l.onreadystatechange=r,clearTimeout(u);const e=l.status,t=l.statusText,i=l.responseText;if(!e)return void d({type:"abort"});c({status:e,statusText:t,ok:e>=200&&e<300||304===e,headers:{get:e=>l.getResponseHeader(e),_logString:()=>l.getAllResponseHeaders()},json:()=>new Promise(((e,t)=>{try{const n=JSON.parse(i);n instanceof Object?e(n):t(new Error("JSON.parse did not return an object"))}catch(n){t(n)}})),responseText:i})}},a&&l.upload.addEventListener("progress",(e=>{let t=null;e.lengthComputable&&(t=e.loaded/e.total*100),a(t)})),l.open(o,s,e),Object.keys(i).forEach((e=>{l.setRequestHeader(e,i[e])})),l.send(t||null)})),abort:()=>{l&&l.abort()}}}var s=i(42238),l=i.n(s);const c=e=>{if((e=>{const t=e.match(/\s+chrome\/(\d+)\./i);return!!t&&parseInt(t[1],10)>=79})(e))return!0;const{name:t="",version:i=""}=l()(e).browser,n=parseInt(i.replace(/\..*/,""),10)||0;return"chrome"===t.toLowerCase()&&n>=79};var d=i(826067),u=i(628551);function p(e){const t={async:!0,cache:!1,data:void 0,headers:{},query:{},timeout:0,type:"GET",...e};let{url:i,data:r}=t;const s=t.type;r&&"object"==typeof r&&("GET"===s?(i=(0,d.ru)(i,r),r=void 0):r instanceof FormData||(r=(0,d.XP)(r))),!1===t.cache&&"GET"===s&&(i=(0,d.ru)(i,{_:Date.now()}));const l=(0,u.needsCsrfToken)(s,i);if(l&&!(0,u.getCsrfToken)())return{promise:Promise.reject({type:"csrferror",message:"No csrf token found"}),abort:()=>{}};return(!t.async&&"keepalive"in new Request("")&&c(window.navigator.userAgent||"")?n:a)({...t,url:i,data:r,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json, text/javascript, */*, q=0.01","X-APP-VERSION":(0,o.Z)(),..."GET"===s||!r||r instanceof FormData?{}:{"Content-Type":"application/x-www-form-urlencoded"},...l?{"X-CSRFToken":(0,u.getCsrfToken)()||""}:{},...t.headers}})}},613316:(e,t,i)=>{function n(e){return[0,24,21,26].includes(e)}function o({articleType:e,id:t,title:i}){const n=i.toLowerCase().replace(/[.,\/#!?$%\^&\*+;:{}=\-_`~()\’'"]/g,"").trim().replace(/\s+/g,"-");return"today"===e?`/today/shop/${n}/${t}/`:`/discover/article/${n}/${t}/`}i.d(t,{x:()=>o,y:()=>n})},41233:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(221263),o=i(937330);function r({action:e,board:t,viewer:i}){var r;return(0,n.Z)(i,t)||(0,o.Z)({board:t,viewer:i})&&!(null===(r=t.collaborator_permissions)||void 0===r||!r.includes(e))}},221263:(e,t,i)=>{function n(e,t){const i=t&&t.owner&&t.owner.id;return e.isAuth&&i===e.id}i.d(t,{Z:()=>n})},937330:(e,t,i)=>{function n({board:e,viewer:t}){const{collaborated_by_me:i}=e;return Boolean(t.isAuth&&i)}i.d(t,{Z:()=>n})},4294:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(221263),o=i(937330);function r({board:e,viewer:t}){return(0,n.Z)(t,e)||(0,o.Z)({board:e,viewer:t})}},366284:(e,t,i)=>{i.d(t,{G6:()=>r,i7:()=>a,oi:()=>n,u$:()=>o,un:()=>l,vU:()=>s});const n=Object.freeze({OTHER:0,CHROME:1,SAFARI:2,IE:3,FIREFOX:4,OPERA:5,EDGE:6}),o=e=>{switch(!0){case e.includes("Chrome"):return n.CHROME;case e.includes("Safari"):return n.SAFARI;case e.includes("Firefox"):return n.FIREFOX;case e.includes("Opera"):return n.OPERA;case e.includes("IE"):return n.IE;case e.includes("Edge"):return n.EDGE;default:return n.OTHER}};function r(e){return o(e)===n.SAFARI}function a(e){return o(e)===n.CHROME}function s(e){return o(e)===n.FIREFOX}function l(e){return o(e)===n.EDGE}},56641:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(567831),o=i(867820);function r(e,t){if(t&&!(()=>{try{return window.localStorage.test=2,!1}catch(e){return!0}})()){const t=window.open(e,"_blank");return t&&(t.opener=null),t}{const t=(0,n.Z)(e);return setTimeout((()=>{(0,o.My)("setting_new_window_location")}),0),window.location.href=t,window}}},126098:(e,t,i)=>{function n(){if("undefined"!=typeof navigator&&"serviceWorker"in navigator&&void 0!==navigator.serviceWorker&&"Notification"in window&&"PushManager"in window)try{return window.Notification.permission}catch(e){return}}i.d(t,{Z:()=>n})},78714:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(56641),o=i(954931),r=i(867820);const a=(e,t)=>{null!=t&&t.disableOriginCheck||(0,o.Z)(e)||(e="/",(0,r.My)("url_reset")),(0,n.Z)(e)}},436851:(e,t,i)=>{i.d(t,{$:()=>o,d:()=>n});const n=e=>/instagram/i.test(e||""),o=e=>(e||"").includes("[Pinterest/iOS]")||(e||"").includes("[Pinterest/Android]")},792182:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294),o=i(23279),r=i.n(o);function a(){const[e,t]=(0,n.useState)(null);return(0,n.useEffect)((()=>{const e=()=>t({width:window.innerWidth,height:window.innerHeight});e();const i=r()(e,50);return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)}),[]),e}},924196:(e,t,i)=>{i.d(t,{Z:()=>n});const n={GOOGLE_ADWORDS_ID:852082959,GOOGLE_ADWORDS_LABEL_PROPEL_QUALIFIED:"Mah3CPrv13YQj4KnlgM",GOOGLE_ADWORDS_LABEL_PROPEL_UNQUALIFIED:"_DJfCKzy13YQj4KnlgM",GOOGLE_ADWORDS_LABEL_BUSINESS_CREATE:"GGbCCM7p-nYQj4KnlgM",GOOGLE_ADWORDS_LABEL_BUSINESS_CONVERT:"SwBsCIz9k3cQj4KnlgM",GOOGLE_ADWORDS_LABEL_BUSINESS_ADVERTISER_INTENT:"kDf0COWL4okBEI-Cp5YD",DOUBLECLICK_TAG_ID:"8032161",DOUBLECLICK_EVENT_ID_PROPEL:"prope001",DOUBLECLICK_CATEGORY_ID_PROPEL_QUALIFIED:"pinte0",DOUBLECLICK_CATEGORY_ID_PROPEL_UNQUALIFIED:"pinte00",TRADEDESK_ADVERTISER_ID:"fc1uc9n",TRADEDESK_EVENT_ID_GENERAL_PAGEVIEW:"ogalyt3",TRADEDESK_CONVERSION_ID_PROPEL_QUALIFIED:"judrn76",TRADEDESK_CONVERSION_ID_PROPEL_UNQUALIFIED:"f0v4s5d",FACEBOOK_ADVERTISER_ID:"956400731086791",TWITTER_UNIVERSAL_TAG_ID:"nuzh8",TWITTER_CONVERSION_ID_PROPEL_QUALIFIED:"ny8zl",TWITTER_CONVERSION_ID_PROPEL_UNQUALIFIED:"nya0d",LINKEDIN_PARTNER_ID:"44352",LINKEDIN_CONVERSION_ID_PROPEL_QUALIFIED:"166217",LINKEDIN_CONVERSION_ID_PROPEL_UNQUALIFIED:"171754",LINKEDIN_CONVERSION_ID_SUBMISSION_EVENT:"529092",PINTEREST_TAG_ID:"2614461171935",SMB_PAID_PINTEREST_ID:"2613736141997"}},904431:(e,t,i)=>{function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z:()=>r});class o{static reportGoogleConversion(e,t,i){void 0!==window.gtag_report_conversion?window.gtag_report_conversion(e,t,i):o.queuedGoogleConversions.push({id:e,label:t,url:i})}static reportFacebookConversion(e,t,i){void 0!==window.fbq?i?window.fbq("track",t,i):window.fbq("track",t):o.queuedFacebookConversions.push({id:e,event:t,data:i})}static reportCustomFacebookConversion(e,t,i){void 0!==window.fbq?i?window.fbq("trackCustom",t,i):window.fbq("trackCustom",t):o.queuedFacebookConversions.push({id:e,isCustomEvent:!0,event:t,data:i})}static reportPinterestConversion(e,t,i){void 0!==window.pintrk?i?window.pintrk("track",t,i):window.pintrk("track",t):o.queuedPinterestConversions.push({id:e,event:t,data:i})}static reportTwitterConversion(e,t){void 0!==window.twttr?t?window.twttr.conversion.trackPid(e,t):window.twttr.conversion.trackPid(e):o.queuedTwitterConversions.push({id:e,data:t})}static reportTheTradeDeskConversion(e,t){const i=document.createElement("img");i.setAttribute("height","1"),i.setAttribute("width","1"),i.setAttribute("role","presentation"),i.style.borderStyle="none",i.style.position="absolute",i.setAttribute("src",`//insight.adsrvr.org/track/conv/?adv=${e}&ct=0:${t}&fmt=3`),document.body.insertBefore(i,document.body.lastChild)}static reportLinkedInConversion(e,t){const i=document.createElement("img");i.setAttribute("width","1"),i.setAttribute("height","1"),i.setAttribute("role","presentation"),i.setAttribute("src",`https://dc.ads.linkedin.com/collect/?pid=${e}&conversionId=${t}&fmt=gif`),i.style.display="none",document.body.insertBefore(i,document.body.lastChild)}static reportDoubleClickConversion(e,t,i){const n=1e13*Math.random(),o=document.createElement("iframe");o.setAttribute("width","1"),o.setAttribute("height","1"),o.setAttribute("frameborder","0"),o.setAttribute("src",`https://${e}.fls.doubleclick.net/activityi;src=${e};\n    type=${t};cat=${i};dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;ord=${n}?`),o.style.display="none",document.body.insertBefore(o,document.body.lastChild)}static insertGoogleAdWordsTag(e){const t=document.createElement("script");t.setAttribute("async",""),t.setAttribute("src",`https://www.googletagmanager.com/gtag/js?id=AW-${e}`),t.onload=()=>{window.dataLayer=window.dataLayer||[],window.gtag=function(e,t,i){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config","AW-"+e),window.gtag_report_conversion=function(e,t,i){return window.gtag("event","conversion",{send_to:"AW-"+e+"/"+t,event_callback:function(){void 0!==i&&window.location.assign(i)}}),!1};const t=o.queuedGoogleConversions;for(let i=0;i<t.length;i+=1){const n=t[i];n.id===e&&o.reportGoogleConversion(n.id,n.label,n.url)}},document.body.insertBefore(t,document.body.firstChild)}static insertFacebookPixelTag(e){var t,i,n,r,a,s;t=window,i=document,n="script",t.fbq||(r=t.fbq=function(){r.callMethod?r.callMethod.apply(r,arguments):r.queue.push(arguments)},t._fbq||(t._fbq=r),r.push=r,r.loaded=!0,r.version="2.0",r.queue=[],(a=i.createElement(n)).async=!0,a.src="//connect.facebook.net/en_US/fbevents.js",(s=i.getElementsByTagName(n)[0]).parentNode.insertBefore(a,s)),window.fbq("init",e),window.fbq("track","PageView");const l=o.queuedFacebookConversions;for(let c=0;c<l.length;c+=1){const t=l[c];t.id===e&&(t.isCustomEvent?o.reportCustomFacebookConversion(e,t.event,t.data):o.reportFacebookConversion(e,t.event,t.data))}}static insertTwitterUniversalTag(e){var t,i,n,o,r,a;t=window,i=document,n="script",t.twq||((o=t.twq=function(){o.exe?o.exe.apply(o,arguments):o.queue.push(arguments)}).version="1.1",o.queue=[],(r=i.createElement(n)).async=!0,r.src="//static.ads-twitter.com/uwt.js",(a=i.getElementsByTagName(n)[0]).parentNode.insertBefore(r,a)),window.twq("init",e),window.twq("track","PageView")}static insertLinkedInInsightTag(e){window._linkedin_data_partner_id=e;const t=document.createElement("script");t.setAttribute("src","//snap.licdn.com/li.lms-analytics/insight.min.js"),document.body.insertBefore(t,document.body.firstChild)}static insertPinterestTag(e){!function(e){if(!window.pintrk){window.pintrk=function(){window.pintrk.queue.push(Array.prototype.slice.call(arguments))};const e=window.pintrk;e.queue=[],e.version="3.0";const t=document.createElement("script");t.async=!0,t.src="https://s.pinimg.com/ct/core.js";const i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}}(),window.pintrk("load",e),window.pintrk("page");const t=o.queuedPinterestConversions;for(let i=0;i<t.length;i+=1){const n=t[i];n.id===e&&o.reportPinterestConversion(e,n.event,n.data)}}}n(o,"queuedGoogleConversions",[]),n(o,"queuedFacebookConversions",[]),n(o,"queuedPinterestConversions",[]),n(o,"queuedTwitterConversions",[]);const r=o},834911:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(835209),o=i(341732);function r({carouselData:e,images:t,richMetadata:i,richSummary:r,shouldUnifyImageSizes:a,additionalImages:s}){const l=(0,n.Z)({richPinData:i||r});return l&&s&&s.length>0?(0,o.Z)(null,s,e&&e.index,a,l.id):l&&l.additional_images&&l.additional_images.length>0?(0,o.Z)(t,l.additional_images,e&&e.index,a,l.id):e||void 0}},737022:(e,t,i)=>{function n(e){return e?e["564x"]&&e["564x"].url?e["564x"]:e["736x"]&&e["736x"].url?e["736x"]:e["474x"]&&e["474x"].url?e["474x"]:e["236x"]&&e["236x"].url?e["236x"]:null:null}i.d(t,{Z:()=>n})},687551:(e,t,i)=>{function n(e){return!!(e&&e.carousel_data&&e.carousel_data.id)}i.d(t,{Z:()=>n})},341732:(e,t,i)=>{i.d(t,{Z:()=>r});const n=["236x","474x","564x","736x"];function o(e){function t(e,{imageKey:t,height:i,width:n}){return e.images&&e.images[t]&&(e={...e,images:{...e.images,[t]:{...e.images[t],height:i,width:n}}}),e}const i=n.map((function(t){const i=Math.min(...e.map((e=>e.images&&e.images[t]&&e.images[t].height||1/0))),n=Math.min(...e.map((e=>e.images&&e.images[t]&&e.images[t].width||1/0)));return{imageKey:t,height:i,width:n}}));return e.map((e=>i.reduce(t,e)))}function r(e,t,i,n,r){const a=(null==t?void 0:t.map((({canonical_images:e,image_signature:t})=>({images:e||void 0,image_signature:t||void 0}))))||[],s=e?[{images:e},...a]:a;return{carousel_slots:n?o(s):s,index:i||0,id:r}}},768559:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(826067);const o=/\/today\/(article|best|trending)\/[\w-]+\/(\d+)/,r=/\/discover\/article\/[\w-]+\/(\d+)/,a=(e,t)=>t?e.substring(t.length).split("/")[0]:e,s=({boardUrl:e,callToCreateSourcePinId:t,path:i,pinId:s,pinnerUserName:l,query:c,search:d,storyPinDataId:u})=>{var p,h;if(!i)return"";let m="";switch(i){case"/":case"/homefeed/":return"UserHomefeedResource";case l&&`/${l}/pins/`:return"UserPinsResource";case l&&`/${l}/`:case/\/_activity\//.test(i)&&i:return"UserActivityPinsResource";case/\/_created\//.test(i)&&i:return u?"UserStoryPinsFeedResource":"UserActivityPinsResource";case/\/_community\//.test(i)&&i:return"UserDiscoveredPinsResource";case/\/_shop\//.test(i)&&i:return"StoreFrontFeedResource";case/\/_saved\//.test(i)&&i:return"BoardlessPinsResource";case l&&`/${l}/_shopping_list/`:return"ShoppingListFeedResource";case/\/visual-search\//.test(i)&&i:return"VisualLiveSearchResource";case/\/pin\//.test(i)&&i:m="/pin/";const _=a(i,m);if(s!==_)return t?`ApiResource_callToCreatePins_${_}`:`RelatedPinFeedResource_${_}`;break;case/\/search\//.test(i)&&i:if(d){return`SearchResource_${((0,n.mB)(d,{shouldDecode:!1}).q||"").toLowerCase()}`}if(c)return`SearchResource_${encodeURIComponent(c.q||"").toLowerCase()}`;break;case r.test(i)&&i:return`ExploreArticleResource_${(null===(p=i.match(r))||void 0===p?void 0:p[2])||"unknown"}`;case/\/discover\/article\//.test(i)&&i:m="/discover/article/";return`ExploreArticleResource_${a(i,m)}`;case/\/categories\//.test(i)&&i:m="/categories/";return`CategoryFeedResource_${a(i,m)}`;case/\/discover\/topics\//.test(i)&&i:return"CategoryFeedResource";case/\/news_hub\//.test(i)&&i:m="/news_hub/";return`NewsHubDetailsResource_${a(i,m)}`;case/\/_tools\/more-ideas\//.test(i)&&i:return"BoardContentRecommendationResource";case/\/topics\//.test(i)&&i:m="/topics/";return`TopicFeedResource_${a(i,m)}`;case l&&`/${l}/products/`:return"StoreFrontFeedResource";case/\/source\//.test(i)&&i:m="/source/";return`DomainFeedResource_${a(i,m)}`;case/\/explore\//.test(i)&&i:m="/explore/";return`SearchResource_${a(i,m)}`;case e:case!!e&&/\/more_ideas\//.test(i)&&i:return"BoardFeedResource";case e&&i.indexOf(e)>-1&&i:return"BoardSectionPinsResource";case/\/following\//.test(i)&&i:return"FollowingFeedResource";case/\/brand_catalog\//.test(i)&&i:return"BrandCatalogFeedResource";case o.test(i)&&i:return`TodayArticleFeedResource_${(null===(h=i.match(o))||void 0===h?void 0:h[2])||"unknown"}`;case/\/today\//.test(i):return"TodayTabResource";case/\story_feed\//.test(i)&&i:if(d){const{feed_type:e,request_params:t}=(0,n.mB)(d);return`StoryFeedResource_${e}_${t}`}}return""},l=({boardUrl:e,callToCreateSourcePinId:t,location:i,pinId:n,pinnerUserName:o,previousHistory:r,storyPinDataId:a,trackingParams:l,trackingParamsMap:c={}})=>{if(!n||!l||!i)return;if(!c)return`${l}~0`;const{pathname:d,search:u,query:p}=i,h=s({boardUrl:e,callToCreateSourcePinId:t,path:d,pinId:n,pinnerUserName:o,query:p,search:u,storyPinDataId:a,trackingParams:l,trackingParamsMap:c}),m=Object.keys(c);let _;if((d||"").startsWith("/pin/")){const e=m.find((e=>"PinResource"!==e));_=e?c[e]:c.PinResource}else _=c[h];let g;if(!_&&r&&r.length){const i=(e=>{let t=null==e?void 0:e.pathname;return t?(t.match(/\/search\//)&&null!=e&&e.search&&(t+=e.search),t.toLowerCase()):""})(r[r.length-1].location);g=s({boardUrl:e,callToCreateSourcePinId:t,path:i,pinId:n,pinnerUserName:o,query:p,search:u,storyPinDataId:a,trackingParams:l,trackingParamsMap:c}),_=c[g]}return _||(_=`${l||""}~0`),_}},47170:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(768559),o=i(558068),r=i(276775);function a(e){var t,i;const a=(0,r.useLocation)(),{previous:s}=(0,o.Hv)();return(0,n.Z)({boardUrl:null===(t=e.board)||void 0===t?void 0:t.url,callToCreateSourcePinId:e.call_to_create_source_pin_id,location:a,pinId:e.id,pinnerUserName:null===(i=e.pinner)||void 0===i?void 0:i.username,previousHistory:s,storyPinDataId:e.story_pin_data_id,trackingParams:e.tracking_params,trackingParamsMap:e.tracking_params_map})}},827896:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(768559),o=i(350118),r=i(276775);function a(){const e=(0,o.S6)(),t=(0,r.useLocation)();return(i,o)=>{let r;const a=e(i);if(null!=o&&o.shouldTrackForPrevLocation){const e=(null==a?void 0:a.tracking_params_map)||{},t=Object.keys(e).find((e=>"PinResource"!==e));a&&(r=t?e[t]:e.PinResource)}else if(a){var s,l;r=(0,n.Z)({boardUrl:null===(s=a.board)||void 0===s?void 0:s.url,callToCreateSourcePinId:a.call_to_create_source_pin_id,location:t,pinId:a.id,pinnerUserName:null===(l=a.pinner)||void 0===l?void 0:l.username,storyPinDataId:a.story_pin_data_id,trackingParams:a.tracking_params,trackingParamsMap:a.tracking_params_map})}return r}}},328531:(e,t,i)=>{function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z:()=>o});const o=new class{constructor(){var e=this;n(this,"startInactiveSessionTimeout",(()=>{this.inactiveSessionTimeout=setTimeout(this.stopInterval,36e5)})),n(this,"startInterval",(()=>{this.interval=setInterval(this.refreshContext,3e5)})),n(this,"onResourceResponse",(()=>{this.stopInactiveSessionTimeout(),this.interval||(this.refreshContext(),this.startInterval()),this.startInactiveSessionTimeout()})),n(this,"stopInactiveSessionTimeout",(()=>{this.inactiveSessionTimeout&&(clearTimeout(this.inactiveSessionTimeout),this.inactiveSessionTimeout=null)})),n(this,"stopInterval",(()=>{this.interval&&(clearInterval(this.interval),this.interval=null)})),n(this,"onRateLimit",(()=>{this.stopInterval(),this.stopInactiveSessionTimeout(),this.interval=setInterval(this.refreshContext,36e5)})),n(this,"refreshContext",(async function(){try{const t=await fetch("/_/_/context/");if(200===t.status&&e.setContext){const i=await t.json();e.setContext(i)}else 501===t.status&&e.onRateLimit()}catch(t){}}))}init({setContext:e}){this.setContext=e,this.startInactiveSessionTimeout(),this.startInterval()}}},81636:(e,t,i)=>{i.d(t,{Q:()=>c,Z:()=>d});var n=i(667294),o=i(682492),r=i.n(o),a=i(112690),s=i(780280),l=i(385740);function c(e,t){const{setViewContextData:i}=(0,l.sV)(),{requestIdentifier:o}=(0,s.B)(),c=(0,a.Z)(),{viewData:d}=(0,l.SU)();(0,n.useEffect)((()=>{var t;e&&(i({viewType:null!==(t=e.view_type)&&void 0!==t?t:1,viewParameter:e.view_parameter,viewData:e.view_data?r()(d,e.view_data):r()({},d),component:e.component,element:e.element,objectIdStr:e.object_id_str,auxData:e.aux_data,clientTrackingParams:e.clientTrackingParams}),c({...e,event_type:13,request_identifier:o}))}),[t])}function d(e){const{children:t,log:i}=e;return c(i),t||null}},407043:(e,t,i)=>{i.d(t,{B:()=>l,v:()=>s});var n=i(385740),o=i(425288),r=i(785893);const{Provider:a,useHook:s}=(0,o.Z)("ContextLogger");function l({children:e,value:t}){const{setViewContextData:i}=(0,n.sV)();return t.injectSetViewContextDataFromHook=i,(0,r.jsx)(a,{value:t,children:e})}},745760:(e,t,i)=>{i.d(t,{Ch:()=>p,nc:()=>b,a:()=>w,ZP:()=>P,cA:()=>y,li:()=>x,h1:()=>d});var n=i(682492),o=i.n(n),r=i(6637),a=i(594881),s=i(706922);var l=i(385740),c=i(172045);const d=()=>1e6*Date.now(),u=[6945,170],p={3829:"articleImpressions",18:"pinImpressions",3700:"boardImpressions",3803:"searchImpressions",170:"storyImpression",3704:"userImpressions"},h=[4700,4701,4702,4703,7042,7043],m=e=>function(e){let t=e.length;for(let i=e.length-1;i>=0;i-=1){const n=e.charCodeAt(i);n>127&&n<=2047?t+=1:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&(i-=1)}return t}(JSON.stringify(e)),_=e=>u.includes(e);let g;function v(){const e=new Date;g?g&&g.getUTCDate()!==e.getUTCDate()&&(g=e,(0,a.Z)()):g=e}function f(e){return e.reduce(((e,t)=>{const i=e.find((n=t,e=>e.view_type===n.viewType&&e.view_parameter===n.viewParameter&&e.event_type===n.eventType&&e.object_id_str===n.objectIdStr&&(0,s.Z)(e.view_data,n.viewData)));var n;if(i&&!_(t.eventType))t.impressionType in i.event_data?i.event_data[t.impressionType].push(t.eventData):i.event_data[t.impressionType]=[t.eventData];else{const i={event_type:t.eventType,view_parameter:t.viewParameter,view_type:t.viewType,view_data:t.viewData,time:d(),component:t.component,clientUUID:(0,c.Z)(),aux_data:t.auxData||{},appState:t.appState,event_data:{[t.impressionType]:_(t.eventType)?{...t.eventData,...(t.eventData||{})[t.impressionType]}:[t.eventData]},object_id_str:t.objectIdStr||void 0};e.push(i)}return e}),[])}const y=e=>{const t=e.event_type,i=h.includes(t),n=(0,l.BE)();return!(!i&&13!==t&&!n)},x=(e,t)=>{const i=e.event_type,n=h.includes(i),r=(0,l.BE)();return n?e:13===i&&e.view_type?(null==t||t({viewType:e.view_type,viewParameter:e.view_parameter,viewData:null!=r&&r.viewData?o()(r.viewData,e.view_data):o()({},e.view_data)}),e):!r||e.view_type&&e.view_parameter?e:{...e,view_type:r.viewType,view_parameter:r.viewParameter,view_data:e.view_data?o()(e.view_data,r.viewData):o()({},r.viewData)}},b=(e,t)=>{var i,n;const o=e.component,r=e.object_id_str,a=e.view_type,s=e.event_type,l=e.appState;return null!==(i=((null===(n=e.event_data)||void 0===n?void 0:n[t])||[]).map((i=>({auxData:e.aux_data,...o?{component:o}:{},eventData:i,...s?{eventType:s}:{},...a?{viewType:a}:{},viewData:e.view_data,viewParameter:e.view_parameter,...r?{objectIdStr:r}:null,impressionType:t,appState:l}))))&&void 0!==i?i:[]},w=(e,t)=>({...e.component?{component:e.component}:{},...e.object_id_str?{objectIdStr:e.object_id_str}:null,...e.view_type?{viewType:e.view_type}:{},eventType:e.event_type,auxData:e.aux_data,impressionType:t,viewData:e.view_data,viewParameter:e.view_parameter,eventData:e.event_data});function P(){let e=[],t=[],i=0;function n(){return[...e,...f(t)]}function o(){e=[],t=[],i=0}function a(e=!1){const t=n();t.length&&(r.Z.create("ContextLogResource",{events:t,report_time:d()}).callCreate({async:!e,showError:!1}),o(),v())}return{flushContextEvents:a,getContextEvents:n,logContextEvent:function({object_id_str:t,...n}){const o={aux_data:{},event_data:{},view_data:{},...n,time:d(),clientUUID:(0,c.Z)(),...t?{object_id_str:t}:null};o.aux_data=function(e){if(!e)return e;const{element:t,eventData:i,component:n,objectId:o,view:r,viewParameter:a,viewData:s,durationNs:l,pairId:c,clientTrackingParams:d,...u}=e;return u}(o.aux_data),i+m(o)>20480&&a(!1),e.push(o),v()},logImpression:function(e){i+m(e)>20480&&a(!1),t.push(e)},resetEventsBuffer:o}}},112690:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(407043);const o=()=>(0,n.v)().logContextEvent},385740:(e,t,i)=>{i.d(t,{BE:()=>c,Ih:()=>d,SU:()=>u,sV:()=>s});var n=i(667294),o=i(425288),r=i(785893);const{Provider:a,useHook:s}=(0,o.Z)("View");let l;function c(){return l}function d({children:e,initialState:t={}}){const[i,o]=(0,n.useState)(t),s=(0,n.useCallback)((()=>{l={},o({})}),[]),c=(0,n.useCallback)((e=>{l={...l,...e},o((t=>({...t,...e})))}),[]),d=(0,n.useMemo)((()=>({viewContextData:i,clearViewContextData:s,setViewContextData:c})),[i,c,s]);return(0,r.jsx)(n.Fragment,{children:(0,r.jsx)(a,{value:d,children:e})})}function u(){const{viewContextData:e}=s();return e}},911691:(e,t,i)=>{i.d(t,{Z:()=>n});const n=["AT","BE","BG","CY","CZ","DE","DK","EE","ES","FI","FR","GB","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MT","NL","NO","PL","PT","RO","SE","SI","SK"]},798748:(e,t,i)=>{i.d(t,{sw:()=>c,tb:()=>p,jD:()=>u});var n=i(911691),o=i(226198);const r=[o.EI,o.SJ,o.KU,o.Ek,o.wV,o.ZQ,o.pI,o.pp,o.fs,o.GY,o.hx,o.tv,o.jh,o.x_,o.Ck,o.L9,o.fS,o.rc,o.e7,o.x2,o.nE,o.qN,o.ZO,o.B_,o.Mq,o.Z_,o.$E,o.Q1,o.x3,o.sy,o.It,o.IV,o.eB,o.Gl,o.oj,o.ls,o.hq,o.oC,/^offsite_\d+$/,/^SSESS[a-z0-9]+/],a={marketing:[o.WL,o.k5,o.BN,o.cb,o.We,o._E],analytic:[o.MO,o.tg,o.JD,o.Mw,o.uq,o.o7,o.su,o.eG,o.th,o.VL,o.aq,/^ajs_$/,/^pinAlert.*$/],personalization:[o.T7,o.t0]};function s(e,t){return t.some((t=>t instanceof RegExp?t.test(e):t.name===e))}function l(e,t,i=!1){return s(e,t)||i&&"unknown"===function(e){const t=["marketing","analytic","personalization"];for(const i of t)if(s(e,a[i]))return i;return s(e,r)?"essential":"unknown"}(e)}const c=new Set(n.Z);let d=()=>[];function u(e,t){d=()=>{const i=e(),n=t(),o=i.isAuth?i.country:"";if(!(c.has(o)||c.has(n.countryFromIp||"")||c.has(n.countryFromHostName||"")))return[];return["allow_marketing_cookies","allow_analytic_cookies","allow_personalization_cookies"].filter((e=>i.isAuth&&!0!==i[e])).map((e=>{switch(e){case"allow_marketing_cookies":return"marketing";case"allow_analytic_cookies":return"analytic";case"allow_personalization_cookies":return"personalization";default:throw new Error("Unexpected cookie category to block")}}))}}function p(e){return l(e,function(e=[]){return e.reduce(((e,t)=>e.concat(a[t])),[])}(d()))}},231486:(e,t,i)=>{i.d(t,{U2:()=>a,kZ:()=>s,t8:()=>d,zN:()=>u});var n=i(172071),o=i(798748);function r(e){if("undefined"==typeof document)return null;const t=document.cookie.match(new RegExp("\\b"+e+"=.+?($|;)","g"));return t&&t[0]&&unescape(t[0].substring(e.length+1,t[0].length).replace(";",""))||null}function a(e){return r(e.name)}function s(e){const t=1/60;switch(e.duration){case"session":return;case"30s":return.008333333333333333;case"1m":return 1*t;case"5m":return 5*t;case"12h":return 12;case"1d":return 24;case"30d":return 720;case"180d":return 4320;case"1y":return 8760;case"sessionCookie":throw new Error("Cannot set duration to sessionCookie in client");default:throw new Error(`Invalid cookie duration ${String(e.duration)}`)}}const l=e=>String(e).replace(/[^0-9a-zA-Z_-]+/g,"_");function c(e,t,i){if((0,o.tb)(e)){let t=!1;if(r(e)){const i=[`${e}=`,"path=/",`expires=${new Date(0).toUTCString()}`].join(";");document.cookie=i,t=!r(e)}return n.Z.increment("webapp.cookies.blocked.client",.01,{cookieName:l(e),deleted:t}),document.cookie}const a=[e+"="+escape(t),"path=/"],s=function(e){if(isNaN(parseInt(e,10)))return"";{const t=new Date;return t.setTime(Date.now()+60*parseInt(e,10)*60*1e3),t.toUTCString()}}(i);return s&&a.push("expires="+s),a.push("secure"),document.cookie=a.join("; "),n.Z.increment("webapp.cookies.set.client",1e-4,{cookieName:l(e)}),document.cookie}function d(e,t,i){return c(e.name,t,i)}const u=e=>{r(e)&&c(e,"",-100)}},226198:(e,t,i)=>{i.d(t,{$E:()=>E,BN:()=>H,B_:()=>T,Ck:()=>g,EI:()=>n,Ek:()=>R,GS:()=>se,GY:()=>u,Gl:()=>z,IV:()=>M,It:()=>L,JD:()=>C,KU:()=>r,L9:()=>v,MO:()=>$,Mq:()=>I,Mw:()=>G,Q1:()=>A,SJ:()=>o,T7:()=>ie,VL:()=>ee,WL:()=>B,We:()=>W,Xh:()=>oe,ZO:()=>S,ZQ:()=>s,Z_:()=>k,_E:()=>ce,aq:()=>te,cb:()=>V,e7:()=>K,eB:()=>N,eF:()=>ae,eG:()=>J,fS:()=>f,fs:()=>d,hq:()=>D,hx:()=>p,jh:()=>m,k5:()=>U,lq:()=>re,ls:()=>Z,nE:()=>w,o7:()=>Y,oC:()=>le,oj:()=>F,pI:()=>l,pp:()=>c,qN:()=>P,rc:()=>y,su:()=>X,sy:()=>O,t0:()=>ne,tg:()=>j,th:()=>Q,tv:()=>h,uq:()=>q,wV:()=>a,x2:()=>b,x3:()=>x,x_:()=>_});const n={name:"_auth",purpose:"essential",httpOnly:!0,provenance:"1p",duration:"sessionCookie"},o={name:"_b",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},r={name:"_pinterest_access_token",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},a={name:"_routing_id",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},s={name:"_ss_al",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},l={name:"_ss_at",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},c={name:"_ss_auth",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},d={name:"_ss_country_code",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},u={name:"_ss_la",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},p={name:"_ss_li",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},h={name:"_ss_lo",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},m={name:"_ss_na",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},_={name:"_ss_u",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},g={name:"AUTHSSL",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},v={name:"cm_sub",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"1y"},f={name:"csrftoken",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"1y"},y={name:"daa",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},x={name:"logged_out",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},b={name:"fbalae",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"12h"},w={name:"force_default_pinner_experience",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},P={name:"forced_experiments",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},S={name:"forced_no_experiments",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},T={name:"G_ENABLED_IDPS",purpose:"essential",httpOnly:!1,provenance:"3p",duration:"session"},I={name:"galae",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"12h"},k={name:"hasBeenShownLoginModalInOpen",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"12h"},E={name:"is_in_integration_tests",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},A={name:"languageIsDetected",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},C={name:"_pinterest_referral_source",purpose:"analytic",httpOnly:!1,provenance:"1p",duration:"5m"},j={name:"_pinterest_referrer",purpose:"analytic",httpOnly:!1,provenance:"1p",duration:"5m"},R={name:"_pinterest_sess",purpose:"essential",httpOnly:!0,provenance:"1p",duration:"sessionCookie"},D={name:"_pinterest_sos",purpose:"essential",httpOnly:!0,provenance:"1p",duration:"1d"},O={name:"ls",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},L={name:"r_r",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"180d"},M={name:"SimpleSAMLAuthToken",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},N={name:"SimpleSAMLSessionID",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},z={name:"ss",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},F={name:"tr_rdrct",purpose:"essential",httpOnly:!1,provenance:"unknown",duration:"1y"},Z={name:"unauthLocale",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"},B={name:"_derived_epik",purpose:"marketing",httpOnly:!1,provenance:"1p",duration:"session"},U={name:"_epik",purpose:"marketing",httpOnly:!1,provenance:"1p",duration:"session"},H={name:"_pinterest_ct",purpose:"marketing",httpOnly:!1,provenance:"1p",duration:"session"},V={name:"_pinterest_ct_rt",purpose:"marketing",httpOnly:!1,provenance:"1p",duration:"session"},W={name:"_pinterest_ct_ua",purpose:"marketing",httpOnly:!1,provenance:"1p",duration:"session"},$={name:"_pinterest_cm",purpose:"analytic",httpOnly:!1,provenance:"1p",duration:"session"},G={name:"_sd_redirect",purpose:"analytic",httpOnly:!1,provenance:"1p",duration:"30s"},K={name:"fba",purpose:"essential",httpOnly:!1,provenance:"1p",duration:"30d"},q={name:"ajs_anonymous_id",purpose:"analytic",httpOnly:!1,provenance:"3p",duration:"session"},Y={name:"ajs_group_id",purpose:"analytic",httpOnly:!1,provenance:"3p",duration:"session"},X={name:"ajs_user_id",purpose:"analytic",httpOnly:!1,provenance:"3p",duration:"session"},J={name:"amp-access",purpose:"analytic",httpOnly:!1,provenance:"1p",duration:"session"},Q={name:"amp-experiment",purpose:"analytic",httpOnly:!1,provenance:"1p",duration:"session"},ee={name:"sessionFunnelEventLogged",purpose:"analytic",httpOnly:!1,provenance:"1p",duration:"12h"},te={name:"session_internal",purpose:"analytic",httpOnly:!1,provenance:"1p",duration:"session"},ie={name:"attemptToClaimWebsite",purpose:"personalization",httpOnly:!1,provenance:"1p",duration:"1d"},ne={name:"bxn",purpose:"personalization",httpOnly:!1,provenance:"1p",duration:"session"},oe={name:"ujr",purpose:"unknown",httpOnly:!1,provenance:"1p",duration:"session"},re={name:"BearerToken",purpose:"unknown",httpOnly:!1,provenance:"unknown",duration:"session"},ae={name:"sterling_save_preferences",purpose:"unknown",httpOnly:!1,provenance:"1p",duration:"session"};function se(e){return{name:`offsite_${e}`,purpose:"essential",httpOnly:!1,provenance:"1p",duration:"session"}}const le={name:"__Secure-s_a",purpose:"essential",httpOnly:!0,provenance:"1p",duration:"sessionCookie"},ce={name:"l_o",purpose:"marketing",httpOnly:!0,provenance:"1p",duration:"1y"}},425288:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294),o=i(785893);function r(e,t){let i=e.slice(1);if(i=i.endsWith("Context")?i:`${i}Context`,t){return{hocDisplayName:`with${e[0].toUpperCase()}${i}(${t})`}}return{propsDisplayName:`${e[0].toLowerCase()}${i}`,messageDisplayName:`${e[0].toUpperCase()}${i}`}}function a(e,t){const i=(0,n.createContext)(t),{propsDisplayName:a,messageDisplayName:s}=r(e);i.displayName=s;const l=i.Provider,c=({children:e})=>{const t=(0,n.useContext)(i);if(void 0===t)throw new Error(`${s}Consumer must be used within a ${s}Provider.`);return e(t)},d=()=>(0,n.useContext)(i);function u(t){const{hocDisplayName:i}=r(e,String(t.displayName||t.name)),n=e=>(0,o.jsx)(c,{children:n=>{if(void 0===n)throw new Error(`${i} must be used within a ${s}Provider.`);if(e[a])throw new Error("Parent Component and Context are passing to the component the same variables.");const r={[a]:n};return(0,o.jsx)(t,{...e,...r})}});return n.displayName=i,n}return l.displayName=`${s}Provider`,c.displayName=`${s}Consumer`,u.displayName=`${s}HOC`,{Provider:l,Consumer:c,MaybeConsumer:({children:e})=>e((0,n.useContext)(i)),useMaybeHook:d,useHook:function(){const e=d();if(void 0===e)throw new Error(`use${s} must be used within a ${s}Provider.`);return e},deprecatedHOC:u}}},643010:(e,t,i)=>{i.d(t,{F6:()=>u,Hs:()=>d,Uf:()=>a,Yc:()=>l,vs:()=>c});var n=i(667294),o=i(867820),r=i(957161);const a="theme",s="dark"===(0,r.qn)(a),l=()=>s;function c(){const[e,t]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{t(l())}),[t]),e}const d=()=>{(0,r.Nh)(a,"dark"),(0,o.My)("mweb.dark_mode.enable"),window.location.reload()},u=()=>{(0,r.L_)(a),(0,o.My)("mweb.dark_mode.disable"),window.location.reload()}},782534:(e,t,i)=>{i.d(t,{Z:()=>a,k:()=>o.k});var n=i(780280),o=i(451820),r=i(785893);const a=({dateFormatType:e,useUTC:t=!0,value:i})=>(0,r.jsx)(n.LC,{children:n=>(0,o.Z)(n.locale,i,e,t)})},202139:(e,t,i)=>{i.d(t,{DH:()=>n,F4:()=>a,FS:()=>o,N1:()=>d,N9:()=>l,UK:()=>r,VL:()=>s,v6:()=>c});const n=1e3,o=60*n,r=60*o,a=24*r,s=7*a,l=30*a,c=31*a,d=365*a},451820:(e,t,i)=>{i.d(t,{Z:()=>o,k:()=>n});const n={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour",TWO_DIGIT:"two_digit"};function o(e,t,i,o=!0){const r=function(e){switch(e){case n.YEAR:return{year:"numeric"};case n.LONG:return{year:"numeric",month:"long",day:"numeric"};case n.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case n.TWO_DIGIT:return{year:"numeric",month:"2-digit",day:"2-digit"};case n.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case n.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case n.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case n.MONTH_DAY:return{month:"long",day:"numeric"};case n.SHORT_MONTH:return{month:"short"};case n.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case n.DAY:return{day:"numeric"};case n.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case n.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case n.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case n.TIME:return{hour:"numeric",minute:"2-digit"};case n.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case n.HOUR:return{hour:"numeric"};default:throw new Error('invalid dateFormatType "'+e+'"')}}(i);o&&(r.timeZone="UTC");return new Intl.DateTimeFormat(e,r).format(t)}},81226:(e,t,i)=>{function n(e){const t=Math.round(e/1e3),i=t%60;return Math.floor(t/60)+":"+(i<10?"0":"")+i}i.d(t,{Z:()=>n})},766935:(e,t,i)=>{function n(e,t){let i;return(...n)=>{clearTimeout(i),i=setTimeout((()=>e(...n)),t)}}i.d(t,{Z:()=>n})},966476:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(667294);const o=()=>{const[e,t]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{t(!0)}),[]),e}},722767:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294),o=i(973935);function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class a extends n.Component{constructor(...e){super(...e),r(this,"observer",null),r(this,"handleVisibilityChanged",((e,t)=>{this.props.onVisibilityChange(e,t)}))}componentDidMount(){const e=o.findDOMNode(this);e instanceof HTMLElement&&(this.node=e),this.node&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.node))}componentWillUnmount(){this.observer&&(this.observer.unobserve(this.node),delete this.observer)}render(){return n.Children.only(this.props.children)}}const s=a},11363:(e,t,i)=>{i.d(t,{Bx:()=>o,N4:()=>a,is:()=>s,lt:()=>n,oM:()=>r});const n=e=>e._('You\'re almost there! Log in to access all of Pinterest', 'loginModal.limitedLogin.subheader', 'Subheader text on personalized login modal/flyout to remind users to log in'),o=e=>e._('Log in to save this Pin', 'limitedLogin.modalHeader.repin', 'Title on mobile web limited login modal to prompt users to login after they clicked save button.'),r=e=>e._('Log in to edit this Pin', 'limitedLogin.modalHeader.editPin', 'Title on mobile web limited login modal to prompt users to login after they clicked edit button.'),a=({i18n:e,toFollow:t})=>t?e._('Log in to follow', 'limitedLogin.modalHeader.follow', 'Title on mobile web limited login modal to prompt users to login to follow a user or board.'):e._('Log in to unfollow', 'limitedLogin.modalHeader.unfollow', 'Title on mobile web limited login modal to prompt users to login to unfollow a user or board.'),s=e=>e._('Log in to create a Pin or board', 'limitedLogin.modalHeader.create', 'Title on mobile web limited login modal to prompt users to login to create a Pin or board.')},780679:(e,t,i)=>{i.d(t,{g:()=>a,t:()=>r});var n=i(667294);const o=(0,n.createContext)(null),r=o.Provider,a=()=>(0,n.useContext)(o)},946984:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(898781),o=i(11363),r=i(987318);const a=()=>{const{loginForMore:e,viewer:t,limitedLoginModalSubheader:i}=(0,r.H)(),a=(0,n.ZP)();return"AUTH"===t.type?null:t=>{null==e||e.setVisible(!0),null==i||i.setText((null==t?void 0:t.loginModalHeader)||(0,o.lt)(a))}}},903095:(e,t,i)=>{i.d(t,{Mi:()=>o,lO:()=>r});var n=i(425288);const{Provider:o,useMaybeHook:r}=(0,n.Z)("pageContext")},375571:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294),o=i(172071),r=i(395164);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class s extends n.Component{constructor(...e){super(...e),a(this,"state",{error:null,info:null}),a(this,"resetError",(()=>{this.setState({error:null,info:null})}))}componentDidCatch(e,t){try{var i;const t=this.props.name,n=this.props.type||"secondary";(0,r.T)({extraData:null!==(i=e.extraData)&&void 0!==i?i:{},errorBoundary:t,errorBoundaryType:n,message:e.message,name:e.name,stack:e.stack}),o.Z.increment("react.error_boundary",.1,{component:void 0,name:this.props.name})}catch(n){o.Z.increment("react.error_boundary.error",1,{name:this.props.name})}this.setState({error:e,info:t})}render(){const{renderErrorState:e}=this.props,{error:t,info:i}=this.state;return t&&i?e?e({error:t,info:i,resetError:this.resetError}):null:this.props.children}}},319915:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i(375571).Z},124237:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(607187),o=i.n(n);const r={};r._showErrorCallback=r._showErrorCallback||null,r.setShowHtmlErrorCallback=function(e){r._showErrorCallback=e},r.showError=function(e,t,i){const n=o()(e);return r.showHtmlError(n,t,i)},r.showHtmlError=function(e,t,i){"function"==typeof r._showErrorCallback&&r._showErrorCallback(e,t,i)};const a=r},121093:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(667294),o=i(702664),r=i(332611),a=i(242923);function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class l extends n.Component{constructor(...e){super(...e),s(this,"state",{hasCompleted:[],hasDismissed:[]}),s(this,"view",(()=>{const{experience:e,isBackendExperience:t,targeting:i,viewExperience:n,viewExperienceObject:o}=this.props;e&&"viewed"!==e.status&&(t?(e.status="viewed",o(e)):i?n(e.placement_id,e.experience_id,i):n(e.placement_id,e.experience_id))})),s(this,"complete",(e=>{const{completeExperience:t,completeExperienceObject:i,experience:n,isBackendExperience:o,preventRemoval:r,targeting:a}=this.props,s=e||1;if(n&&!this.state.hasCompleted.includes(n.experience_id)){const{placement_id:e,experience_id:l}=n||{},c=r||2===s;(1===s||c)&&e&&l&&(o?i(n,c):a?t(e,l,c,a):t(e,l,c),this.setState((e=>({hasCompleted:[...e.hasCompleted,l]}))))}})),s(this,"dismiss",(()=>{const{dismissExperience:e,dismissExperienceObject:t,experience:i,isBackendExperience:n,preventRemoval:o,targeting:r}=this.props,{placement_id:a,experience_id:s}=i||{};i&&!this.state.hasDismissed.includes(s)&&(n?t(i):r?e(a,s,!!o,r):e(a,s,!!o),this.setState((e=>({hasDismissed:[...e.hasDismissed,s]}))))})),s(this,"shouldRenderExperience",(()=>{const{experience:e}=this.props;if(e){const{eligibleIds:t,eligibleTypes:i,predicate:n,transitionType:o}=this.props,{experience_id:r,type:a}=e;if(t&&t.includes(r))return!0;if(null==t||!t.length){if(n&&n(e))return!0;if(i&&i.includes(a))return!0;if(o&&o===a)return!0}}return!1}))}componentDidMount(){if(this.props.disableAutoView)return;const{experience:e}=this.props;e&&this.shouldRenderExperience()&&this.view()}componentDidUpdate(e){if(this.props.disableAutoView)return;const t=e.experience,i=this.props.experience;i&&this.shouldRenderExperience()&&(t&&t.experience_id===i.experience_id||this.view())}render(){const{children:e,experience:t,disableAutoView:i}=this.props;return t&&this.shouldRenderExperience()?"function"==typeof e?e({experience:t,complete:this.complete,dismiss:this.dismiss,...i?{view:this.view}:Object.freeze({})}):n.Children.only(e):null}}s(l,"defaultProps",{eligibleIds:[],eligibleTypes:[]});const c=(0,o.connect)((({experiences:e},t)=>({experience:t.experience||(t.placementId?e[t.placementId]:void 0)})),(e=>({completeExperience:(t,i,n,o)=>e((0,r.CK)(t,i,n,!1,{},o)),completeExperienceObject:(t,i)=>e((0,a.Tl)(t,i)),dismissExperience:(t,i,n,o)=>e((0,r.Qu)(t,i,n,void 0,o)),dismissExperienceObject:t=>e((0,a.CF)(t)),viewExperience:(t,i,n)=>e((0,r.UT)(t,i,!1,!1,void 0,n)),viewExperienceObject:t=>e((0,a.dy)(t))})))(l)},123159:(e,t,i)=>{i.d(t,{F:()=>p,M:()=>u});var n=i(667294),o=i(702664),r=i(14890),a=i(957191),s=i(425288),l=i(332611),c=i(785893);const{Provider:d,useHook:u}=(0,s.Z)("ExperienceContext");function p({children:e}){const[t,i]=(0,n.useReducer)(((e,t)=>{if("MOUNT_PLACEMENT"===t.type)return{...e,[t.payload]:!0};if("UNMOUNT_PLACEMENT"===t.type){const i={...e};return delete i[t.payload],i}return e}),{}),s=(0,o.useDispatch)(),u=(0,o.useSelector)((e=>e.experiences)),p=(0,n.useMemo)((()=>{const e=(0,r.bindActionCreators)({completeExperience:l.CK,dismissExperience:l.Qu,fetchAllExperiences:l.fO,fetchAllExperiencesMulti:a.NW,fetchExperienceForPlacements:l.pz,mountPlacement:l.N,triggerExperimentsForPlacement:l.kd,viewExperience:l.UT},s);return{...e,mountPlacement:(t,...n)=>{e.mountPlacement(t,...n),i({type:"MOUNT_PLACEMENT",payload:t})},unmountPlacement:e=>{i({type:"UNMOUNT_PLACEMENT",payload:e})}}}),[s,i]),h=(0,n.useMemo)((()=>({experiences:u,mountedPlacements:t,...p})),[u,t,p]);return(0,c.jsx)(d,{value:h,children:e})}},333312:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var n=i(667294),o=i(121093),r=i(570470),a=i(883119),s=i(785893);function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class c extends n.PureComponent{constructor(...e){super(...e),l(this,"onScroll",(()=>{const{dismiss:e}=this.props;this.dismissed||this.timer||(this.timer=setTimeout((()=>{e(),this.dismissed=!0,this.timer=void 0}),3e3))})),l(this,"dismissed",!1)}componentDidMount(){window.addEventListener("scroll",this.onScroll)}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}render(){const{anchor:e,text:t,thumbnails:i,idealDirection:n}=this.props,o=i.slice(-3);return(0,s.jsx)(a.J2,{anchor:e,color:"white",idealDirection:n,onDismiss:this.onScroll,shouldFocus:!1,size:"md",children:(0,s.jsxs)(a.xu,{display:"flex",alignContent:"center",justifyContent:"between",padding:3,width:"100%",children:[(0,s.jsx)(a.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginStart:-3,paddingX:3,children:(0,s.jsx)(a.xv,{color:"default",weight:"bold",children:t})}),(0,s.jsx)(a.xu,{display:"flex",marginEnd:-2,paddingX:2,children:o.map((e=>(0,s.jsx)(a.xu,{height:60,width:50,paddingX:1,children:(0,s.jsx)(a.zd,{rounding:2,height:60,children:(0,s.jsx)(a.Ee,{alt:"More Ideas Thumbnail",color:"rgb(86, 152, 239)",fit:"cover",naturalHeight:60,naturalWidth:60,src:e})})},e)))})]})})}}function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class u extends n.Component{constructor(...e){super(...e),d(this,"state",{paused:!1}),d(this,"handlePulsarClick",((e,t)=>{e?this.setState({paused:!0}):t()}))}componentWillUnmount(){clearTimeout(this.timer)}setDefaultPulsarTooltip(e){const t=e=>!(null==e);e.has_pulsar=!t(e.has_pulsar)||e.has_pulsar,e.has_tooltip=!t(e.has_tooltip)||e.has_tooltip}getText(e,t,i){return t&&e.text.replace("{boardName}",t),i?i(e):e.text}render(){const{anchor:e,customWrapper:t,experienceIds:i,boardTextOverride:l,flyoutSize:d,fontSize:u,hasFullWidthButton:p=!0,idealDirection:h,useMasonryFlyout:m,noClickToDismiss:_,onClickComplete:g,onClickDismiss:v,placementId:f,positionRelativeToAnchor:y,shouldTimeoutDismiss:x,showCaret:b,textAlign:w,textOverflow:P,textOverrideFn:S,textWeight:T,customizedComplete:I,pulsarZIndex:k}=this.props,E=t||(({children:e})=>m?(0,s.jsx)(a.mh,{children:e}):e),A="blue";return(0,s.jsx)(o.Z,{eligibleIds:i,placementId:f,eligibleTypes:[8],children:({complete:t,dismiss:i,experience:o})=>{const{display_data:f}=o;if(this.setDefaultPulsarTooltip(f),!f.has_pulsar&&!f.has_tooltip)return t(),null;x&&f.disappearTime&&f.disappearTime>0&&(this.timer=setTimeout((()=>(i(),null)),f.disappearTime));const C=501041===o.experience_id||505086===o.experience_id;return(0,s.jsxs)(n.Fragment,{children:[f.has_pulsar&&(0,s.jsx)(r.Z,{anchor:e,leftOverride:C?342:void 0,onTouch:()=>this.handlePulsarClick(f.has_tooltip,t),paused:this.state.paused,topOverride:C?-5:void 0,zIndex:k&&k.index()}),f.has_tooltip&&(!f.has_pulsar||this.state.paused)&&(f.thumbnail_urls?(0,s.jsx)(c,{anchor:e,dismiss:i,idealDirection:h||"down",text:f.text,thumbnails:f.thumbnail_urls}):(0,s.jsx)(E,{children:(0,s.jsx)(a.J2,{anchor:e,color:A,idealDirection:h||"down",onDismiss:_?()=>{}:i,positionRelativeToAnchor:!m&&y,shouldFocus:!1,showCaret:b,size:d,children:(0,s.jsxs)(a.xu,{column:12,padding:3,children:[(0,s.jsxs)(a.xv,{align:"right"===w?"end":w,color:"inverse",overflow:P,size:u,weight:T||"bold",children:[this.getText(f,l,S),f.secondary_cta_link&&(0,s.jsx)(a.xu,{display:"inlineBlock",marginStart:1,children:(0,s.jsx)(a.xv,{size:u,weight:"bold",color:"inverse",children:(0,s.jsx)(a.rU,{display:"inlineBlock",target:"blank",href:f.secondary_cta_link.url,underline:"hover",children:f.secondary_cta_link.text})})})]}),f.sub_text&&(0,s.jsx)(a.xu,{paddingY:2,children:(0,s.jsx)(a.xv,{color:"inverse",size:u,children:f.sub_text})}),(f.dismiss_button_text||f.complete_button_text)&&(0,s.jsxs)(a.xu,{display:"flex",alignItems:"center",marginTop:2,children:[f.dismiss_button_text&&(0,s.jsx)(a.xu,{marginEnd:1,column:6,children:(0,s.jsx)(a.zx,{fullWidth:p,color:A,onClick:()=>{v&&v(),i()},size:"md",text:f.dismiss_button_text})}),f.complete_button_text&&(0,s.jsx)(a.xu,{column:f.dismiss_button_text?6:12,children:I?(0,s.jsx)(a.iP,{fullHeight:!0,onTap:()=>{t(),g&&g()},rounding:2,children:(0,s.jsx)(a.xu,{display:"flex",color:"default",padding:2,rounding:2,justifyContent:"center",dangerouslySetInlineStyle:{__style:{padding:"10px"}},children:(0,s.jsx)(a.xv,{color:"shopping",weight:"bold",children:f.complete_button_text})})}):(0,s.jsx)(a.kC,{justifyContent:"center",children:(0,s.jsx)(a.zx,{fullWidth:p,color:"white",href:f.complete_button_cta_url,role:f.complete_button_cta_url?"link":"button",size:"md",target:f.complete_button_cta_url?"blank":null,text:f.complete_button_text,onClick:({event:e})=>{e.preventDefault(),e.stopPropagation(),t(),g&&g()}})})})]})]})})}))]})}})}}d(u,"defaultProps",{fontSize:"300",positionRelativeToAnchor:!0})},332611:(e,t,i)=>{i.d(t,{CK:()=>p,N:()=>v,Qu:()=>h,UT:()=>u,YX:()=>g,d9:()=>m,fO:()=>l,kd:()=>_,pz:()=>c});var n=i(6637),o=i(764990),r=i(172071),a=i(957191);let s;const l=(e,t)=>i=>{const o=t?{extra_context:e,targeting:t}:{extra_context:e};return n.Z.create("UserExperiencePlatformResource",o).callGet().then((e=>e.resource_response?i((0,a.OD)(e.resource_response.data)):void 0))},c=(e,t,i,r)=>(l,c)=>{if(t)return Promise.resolve();if(r&&(s=r),1===e.length){const t=e[0],n=c().experiences[t],r=(null==n?void 0:n.extraContext)||null;if(JSON.stringify(r)===JSON.stringify(i)||(0,o.E3)(n)&&!(i&&Object.keys(i).length>0))return Promise.resolve()}return n.Z.create("UserExperienceResource",{placement_ids:e,extra_context:i||null,targeting:r}).callGet().then((e=>e.resource_response?l((0,a.cL)(e.resource_response.data)):void 0))},d=(e,t)=>(i,o,r,c=!1,d,u)=>(p,h)=>{const{experiences:m,experiencesMulti:_}=h();let g=null,v=!0;var f;c||(v=m[i]&&m[i].experience_id===o,g=v?m[i]:Array.isArray(_[i])&&(null===(f=_[i])||void 0===f?void 0:f.find((e=>e.experience_id===o))));if(g&&g.experience_id===o||c&&i&&o){const c=n.Z.create(e,{placed_experience_id:`${i}%3A${o}`,extra_context:null!=d?d:{},targeting:u}),h=v?a.Yb:a.xW;switch(t){case"dismissed":return c.callDelete().then((()=>{p(h(i,o,t)),p(l(void 0,s))}));case"completed":return c.callUpdate().then((()=>{r||(p(h(i,o,t)),p(l(void 0,s)))}));case"viewed":return p(h(i,o,t)),c.callUpdate().then((()=>{1000162===i&&p(l())}));case"completedWithoutHomefeed":return c.callUpdate().then((()=>{r||p(h(i,o,t))}));default:return Promise.resolve()}}return Promise.resolve()},u=d("UserExperienceViewedResource","viewed"),p=d("UserExperienceCompletedResource","completed"),h=d("UserExperienceResource","dismissed"),m=d("UserExperienceCompletedResource","completedWithoutHomefeed"),_=(e,t)=>(i,o)=>{const{experiences:a}=o(),s=a[e];s&&s.triggerable_placed_exps&&s.triggerable_placed_exps.length&&s.triggerable_placed_exps.forEach((i=>{const[,o]=i.split(":");let a=t;s.metadata&&s.metadata[o]&&(a=Object.assign({},t,s.metadata[o])),n.Z.create("UserExperienceTriggerResource",{placed_experience_id:i.replace(":","%3A"),extra_context:a}).callUpdate().then((()=>{((e,t,i={})=>{r.Z.increment(`${e}.${t}`,1,i)})("experienceservice","experimentTriggerCall.1",{placement_id:e,experience_id:o})}))}))},g=e=>(t,i)=>{t(_(e));const{experiences:n}=i();return n[e]},v=(e,t,i)=>n=>{i&&(s=i),n(_(e,t)),t&&Object.keys(t).length>0&&n(c([e],!1,t,i))}},242923:(e,t,i)=>{i.d(t,{CF:()=>s,Tl:()=>a,dy:()=>l});var n=i(6637),o=i(332611);const r=(e,t)=>(i,r)=>a=>{if(i&&i.id){const s=n.Z.create(e,{placed_experience_id:i.id,extra_context:{}});switch(t){case"dismissed":s.callDelete().then((()=>{a((0,o.fO)())}));break;case"completed":s.callUpdate().then((()=>{r||a((0,o.fO)())}));break;case"viewed":s.callUpdate()}}},a=r("UserExperienceCompletedResource","completed"),s=r("UserExperienceResource","dismissed"),l=r("UserExperienceViewedResource","viewed")},764990:(e,t,i)=>{function n(e){return!!e&&0!==e.type}i.d(t,{A0:()=>r,E3:()=>n,MQ:()=>o});const o=(e,t,i)=>{const o=e[i];return t[i]&&n(o)?o:null};function r(e){var t;return null===(t=e.display_data)||void 0===t?void 0:t.anchor}},131108:(e,t,i)=>{i.d(t,{HI:()=>a,f8:()=>l,hm:()=>s,sH:()=>r});var n=i(883119),o=i(785893);const r=({children:e})=>(0,o.jsx)(n.xu,{padding:4,position:"absolute",bottom:!0,left:!0,right:!0,children:e}),a=({children:e})=>(0,o.jsx)(n.xu,{padding:2,children:e}),s=({children:e})=>(0,o.jsx)(n.xu,{display:"flex",position:"absolute",top:!0,height:"100%",width:"100%",alignItems:"center",justifyContent:"center",children:e}),l=({children:e})=>(0,o.jsx)(n.xu,{padding:4,position:"absolute",top:!0,left:!0,right:!0,children:e})},599997:(e,t,i)=>{i.d(t,{Mf:()=>c,q4:()=>o,zn:()=>n});const n=e=>["feed_card_default","feed_card_video"].includes(e),o=2/3,r={0:"start",1:"center",2:"end"},a={web:{0:"16",1:"20",2:"24"},mweb:{0:"12",1:"16",2:"18"}},s={1:"italics",0:"normal"},l={1:"bold",0:"normal"},c=({color:e,font_style:t,font_weight:i,horizontal_alignment:n,size:o},c)=>({color:e,fontStyle:s[null!=t?t:0],fontWeight:l[null!=i?i:1],horizontalAlignment:r[null!=n?n:0],fontSize:a[c][null!=o?o:0]+"px"})},207737:(e,t,i)=>{i.d(t,{$S:()=>n,V$:()=>o,_4:()=>a,iY:()=>s,mR:()=>r});const n="REFRESH_ALL_EXPERIENCES_MULTI",o="UPDATE_EXPERIENCE_MULTI",r="FETCH_EXPERIENCES",a="REFRESH_ALL_EXPERIENCES",s="UPDATE_EXPERIENCE"},957191:(e,t,i)=>{i.d(t,{NW:()=>a,OD:()=>l,Yb:()=>s,cL:()=>c,xW:()=>r});var n=i(6637),o=i(207737);const r=(e,t,i)=>({type:o.V$,payload:{placementId:e,experienceId:t,status:i}}),a=e=>t=>n.Z.create("UserExperiencePlatformResource",{extra_context:e,multiExperiencePlatform:!0}).callGet().then((e=>{return e.resource_response?t((i=e.resource_response.data,{type:o.$S,payload:{experiencesMulti:i}})):void 0;var i})),s=(e,t,i)=>({type:o.iY,payload:{placementId:e,experienceId:t,status:i}}),l=e=>({type:o._4,payload:{experiences:e}}),c=e=>({type:o.mR,payload:{experiences:e}})},570470:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294),o=i(883119),r=i(785893);function a({anchor:e,children:t,zIndex:i,leftOverride:a,topOverride:s}){const l=(0,n.useRef)(null),[c,d]=(0,n.useState)(0),[u,p]=(0,n.useState)(0),{height:h,width:m}=e.getBoundingClientRect();(0,n.useEffect)((()=>{const{current:t}=l;if(e&&t){const{height:e,width:i}=t.getBoundingClientRect(),{horizontalOffset:n,verticalOffset:o}=((e,t,i,n)=>({horizontalOffset:-(n/2-t/2),verticalOffset:-(i/2-e/2)}))(h,m,e,i);d(n),p(o)}}));const _=a||c,g=s||u;return(0,r.jsx)(o.xu,{position:"absolute",zIndex:i?new o.Ry(i):void 0,dangerouslySetInlineStyle:{__style:{left:_,top:g}},ref:l,children:t})}const s=function(e){const{anchor:t,leftOverride:i,onTouch:n,onMouseEnter:s,paused:l,size:c,topOverride:d,zIndex:u}=e;return t?(0,r.jsx)(a,{anchor:t,leftOverride:i,topOverride:d,zIndex:u,children:(0,r.jsx)(o.iP,{fullWidth:!1,onTap:({event:e})=>n(e),onMouseEnter:s,rounding:"circle",children:(0,r.jsx)(o.o3,{paused:l,size:c})})}):null}},497529:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294),o=(i(957191),i(764990)),r=i(123159);i(332611);function a(e){const{mountedPlacements:t,completeExperience:i,dismissExperience:a,experiences:s,fetchAllExperiences:l,fetchAllExperiencesMulti:c,fetchExperienceForPlacements:d,triggerExperimentsForPlacement:u,viewExperience:p}=(0,r.M)(),h=e?(0,o.MQ)(s,t,e):null;return(0,n.useMemo)((()=>({completeExperience:i,dismissExperience:a,experienceForPlacement:h,fetchAllExperiences:l,fetchAllExperiencesMulti:c,fetchExperienceForPlacements:d,triggerExperimentsForPlacement:u,viewExperience:p})),[i,a,h,l,c,d,u,p])}},402201:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>{const[t,i]=[(null==e?void 0:e.width)||580,(null==e?void 0:e.height)||400],[n,o]=[window.screen.width,window.screen.height];return["scrollbars=yes","resizable=yes","toolbar=no","location=yes",`width=${t}`,`height=${i}`,`left=${Math.round((n-t)/2)}`,`top=${o>i?Math.round((o-i)/2):0}`].join(",")}},116303:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(883119),o=i(785893);const r=(e,t)=>{const i=null==e?void 0:e.includes("images/user/default");return Boolean(i&&t)};function a({accessibilityLabel:e,name:t,outline:i,size:a,src:s,verified:l}){return(0,o.jsx)(n.qE,{accessibilityLabel:e,name:t,outline:i,size:a,src:r(s,t)?void 0:s,verified:l})}},572551:(e,t,i)=>{i.r(t),i.d(t,{default:()=>x});var n=i(667294),o=i(319915),r=i(757184),a=i(317254),s=i(463076);function l({isRTL:e,maxItemWidth:t=300,maxColumns:i=16,minColumns:n=2}){let o=`\n.gridCentered {\n  margin-left: auto;\n  margin-right: auto;\n  max-width: ${i*t}\n}\n\n.gridCentered .static {\n  position: absolute !important;\n  visibility: hidden !important;\n}\n\n@media (min-width: ${i*t}px) {\n  .gridCentered .static:nth-child(-n+${i}) {\n    position: static !important;\n    visibility: visible !important;\n    float: ${e?"right":"left"};\n    display: block;\n  }\n\n  .gridCentered .static:nth-child(-n+${i}) {\n    position: static !important;\n    visibility: visible !important;\n    float: ${e?"right":"left"};\n    display: block;\n  }\n\n  .gridCentered .static {\n    width: ${t}px !important;\n  }\n}\n`;for(let r=n;r<i+1;r+=1){o+=`\n@media (min-width: ${r===n?0:(r-1)*t}px) and (max-width: ${r*t-1}px) {\n  .gridCentered .static:nth-child(-n+${r}) {\n    position: static !important;\n    visibility: visible !important;\n    float: ${e?"right":"left"};\n    display: block;\n  }\n\n  .gridCentered .static {\n    width: calc(100% / ${r}) !important;\n  }\n}\n`}return o}var c=i(391254),d=i(883119),u=i(773285),p=i(780280),h=i(444445),m=i(785893);function _(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class g extends n.Component{constructor(...e){super(...e),_(this,"Item",(e=>{const{Item:t}=this.props,{gutterWidth:i,paddingBottom:n}=this.getGutters();return(0,m.jsx)("div",{style:{paddingBottom:n,paddingLeft:i/2,paddingRight:i/2},children:(0,m.jsx)(t,{...e})})}))}getGutters(){const{gutterWidth:e,paddingStyle:t}=this.props,i="simplified"===t,n=i?h.oX:e,o=i?16:6;return{gutterWidth:null!=n?n:h.ZZ,paddingBottom:o}}render(){const{columnWidth:e,flexible:t,isGridCentered:i,isRTL:n,items:o,layout:r,loadItems:a,masonryRef:u,measurementStore:p,minCols:_,scrollContainerRef:g,serverRender:v,virtualize:f,virtualBufferFactor:y}=this.props,{gutterWidth:x}=this.getGutters(),b=v?"serverRenderedFlexible":"flexible";let w;i&&(w="gridCentered");const P=()=>(null==g?void 0:g.current)||window;return(0,m.jsxs)("div",{className:w,children:[v&&(0,m.jsx)(c.Z,{unsafeCSS:t?l({isRTL:n,maxItemWidth:(e||h.yF)+x,maxColumns:o.length||h.g5,minColumns:_||h.yc}):(0,s.Z)({isRTL:n,itemWidth:(e||h.yF)+x,maxColumns:o.length||h.g5,minColumns:_||h.yc})}),(0,m.jsx)(d.Rk,{columnWidth:(null!=e?e:h.yF)+x,gutterWidth:0,Item:this.Item,items:o,layout:t?b:null!=r?r:"basic",loadItems:a,measurementStore:p,minCols:_,ref:e=>{u&&(u.current=e)},scrollContainer:P,virtualize:f,virtualBufferFactor:y})]})}}function v(e){var t;const{isRTL:i}=(0,p.B)(),{checkExperiment:n}=(0,u.F)(),o=null!==(t={enabled_0_3:"0.3",enabled_0_5:"0.5",enabled_0_9:"0.9",enabled_1_1:"1.1",enabled_1_3:"1.3"}[n("web_masonry_virtual_buffer_factor").group])&&void 0!==t?t:.7;return(0,m.jsx)(g,{...e,isRTL:i,virtualBufferFactor:o})}function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}_(g,"defaultProps",{gutterWidth:h.ZZ,isGridCentered:!0,minCols:h.yc,paddingStyle:"simplified",virtualize:!0});class y extends n.Component{constructor(...e){super(...e),f(this,"Item",(e=>{const{Item:t}=this.props;return(0,m.jsx)(o.Z,{name:"MasonryPerfTimingItem",children:(0,m.jsx)(t,{...e})})})),f(this,"loadItems",(()=>{const{isFetching:e,loadItems:t}=this.props;!e&&t&&t()}))}render(){const{cacheKey:e,columnWidth:t,flexible:i,gutterWidth:n,isGridCentered:o,items:a,layout:s,masonryRef:l,minCols:c,paddingStyle:d,scrollContainerRef:u,serverRender:p,virtualize:h}=this.props;return(0,m.jsx)(v,{columnWidth:t,flexible:i,gutterWidth:n,isGridCentered:o,Item:this.Item,items:a,layout:s,loadItems:this.loadItems,masonryRef:l,measurementStore:(0,r.Z)(e),minCols:c,paddingStyle:d,scrollContainerRef:u,serverRender:p,virtualize:h})}}function x({cacheKey:e,columnWidth:t,flexible:i,gutterWidth:n,isAtEnd:o,isFetching:r,isGridCentered:s=!0,Item:l,items:c,pinData:d,layout:u,loadItems:p,masonryRef:h,minCols:_,paddingStyle:g,scrollContainerRef:v,serverRender:f=!0,virtualize:x=!0,includeBackgroundImages:b,includeVideos:w}){return(0,m.jsx)(a.Z,{isAtEndOfFeed:o,pinData:d,itemCount:c.length,includeBackgroundImages:b,includeVideos:w,children:(0,m.jsx)(y,{cacheKey:e,columnWidth:t,Item:l,flexible:i,gutterWidth:n,isFetching:r,isGridCentered:s,items:c,layout:u,loadItems:p,masonryRef:h,minCols:_,paddingStyle:g,scrollContainerRef:v,serverRender:f,virtualize:x})})}},920231:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(667294),o=i(319915);function r({flexible:e,gutterWidth:t,id:i,isRTL:n,itemWidth:o,maxColumns:r,minColumns:a}){const s=i.replace(/\:/g,"\\:"),l=o+t;return`\n    .gridCentered {\n      margin-left: auto;\n      margin-right: auto;\n    }\n\n    .gridCentered .static {\n      position: absolute !important;\n      visibility: hidden !important;\n    }\n\n    ${Array.from({length:r+1-a},((e,t)=>t+a)).map((i=>{const c=i===r?null:(i+1)*l-1;return`\n      @media (min-width: ${i===a?0:i*l}px) ${c?`and (max-width: ${c}px)`:""} {\n        #${s} .static:nth-child(-n+${i}) {\n          position: static !important;\n          visibility: visible !important;\n          float: ${n?"right":"left"};\n          display: block;\n        }\n\n        ${e?`\n      #${s} .static {\n        width: calc(100% / ${i}) !important;\n      }\n    `:`\n      #${s} {\n        width: ${i*l}px;\n      }\n\n      #${s} .static {\n        padding: 0 ${t/2}px;\n        width: ${o}px !important;\n      }\n    `}\n      }\n    `})).join("")}\n  `}var a=i(757184),s=i(391254),l=i(50286),c=i(883119),d=i(773285),u=i(780280),p=i(444445),h=i(785893);function m({cacheKey:e,columnWidth:t,gutterWidth:i,id:m,Item:_,items:g,layout:v,loadItems:f,masonryRef:y,minCols:x,scrollContainerRef:b,serverRender:w,resetPositions:P,virtualize:S=!0}){var T;const{isRTL:I}=(0,u.B)(),k="desktop"!==(0,l.ZP)(),E=w?"serverRenderedFlexible":"flexible",A=(0,n.useCallback)((()=>(null==b?void 0:b.current)||window),[b]),C=(0,a.Z)(e),[j,R]=(0,n.useState)(!1);(0,n.useEffect)((()=>{P&&!j&&(null==C||C.reset(),R(!0))}),[C,P,j]);const D=(0,n.useCallback)((e=>(0,h.jsx)(o.Z,{name:"MobileGridItem",children:(0,h.jsx)(_,{...e})})),[_]),{checkExperiment:O}=(0,d.F)(),L=null!==(T={enabled_0_3:"0.3",enabled_0_5:"0.5",enabled_0_9:"0.9",enabled_1_1:"1.1",enabled_1_3:"1.3"}[O("duplo_masonry_virtual_buffer_factor").group])&&void 0!==T?T:.7;return(0,h.jsxs)("div",{id:m,className:"gridCentered",children:[w&&m&&(0,h.jsx)(s.Z,{"data-test-id":"mobile-grid-styles",unsafeCSS:r({flexible:k,gutterWidth:i||0,id:m,isRTL:I,itemWidth:t||p.yF,maxColumns:g.length||p.g5,minColumns:x||p.yc})}),(0,h.jsx)(c.Rk,{columnWidth:t,Item:D,gutterWidth:i||1,layout:k?E:null!=v?v:"basic",items:g,loadItems:f,measurementStore:(0,a.Z)(e),minCols:x||p.yc,ref:e=>{y&&(y.current=e)},scrollContainer:A,virtualize:S,virtualBufferFactor:L})]})}},757184:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(883119);const o={};function r(e){if(null!=e)return o[e]&&o[e].screenWidth===window.innerWidth||(o[e]={screenWidth:window.innerWidth,cache:n.Rk.createMeasurementStore()}),o[e].cache}},463076:(e,t,i)=>{function n({isRTL:e,itemWidth:t=236,maxColumns:i=16,minColumns:n=2}){let o="\n.gridCentered {\n  margin-left: auto;\n  margin-right: auto;\n}\n.gridCentered .static {\n  position: absolute;\n  visibility: hidden;\n}\n";for(let r=n;r<i+1;r+=1){o+=`\n@media (min-width: ${r===n?0:r*t}px) and (max-width: ${(r+1)*t-1}px) {\n  .gridCentered {\n    width: ${r*t}px;\n  }\n  .gridCentered .static:nth-child(-n+${r}) {\n    position: static !important;\n    visibility: visible !important;\n    float: ${e?"right":"left"};\n    display: block;\n  }\n}\n`}return o}i.d(t,{Z:()=>n})},121151:(e,t,i)=>{i.d(t,{ZP:()=>d,b7:()=>s.b7,bN:()=>l,p4:()=>c});var n=i(50286),o=i(883119),r=i(240684),a=i(785893),s=i(968121);const l=(0,r.ZP)({resolved:{},chunkName:()=>"DesktopModal",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>i.e(51879).then(i.bind(i,373420)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve(){return 373420}}),c=(0,r.ZP)({resolved:{},chunkName:()=>"MobileModal",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>i.e(72430).then(i.bind(i,430322)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve(){return 430322}});function d(e){const t=(0,n.ZP)(),i=void 0===e.isOpen||e.isOpen;if("desktop"===t&&i){const{isOpen:t,mobileAccessibilityCloseIconLabel:i,mobileAllowScroll:n,mobileHideCloseIcon:o,mobileIsFullscreen:r,mobileIsSlideUp:s,type:c,...d}=e;return(0,a.jsx)(l,{...d})}const{allowClickAndDrag:o,allowMediaPlay:r,allowScroll:s,role:d,size:u,...p}=e;return(0,a.jsx)(c,{...p,isOpen:i})}},373420:(e,t,i)=>{i.r(t),i.d(t,{default:()=>c});var n=i(667294),o=i(124580),r=i(223815),a=i(968121),s=i(883119),l=i(785893);function c({_dangerouslyDisableScrollBoundaryContainer:e,accessibilityModalLabel:t,align:i,allowClickAndDrag:c,allowMediaPlay:d,allowScroll:u,children:p,closeOnOutsideClick:h,footer:m,heading:_,onDismiss:g,role:v,size:f,subHeading:y}){(0,n.useEffect)((()=>(o.Z.pause(),function(){o.Z.resume()})),[]);return(0,l.jsx)(s.mh,{zIndex:a.b7,children:(0,l.jsx)(r.Z,{allowClickAndDrag:c,allowEsc:!0,allowMediaPlay:d,allowScroll:u,children:(0,l.jsx)(s.u_,{_dangerouslyDisableScrollBoundaryContainer:e,accessibilityModalLabel:t,align:i,closeOnOutsideClick:h,heading:_,footer:m,onDismiss:()=>{o.Z.resume(),g()},role:v,size:f,subHeading:y,padding:"none",children:p})})})}},430322:(e,t,i)=>{i.r(t),i.d(t,{default:()=>_});var n=i(667294),o=i(124580),r=i(283698),a=i(223815),s=i(50286),l=i(898781),c=i(965900),d=i(780280),u=i(883119),p=i(968121),h=i(867820),m=i(785893);function _({_dangerouslyDisableScrollBoundaryContainer:e,accessibilityModalLabel:t,align:i="center",allowScroll:_=!1,children:g,closeOnOutsideClick:v=!0,footer:f,heading:y,mobileAccessibilityCloseIconLabel:x,mobileHideCloseIcon:b,mobileIsFullscreen:w,isOpen:P,mobileIsSlideUp:S,modalStyle:T,onDismiss:I,overrideZDepth:k,subHeading:E,type:A}){const C=(0,l.ZP)(),{isRTL:j}=(0,d.B)(),R=(0,n.useRef)(!1),[D,O]=(0,n.useState)(!1),{setAppFocusState:L}=(0,c.I)(),M=(0,s.ZP)();(0,n.useEffect)((()=>{(0,h.My)(`mweb_unauth.mobile_modal.${A||"unknown_type"}.did_mount.is_open.${String(!!P)}`)}),[P,A]),(0,n.useEffect)((()=>(R.current=(0,r.Z)((()=>{R.current&&O(!0)})),()=>{"undefined"!=typeof window&&Object.prototype.hasOwnProperty.call(window,"cancelAnimationFrame")&&R.current&&(window.cancelAnimationFrame(R.current),R.current=null)})),[]),(0,n.useEffect)((()=>(P?(o.Z.pause(),L(!1)):(o.Z.resume(),L(!0)),()=>{P&&(o.Z.resume(),L(!0))})),[L,P]);const N=P&&!_;(0,n.useEffect)((()=>(N&&(()=>{if(document.body){const{body:{style:e}}=document;e.overflow="hidden",e.touchAction="none"}})(),()=>{N&&(()=>{if(document.body){const{body:{style:e}}=document;e.overflow="visible",e.touchAction="auto"}})()})),[N]);const z=(0,p.bf)();if(!P)return null;const F=S?(0,p.Vf)({isFullscreen:w,isTablet:"tablet"===M,isShowing:D,type:A}):(0,p.JN)({isFullscreen:w,isTablet:"tablet"===M,modalStyle:T,type:A});return(0,m.jsx)(a.Z,{children:(0,m.jsx)(u.mh,{children:(0,m.jsxs)(u.xu,{"aria-label":t,display:"inlineBlock",zIndex:k?new u.Ry(k):p.ZM,position:"relative",role:"dialog",children:[(0,m.jsx)(u.iP,{accessibilityLabel:C._('Mobile Signup Modal Mask', 'mweb.signup_modal.mask', 'The acessibility label for the mask of mobile signup modal'),onTap:({event:e})=>{const t=e,i=I?"with":"without",n=A||"unknown_type";(0,h.tj)(`mweb_unauth.mobile_modal.wash_tap.${n}.${i}_dismissal`,{x:t.clientX,y:t.clientY}),v&&I&&I()},tapStyle:"none",children:(0,m.jsx)(u.xu,{position:"fixed",top:!0,left:!0,dangerouslySetInlineStyle:z})}),(0,m.jsxs)(u.xu,{position:"fixed",color:"default",dangerouslySetInlineStyle:F,children:[(0,m.jsxs)(u.kC,{alignItems:"center",justifyContent:"start",width:"100%",gap:{row:2,column:0},children:[x&&!b?(0,m.jsx)(u.xu,{padding:2,"data-test-id":"mobile-modal-cancel-button",children:(0,m.jsx)(u.hU,{accessibilityLabel:x,iconColor:"darkGray",icon:"cancel",onClick:I,padding:4,size:"sm"})}):null,y?(0,m.jsx)(u.kC.Item,{flex:"grow",children:(0,m.jsx)(u.kC,{direction:"column",alignItems:"center",justifyContent:"center",children:(0,m.jsxs)(u.xu,{dangerouslySetInlineStyle:x&&!b?(0,p.ju)(j):{__style:{}},children:[w?y:(0,m.jsx)(u.xv,{align:i,weight:"bold",size:"400",children:y}),E?(0,m.jsx)(u.xv,{align:i,children:E}):null]})})}):null]}),(0,m.jsxs)(u.xu,{overflow:e?"visible":"auto",children:[g,f]})]})]})})})}},968121:(e,t,i)=>{i.d(t,{JN:()=>u,Vf:()=>p,ZM:()=>s,b7:()=>a,bf:()=>d,i_:()=>l,ju:()=>h});var n=i(379764),o=i(643010),r=i(883119);const a=new r.Ry(1e3),s=new r.H3([n.Z]),l=12,c={headingOffset:{__style:{marginLeft:-10,marginRight:50}},RTLheadingOffset:{__style:{marginRight:-10,marginLeft:50}},mask:{baseStyles:{backgroundColor:"rgba(0,0,0, .5)",height:"100%",touchAction:"none",transitionProperty:"opacity",transitionTimingFunction:"ease-out",width:"100%",zIndex:1}},modal:{baseStyles:{border:(0,o.Yc)()?void 0:"1px solid #efefef",touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100vw",zIndex:1,left:"0px",bottom:0,borderRadius:"32px 32px 0px 0px",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",overflow:"hidden"},tabletStyles:{border:void 0,borderRadius:"32px",top:"50%",left:"50%",minWidth:"350px",touchAction:"none",transform:"translate(-50%, -50%)",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",zIndex:1},nonTabletSignUpStyles:{border:void 0,borderRadius:"32px",top:"50%",touchAction:"none",transform:"translate(0%, -50%)",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",zIndex:1,left:"8px",right:"8px",background:"#FFFFFF"},baseStylesSliding:{border:(0,o.Yc)()?void 0:"1px solid #efefef",touchAction:"none",width:"100vw",height:"",zIndex:1,left:0,bottom:0,borderRadius:"32px 32px 0px 0px",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)"},fullscreenStyles:{touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"90vw",height:"70vh",borderRadius:"8px",zIndex:1,left:"5vw",bottom:"13vh",overflowY:"hidden"},tabletNarrowStyle:{width:425,left:"50%",transform:"translateX(-50%)"}}},d=()=>({__style:c.mask.baseStyles}),u=({isFullscreen:e,isTablet:t,modalStyle:i,type:n})=>{const o=c.modal.fullscreenStyles;let r;return r=e?o:t?c.modal.tabletStyles:"signup"===n?c.modal.nonTabletSignUpStyles:{...c.modal.baseStyles,borderRadius:"32px 32px 0 0"},{__style:i||r}},p=({isFullscreen:e,isTablet:t,isShowing:i,type:n})=>{let o=c.modal.baseStylesSliding,r=i?"translateY(0)":"translateY(100vh)";return o.height=e?"100vh":"",t&&"related_interests_modal"===n&&(o={...o,...c.modal.tabletNarrowStyle},r=i?"translate(-50%, 0)":"translate(-50%, 100vh)"),{__style:{...o,transition:"all 225ms cubic-bezier(0.0,0.0,0.2,1) 500ms",transform:r}}},h=e=>e?c.RTLheadingOffset:c.headingOffset},499128:(e,t,i)=>{i.d(t,{UZ:()=>c,Vg:()=>l,ZP:()=>d});var n=i(667294),o=i(829407),r=i(50286),a=i(883119),s=i(785893);const l=200,c=({deviceType:e,hiding:t,visible:i})=>{const n="desktop"===e;let o=0,r=n?"translateY(200px)":"translateY(-200px)",a="opacity 0.1s ease-in-out",s="hidden";return i&&!t&&(o=1,r="translateY(0)",a="all 0.7s cubic-bezier(.19, 1.15, .48, 1)",s="visible"),i&&t&&(r="scale(1.1)",a="opacity transform 0.2s"),{opacity:o,pointerEvents:"auto",position:"relative",marginTop:n?10:0,transform:r,transition:a,visibility:s}};function d({_dangerouslySetPrimaryAction:e,text:t,primaryAction:i,thumbnailShape:d,variant:u,dataTestId:p,duration:h=2e3,onHide:m,href:_,onClick:g,openNewPage:v,iconThumbnail:f,imageUrl:y}){const x=(0,r.ZP)(),[b,w]=(0,n.useState)(!1),[P,S]=(0,n.useState)(!1),T=(0,n.useRef)(),I=()=>{w(!0),T.current=setTimeout(m,l)},k=()=>{T.current=setTimeout(I,h)},E=()=>{T.current&&clearTimeout(T.current)};let A;(0,o.Z)((()=>(setTimeout((()=>S(!0)),100),k(),E))),f?A=f:y&&(A=(0,s.jsx)(a.xu,{height:48,overflow:"hidden",width:48,children:(0,s.jsx)(a.Ee,{alt:"string"==typeof t?t:`${t[0]} ${t[1]}`,fit:"cover",naturalHeight:1,naturalWidth:1,src:y})}));const C=(0,s.jsx)(a.FN,{_dangerouslySetPrimaryAction:e,primaryAction:i,text:t,thumbnail:A,thumbnailShape:d,variant:u}),{marginTop:j,opacity:R,pointerEvents:D,position:O,transform:L,transition:M,visibility:N}=c({deviceType:x,hiding:b,visible:P});return(0,s.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{transform:L,transition:M,visibility:N,pointerEvents:D}},"data-test-id":null!=p?p:"toast",onMouseEnter:E,onMouseLeave:k,opacity:R,position:O,marginTop:j,children:_?(0,s.jsx)(a.iP,{role:"link",href:_,onTap:({event:e})=>null==g?void 0:g(e),target:v?"blank":null,rounding:"pill",children:C}):C})}},572752:(e,t,i)=>{function n(e){return`${e.userAgent.isMobile?"mobile":"desktop"}.${e.country}.${e.userAgent.platform}.${e.userAgent.browserName}`.replace(/ /g,"_")}i.d(t,{Z:()=>n})},444445:(e,t,i)=>{i.d(t,{$H:()=>a,$q:()=>v,D6:()=>l,KN:()=>f,Lo:()=>o,P2:()=>m,ZZ:()=>d,g5:()=>u,jC:()=>s,lX:()=>h,nW:()=>p,oX:()=>_,qG:()=>g,tG:()=>r,yF:()=>n,yc:()=>c});const n=236,o=2*n/3,r=175,a=24,s=4,l=2,c=2,d=14,u=16,p=12,h=16,m=24,_=16,g=-1,v=(e=!1,t=!1)=>e?t?h:p:m,f=(e,t,i,n,o=d)=>{const r=e+o;return`\n@media (min-width: ${t*r}px) and (max-width: ${(i+1)*r-1}px) {\n  ${n}\n}\n`}},694379:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(892819),o=i(780280),r=i(785893);const a=({currency:e,maximumFractionDigits:t,minimumFractionDigits:i,shortform:a,shortformMaximumFractionDigits:s,formatStyle:l,uplimit:c,value:d})=>{const u=(0,n.Z)();return(0,r.jsx)(o.LC,{children:n=>u(n.locale||"en-US",d,{currency:e,maximum_fraction_digits:t,minimum_fraction_digits:i,shortform:a,shortform_maximum_fraction_digits:s,style:l,uplimit:c})})}},298361:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(898781),o=i(349700),r=i(202139);function a(){const e=(0,n.ZP)();return function(t,i){const n=new Date(t),a=new Date-n,s=Math.floor(a/r.FS),l=Math.floor(a/r.UK),c=Math.floor(a/r.F4),d=Math.floor(a/r.VL),u=Math.floor(a/r.N1),p=e.ngettext('{{ minutes }} minute ago', '{{ minutes }} minutes ago', s, ' - ', ' -- '),h=e.ngettext('{{ hours }} hour ago', '{{ hours }} hours ago', l, ' - ', ' -- '),m=e.ngettext('{{ days }} day ago', '{{ days }} days ago', c, ' - ', ' -- '),_=e.ngettext('{{ weeks }} week ago', '{{ weeks }} weeks ago', d, ' - ', ' -- '),g=e.ngettext('{{ years }} year ago', '{{ years }} years ago', u, ' - ', ' -- '),v=e.ngettext('{{ minutes }}m', '{{ minutes }}m', s, 'minutes ago abbreviated', 'minutes ago abbreviated'),f=e.ngettext('{{ hours }}h', '{{ hours }}h', l, 'hours ago abbreviated', 'hours ago abbreviated'),y=e.ngettext('{{ days }}d', '{{ days }}d', c, 'days ago abbreviated', 'days ago abbreviated'),x=e.ngettext('{{ weeks }}w', '{{ weeks }}w', d, 'weeks ago abbreviated', 'weeks ago abbreviated'),b=e.ngettext('{{ years }}y', '{{ years }}y', u, 'years ago abbreviated', 'years ago abbreviated');return u>0?(0,o.nk)(i?b:g,{years:u}).join(""):d>0?(0,o.nk)(i?x:_,{weeks:d}).join(""):c>0?(0,o.nk)(i?y:m,{days:c}).join(""):l>0?(0,o.nk)(i?f:h,{hours:l}).join(""):s>0?(0,o.nk)(i?v:p,{minutes:s}).join(""):e._('Just now', ' - ', ' -- ')}}},898781:(e,t,i)=>{i.d(t,{ZP:()=>s,oz:()=>r,q6:()=>o});var n=i(425288);const{Provider:o,Consumer:r,useHook:a}=(0,n.Z)("i18n"),s=a},892819:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(66699),o=i(898781);const r=(e,t)=>{const i=t||0,n=10**i,o=+(i?e*n:e).toFixed(8),r=Math.floor(o),a=o-r,s=a>.5-1e-8&&a<.5+1e-8?r%2==0?r:r+1:Math.round(o);return i?s/n:s},a=e=>{try{(0).toLocaleString([e])}catch(t){return!1}return!0};function s(){const e=(0,o.ZP)();return(t,i,o)=>{let s=0,l=0;const c=o&&o.style||void 0,d=o&&o.shortform||!1,u=o&&o.uplimit||void 0,p=o&&o.currency||void 0,h=!!u&&i>=u,m=u&&h?u:i;if("currency"===c){const{minimumFractionDigits:e,maximumFractionDigits:i}=((e,t)=>{if(t){const{minimumFractionDigits:i,maximumFractionDigits:n}=new Intl.NumberFormat(e,{style:"currency",currency:t}).resolvedOptions();if(void 0!==i&&void 0!==n)return{minimumFractionDigits:i,maximumFractionDigits:n}}return{minimumFractionDigits:2,maximumFractionDigits:2}})(t,p);s=void 0===o||void 0===o.maximum_fraction_digits?i:o.maximum_fraction_digits,l=void 0===o||void 0===o.minimum_fraction_digits?e:o.minimum_fraction_digits}else s=void 0===o||void 0===o.maximum_fraction_digits?0:o.maximum_fraction_digits,l=void 0===o||void 0===o.minimum_fraction_digits?0:o.minimum_fraction_digits;if(d&&m>999&&(s=void 0===o||void 0===o.shortform_maximum_fraction_digits?2:o.shortform_maximum_fraction_digits,l=0),s<l)return String(m);let _=m,g="";const v=[{"100M":{value:1e8,localeKey:e._('億', 'Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.', 'Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.')}},{"10k":{value:1e4,localeKey:e._('万', 'Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.', 'Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.')}}],f=[{b:{value:1e9,localeKey:e._('B', 'Abbreviation for one billion.', 'Abbreviation for one billion.')}},{m:{value:1e6,localeKey:e._('M', 'Abbreviation for one million.', 'Abbreviation for one million.')}},{k:{value:1e3,localeKey:e._('k', 'Abbreviation for one thousand.', 'Abbreviation for one thousand.')}}],y=/^zh|ja|ko/.test(t);if(d&&m>999){const e=y?v:f;for(let t=0;t<e.length;t+=1){const i=Object.keys(e[t])[0],n=e[t][i].value;if(m>=n){_=r(m/n*Math.pow(10,s))/Math.pow(10,s),g=e[t][i].localeKey;break}}}if(null==_)return"";const x=_.toLocaleString([a(t)&&"ar-SA"!==t?t:"en-US"],(({maximumFractionDigits:e,minimumFractionDigits:t,style:i,currency:n})=>{const o={maximumFractionDigits:e,minimumFractionDigits:t};return i?{...o,style:i,..."currency"===i?{currency:n,currencyDisplay:"symbol"}:{}}:o})({maximumFractionDigits:s,minimumFractionDigits:l,currency:p,style:c}));return g&&g.length>0?(0,n.Z)(e._('{{formattedNumber}}{{numberSuffix}}', 'i18n.usePrettyNumberFormat.prettyNumberFormat', 'String used to concatenate formatted number and localized number suffix'),{formattedNumber:x,numberSuffix:g})+(h?"+":""):x+(h?"+":"")}}},366428:(e,t,i)=>{i.d(t,{F:()=>d,Z:()=>c});var n=i(667294),o=i(834911),r=i(124580),a=i(407043),s=i(350118);const l={ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},OneBar:{impressionType:"oneBarImpressions",idType:"onebarIdStr",eventType:9993},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704}};function c({closeupImpressionType:e,closeupNavigationType:t,componentType:i,contextLogData:c,clientTrackingParams:d,elementType:u,impressionAuxFields:p,inImpressionExp:h,impressionType:m,impressionsFramework:_,isPaused:g,loggingId:v,objectIdStr:f,slotIndex:y,trackCarousel:x,viewData:b,viewParameter:w,viewType:P}){const{logContextEvent:S}=(0,a.v)(),T=(0,s.AF)(),I=v?T[v]:{},k=I&&(0,o.Z)({carouselData:I.carousel_data,images:I.images,richMetadata:I.rich_metadata,richSummary:I.rich_summary}),E=_||r.Z,A=(0,n.useRef)(null),C=n=>{const o=l[m],r=o.idType,a={endTime:n.endTime,[r]:v,slotIndex:y,time:n.startTime,renderDuration:n.endTime-n.startTime,type:e,...p,forcedExit:"removed"===n.forcedExit?0:void 0},s={component:i,object_id_str:f,view_type:P,view_data:b||{},view_parameter:w};if(x){if(k){var h,_,g;S({event_type:7352,event_data:{pinCarouselSlotImpressions:[{...a,carouselDataId:Number(k.id),carouselSlotId:(null===(h=k.carousel_slots)||void 0===h?void 0:h[null!==(_=k.index)&&void 0!==_?_:0])&&Number(k.carousel_slots[null!==(g=k.index)&&void 0!==g?g:0].id),slotIndex:k.index}]},...s,aux_data:{...c}})}}else S({clientTrackingParams:d,event_type:o.eventType,...s,element:u,event_data:{[o.impressionType]:"Story"===m?a:[a]},aux_data:{closeup_navigation_type:t,...c}})},j=(0,n.useCallback)((()=>{try{A.current instanceof HTMLElement&&E.start(A.current).onExitViewport(C).setDebugId(v||"unknown")}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}}),[A.current]);(0,n.useEffect)((()=>(h&&!E.inExperiment&&E.setExperimentStatus(!0),g||j(),()=>{A.current instanceof HTMLElement&&E.stop(A.current)})),[j]);const R=(0,n.useRef)(g);return(0,n.useEffect)((()=>{R.current&&!g&&j(),R.current=g}),[g,j]),A}const d=({children:e,...t})=>e({impressionTrackerRef:c(t)})},12610:(e,t,i)=>{function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z3:()=>p,LU:()=>h,ZP:()=>m});const o=1e6,r=window.location.search.includes("debug_impressions=1")||document.cookie&&document.cookie.indexOf("debug_impressions=1")>-1,a={paused:"Pause",resumed:"Resume",stopped:"Flush",enter:"Enter viewport",exit:"Exit viewport"},s={},l={background:"#FF8A8A",transform:"scale(.98)"},c={init:e=>({transform:`scale(${s[e]?.8:.99})`,transition:"transform .2s ease-in-out",background:"#8E8E8E"}),[a.enter]:{background:"#A0DCC8",transform:"scale(.99)"},[a.exit]:l,[a.stopped]:l,[a.paused]:l,[a.resumed]:{background:"#0FA573",transform:"scale(.99)"}};class d{constructor(e){n(this,"setMutationObserver",(e=>(this.mutationObserver=e,this))),n(this,"startMutationObserver",(e=>{this.mutationObserver&&this.mutationObserver.observe(this.node,e)})),n(this,"stopMutationObserver",(()=>{this.mutationObserver&&this.mutationObserver.disconnect()})),n(this,"handleIntersectionChange",(e=>{const t=e.intersectionRatio>0||e.isIntersecting;if(t&&!this.inViewport){const e=Date.now();this.startTime=e,this._debug(a.enter,{startTime:e,node:this.node}),this.enterCallbacks.forEach((e=>e()))}else!t&&this.inViewport&&(this._debug(a.exit,!0),this.exitCallbacks.forEach((e=>e(this.toJSON()))));this.inViewport=t})),this.enterCallbacks=[],this.exitCallbacks=[],this.inViewport=!1,this.node=e,this.startTime=0,this.debugId=""}onEnterViewport(e){return this.enterCallbacks.push(e),this}onExitViewport(e){return this.exitCallbacks.push(e),this}setDebugId(e){return this.debugId=e,r&&Object.assign(this.node.style,c.init(e)),this}pause(){return this.inViewport&&(this._debug(a.paused,!0),this.exitCallbacks.forEach((e=>e(this.toJSON())))),this}resume(){if(this.inViewport){const e=Date.now();this._debug(a.resumed,{startTime:e}),this.startTime=e}return this}stop(e){return this.inViewport&&(this._debug(a.stopped,!0),this.exitCallbacks.forEach((t=>t(this.toJSON(e))))),this}toJSON(e=""){return{startTime:this.startTime*o,endTime:Date.now()*o,forcedExit:e}}toDebugJSON(){return{pinID:this.debugId,startTime:this.startTime,endTime:Date.now(),duration:(Date.now()-this.startTime)/1e3+" seconds"}}_debug(e,t){if(r)switch(window.console.log(`📌 ${e} -- ${this.debugId}`),!0===t&&window.console.log(this.toDebugJSON()),"object"==typeof t&&window.console.log(t),c[e]&&Object.assign(this.node.style,c[e]),e){case a.flushed:case a.paused:case a.exit:s[this.debugId]=!0}}}function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const p=!0,h=!1;class m{constructor(){u(this,"_delegateChange",(e=>{e.forEach((e=>{const t=this.activeImpressions.get(e.target);t&&t.handleIntersectionChange(e)}))})),u(this,"_handleMutations",((e,t)=>{const i=this.mutationObservers.get(t);i&&i.offsetHeight<1&&i&&this.stop(i,"removed")})),this.activeImpressions=new Map,this.mutationObservers=new Map,this.bottomHeight=0,this.bottomObstructions=new Set,this.pausePriority=h,this.observer=new window.IntersectionObserver(this._delegateChange),this.paused=!1,this.topHeight=0,this.topObstructions=new Set,this.inExperiment=!1}setExperimentStatus(e){this.inExperiment!==e&&(this.inExperiment=e)}stop(e,t=""){const i=this.activeImpressions.get(e);i&&(i.stop(t),this.mutationObservers.delete(i.mutationObserver),i.stopMutationObserver(),this.activeImpressions.delete(e),this.observer.unobserve(e))}start(e){let t=this.activeImpressions.get(e);if(!t){t=new d(e),this.activeImpressions.set(e,t),this.observer.observe(e);const i=(e,t)=>this._handleMutations(e,t);t.setMutationObserver(new window.MutationObserver(i)),this.mutationObservers.set(t.mutationObserver,e),t.startMutationObserver({subtree:!0,attributes:!0,attributeFilter:["style"]})}return t}pause(e=p){this.paused||(Array.from(this.activeImpressions.values()).forEach((e=>e.pause())),this.paused=!0,this.pausePriority===h&&(this.pausePriority=e))}resume(e=p){e===h&&this.pausePriority===p||this.paused&&(Array.from(this.activeImpressions.values()).forEach((e=>e.resume())),this.paused=!1,this.pausePriority=h)}addObstruction(e,t){"top"===e?this.topObstructions.add(t):"bottom"===e&&this.bottomObstructions.add(t),this._calculateRootMargins()}removeObstruction(e,t){"top"===e?this.topObstructions.delete(t):"bottom"===e&&this.bottomObstructions.delete(t),this._calculateRootMargins()}updateObstructions(){this._calculateRootMargins()}_calculateRootMargins(){const e=Array.from(this.topObstructions).reduce(((e,t)=>{const{bottom:i}=t.getBoundingClientRect();return i>e?i:e}),0),t=window.innerHeight-Array.from(this.bottomObstructions).reduce(((e,t)=>{const{top:i}=t.getBoundingClientRect();return i<e?i:e}),window.innerHeight);if(e!==this.topHeight||t!==this.bottomHeight){const i={rootMargin:`${-e}px 0px ${-t}px`};this.observer.disconnect(),this.observer=new window.IntersectionObserver(this._delegateChange,i),Array.from(this.activeImpressions.values()).forEach((e=>this.observer.observe(e.node))),this.topHeight=e,this.bottomHeight=t}}}},564194:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(667294),o=i(973935),r=i(834911),a=i(124580),s=i(407043),l=i(350118),c=i(785893);function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const u={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasImpressions",idType:"boardIdStr",eventType:10054},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127}};class p extends n.Component{constructor(e){super(e),d(this,"trackImpression",(()=>{try{this.node=(0,o.findDOMNode)(this),this.node instanceof HTMLElement&&this.impressionsFramework.start(this.node).onExitViewport(this.logImpression).setDebugId(this.props.loggingId||"unknown")}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}})),d(this,"logImpression",(e=>{const{carousel_data:t,closeupImpressionType:i,closeupNavigationType:n,componentType:o,contextLogData:r,elementType:a,impressionAuxFields:s,impressionType:l,loggingId:c,objectIdStr:d,slotIndex:p,trackCarousel:h,viewData:m,viewParameter:_,viewType:g,logContextEvent:v}=this.props,f=u[l],y=f.idType,x=e.forcedExit&&"removed"===e.forcedExit?0:void 0,b={endTime:e.endTime,[y]:c,slotIndex:p,time:e.startTime,renderDuration:e.endTime-e.startTime,type:i,...s,forcedExit:x};if(h||v({event_type:f.eventType,component:o,element:a,event_data:{[f.impressionType]:"Story"===l?b:[b]},object_id_str:d,view_type:g,view_data:m||{},view_parameter:_,aux_data:{...r,closeup_navigation_type:n}}),t&&h){const{carousel_slots:e,index:i=0,id:n}=t;v({event_type:7352,component:o,event_data:{pinCarouselSlotImpressions:[{...b,carouselDataId:Number(n),carouselSlotId:(null==e?void 0:e[i])&&Number(e[i].id),slotIndex:i}]},object_id_str:d,view_type:g,view_data:m||{},view_parameter:_,aux_data:{...r}})}})),this.impressionsFramework=e.impressionsFramework||a.Z}componentDidMount(){this.props.inImpressionExp&&!this.impressionsFramework.inExperiment&&this.impressionsFramework.setExperimentStatus(!0),this.props.isPaused||this.trackImpression()}componentDidUpdate(e){e.isPaused&&!this.props.isPaused&&this.trackImpression()}componentWillUnmount(){this.node instanceof HTMLElement&&this.impressionsFramework.stop(this.node)}render(){return n.Children.only(this.props.children)}}function h(e){const{logContextEvent:t}=(0,s.v)(),{loggingId:i}=e,n=(0,l.AF)(),o=i?n[i]:{};return(0,c.jsx)(p,{...e,logContextEvent:t,carousel_data:o&&(0,r.Z)({carouselData:o.carousel_data,images:o.images,richMetadata:o.rich_metadata,richSummary:o.rich_summary})})}},124580:(e,t,i)=>{i.d(t,{Z:()=>n});const n=new(i(12610).ZP)},954571:(e,t,i)=>{i.d(t,{Z:()=>n});function n(e){if(!e)return!1;const t=new Date(e);return t.setDate(t.getDate()+28),(new Date).getTime()<t.getTime()}},349700:(e,t,i)=>{function n(e,t,i){return e.split(i).map((e=>{if(e.match(i)){const i=e.replace(/[\{\}]/g,"").trim();if(Object.prototype.hasOwnProperty.call(t,i))return t[i]}return e}))}i.d(t,{Wc:()=>a,bF:()=>l,nk:()=>r});const o=/(\{\{\s*\w+\s*\}\})/g;function r(e,t){return n(e,t,o)}function a(e,t){return n(e,t,o).join("")}const s=/(\{\s*\w+\s*\})/g;function l(e,t){return n(e,t,s)}},995081:(e,t,i)=>{i.d(t,{Rq:()=>n,Vf:()=>o,jd:()=>r,oy:()=>a});const n=e=>"ios"===e&&(window.devicePixelRatio||1)*window.screen.height==2436,o=28,r=e=>window.innerHeight>=748&&n(e),a=function(){return!("undefined"==typeof window||!window.navigator)&&(/iPad/.test(navigator.platform)||navigator.maxTouchPoints>1&&"MacIntel"===navigator.platform)}},329734:(e,t,i)=>{i.d(t,{P:()=>r,Z:()=>o});var n=i(702664);function o(e){return e&&e[1000069]&&500417===e[1000069].experience_id&&e[1000069].display_data.hide_footer}function r(){const e=(0,n.useSelector)((({experiences:e})=>e));return!!e&&o(e)}},411938:(e,t,i)=>{i.d(t,{Z:()=>n});function n(e,t,i=28){if(!(e||{}).resurrection_info&&!(t||{}).resurrectionInfo)return!1;let n;n=t?((t||{}).resurrectionInfo||{}).resurrectionDate:((e||{}).resurrection_info||{}).resurrection_dt;const o=new Date,r=n?new Date(n):o;return r.setDate(r.getDate()+i),(new Date).getTime()<r.getTime()}},755742:(e,t,i)=>{i.d(t,{Z:()=>n});const n={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,F5:116,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}},313047:(e,t,i)=>{i.r(t),i.d(t,{DEFAULT_HEIGHT:()=>u,DEFAULT_PADDING_Y:()=>p,FixedFooter:()=>_,FixedHeader:()=>m});var n=i(667294),o=i(124580),r=i(53987),a=i(773285),s=i(834256),l=i(883119),c=i(643010),d=i(785893);const u=64,p=3;function h({children:e,footerConfig:t,headerConfig:i,height:r,hideOnScroll:s,hideOnScrollState:{isHidden:h,updateHiddenState:m},showDockedNavBar:_,dockNavBarForAuthTablet:g,isTablet:v,noPadding:f,paddingY:y=p,type:x,zIndex:b}){const{headerLimitedOverflow:w,ignoreObstructions:P,zIndexForGestaltBug:S}=i||{},{appUpsellFooterConfig:T,footerInLego:I,footerWidth:k}=t||{},E=!!T,A="header"===x?"top":"bottom",{anyEnabled:C}=(0,a.F)().checkExperiment("hfp_hf_ssr_mweb",{dangerouslySkipActivation:!0}),j=(0,c.vs)(),R=C?j:(0,c.Yc)(),D=(0,n.useRef)(null),O=(0,n.useRef)(null);(0,n.useEffect)((()=>{try{if(!P){const e=D.current;O.current=w&&e&&Array.isArray(e.children)?e.children[0]:e,O.current instanceof HTMLElement&&o.Z.addObstruction(A,O.current)}}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}return()=>{P||O.current instanceof HTMLElement&&o.Z.removeObstruction(A,O.current)}}),[P,w,A,R]);const L="top"===A?"relative":"fixed",M=f?0:y,N=(null!=r?r:u)+((null==i?void 0:i.overrideTop)||0),z=s||_||g?{transition:I?"transform 300ms ease-in-out, opacity 300ms ease-in-out":"transform 200ms linear",...h?{transform:`translateY(${"top"===A?-N:N}px)`,opacity:I?0:1}:Object.freeze({})}:{},F="relative"!==L||null!=i&&i.noGutter?0:2,Z=F?-F:0,B=R?"rgba(0,0,0,.95)":"rgba(255,255,255,.95)";let U,H;return R&&("header"===x?U=-1:H=-1),(0,d.jsx)(l.xu,{ref:D,dangerouslySetInlineStyle:{__style:{top:U,bottomStyle:H,...!b||S?{zIndex:S||1}:Object.freeze({}),...w?{background:"transparent",overflow:"hidden",paddingBottom:100,marginBottom:-100,pointerEvents:"none"}:Object.freeze({}),...null!=i&&i.hasBorder?{borderBottom:"1px solid #efefef"}:Object.freeze({}),...null!=t&&t.hasTopShadow?{boxShadow:"0 -2px 4px 1px rgba(0, 0, 0, 0.08)"}:Object.freeze({}),...z}},zIndex:S?void 0:b,"data-test-id":x,display:E?"flex":void 0,height:r&&!I?r:void 0,position:L,bottom:"footer"===x,top:"header"===x,left:!0,right:!0,marginStart:I?"auto":Z,marginEnd:I?"auto":Z,onTransitionEnd:()=>{(s||_||g)&&O.current&&(h?o.Z.removeObstruction(A,O.current):o.Z.addObstruction(A,O.current))},width:I||"fixed"!==L?void 0:"100%",children:(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:(null==i?void 0:i.isTranslucent)&&B||(null==i?void 0:i.isTransparentBackground)&&"transparent"||"var(--color-background-default)",height:I?E?void 0:null!=r?r:u:"100%",boxShadow:I?"0px 0px 8px rgba(0, 0, 0, 0.1)":void 0,marginBottom:!I||_&&!v?void 0:16,...w?{pointerEvents:"auto"}:Object.freeze({}),...null!=i&&i.useRoundedCorners?{zIndex:5,borderTopRightRadius:17,borderTopLeftRadius:17,borderBottomRightRadius:0,borderBottomLeftRadius:0}:Object.freeze({})}},paddingX:("footer"!==x||f?0:4)+F,paddingY:M,position:"relative",width:I&&k?k:E?void 0:"100%",rounding:!I||_&&!v?void 0:"pill",display:I||null!=t&&t.alignCenter?"flex":void 0,marginStart:I?"auto":void 0,marginEnd:I?"auto":void 0,alignItems:null!=t&&t.alignCenter?"center":void 0,children:"function"==typeof e?e({updateHiddenState:m}):e})})}function m({hasBorder:e,headerLimitedOverflow:t,ignoreObstructions:i,isTranslucent:n,isTransparentBackground:o,noGutter:r,overrideTop:a,useRoundedCorners:c,zIndexForGestaltBug:u,...m}){const{noPadding:_,paddingY:g=p,zIndex:v}=m,f=_?0:g;return(0,d.jsx)(l.Le,{top:a||0,height:t?44+2*f*4:void 0,zIndex:v||void 0,children:(0,d.jsx)(s.Z,{hideOnScroll:m.hideOnScroll,children:s=>(0,d.jsx)(h,{...m,hideOnScrollState:s,type:"header",headerConfig:{isTranslucent:n,isTransparentBackground:o,headerLimitedOverflow:t,hasBorder:e,ignoreObstructions:i,noGutter:r,overrideTop:a,zIndexForGestaltBug:u,useRoundedCorners:c}})})})}function _({alignCenter:e,appUpsellFooterConfig:t,footerInLego:i,footerWidth:n,forceShow:o,hasTopShadow:a,location:l,showDockedNavBar:c,dockNavBarForAuthTablet:u,isTablet:p,isModal:m,onScroll:_,...g}){const v=!!l&&(0,r.uM)(l)&&(!!c||!!u);return(0,d.jsx)(s.Z,{appUpsellFooterConfig:t,forceShow:o,hideOnScroll:g.hideOnScroll,location:l,isDockedNavOnPlp:v,isModal:m,onScroll:_,children:o=>(0,d.jsx)(h,{...g,hideOnScrollState:o,showDockedNavBar:c,dockNavBarForAuthTablet:u,isTablet:p,type:"footer",footerConfig:{alignCenter:e,appUpsellFooterConfig:t,footerInLego:i,footerWidth:n,hasTopShadow:a}})})}},834256:(e,t,i)=>{i.d(t,{Z:()=>s,m:()=>a});var n=i(667294),o=i(700380);function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const a=20;class s extends n.Component{constructor(...e){super(...e),r(this,"state",{isHidden:!!this.props.appUpsellFooterConfig||!!this.props.isDockedNavOnPlp}),r(this,"lastScrollPos",0),r(this,"updateHiddenState",(e=>{this.reqAnimationId=window.requestAnimationFrame((()=>{this.setState({isHidden:e})}))})),r(this,"handleScroll",(0,o.Z)((()=>{const{appUpsellFooterConfig:e,isModal:t,onScroll:i,isDockedNavOnPlp:n}=this.props,{isHidden:o}=this.state,r=window.scrollY,s=r-this.lastScrollPos;let l="none";const{scrollHeight:c,clientHeight:d}=document.documentElement||{};if(!Number.isNaN(c)&&!Number.isNaN(d))if(s<0){const e=window.scrollMinY||0;l=r<=Math.abs(e+Math.max(s,a))?"start":"none"}else{l=r>=(window.scrollMaxY||c-d)-Math.max(s,a)?"end":"none"}const u=t?0:55;if(e)if(s>a&&o&&r>=500){e.shouldShowAfterScroll()&&(this.updateHiddenState(!1),i&&i(!1))}else(s<-a&&!o||r<=u)&&(this.updateHiddenState(!0),i&&i(!0));else!this.props.hideOnScroll&&n?"start"===l&&!o||r<=u?(this.updateHiddenState(!0),i&&i(!0)):(r>u||"end"===l)&&o&&(this.updateHiddenState(!1),i&&i(!1)):(s<-a||"start"===l)&&o||r<=u?(this.updateHiddenState(!1),i&&i(!1)):(s>a||"end"===l)&&!o&&(this.updateHiddenState(!0),i&&i(!0));this.lastScrollPos=r}),30))}componentDidMount(){try{(this.props.hideOnScroll||this.props.isDockedNavOnPlp)&&window.addEventListener("scroll",this.handleScroll)}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}}componentWillUnmount(){(this.props.hideOnScroll||this.props.isDockedNavOnPlp)&&window.removeEventListener("scroll",this.handleScroll),this.reqAnimationId&&(window.cancelAnimationFrame(this.reqAnimationId),this.reqAnimationId=null)}componentDidUpdate(e){!e.hideOnScroll&&this.props.hideOnScroll||!e.isDockedNavOnPlp&&this.props.isDockedNavOnPlp?(this.updateHiddenState(!0),window.addEventListener("scroll",this.handleScroll)):(e.hideOnScroll&&!this.props.hideOnScroll||e.isDockedNavOnPlp&&!this.props.isDockedNavOnPlp)&&(this.updateHiddenState(!1),window.removeEventListener("scroll",this.handleScroll))}render(){const{children:e,forceShow:t}=this.props,{isHidden:i}=this.state;return e({isHidden:!t&&i,updateHiddenState:this.updateHiddenState})}}},166300:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(50286),o=i(883119),r=i(444445),a=i(134879),s=i(785893);const l=({children:e,roundedForLargeDevice:t})=>{const i="phone"!==(0,n.ZP)()&&t;return(0,a.V)()?(0,s.jsx)(o.xu,{marginStart:-r.D6,marginEnd:-r.D6,rounding:i?6:void 0,overflow:i?"hidden":void 0,children:(0,s.jsx)(a.C,{value:!1,children:e})}):e}},542554:(e,t,i)=>{i.r(t),i.d(t,{AMPPageContainer:()=>c,default:()=>d});var n=i(883119),o=i(134879),r=i(444445),a=i(780280),s=i(995081),l=i(785893);const c=({children:e,dataLayoutShiftBoundaryId:t,hasFixedHeader:i=!1,hasGutter:c=!0,height:d,showKeychainError:u=!1,useViewport:p=!1})=>{const h=(0,a.B)(),m=(0,s.jd)(h.userAgent.platform)?s.Vf:0;return(0,l.jsx)(n.xu,{"data-layout-shift-boundary-id":t||"PageContainer",height:p?`calc(100vh - ${m}px)`:d,paddingX:c?r.D6:void 0,paddingY:i||u?void 0:3,children:(0,l.jsx)(o.C,{value:!!c,children:e})})},d=c},134879:(e,t,i)=>{i.d(t,{C:()=>r,V:()=>a});var n=i(667294);const o=(0,n.createContext)(!1),r=o.Provider,a=()=>(0,n.useContext)(o)},48714:(e,t,i)=>{i.d(t,{nS:()=>b,iw:()=>P,gV:()=>y,G3:()=>S,lI:()=>T,Gj:()=>w,Jd:()=>f,$3:()=>x});var n=i(231486),o=i(56641),r=i(768559),a=i(250059);const s=e=>"string"!=typeof e&&e?e.state:null;var l=i(643913),c=i(547239),d=i(508847),u=i(102500),p=i(43760),h=i(579164),m=i(333155),_=i(397066),g=i(623568),v=i(226198);const f=()=>{window&&window.focus(),document.activeElement&&document.activeElement.blur()},y=({isOffsiteUrl:e,event:t})=>!e&&(t.metaKey||t.ctrlKey),x=({location:e,pin:t,surface:i})=>!(0,g.jL)(t)&&(({location:e,pinId:t,surface:i})=>{const n=Boolean(i),o=m.ZF.includes(i),r=e.pathname.includes(t);return n&&!o||r})({location:e,pinId:t.id,surface:i}),b=e=>{const t=Math.round(1e3*Math.random())+"",i=Math.round(1e3*Math.random())+"";n.t8((0,v.GS)(t),i);const o=`${t}-${i}`,{queryParams:r,url:a}=e;let s={token:o,url:a};if(!r){const{pinId:t,csrId:i,clientTrackingParams:n,auxData:o}=e;s={...s,pin:null!=t?t:void 0,csr:i&&!t?i:void 0,client_tracking_params:n,aux_data:o?JSON.stringify(o):void 0}}r&&(s={...s,...r});return`/offsite/?${(0,l.Z)(s)}`},w=e=>{(0,o.Z)(b(e),!0)},P=async({isMounted:e,pin:t,location:i,spamCheckCallback:n,href:o})=>{var a,s;const l=await(0,u.Z)({check_only:!0,client_tracking_params:(0,r.Z)({boardUrl:null==t||null===(a=t.board)||void 0===a?void 0:a.url,callToCreateSourcePinId:null==t?void 0:t.call_to_create_source_pin_id,location:i,pinId:null==t?void 0:t.id,pinnerUserName:null==t||null===(s=t.pinner)||void 0===s?void 0:s.username,storyPinDataId:null==t?void 0:t.story_pin_data_id,trackingParams:null==t?void 0:t.tracking_params,trackingParamsMap:null==t?void 0:t.tracking_params_map}),pin_id:null==t?void 0:t.id,url:o}).callGet({showError:!1});if(!l.resource_response.error&&e){const e=l.resource_response.data||{},{message:t,redirect_status:i,url:o}=e;n({blocked:["blocked","suspicious","porn"].includes(i),message:t,redirectStatus:i,sanitized_url:o})}},S=({event:e,onHistoryChange:t,href:i,history:n,target:r})=>{const l=(0,a.Z)(i),u=s(i),p=(0,c.Z)(l);p===h.Z.TRUSTED_DIFFERENT_ORIGIN||"blank"===r?(0,o.Z)(l,"blank"===r):n&&p===h.Z.SAME_ORIGIN&&(n.push((0,d.Z)({url:l}),null!=u?u:{}),t&&t({event:e}))},T=({href:e,pinId:t,pin:i,location:n,auxData:o,spamCheck:a,queryParams:s},l,c)=>{"undefined"!=typeof window&&window.Windows?(0,p.Z)({url:e,pinId:t,pin:i,location:n,auxData:o}):i?(({spamCheck:e,auxData:t,location:i,pin:n,pinId:o,href:a},s,l)=>{if(null!=e&&e.blocked)null==l||l(e);else{var c,d;if((0,_.b)({href:a,pinId:o,pin:n,location:i,auxData:t},s))return;w({url:a,pinId:o,csrId:null,clientTrackingParams:(0,r.Z)({boardUrl:null===(c=n.board)||void 0===c?void 0:c.url,callToCreateSourcePinId:n.call_to_create_source_pin_id,location:i,pinId:n.id,pinnerUserName:null===(d=n.pinner)||void 0===d?void 0:d.username,storyPinDataId:n.story_pin_data_id,trackingParams:n.tracking_params,trackingParamsMap:n.tracking_params_map}),auxData:t})}})({spamCheck:a,auxData:o,location:n,pin:i,pinId:t,href:e},l,c):w({url:e,pinId:t,queryParams:s})}},102500:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(6637);function o(e){return n.Z.create("ApiResource",{url:"/v3/offsite/",data:e})}},287072:(e,t,i)=>{i.d(t,{Z:()=>d,p:()=>u});var n=i(667294),o=i(250059),r=i(149230),a=i(407043),s=i(108234),l=i(48714),c=i(276775);function d(e){var t;const{externalData:i,href:d,onHistoryChange:u,target:p}=e,{logContextEvent:h}=(0,a.v)(),[m,_]=(0,n.useState)(null),[g,v]=(0,n.useState)(!1),f=(0,c.useHistory)(),y=(0,c.useLocation)(),x=(0,r.Z)({url:(0,o.Z)(d)}),{showWarning:b}=null!==(t=(0,s.s)())&&void 0!==t?t:{};return(0,n.useEffect)((()=>(v(!0),()=>{v(!1)})),[]),(0,n.useEffect)((()=>{x&&null!=i&&i.pin&&null===m&&g&&(0,l.$3)({location:y,pin:i.pin,surface:i.surface})&&(0,l.iw)({isMounted:g,pin:i.pin,location:y,spamCheckCallback:e=>_(e),href:(0,o.Z)(d)})}),[null==i?void 0:i.pin,null==i?void 0:i.surface,d,x,g,y,m]),({event:e})=>{var t;(0,l.gV)({isOffsiteUrl:x,event:e})||(e.preventDefault(),d&&(x||null!=i&&i.dangerouslyForceOffsiteUrl?(0,l.lI)({auxData:null==i?void 0:i.auxData,href:(0,o.Z)(d),pinId:null==i||null===(t=i.pin)||void 0===t?void 0:t.id,pin:null==i?void 0:i.pin,queryParams:null==i?void 0:i.queryParams,location:y,spamCheck:m},h,b):(0,l.G3)({event:e,href:d,history:f,onHistoryChange:u,target:"blank"===p?"blank":null})))}}const u=({children:e,...t})=>e({handleClick:d(t)})},713930:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(172071);function o(e,t){return new Promise(((i,o)=>{if(document.querySelector(`script[src="${e}"]`)){let e=0;if("FACEBOOK"===t)if(window.FB)i();else{const t=setInterval((()=>{window.FB||20===e?(clearInterval(t),i()):(e+=1,n.Z.increment(`mweb.loadScript.facebook.tries_${e}`,.01))}),100)}else if("GSI"===t)if(window.google)i();else{const t=setInterval((()=>{window.google||20===e?(clearInterval(t),i()):(e+=1,n.Z.increment(`mweb.loadScript.gsi.tries_${e}`,.01))}),100)}else i()}else{const t=document.createElement("script");t.src=e,t.async=!0,t.addEventListener("load",(()=>i())),t.addEventListener("error",o),document.getElementsByTagName("head")[0].appendChild(t)}}))}},53987:(e,t,i)=>{i.d(t,{wy:()=>j,Fw:()=>Y,ey:()=>K,dt:()=>f,bo:()=>B,oF:()=>ee,bW:()=>v,AX:()=>p,Fy:()=>u,XE:()=>d,am:()=>a,pD:()=>h,OJ:()=>l,LO:()=>ce,Gl:()=>ie,PY:()=>x,Ni:()=>y,pV:()=>R,L6:()=>C,bb:()=>pe,b0:()=>g,jC:()=>H,O7:()=>ne,LM:()=>U,OK:()=>E,mP:()=>b,C$:()=>w,dr:()=>L,gT:()=>O,Fr:()=>G,Xn:()=>P,l4:()=>A,b_:()=>Q,J:()=>s,dZ:()=>c,FO:()=>I,re:()=>T,RU:()=>oe,Ui:()=>m,KY:()=>_,fY:()=>q,uM:()=>$,x7:()=>X,rk:()=>de,cD:()=>V,dW:()=>ue,Pu:()=>te,En:()=>D,ej:()=>se,E0:()=>Z,gf:()=>k,mY:()=>re,kY:()=>le,cY:()=>J,$Y:()=>F,Zz:()=>S,$V:()=>z,j8:()=>W,ip:()=>M,tZ:()=>N,YW:()=>ae});const n=new RegExp(/^\/(?!(?:pin|categories|report|search|password|terms|discover|help|email|topics|explore|pw|login|signup|about|business|source|ideas|today|tv))[\w\d\-]+\/(?!(?:following|followers|_tools|_created|_saved|tried))[\w\d\-]+(?=\/|$)/),o=["/BingSiteAuth.xml","/about","/add-account","/ads","/age_verification","/all","/apple-app-site-association","/apple-app-site-association.p7m","/attribution_source","/bot.html","/branded-pins","/browserbutton","/buy-it","/careers","/categories","/close-account","/content-claiming","/convert-business","/convert-personal","/create-business","/create-linked-business","/create-personal","/creation-inspiration","/creator-onboarding-landing","/csrf_error","/ct.html","/deactivate-account","/deed6a3ef3a44d41bb3ae2bad137db84.txt","/developers","/discover","/edit","/email_verification_error","/engagement","/explore","/favicon.ico","/fb.html","/following","/google_gdn.html","/google_search.html","/googlef5dc42d6e03f6e61.html","/guidedsearch","/help","/holidays-celebrations","/homefeed","/idea-pin-builder","/idea-pin-invite","/ideas","/inbox","/install-shuffles","/invited","/jobs","/live-session","/login","/login_redirect","/logout","/manifest.json","/manifest.webapp","/me","/messages","/mobile","/notifications","/oauth","/app-factory-oauth","/appealed-pin","/oembed.json","/offline.html","/offsite","/opensearch.xml","/parent_contact_info","/pin-builder","/pin-editor","/pin_catalog","/pin_redirect","/pinterest-wellbeing","/pinterest-predicts","/pinterestlens","/pinterestlenstryon","/pinterestwellbeing","/policy","/product-catalogs","/recently-viewed","/report","/robots.txt","/safe-redirect","/search","/settings","/signup","/socialmanager","/story-pin-builder","/story-pin-invite","/story_feed","/sw-shell.html","/sw.html","/sw.js","/switch_account","/terms","/today","/topics","/transparent.html","/tv","/unauth-profile","/unlink","/upload-image","/upload-profile-image","/verified","/verify","/videos","/web-mentorship","/welcome","/windows-app-web-link","/your-shop"];var r=i(276775);const a=e=>n.test(e.pathname),s=(e,t)=>{const{pathname:i}=e;return a(e)&&i.match(t||"?")},l=e=>{const{pathname:t}=e;return!!(0,r.matchPath)(t,{path:"/:username/:boardId/:boardSectionId",exact:!0})&&!t.match(/^\/.+\/.+\/(_tools)/i)},c=(e,t)=>{const{pathname:i}=e;return l(e)&&i.match(t||"?")},d=e=>!!(0,r.matchPath)(e.pathname,{path:"/board/:id/edit",exact:!0}),u=e=>!!(0,r.matchPath)(e.pathname,{path:"/board/:id/edit/collaborators",exact:!0}),p=e=>!!(0,r.matchPath)(e.pathname,{path:"/board/:id/edit/add_collaborators",exact:!0}),h=e=>!!(0,r.matchPath)(e.pathname,{path:"/boardsection/:id/edit",exact:!0}),m=e=>!!(0,r.matchPath)(e.pathname,{path:"/pin/:id/comments",exact:!0}),_=e=>!!(0,r.matchPath)(e.pathname,{path:"/pin/:id/edit",exact:!0}),g=e=>!!(0,r.matchPath)(e.pathname,{path:"/conversation/:id",exact:!0}),v=e=>!!(0,r.matchPath)(e.pathname,{path:"/appealed-pin/",exact:!0}),f=e=>e.pathname.startsWith("/age-appeal"),y=e=>e.pathname.startsWith("/business/"),x=e=>e.pathname.startsWith("/business/invite/"),b=e=>!!(0,r.matchPath)(e.pathname,{path:"/pin/:id/visual-search/",exact:!0}),w=e=>"/"===e.pathname,P=e=>e.pathname.startsWith("/login"),S=e=>!!(0,r.matchPath)(e.pathname,{path:"/today",exact:!0}),T=e=>e.pathname.startsWith("/password/reset")||!!(0,r.matchPath)(e.pathname,{path:"/pw/:username",exact:!0}),I=e=>e.pathname.startsWith("/secure/panic"),k=e=>e.pathname.startsWith("/signup"),E=e=>e.pathname.startsWith("/email/subscription"),A=e=>e.pathname.startsWith("/notifications/"),C=e=>!!(0,r.matchPath)(e.pathname,{path:"/pin/:id",exact:!0}),j=e=>C(e)&&void 0===e.state,R=e=>e.pathname.startsWith("/pin_redirect"),D=e=>e.pathname.startsWith("/search"),O=e=>!!(0,r.matchPath)(e.pathname,{path:"/ideas",exact:!0}),L=e=>!!(0,r.matchPath)(e.pathname,{path:"/ideas/:interest/:id",exact:!0}),M=e=>!!(0,r.matchPath)(e.pathname,{path:"/videos/:category/:id",exact:!0}),N=e=>e.pathname.startsWith("/videos"),z=e=>e.pathname.startsWith("/topics"),F=e=>e.pathname.startsWith("/today/article/")||e.pathname.startsWith("/today/best/")||e.pathname.startsWith("/today/trending/"),Z=e=>e.pathname.startsWith("/today/shop/"),B=e=>S(e)||F(e)||e.pathname.startsWith("/today/popular/"),U=e=>/^\/discover\/article\/\S+\/?/i.test(e.pathname),H=e=>e.pathname.startsWith("/pin/create/"),V=e=>!!(0,r.matchPath)(e.pathname,{path:"/:username/",exact:!0})&&!o.includes(e.pathname.replace(/\/$/,"")),W=e=>e.pathname.startsWith("/unauth-profile"),$=e=>e.pathname.startsWith("/pin/"),G=e=>"#imgViewer"===e.hash,K=e=>new RegExp("invite_code").test(e.search),q=e=>!!(0,r.matchPath)(e.pathname,{path:"/pin/:id",exact:!1})&&(e.pathname.includes("/sent/")||e.pathname.includes("/feedback/")),Y=e=>K(e)&&((q(e)?"pin":a(e)&&"board")||V(e)&&"profile")||null,X=e=>e.pathname.includes("/repin/x"),J=e=>e.pathname.startsWith("/_/storyboard"),Q=e=>e.pathname.startsWith("/oauth"),ee=e=>e.pathname.startsWith("/app-factory-oauth"),te=e=>e.pathname.includes("/scheduled-pin/"),ie=e=>e.pathname.startsWith("/business/convert"),ne=e=>e.pathname.startsWith("/pin-editor"),oe=e=>e.pathname.startsWith("/pin-builder"),re=e=>e.pathname.startsWith("/story-pin-builder")||e.pathname.startsWith("/idea-pin-builder"),ae=e=>e.pathname.startsWith("/advertiser/quick-promote"),se=e=>e.pathname.startsWith("/settings"),le=e=>e.pathname.startsWith("/story-pin-invite")||e.pathname.startsWith("/idea-pin-invite"),ce=e=>void 0!==e.pathname&&e.pathname.startsWith("/business/business-access/")&&e.pathname.includes("/dashboard/"),de=e=>void 0!==e.pathname&&e.pathname.startsWith("/tv/studio"),ue=e=>void 0!==e.pathname&&e.pathname.startsWith("/business/schedule_call/"),pe=e=>void 0!==e.pathname&&e.pathname.startsWith("/business/commerce-integrations/")},620707:(e,t,i)=>{function n(e,t){if("object"==typeof e&&"object"==typeof t){const i=Object.keys(e),n=Object.keys(t);return i.length===n.length&&i.every((i=>e[i]===t[i]))}return e===t}i.d(t,{Ak:()=>n,_Y:()=>o,qe:()=>s,xZ:()=>a});const o=(e,t)=>e.length===t.length&&e.every(((e,i)=>n(e,t[i]))),r=(e,t)=>e.length===t.length&&e.every(((e,i)=>e===t[i])),a=(e,t=r)=>i=>{const n=[];return function(...o){const r=this,a=n.find((e=>e.context===r&&t(e.args,o)));if(a)return a.result;const s={context:r,args:o,result:i.apply(this,o)};return n.push(s),e&&n.length>e&&n.shift(),s.result}},s=a(1);a()},914671:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(594881);const o={windowIsInFocus:!0,initFocus(){const e=function(){this.windowIsInFocus=!1},t=function(){this.windowIsInFocus=!0,(0,n.Z)()};"undefined"!=typeof window&&(window.addEventListener("focus",t),window.addEventListener("blur",e))}}},567450:(e,t,i)=>{function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z:()=>a});const o=new class{constructor(){n(this,"onResumeListeners",[]),n(this,"onPauseListeners",[]),n(this,"inExp",!1),n(this,"windowInFocus",!0),n(this,"isAppStateEnabled",!1)}setExperiment(e=!1){this.inExp=e}onSessionResume(e){return this.onResumeListeners.push(e),this}onSessionPause(e){return this.onPauseListeners.push(e),this}removeResumeListener(e){this.onResumeListeners.filter((t=>t!==e))}removePauseListener(e){this.onPauseListeners=this.onPauseListeners.filter((t=>t!==e))}getAppState(){return this.isAppStateEnabled&&this.windowInFocus?0:void 0}setIsAppStateEnabled(e){this.isAppStateEnabled=e}},r=e=>{if(e.isHidden){const{reason:t}=e;o.windowInFocus=!1,o.onPauseListeners.forEach((e=>e(t)))}else o.windowInFocus=!0,o.onResumeListeners.forEach((e=>e()))};setTimeout((()=>{window.addEventListener("beforeunload",(()=>r({isHidden:!0,reason:"beforeunload"}))),window.addEventListener("focus",(()=>r({isHidden:!1}))),window.addEventListener("blur",(()=>r({isHidden:!0,reason:"blur"}))),window.addEventListener("pageshow",(()=>r({isHidden:!1}))),window.addEventListener("pagehide",(()=>r({isHidden:!0,reason:"pagehide"}))),void 0!==document.hidden?document.addEventListener("visibilitychange",(()=>r(document.hidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1})),!1):void 0!==document.webkitHidden&&document.addEventListener("webkitvisibilitychange",(()=>r(document.webkitHidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1})),!1)}),0);const a=o},627995:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(927104),o=i(898781),r=i(903095),a=i(112690),s=i(883119),l=i(785893);const c=(e,t)=>{let i={};if(e){const{pinData:n,viewData:o}=e;i={unauth_click_pin_id:n.id,unauth_click_pin_image_signature:n.imageSignature},3===t?i={...i,unauth_page_pin_id:o.id,unauth_page_pin_image_signature:o.imageSignature}:5===t&&(i={...i,unauth_page_board_id:o.id})}return i},d=({clickLoggingOptions:e,domain:t,link:i,onClick:d})=>{var u;const p=null===(u=(0,r.lO)())||void 0===u?void 0:u.logging,h=(0,o.ZP)(),m=(0,a.Z)(),_=()=>[{event_type:8948},{event_type:12},{event_type:101,element:0,aux_data:c(e.unauthRankingLoggingData,null==p?void 0:p.viewType)}].map((t=>({component:0,element:162,view_type:null==p?void 0:p.viewType,view_parameter:null==p?void 0:p.viewParameter,aux_data:e.auxData,object_id_str:e.auxData.objectId,...t})));return(0,l.jsx)(s.iP,{onTap:({event:e})=>{e.stopPropagation(),_().forEach((e=>m(e))),d(e)},children:(0,l.jsxs)(s.xu,{marginBottom:4,marginStart:4,position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",left:!0,bottom:!0,children:[(0,l.jsx)(s.xu,{marginEnd:1,children:(0,l.jsx)(s.JO,{size:9,icon:"arrow-up-right",color:"light",accessibilityLabel:h._('Link', 'unauth.pin.domain.link', 'Link to take them to the source of the iamge')})}),(0,l.jsx)("a",{href:i,onClick:e=>{e.stopPropagation(),_().forEach((e=>m(e))),d(e)},rel:"nofollow noopener noreferrer",target:"_blank",type:"button",children:(0,l.jsx)(s.xv,{size:"200",inline:!0,weight:"bold",lineClamp:1,color:"inverse",children:(0,n.Z)(t,27)})})]})})}},64446:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(605028);var o=i(341732),r=i(81226),a=i(898781),s=i(883119),l=i(785893);const c={borderRadius:"18px",fontSize:"10px",fontWeight:"600",height:"24px",lineHeight:"24px",padding:"0 6px"},d={borderRadius:"18px",fontSize:"10px",fontWeight:"600",lineHeight:"24px",padding:"4px 8px"};function u({backgroundColor:e,identifier:t,size:i="sm"}){const n="pine"===e?"#0FA573":"#fff",o="sm"===i?c:d;return(0,l.jsx)(s.xu,{display:"inlineBlock",dangerouslySetInlineStyle:{__style:{...o,backgroundColor:e?n:"rgba(255, 255, 255, 0.8)",color:"pine"===e?"#fff":"#111"}},"data-test-id":"PinTypeIdentifier",children:t})}function p({pin:e,size:t="sm",allowProductCarousel:i,allowShoppingPriceIndicator:c,shoppingLabelColor:d}){const p=(0,a.ZP)(),h=(0,n.Z)(e);if(h.isGif)return u({identifier:"GIF",size:t});if(h.isStoryPin){const{page_count:i=0,total_video_duration:n=0}=e.story_pin_data||{};let o=i.toString();if(n>0)return o=(0,r.Z)(n),u({identifier:o,size:t});return u({identifier:(0,l.jsxs)(s.kC,{alignItems:"center",justifyContent:"between",children:[(0,l.jsx)(s.xu,{marginEnd:1,display:"flex",alignItems:"center",children:(0,l.jsx)(s.JO,{accessibilityLabel:p._('Idea Pin', 'pin.pinTypeIdentifier.ideaPinIconAccessibilityLabel', 'identifier that shows the pin type'),inline:!0,icon:"idea-pin",color:"default",size:"sm"===t?12:16})}),(0,l.jsx)(s.xv,{inline:!0,size:"100",weight:"bold",children:o})]}),size:t})}if(h.isVideo){const i=e.videos,{duration:n=0}=i&&i.video_list&&i.video_list[Object.keys(i.video_list)[0]]||{};return u({identifier:(0,r.Z)(n),size:t})}if(h.isProduct){const i=e.rich_summary&&e.rich_summary.products&&e.rich_summary.products[0]&&e.rich_summary.products[0].offer_summary;if(c){const e=i&&(i.price||i.max_price);return e?u({identifier:e,size:t}):null}if(d){const i=function(e){var t;return((((null===(t=e.rich_summary)||void 0===t?void 0:t.products)||[])[0]||{}).label_info||{}).labels||[]}(e)[0];return i?u({identifier:i,backgroundColor:d,size:t}):null}return null}if(i){const i=e.product_pin_data&&e.product_pin_data.items&&e.product_pin_data.items[0],n=i&&(0,o.Z)(e.images,i.additional_images,e.carousel_data&&e.carousel_data.index)||{},{carousel_slots:r=[],index:a=0}=n;return u({identifier:`${a+1}/${r.length}`,size:t})}if(h.isCarousel){const i=e.carousel_data||{},{carousel_slots:n=[],index:o=0}=i;return u({identifier:`${o+1}/${n.length}`,size:t})}return null}},153209:(e,t,i)=>{function n(e,t,i){return!(!(e&&e.trim().length>0&&t)||i)}i.d(t,{r:()=>n})},55275:(e,t,i)=>{i.d(t,{P:()=>a,t:()=>s});var n=i(6637);const o=()=>{};const r={complaint:function(e,t){n.Z.create("PinFeedbackResource",e).callUpdate().then((()=>t()))},followBoard:function(e,t){n.Z.create("BoardFollowResource",e).callCreate().then((()=>t()))},followPinner:function(e,t){n.Z.create("UserFollowResource",e).callCreate().then((()=>t()))},followTopic:function(e,t){n.Z.create("InterestFollowResource",e).callCreate().then((()=>t()))},newsHubPinHide:function(e,t){n.Z.create("NewsHubPinFeedbackResource",e).callUpdate().then((()=>t()))},promotedComplaint:function(e,t){n.Z.create("PinFeedbackResource",e).callUpdate().then((()=>t()))},relatedPinHide:function(e,t){n.Z.create("RelatedPinFeedbackResource",e).callUpdate().then((()=>t()))},reportPin:function(e,t){t()},showAdReasons:function(e,t){t()},unfollowBoard:function(e,t){n.Z.create("BoardFollowResource",e).callDelete().then((()=>t()))},unfollowPinner:function(e,t){n.Z.create("UserFollowResource",e).callDelete().then((()=>t()))},unfollowTopic:function(e,t){n.Z.create("InterestFollowResource",e).callDelete().then((()=>t()))},unrelatedSearchPin:function(e,t){n.Z.create("SearchPinFeedbackResource",e).callUpdate().then((()=>t()))}},a=["complaint","relatedPinHide","unrelatedSearchPin","promotedComplaint","newsHubPinHide","unfollowBoard","unfollowPinner","unfollowTopic"];function s(e,t,i=o){const n=e?r[e]:null;return n?n(t,i):i()}},680046:(e,t,i)=>{i.d(t,{EF:()=>u,XZ:()=>c,ZP:()=>s,nb:()=>d,yl:()=>l});var n=i(55275),o=i(966113),r=i(760372);const a=e=>e.length>32?`${e.substring(0,32).trim()}...`:e,s=({i18n:e,interpolateNamedTemplate:t})=>({getLearnMoreUrl:e=>{switch(e){case 1:return"https://www.pinterest.com/_/_/help/articles/personalized-ads-pinterest";case 2:case 3:return"https://www.pinterest.com/_/_/help/articles/personalized-ads-pinterest";default:return o.m7}},getRecommendationDescription:({ad_match_reason:i,board:n,feedbackType:o,makeNavigateLink:r,pinner:s,promoter:l,recommendationReason:c,sourceInterest:d})=>{switch(o){case"pfy":return e._('This Pin was inspired by your recent activity', 'Pin feedback reason', 'Pin feedback reason');case"pfyBoard":const{name:o,url:u}=c.board,p=r("navigation",u,o);return t(e._('This Pin was inspired by your board {{ boardLink }}', 'Pin feedback - inspired by your board', 'Pin feedback - inspired by your board'),{boardLink:p});case"topic":const{name:h,url_name:m}=d,_=r("topicUrl",`/topics/${m}`,h);return t(e._('This Pin was inspired by {{ formattedTopic }}', 'Pin feedback', 'Pin feedback'),{formattedTopic:_});case"followed":const g=`/${s.username}`,v=r("boardUrl",n.url,a(n.name)),f=r("pinnerUrl",g,a(s.full_name));return s.explicitly_followed_by_me?t(e._('This Pin is from {{ formattedPinner }}, a profile you follow', 'Pin feedback', 'Pin feedback'),{formattedPinner:f}):t(e._('This Pin is from {{ formattedBoard }}, a board you follow', 'Pin feedback', 'Pin feedback'),{formattedBoard:v});case"promoted":switch(i){case 1:case 2:case 3:return e._('This ad was personalized for you using info from one of our partners', 'Pin feedback', 'Pin feedback');default:const{full_name:i,username:n}=l,o=r("promotedLink",n?"/"+n+"/":"/",i);return t(e._('{{ promoterLink }} paid to have this Pin show up where\n          you\u2019d be more likely to notice it', 'Pin feedback', 'Pin feedback'),{promoterLink:o})}default:return null}},getFeedbackType({board:e,feedback:t,viewParameter:i,pin:{promoter:n,is_downstream_promotion:o,recommendation_reason:r},pinner:a}){const s=t&&t.type;return n&&!o?"promoted":s||((e=>!!e&&"FOLLOWED_INTEREST"!==e.reason&&"FOLLOWING_FEED"!==e.reason&&"RECENT_FOLLOWED_BOARD"!==e.reason&&!0)(r)?r.board?"pfyBoard":"pfy":r&&"FOLLOWED_INTEREST"===r.reason?"topic":e&&e.followed_by_me||a&&a.explicitly_followed_by_me?"followed":140===i||144===i||141===i||145===i||139===i||3173===i?"related":92===i?"default":3082===i?"newsHub":null)},getHidePinAction:({feedbackData:e,feedbackType:t,pinId:i,recommendationReasonId:n,pinFeedbackType:o,complaintReason:r,throughId:a,throughProperties:s,clientTrackingParams:l})=>{const c="promoted"===t;let d,u;switch(t){case"promoted":d="promotedComplaint";break;case"search":d="unrelatedSearchPin";break;case"related":d="relatedPinHide";break;case"newsHub":d="newsHubPinHide";break;default:d="complaint"}switch(t){case"search":u={query:e.query,pin_id:i};break;case"related":u={pin:i};break;case"newsHub":u={pinId:i,newsId:e.newsId};break;default:u={complaint_reason:r||0,pin_id:i,...n?{recommendation_reason_id:n}:{},feedback_type:o||1,promoted:c,...a?{through_id:a}:{},...s?{through_properties:s}:{},...l?{client_tracking_params:l}:{}}}return{action:d,actionOptions:u}},getUnfollowAction:({board:i,feedbackType:n,makeNavigateLink:o,pinner:a,sourceInterest:s})=>{if("topic"===n){if(s){const{id:i,name:n,url_name:a}=s,l=o("topicUrl",`/topics/${a}`,n,!0),c=t(e._('We\u2019ll show you less Pins from {{ formattedTopic }} in the future.', 'pin.contextualMenu.feedback.unfollowTopic.subtitle', 'Confirmation text after unfollowing a topic'),{formattedTopic:l});return{action:"unfollowTopic",actionOptions:{interest_id:i,interest_list:r.X},title:"",subTitle:c}}}else if("followed"===n&&i&&a){const{id:n,name:r,url:s}=i||{},{explicitly_followed_by_me:l,full_name:c,username:d}=a,u=`/${d}`,p=o("boardUrl",s,r,!0),h=o("pinnerUrl",u,c,!0);let m=l?t(e._('You\u2019ve unfollowed {{ formattedPinner }}\u2019s Board {{ formattedBoard }}. You can follow it again by searching for it.', 'Confirmation text after unfollowing a board', 'Confirmation text after unfollowing a board'),{formattedPinner:h,formattedBoard:p}):t(e._('You\u2019ve unfollowed {{ formattedBoard }}. You can follow it again by searching for it.', 'Confirmation text after unfollowing a board', 'Confirmation text after unfollowing a board'),{formattedBoard:p});return m=l?t(e._('You unfollowed {{ formattedPinner }} and won\u2019t see Pins they save anymore.', 'Confirmation text after unfollowing a user', 'Confirmation text after unfollowing a user'),{formattedPinner:h}):t(e._('You unfollowed the board {{ formattedBoard }} and won\u2019t see Pins saved to it anymore.', 'Confirmation text after unfollowing a board', 'Confirmation text after unfollowing a board'),{formattedBoard:p}),{action:"unfollowBoard",actionOptions:{board_id:n},title:"",subTitle:m}}return null}});function l(e){return null!=e&&e.reason_id?e.reason_id:null!=e&&e.board?e.board.id:null!=e&&e.pin?e.pin.id:null!=e&&e.interest?e.interest.id:""}function c(e){return null==e?void 0:e.through_properties}function d(e){switch(e){case"promoted":return 60;case"followed":case"topic":return 100;case"pfyBoard":case"pfy":return 58}}function u(e,t,i,o,r,a,s){return()=>{const l={...e,undo:!0};let c=t;"unfollowPinner"===t?c="followPinner":"unfollowBoard"===t?c="followBoard":"unfollowTopic"===t&&(c="followTopic"),(0,n.t)(c,l),a(i),s({event_type:101,component:0,element:11181,view_type:o,view_parameter:r})}}},205202:(e,t,i)=>{function n(e,t){return e&&e[t]&&e[t].url}i.d(t,{Z:()=>n})},752802:(e,t,i)=>{i.d(t,{Z:()=>o});const n=["564x","736x","orig","474x","236x"],o=({images:e={},resolutionPreferences:t=n})=>{for(const i of t)if(e[i]&&e[i].url)return e[i];return null}},743217:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(752802),o=i(622305),r=i(802933);function a(e){const{images:t={}}=(0,o.Z)((0,r.Z)({pin:e}))||{},i=(0,n.Z)({images:t});return{url:(null==i?void 0:i.url)||"",height:(null==i?void 0:i.height)||1,width:(null==i?void 0:i.width)||1}}},305791:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(752802),o=i(743217);function r(e,t,i=564){return e>i&&(t*=i/e,e=i),{width:e,height:t}}var a=i(835209);const s=({pin:e,maxWidth:t,imageSignature:i})=>{var s,l;const{image_signature:c}=e;if(!i||""===i||c===i){const{width:i,height:n,url:a}=(0,o.Z)(e);return{...r(i,n,t),url:a}}const d=(0,a.Z)({richPinData:e.rich_metadata||e.rich_summary}),u=[...(null==d||null===(s=d.variant_set)||void 0===s||null===(l=s.variants)||void 0===l?void 0:l.flatMap((e=>e.additional_images||[])))||[],...(null==d?void 0:d.additional_images)||[]],{canonical_images:p}=u.find((({image_signature:e})=>i===e))||{},{height:h=1,width:m=1,url:_=""}=(0,n.Z)({images:p||{}})||{};return{...r(m,h,t),url:_}}},248975:(e,t,i)=>{function n({embedSrc:e,embedType:t,images:i,preferredResolution:n}){if(!e&&!t&&!i)return"";if("gif"===t)return e||"";const o=i;if(!o)return"";if(n){const e="474x"===n&&o["474x"]||"236x"===n&&o["236x"]||o["736x"];if(e&&e.url)return e.url}const r=Object.keys(o).map((e=>{try{const t=e.split("x")[0];return Number.isNaN(Number(t))?(o[t]=o[e],t):e}catch(t){return""}}));r.sort();const a=r.pop();return o[a]&&o[a].url||""}i.d(t,{Z:()=>n})},605028:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(687551),o=i(623568);function r(e){const{access:t,attribution:i,embed:r,is_eligible_for_web_closeup:a,rich_summary:s,sponsorship:l,story_pin_data_id:c,videos:d}=e,u={isLeadPin:!1,isCarousel:!1,isGif:!1,isOneTap:!1,isOwnPin:!1,isProduct:!1,isPromoted:!1,isRecipe:!1,isSponsored:!1,isStoryPin:!1,isVideo:!1};(0,o._Q)(e)&&(u.isLeadPin=!0),(0,n.Z)(e)&&(u.isCarousel=!0),a&&(u.isOneTap=!0),(0,o.iR)(d)&&(u.isVideo=!0);const p=r||i&&i.embed||null;return p&&"gif"===p.type&&(u.isGif=!0),s&&"product"===s.type_name&&(u.isProduct=!0),s&&"recipe"===s.type_name&&(u.isRecipe=!0),e.promoter&&!e.is_downstream_promotion&&(u.isPromoted=!0),(t||[]).includes("write")&&(u.isOwnPin=!0),c&&(u.isStoryPin=!0),l&&(u.isSponsored=!0),u}},958007:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(992750);const o=e=>(e||"").trim().replace(/\s+/g," "),r=({storyPinDataId:e,pinDescription:t,richMetadataDescription:i,richSummaryDisplayName:r,placeSummaryName:a,closeupDescription:s,closeupUnifiedDescription:l})=>!!e?o(t):o((0,n.eK)({richMetadataDescription:i,richSummaryDisplayName:r,placeSummaryName:a,closeupUnifiedDescription:l}).description)||o(l||"")||o(s)||o(t)||o(i)||""},164985:(e,t,i)=>{i.d(t,{Z:()=>n});function n(){let e=800,t=400;return"undefined"!=typeof window&&(e=window.innerHeight,t=window.innerWidth),{windowHeight:e,windowWidth:t}}},307061:(e,t,i)=>{i.d(t,{Z:()=>n});const n=function(e){return function(t){return null!=t?e(t):null}}},674915:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(307061),o=i(736688);const r=(0,n.Z)((e=>{const{videos:t}=e.pin,{id:i,video_list:n={}}=t||{},{V_720P:r,V_HLSV4:a,V_HLSV3_MOBILE:s}=n,l=(0,o.V3)(a),c=(0,o.V3)(s),d=(0,o.V3)(r),u=d||l||c;return i&&u?{...e,video:{id:i,hasVideo:u,mp4:d||void 0,hls:l||void 0,hlsv3:c||void 0}}:null}))},976071:(e,t,i)=>{function n(e){return Boolean(e.promoted_is_removable)}i.d(t,{Z:()=>n})},873441:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(985913);const o=(e,t)=>{const i=e.link_domain||{},o=e.tracked_link||e.link||e.images&&e.images.orig&&e.images.orig.url,r=e.rich_metadata,a=e.domain,s=e.closeup_attribution||e.native_creator||i.official_user||e.pinner||e.origin_pinner,l=!(!(r&&r.recipe&&r.recipe.name&&r.recipe.categorized_ingredients)||r.recipe.from_aggregated_data);let c,d;r&&r.products&&r.products[0]&&(c=!!(r&&r.name&&r.offer_summary));const u=c,p=!(!r||!r.article),h=!(!r||!r.tutorial),m=!(!s||!s.username);let _=t._('Saved from ', 'Closeup pin annotation', 'Closeup pin annotation'),g=m?t._('Saved by', ' - ', ' -- '):t._('Saved from', ' - ', ' -- '),v=t._('Visit', ' - ', ' -- ');r&&r.products&&r.products[0]&&r&&r.products[0].name&&r.products[0].offer_summary&&(_=t._('Product sold by ', 'pin annotation', 'pin annotation'),d=r.products[0].offer_summary),u?(g=t._('Sold by', ' - ', ' -- '),v=t._('Visit', ' - ', ' -- ')):h?(_=t._('Saved from ', 'pin annotation', 'pin annotation'),g=m?t._('Saved by', ' - ', ' -- '):t._('Saved from', ' - ', ' -- '),v=t._('Visit', ' - ', ' -- ')):l?(_=t._('Recipe from ', 'pin annotation', 'pin annotation'),g=m?t._('Recipe by', ' - ', ' -- '):t._('Recipe from', ' - ', ' -- '),v=t._('Make it', ' - ', ' -- ')):p&&(_=t._('Article from ', 'pin annotation', 'pin annotation'),g=m?t._('Article by', ' - ', ' -- '):t._('Article from', ' - ', ' -- '),v=t._('Read it', ' - ', ' -- '));const f=e.rich_summary;if(!d&&f){let e;f&&f.products&&f.products[0]&&(e=!!(f&&f.products[0].name&&f.products[0].offer_summary),e&&(_=t._('Product sold by ', 'pin annotation', 'pin annotation')))}let y,x;m?(y="/"+s.username+"/",x=s.full_name):(y="/source/"+a,x=r&&r.site_name||a);return{actionButtonText:v,image:s&&(s.image_medium_url||s.image_small_url)||e.board&&e.board.image_thumbnail_url,link:y,pinLink:o,pin:e,pinCreditPrefix:_,prefixText:g,subtitle:x,title:(0,n.Z)(t._('More from {{ subtitle }}', ' - ', ' -- '),{subtitle:x}),pinTitle:e.closeup_unified_title,pinDescription:e.closeup_unified_description,pinCategory:e.category}}},623568:(e,t,i)=>{i.d(t,{Js:()=>s,NK:()=>f,Nc:()=>y,VX:()=>l,Zt:()=>g,_J:()=>u,_Q:()=>a,_S:()=>x,cL:()=>m,dZ:()=>P,hb:()=>v,hy:()=>d,iR:()=>r,jL:()=>c,o:()=>b,oN:()=>n,pU:()=>w,rM:()=>_,sV:()=>p,sY:()=>h});const n=5e3,o=["Uploaded by user"],r=e=>!!e&&!!e.video_list,a=e=>!!e.promoted_is_lead_ad,s=(e,t)=>{let i=e&&e.url?e.url.split("/")[1]:"";return t&&t.full_name&&(i=t.full_name),i},l=e=>{var t;return e.rich_summary&&e.rich_summary.products&&e.rich_summary.products.length>0||(null===(t=e.rich_metadata)||void 0===t?void 0:t.products)&&e.rich_metadata.products.length>0||!1},c=e=>!!e.promoter&&!e.is_downstream_promotion,d=e=>!!e,u=e=>!!e.video_status&&5!==e.video_status,p=e=>["email","messages","deep_linking"].includes(e),h=e=>!!e&&"gif"===e,m=({embedSrc:e,embedSubtype:t,embedType:i})=>!!e&&!h(i)&&!(e=>"pinstory"===e)(t),_=({link:e,mobileLink:t,trackedLink:i})=>!t&&!i&&!e,g=({link:e,mobileLink:t,origImageUrl:i,trackedLink:n})=>t||n||e||i||"",v=({isStoryPin:e,isVideoPin:t})=>e?"storyPin":t?"video":"image",f=(e,t)=>({deeplinkUri:{android:`pin/${e}/repin`,iOS:`repin/${e}`},mwebUri:{pathname:`/pin/${e}/repin/`,state:{trackingParams:t.state?t.state.trackingParams:""}}});function y(e){var t,i;return!r(e.videos)&&!d(e.story_pin_data_id)&&0!==Object.keys((null===(t=e.aggregated_pin_data)||void 0===t||null===(i=t.creator_analytics)||void 0===i?void 0:i["30d_realtime"])||{}).length}function x(e){for(const t of o)if(e===t)return!1;return!0}function b(e){var t;return 0!==Object.keys((null===(t=e.creator_analytics)||void 0===t?void 0:t["30d_realtime"])||{}).length}function w(e){var t;return 0!==Object.keys((null===(t=e.public_creator_analytics)||void 0===t?void 0:t.all_time_realtime)||{}).length}function P(e){var t,i;return!(null===(t=e.creator_analytics)||void 0===t||null===(i=t["30d_realtime"])||void 0===i||!i.is_realtime)}},992750:(e,t,i)=>{i.d(t,{hP:()=>u,fs:()=>l,eK:()=>c,Ly:()=>d,BY:()=>p,bN:()=>h,RC:()=>a,EU:()=>s});const n=/\s\s+/g,o=e=>e.replace(n," ");var r=i(883561);const a=({storyPinDataMetadataPinTitle:e,pinTitle:t})=>e||t,s=(e,t)=>e?e.trim().length>t?(0,r.ZP)(e.trim(),t).trim():e.trim():"",l=({pinTitle:e,gridTitle:t,richSummaryDisplayName:i,richMetadataTitle:n,storyPinDataId:o,storyPinDataMetadataPinTitle:r,placeSummaryName:a})=>{const l=r||e,c=s(t,200);return c||(i||(a||(n||(o&&l?l:null))))},c=e=>{var t,i,n,a;const{richSummaryDisplayName:s,placeSummaryName:l}=e,c=null!==(t=e.pinJoinVisualAnnotation)&&void 0!==t?t:[],d=null!==(i=e.pinJoinAnnotationsWithLinks)&&void 0!==i?i:{},u=null!==(n=e.richMetadataDescription)&&void 0!==n?n:"",p=null!==(a=e.closeupUnifiedDescription)&&void 0!==a?a:"",h=c.map((e=>(d||{})[e]||{name:e,url:""}));let m="";const _=(({richSummaryDisplayName:e,placeSummaryName:t})=>e||t||"")({richSummaryDisplayName:s,placeSummaryName:l}).toLocaleLowerCase().trim(),g=u.toLocaleLowerCase().trim(),v=p.toLocaleLowerCase().trim();return p&&p.length>3&&v!==_?m=p:u&&u.length>3&&g!==_&&(m=u),m&&(m=o((0,r.ZP)(m,496)).trim()),{description:m,annotationsWithLinks:h}},d=({pinTitle:e,gridTitle:t,richSummaryDisplayName:i,richMetadataTitle:n,storyPinDataId:o,storyPinDataMetadataPinTitle:r,placeSummaryName:a,pinJoinVisualAnnotation:s,pinJoinAnnotationsWithLinks:d})=>{const{annotationsWithLinks:u}=c({pinJoinVisualAnnotation:s,pinJoinAnnotationsWithLinks:d}),p=(u||[]).map((e=>e.name)),h=e=>(e||[])[0]||null;return l({pinTitle:e,gridTitle:t,richSummaryDisplayName:i,richMetadataTitle:n,storyPinDataId:o,storyPinDataMetadataPinTitle:r,placeSummaryName:a})||h(s)||h(p)||e},u=(e,t,i,n)=>{var o;let r=(o=e,"string"==typeof o?o:"").trim();return i?(n&&n.trim().length&&(r=n),i.length>0&&(r&&(r+=" "),r+=i.join(", ")),r):n&&n.trim().length?n:r},p=e=>`/pin/${e}/`,h=({pinId:e,seoUrl:t})=>t&&"string"==typeof t?t:p(e)},18857:(e,t,i)=>{i.d(t,{G7:()=>c,WE:()=>l,l6:()=>d,rh:()=>s});var n=i(27255),o=i(605028),r=i(66699),a=i(623568);function s(e,t,i,r){var s,l,c;if(!t.isAuth)return!1;const d=(0,a.Nc)(e)||(0,a.o)(e),u=(null===(s=e.board)||void 0===s?void 0:s.privacy)===n.Z.BoardPrivacy.PUBLIC,p=((null===(l=e.board)||void 0===l?void 0:l.privacy)===n.Z.BoardPrivacy.PROTECTED||u)&&!e.is_repin&&[t.id,r].includes(null===(c=e.pinner)||void 0===c?void 0:c.id),{isStoryPin:h}=(0,o.Z)(e);return d||t.isPartner&&p||(e=>e.checkExperiment("web_ps4p").anyEnabled)(i)&&h&&p||(0,a.pU)(e)}function l(e,t,i,n,o,r){return e.isAuth&&t&&(i||n)&&!(null==o||!o.isLoaded)&&!r}function c(e,t){return(0,r.Z)(t.ngettext('Last {{ count }} Day', 'Last {{ count }} Days', e, 'Previous {{ count }} days from current date', 'Previous {{ count }} days from current date'),{count:e})}function d(e,t){return(0,r.Z)(t.ngettext('Last {{ count }} Hour', 'Last {{ count }} Hours', e, 'analytics.utils', 'Previous {{ count }} hours from current time'),{count:e})}},622305:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(0,i(307061).Z)((e=>{const{pin:t}=e,{images:i}=t,n=Object.keys(i||{}).reduce(((e,t)=>{const n=i[t],{url:o,width:r,height:a}=n;return e&&o&&r&&a?{...e,[t]:{url:o,width:r,height:a}}:null}),{});return n&&Object.keys(n).length>0?{...e,images:n}:null}))},802933:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(0,i(307061).Z)((e=>e.pin&&e.pin.id?{...e,id:e.id,aggregatedPinData:e.pin.aggregated_pin_data}:null))},692627:(e,t,i)=>{function n({hasPin:e,hasPinRichMetadata:t,hasPinRichMetadataProducts:i,hasPinRichMetadataArticle:n,hasPinRichMetadataRecipe:o,hasPinStoryPinData:r}){if(e){if(t)return i?144:n?141:o?145:139;if(r)return 157}return 140}i.d(t,{Z:()=>n})},336882:(e,t,i)=>{i.d(t,{Z:()=>n});const n={STARTED:1,FINISHED:2}},432300:(e,t,i)=>{i.d(t,{Z:()=>n});const n={DEFAULT:1,LIMITED:2}},177471:(e,t,i)=>{i.d(t,{k:()=>w});var n=i(667294),o=i(702664),r=i(6637),a=i(19121),s=i(414327),l=i(780280);const c=["etsy","microsoft","twitter","google","instagram","youtube","dropbox"];function d({network:e,data:t,requestContext:i}){if(c.includes(e))return r.Z.create("UserSocialNetworkResource",{network:e,data:t}).callCreate();const n=`/v3/connect/${e}/`,o=((e,t,i)=>{let n;switch(e){case"facebook":const{facebookToken:e}=i;n=t?{facebook_id:t.id,facebook_token:e}:Object.freeze({});break;case"gplus":n=t?{one_time_code:t.one_time_code,redirect_uri:t.redirect_uri||void 0}:Object.freeze({});break;case"line":n=t?{line_id_token:t.line_id_token,line_access_token:t.line_access_token}:Object.freeze({});break;default:n=Object.freeze({})}return n})(e,t,i);return r.Z.create("ApiResource",{url:n,data:o}).callUpdate()}var u=i(553171),p=i(124237),h=i(402201),m=i(572752),_=i(966113),g=i(83969),v=i(867820);let f=Object.freeze({});const y=e=>{const{network:t}=e;if(!f[t])return;const{[t]:{error:i,success:n,complete:o},...r}=f;f={...r},"error"===e.type?null==i||i(Object.freeze({})):n("facebook"===e.network?{id:e.profile.id}:{one_time_code:e.one_time_code,redirect_uri:e.redirect_uri}),null==o||o()},x=({i18n:e,network:t,callbacks:i,requestContext:n})=>{if(i={error:()=>{},complete:()=>{},...i},(0,v.My)(`auth_web.social_connect.${t}.${(0,m.Z)(n)}`),"gplus"===t||"google"===t)(0,v.My)("auth_web.social_connect.google.migration"),async function(e){var t,i;await(0,g.Px)();const n=null===(t=window.google)||void 0===t||null===(i=t.accounts)||void 0===i?void 0:i.oauth2;n&&n.initCodeClient({client_id:_.v3,scope:"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile",ux_mode:"popup",callback:e}).requestCode()}((e=>{i.success({one_time_code:e.code,redirect_uri:"postmessage"})}));else if("line"===t){const{locale:e}=n;(0,u.Z)(e,i)}else{const n=window.open("/connect/"+t+"/","",(e=>{switch(e){case"dropbox":return"width=600,height=800";case"instagram":return(0,h.Z)({width:580,height:580});case"etsy":return(0,h.Z)({width:580,height:775});case"youtube":return(0,h.Z)({width:605,height:640});default:return(0,h.Z)()}})(t));if(!n)return p.Z.showError(e._('You must enable popups!', ' - ', ' -- ')),void(i.error&&i.error(Object.freeze({})));const o=setInterval((()=>{n.closed&&(clearInterval(o),y({network:t,type:"error"}))}),1e3);f={...f,[t]:i}}};window.addEventListener("message",(e=>{const t=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");if(e.origin!==t)return;const i=e.data;if(i&&"social-connect-complete"===i.type){const t=e.data;t.network&&y(t)}}));class b{constructor({invalidateResource:e,requestContext:t,viewer:i}){this.getUserId=()=>i.isAuth?i.id:"",this.getUsername=()=>i.isAuth?i.username:"",this.isLimitedLogin=()=>i.isLimitedLogin,this.invalidateResource=e,this.requestContext=t}handleConnect(e,t,i,n){const o=t=>{("connect"===t.type?d({network:e,data:t.data,requestContext:this.requestContext}):r.Z.create("ApiResource",{url:`/v3/connect/${e}/`}).callDelete()).then((e=>{var t;const n={user_id:this.getUserId(),username:this.getUsername(),field_set_key:"social_connect"};this.invalidateResource("UserResource",n),r.Z.create("UserResource",n).callGet(),null===(t=i.success)||void 0===t||t.call(i,e)}),(e=>{var t;e&&"object"==typeof e&&(null===(t=i.error)||void 0===t||t.call(i,{api_error_code:e.api_error_code,code:e.code,message:e.message}))})).finally((()=>{var e;null===(e=i.complete)||void 0===e||e.call(i)}))};t?this.isLimitedLogin()?o({type:"connect"}):x({network:e,callbacks:{success:e=>o({type:"connect",data:e}),error:i.error,complete:i.complete},i18n:n,requestContext:this.requestContext}):o({type:"disconnect"})}}function w(){const e=(0,o.useDispatch)(),t=(0,l.B)(),i=(0,a.Z)();return(0,n.useMemo)((()=>new b({invalidateResource:(t,i)=>e((0,s.jB)(t,i)),requestContext:t,viewer:i})),[e,t,i])}},584595:(e,t,i)=>{i.d(t,{$j:()=>R,Cx:()=>Z,D4:()=>A,E:()=>c,E6:()=>I,H9:()=>z,Jt:()=>L,Jw:()=>a,LJ:()=>N,NF:()=>l,OW:()=>u,Pv:()=>D,RL:()=>w,ZP:()=>H,Zn:()=>S,_K:()=>_,aG:()=>m,an:()=>k,at:()=>O,bd:()=>d,cZ:()=>p,dO:()=>h,hE:()=>F,hU:()=>v,iK:()=>x,iZ:()=>j,ik:()=>B,ky:()=>M,lg:()=>g,nY:()=>y,nf:()=>b,oP:()=>f,pH:()=>o,qF:()=>U,rM:()=>C,rm:()=>E,tL:()=>s,tz:()=>r,xN:()=>T,yV:()=>P});var n=i(817656);const o=101,r=93,a=117,s=116,l=111,c=118,d=9,u=8,p=16,h=12,m=3,_=18,g=105,v=79,f=78,y=77,x=76,b=1402,w=85,P=88,S=1201,T=30,I=84,k=83,E=2901,A=2904,C=2905,j=95,R=19,D=113,O=91,L=2501,M=2915,N=2986,z=3050,F=2,Z=[u,d],B=[u,d,n.Ej],U=new Map([[1,"INVALID_PARAMETERS"],[100,"INVALID_NETWORK_ACCESS_TOKEN"],[g,"FACEBOOK_ACCOUNT_NOT_LINKED"],[h,"API_SERVER_ERROR"],[1202,"LOGIN_MFA_TOKEN_INVALID"],[1203,"MFA_CONNECTION_ERROR"],[13,"API_DOWN"],[181,"GPLUS_CONNECTION_ERROR"],[14,"API_SERVER_SPAM_CONTENT"],[p,"API_REQUEST_TIMEOUT"],[50,"API_ERROR_PIN_NOT_FOUND"],[y,"INVALID_PASSWORD_FB_USER"],[f,"INVALID_PASSWORD_ERROR_CODE"],[v,"INVALID_EMAIL_ERROR_CODE"],[80,"INVALID_EMAIL_OR_PASSWORD"],[82,"LOGIN_DEACTIVATED_USER"],[k,"LOGIN_POLICY_VIOLATION_USER"],[w,"AUTO_PASSWORD_RESET_ERROR_CODE"],[86,"LOGIN_PANICKED_USER"],[87,"LOGIN_SOFT_BANNED_USER"],[r,"API_ERROR_UNDERAGE_REGISTER_ATTEMPT"],[s,"API_ERROR_OVERAGE_REGISTER_ATTEMPT"],[99,"LOGIN_PASSWORD_NOT_CREATED"],[u,"API_LIMIT_EXCEEDED_ERROR"],[d,"API_EVENT_BLOCKED_ERROR"],[R,"USER_IN_SAFE_MODE"],[I,"LOGIN_VOLUNTARILY_DEACTIVATED_USER"],[w,"LOGIN_BAD_PASSWORD_ASK_RESET"],[S,"LOGIN_MFA_REQUIRED"],[T,"LOGIN_USER_NOT_FOUND"],[P,"LOGIN_HARD_BANNED_USER"],[429,"RESPONSE_CODE_TOO_MANY_REQUESTS"],[E,"SAR_DOWNLOAD_LIMIT"],[A,"SAR_EMAIL_UNVERIFIED"],[C,"SAR_EMAIL_MISSING"]]),H=[u,d,R,k,w,P]},553171:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(231486);var o=i(643913),r=i(226198),a=i(966113),s=i(696157),l=i(826067),c=i(957161);const d="undefined"!=typeof window,u=d?`${window.location.origin}/oauth/line/redirect`:"";function p(e,t){var i;if(!d)return void(null===(i=t.error)||void 0===i||i.call(t,{message:"Window is undefined"}));let p;const h=function(e=5){const t="abcdefghijklmnopqrstuvwxyz1234567890";return new Array(e).fill("").map((()=>t[Math.floor(Math.random()*t.length)])).join("")}(10),m=async e=>{if(!e.isTrusted)return;const i=e instanceof MessageEvent?(({origin:e,data:t})=>t&&e===window.location.origin?String(t):null)(e):(({url:e,key:t})=>{if(!e.startsWith(window.location.origin)||t!==s.MM)return null;const i=(0,c.qn)(s.MM);return(0,c.L_)(s.MM),i})(e),a=(0,l.mB)(i);if(a.state&&a.code&&a.state===h){p&&!p.closed&&p.close();try{const e=await fetch("/oauth/line/verify",{headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8","x-csrftoken":`${String(n.U2(r.fS))}`},method:"POST",body:(0,o.Z)({code:a.code,redirect_uri:u})}),i=await e.json(),{id_token:s,access_token:l}=i;var d;if(s&&l)t.success({line_id_token:s,line_access_token:l});else null===(d=t.error)||void 0===d||d.call(t,{message:"No tokens returned"})}catch(v){var _;null===(_=t.error)||void 0===_||_.call(t,v)}finally{var g;p&&!p.closed&&p.close(),window.removeEventListener("message",m),window.removeEventListener("storage",m),null===(g=t.complete)||void 0===g||g.call(t)}}};window.addEventListener("message",m),window.addEventListener("storage",m),p=window.open(`https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id=${a.z}&redirect_uri=${encodeURIComponent(u)}&state=${h}&ui_locales=${e}&scope=profile%20openid%20email`,"_blank")}},107193:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var n=i(336882),o=i(935879),r=i(713930),a=i(6637),s=i(966113),l=i(867820);let c=!1;const d=(e,t,i="en-US",u)=>{u&&(0,l.dy)({event:"load_script_start",provider:"facebook"}),(0,r.Z)((0,o.Z)(i),"FACEBOOK").then((()=>{u&&(0,l.dy)({event:"load_script_success",provider:"facebook"});const i=window.FB;i?(c||(u&&(0,l.dy)({event:"initialize_library",provider:"facebook"}),i.init({appId:s.GH,status:!0,version:"v2.2"}),FB.Event.subscribe("auth.statusChange",(()=>{(e=>e.isAuth&&!!e.facebookId&&!e.isLimitedLogin)(t)&&d((e=>{if(!e.getUserID())return;const t=e.getAccessToken();t&&a.Z.create("ApiResource",{url:"/v3/connect/facebook/",data:{facebook_token:t}}).callCreate({showError:!1})}),t)})),c=!0,window.fb_init=n.Z.FINISHED),e(i)):u&&(0,l.dy)({event:"global_object_not_found",provider:"facebook"})})),window.fb_init=n.Z.STARTED},u=d},935879:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>`//connect.facebook.net/${(e=>{const t=e.replace(/-/g,"_");if(t.startsWith("es"))return"es_LA";if(t.startsWith("ar"))return"ar_AR";switch(t){case"de":return"de_DE";case"fr":return"fr_FR";case"it":return"it_IT";case"ja":return"ja_JP";case"nl":return"nl_NL";case"tr":return"tr_TR";case"en_AU":return"en_US";default:return t}})(e)}/sdk.js`},83969:(e,t,i)=>{i.d(t,{Fm:()=>a,OY:()=>l,PL:()=>d,Px:()=>s,mK:()=>u,ru:()=>c});var n=i(713930),o=i(966113),r=i(867820);const a=()=>{var e,t,i;return null===(e=window)||void 0===e||null===(t=e.google)||void 0===t||null===(i=t.accounts)||void 0===i?void 0:i.id},s=e=>(0,n.Z)("https://accounts.google.com/gsi/client",null!=e&&e.unsafe?null:"GSI"),l=({autoSelect:e,itpSupport:t},i)=>{var n;null===(n=a())||void 0===n||n.initialize({auto_select:null!=e&&e,client_id:o.v3,callback:i,cancel_on_tap_outside:!1,context:"use",itp_support:t})},c=({buttonRef:e,isDesktop:t})=>{const i=a();if(i&&e.current){const t=e.current.offsetWidth;i.renderButton(e.current,{size:"large",shape:"pill",text:"continue_with",theme:"outline",width:t+"px"})}else(0,r.My)((t?"unauth_web":"unauth_mweb")+".gsi_button.not_initialized")},d=e=>"auto"===e?"AUTO_LOGIN":e.startsWith("btn")?"SIGN_IN_WITH_GOOGLE_BUTTON":"ONE_TAP_PROMPT",u=e=>{switch(e){case"SIGN_IN_WITH_GOOGLE_BUTTON":return"gsi_btn";case"ONE_TAP_PROMPT":return"onetap_btn";default:return"other"}}},760372:(e,t,i)=>{i.d(t,{X:()=>n});const n="favorited"},773285:(e,t,i)=>{i.d(t,{F:()=>r,a:()=>o});var n=i(425288);const{Provider:o,useHook:r}=(0,n.Z)("ExperimentContext")},869503:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(939106),o=i(898781),r=i(349700),a=i(883119),s=i(785893);function l(){const e=(0,o.ZP)();return e._('Free shipping', 'closeup.product.shipping', 'product shipping info')}function c({freeShippingPrice:e}){const t=(0,o.ZP)();return(0,r.nk)(t._('Free shipping with {{ shippingPrice }}+', 'closeup.product.shipping', 'product shipping info'),{shippingPrice:e}).join("")}function d({customStyles:e,showPrevDot:t,freeShippingPrice:i,freeShippingValue:o}){const r=t?[""]:[],{color:d="subtle",size:u="200"}=e||{};return Number.isFinite(o)?(0===o?r.push((0,s.jsx)(l,{})):i&&r.push((0,s.jsx)(c,{freeShippingPrice:i})),0===r.length?null:(0,s.jsx)(a.xv,{color:d,size:u,children:(0,s.jsx)(n.Z,{color:d,items:r})})):null}},30287:(e,t,i)=>{i.d(t,{AJ:()=>x,FB:()=>_,FP:()=>m,Kj:()=>v,Rx:()=>h,So:()=>g,kM:()=>f});var n=i(231486),o=i(567831),r=i(794230),a=i(704177),s=i(826067),l=i(226198);const c="android-app://com.pinterest.twa",d="pwa_hostname",u="pwa_redirected",p="homescreen_icon",h=e=>["twa","cct","browser","webview"].includes(e),m=e=>{var t,i;return!!e&&((n.U2(l.tg)||"").startsWith(c)||(e.document&&e.document.referrer||"").startsWith(c)||!(!(i=null===(t=e.location)||void 0===t?void 0:t.search)||!h((0,s.mB)(i).twa_type)))},_=e=>{var t,i;if(!e)return null;if(e.Windows)return"windows";if((e=>!!e&&(e.document&&e.document.referrer||"").startsWith("app-info://platform/microsoft-store"))(e))return"msft-store";if(m(e))return"android-twa";if(e.matchMedia&&(null!==(t=e.matchMedia("(display-mode: standalone)"))&&void 0!==t&&t.matches||null!==(i=e.matchMedia("(display-mode: minimal-ui)"))&&void 0!==i&&i.matches)&&e.navigator&&e.navigator.userAgent){const t=e.navigator.userAgent;if(t.includes("Chrome"))return"chrome";if(t.includes("Safari"))return"safari"}return"unknown"},g=e=>{const t=_(e);return!(!t||"unknown"===t)},v=(e,t)=>{if("unknown"!==t)switch(t){case"twa":return 3354;case"cct":return 3355;case"browser":return 3356;default:return null}else switch(e){case"chrome":return 3351;case"safari":return 3352;default:return null}};function f(e,t){if(void 0===e)return"notEligible";if(!g(e)&&e.navigator&&e.navigator.userAgent){if(e.navigator.userAgent.includes("Windows NT 10.0"))return"windows";if(t&&t())return"chrome"}return"notEligible"}const y=e=>{if(!e)return;const t=a.Xb.getItem(d)||"";if(t!==e.location.hostname&&!(()=>{const e=Number(a.Xb.getItem(u));return Date.now()-e<6e4})()){const{pathname:i}=e.location,n=(0,r.Z)(i,{utm_source:p}),s=(0,o.Z)(n,void 0,t);a.Xb.setItem(u,Date.now()),e.location.href=s}},x=e=>{if(e)if((e=>{var t;return(0,s.mB)(null===(t=e.location)||void 0===t?void 0:t.search).utm_source===p})(e)){const{hostname:t}=e.location;a.Xb.setItem(d,t)}else e.navigator.userAgent&&e.navigator.userAgent.includes("CrOS")&&y(e)}},813401:(e,t,i)=>{i.d(t,{kf:()=>g,l5:()=>m,of:()=>p,xC:()=>_,yz:()=>h});var n=i(667294),o=i(172071),r=i(829407),a=i(807609),s=i(30287),l=i(425288),c=i(785893);const{Provider:d,useMaybeHook:u}=(0,l.Z)("PwaContext"),p=({children:e,initialContext:t})=>{const[i,a]=(0,n.useState)(null),l=t||{pwaType:"unknown",twaType:null},u=l.pwaType;(0,r.Z)((()=>{const e=(0,s.FB)(window)||"unknown";a(e),u!==e&&o.Z.increment("pwa.type_mismatch",1,{serverPwaType:u,clientPwaType:e,conflict:"unknown"!==u&&"unknown"!==e})}));const p="unknown"===u&&i?i:u,h=l.twaType,m=(0,n.useMemo)((()=>({pwaType:p,twaType:h})),[p,h]);return(0,c.jsx)(d,{value:m,children:e})},h=()=>{var e;const t=u();return null!==(e=null==t?void 0:t.pwaType)&&void 0!==e?e:"unknown"},m=()=>{var e;const t=u();return null!==(e=null==t?void 0:t.twaType)&&void 0!==e?e:null},_=()=>"android-twa"===h(),g=()=>{const e=h(),t=(0,a.Z)();return"unknown"===e&&t?null:"windows"===e}},523657:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294),o=i(883119),r=i(785893);const a=(e,t,i)=>{const o=(0,n.useRef)(null),r=(0,n.useRef)(null);(0,n.useEffect)((()=>{if(e!==o.current||i&&i!==r.current){o.current=e;const i=(n=e,document.querySelector(`img[src="${n}"]`)||null);null!=i&&i.complete&&t()}var n;r.current=i}),[e,t,i])};function s({alt:e,children:t,color:i,elementTiming:n,isActive:s=!1,naturalHeight:l,naturalWidth:c,onLoad:d,src:u}){return a(u,d,s),(0,r.jsx)(o.Ee,{alt:e,color:i,elementTiming:n,naturalHeight:l,naturalWidth:c,onLoad:d,src:u,children:t})}},198462:(e,t,i)=>{i.d(t,{cA:()=>D,fM:()=>O,N5:()=>L});var n=i(667294),o=i(991067),r=i(435851),a=i(172071),s=i(31062),l=i(383434),c=i(482131);const d=(0,l.X)("LayoutShiftDebugger"),u=e=>e instanceof HTMLElement&&e.dataset&&(e.dataset.layoutShiftBoundaryId||e.dataset.testId)||e.parentNode&&u(e.parentNode)||null,p=e=>Math.round(1e3*e);let h=[];const m=({staticContext:e,getCurrentRoute:t,getLastNavigationTime:i})=>{const n=(0,s.Jx)({annotateMarks:["initialAppLoad","RenderReactContainer"],name:"cumulative_layout_shift",pwtStaticContext:e});let o=0;const l=e=>{o=e.timeStamp};window.addEventListener("scroll",l),window.addEventListener("beforeunload",(()=>{window.removeEventListener("scroll",l)}));const m=`${(0,r.Z)(e)}.CLS`,_=()=>(e=>{let t=Object.freeze({}),i=0;h.forEach((({value:e,shift:{sources:n},route:o,hadRecentNavigation:r,hadRecentScroll:a,isAuth:s})=>{if(i+=e,!n||!n.length)return;const l=e/n.length;n.forEach((({node:e})=>{const i=e?u(e)||"ROOT":"NODE_REMOVED",n={route:o,boundaryId:i,hadRecentNavigation:r,hadRecentScroll:a,isAuth:s},c=JSON.stringify(n);t={...t,[c]:{score:((t[c]||{}).score||0)+l,tags:n}}}))})),Object.keys(t).forEach((i=>{const{score:n,tags:o}=t[i];a.Z.count(`${e}.shifts`,p(n),1,{...o})})),d("Debug CLS boundaries",i,t,h),h=[]})(m);let g,v,f=0,y=0,x=0;(0,c.kz)((({entries:n,value:r})=>{if(x=r||0,n.length){g=t(),v=i();const a=n[0].startTime,s=f!==a,l=s?n:n.slice(y);s&&(f=a),h=h.concat(l.map((t=>({value:r,shift:t,route:g,hadRecentNavigation:v>0&&v+500>t.startTime,hadRecentScroll:o>0&&o+500>t.startTime,isAuth:e.isAuthenticated})))),y=n.length}}),!0);const b=setInterval((()=>{if(h.length){_();const t=(e=x)<=.1?"good":e<=.25?"adequate":"poor";a.Z.count(`${m}.${t}`,1,1),n.stop(p(x))}var e}),1e3);window.addEventListener("beforeunload",(()=>{clearInterval(b),0===x&&n.abort("no_shifts_detected")}))};var _=i(311560);var g=i(156381);const v=e=>Number(e.toFixed(2)),f={pin_closeup:{LCP:"pin_closeup_lcp",FID:"pin_closeup_fid"},board:{LCP:"board_lcp",FID:"board_fid"},other_profile:{LCP:"other_profile_lcp",FID:"other_profile_fid"},topic:{LCP:"topic_lcp",FID:"topic_fid"}},y=["CA","GB","DE","FR","AU","JP","BR","MX"],x=({surface:e,isAuthenticated:t})=>{if(t)return[];switch(e){case"pin_closeup":return["mweb_pin_page_ssr_lite"];default:return[]}},b=({pwtStaticContext:e,surface:t})=>{const i="pin_closeup"===t||"board"===t||"other_profile"===t||"topic"===t?(({pwtStaticContext:e,surface:t})=>{const i=(0,s.Jx)({annotateExperiments:x({surface:t,isAuthenticated:e.isAuthenticated}),annotateResourceTimingForSurface:t,annotateMarks:["initialAppLoad","RenderReactContainer",...e.isAuthenticated?[]:["firstClientRenderUnauthPageWrapper","mountUnauthPageWrapper"],..."pin_closeup"===t?["firstClientRenderCloseupPage","firstClientRenderCloseupImage"]:[]],name:f[t].LCP,pwtStaticContext:e}),n=(0,s.Jx)({name:f[t].FID,pwtStaticContext:e});return(e,t)=>{"LCP"===e?i.stop(t):"FID"===e&&n.stop(t)}})({pwtStaticContext:e,surface:t}):null,{isAuthenticated:n,isBot:o,isSocialBot:l,deviceType:d,locale:u}=e,p=u.split("-")[1],h={},m=(s,c,u)=>{if(!h[s]){h[s]=!0;const m=(0,r.Z)(e),g=`${m}.${t}.${s}`,v=`${m}.tags.${t}.${s}`;"LCPCount"===s?(a.Z.count(`${g}.sum`,c,1),a.Z.increment(`${g}.size`,1)):("FID"===s||"FIDStartTime"===s?(a.Z.timing(`${g}`,c,1),a.Z.timing(`${v}`,c,1,{timingBucket:null==u?void 0:u.timingBucket,isAuth:n})):(a.Z.timing(`${g}`,c,1),a.Z.timing(`${v}`,c,1,{isAuth:n})),!n&&y.includes(p)&&(({botType:e,deviceType:t,isChrome:i,region:n})=>{const o=`pwtlogger.${e}.${t}`,r=["all",...n?[n.toLowerCase()]:[]],a=["all",...i?["chrome"]:[]],s=[];return r.forEach((e=>{a.forEach((t=>{s.push(`${o}.region_${e}.browser_${t}`)}))})),s})({botType:(l?"socialBot":o&&"bot")||"nonbot",deviceType:d,isChrome:!0,region:(0,_.Z)(p)}).forEach((e=>{a.Z.timing(`${e}.tags.growthSEO.${t}_${s}`,c,1,{country:p})})),i&&i(s,c))}};(0,c.Tx)((({value:e})=>{const t=(0,g.Af)();let i;i=e<=100?"Good":e>100&&e<=300?"Needs Improvement":"Poor",m("FID",v(e),{timingBucket:i}),t&&m("FIDStartTime",v(t),{timingBucket:i})})),(0,c.Tb)((({value:e})=>{m("LCPCount",(0,g.Kj)()),m("LCP",(e=>10*Math.round(e/10))(e))})),(0,c.Y)((({value:e})=>m("FCP",e)))};var w=i(790348);let P=null;const S=e=>{switch(e){case"/":return"homefeed";case"/pin/:id":return"pin_closeup";case"/pin/:id/visual-search":return"flashlight";case"/:username/:slug":return"board";case"/:username":return"other_profile";case"/search/:scope":return"search";case"/ideas/:interest/:id":return"topic";default:return null}};var T=i(969853),I=i(543059),k=i(7789),E=i(22773),A=i(276775),C=i(785893);const j=(0,n.createContext)(null),R=(0,n.createContext)(null);function D({children:e,immutableLocation:t,resourceTimingCacheSize:i,routerHistoryAction:r,staticContext:a}){const l=(0,n.useRef)(null),c=(0,n.useRef)(null),d=(0,n.useRef)(t),u=(0,n.useRef)(!0),{path:p}=(0,A.useRouteMatch)(),h=(0,n.useRef)(p),_=!a.isCachedRender&&(0,o.Z)(a.deviceType);if((0,n.useEffect)((()=>{h.current=p}),[p]),(0,n.useEffect)((()=>{if((0,E.X_)({size:i||1e3}),(0,g.UQ)(),(0,w.A9)("totalSessionVolume"),window.performance?["clearMarks","clearMeasures","clearResourceTimings","getEntries","getEntriesByName","getEntriesByType","mark","measure","now","setResourceTimingBufferSize"].forEach((e=>{window.performance[e]||(0,w.A9)(`not_supported.window.performance.${e}`)})):(0,w.A9)("not_supported.window.performance"),window.PerformanceObserver||(0,w.A9)("not_supported.window.PerformanceObserer"),(0,T.v)()||(0,w.A9)("not_supported.grid_profiler"),u.current=!1,_&&!k.is){if(((e,t)=>{let i,n=0,o=0,r=null,a=null,l=null,c=null,d=[];const u=()=>{o+=1,l=window.requestAnimationFrame(u)},p=()=>{if(c){const i=d.some((e=>null!==r&&r-e>0&&r-e<=500)),o=t(),{isAuthenticated:l}=e;if(i){const t=(0,s.Jx)({name:"scroll_session",pwtStaticContext:e});if(!t)return;const i={surface:o,isAuthenticated:l};if(null===r||null===a||0===n)if(null===r&&null===a)t.error("no_duration",i);else if(null==r)P=a,t.error("no_start",i);else if(null==a){let e;e=P&&r-P<750?"no_end.outside_window":"no_end.single_event",t.error(e,i)}else t.error("no_frames",i);else{P=a;const e=a-r,s=e/n;0===s?t.error("zero_value",i):s<0?t.error("negative_value",i):(t.addBinaryAnnotation("surface",o,"STRING"),t.addBinaryAnnotation("isAuthenticated",l,"BOOL"),t.addBinaryAnnotation("duration_ms",e,"I32"),t.addBinaryAnnotation("total_frames_rendered",n,"I16"),t.stop(s))}}else(0,w.A9)("WARN.scroll_session.not_user",{tags:{isAuthenticated:l,surface:o}})}window.cancelAnimationFrame(l),n=0,o=0,d=[],a=null,r=null,c=null},h=({timeStamp:e})=>{i&&clearTimeout(i),i=setTimeout(p,500),null===c?(c=100*Math.random()<10,c&&(l=window.requestAnimationFrame(u),r=e)):c&&(a=e,n+=o,o=0)},m=({timeStamp:e})=>{d.push(e)};["wheel","pointerdown","keydown"].forEach((e=>{window.addEventListener(e,m,{passive:!0,capture:!0})})),window.addEventListener("scroll",h,{passive:!0}),window.addEventListener("pagehide",(()=>{window.removeEventListener("scroll",h),["wheel","pointerdown","keydown"].forEach((e=>{window.removeEventListener(e,m)}))}))})(a,(()=>S(h.current)?S(h.current)||"UNKNOWN_SURFACE":h.current||"UNKNOWN_SURFACE")),"Chrome"===a.browserName){m({staticContext:a,getCurrentRoute:()=>h.current,getLastNavigationTime:()=>c.current||0});const e=S(h.current);e&&b({pwtStaticContext:a,surface:e})}}}),[]),d.current!==t){d.current=t,c.current=null!==(v=window.performance)&&void 0!==v&&v.now?window.performance.now():null;const{current:e}=c;if(!u.current){const t=!l.current;(0,w.A9)("routeStart",{tags:{action:r}}),(0,E.Eg)(t),(0,g.Ux)(t),(0,g.on)(),(0,I.tl)();const{customBufferSize:i,defaultBufferSize:n}=(0,E.LH)();e&&((0,w.A9)("routeStart.customBufferSize",{count:i}),(0,w.A9)("routeStart.defaultBufferSize",{count:n}),l.current={time:e,action:r})}}var v;return(0,C.jsx)(j.Provider,{value:_?a:null,children:(0,C.jsx)(R.Provider,{value:l.current,children:e})})}const O=()=>(0,n.useContext)(R),L=()=>(0,n.useContext)(j)},280313:(e,t,i)=>{i.d(t,{Z:()=>J});var n=i(667294),o=i(317672),r=i(790348);const a=e=>{const t=performance.getEntriesByType("resource").filter((e=>e.name.includes("i.pinimg"))).reduce(((e,t)=>{const i=t.name.replace(".jpg","").split("/");return{[i[i.length-1]]:{downloadSize:t.name.split("/")[3].split("x")[0]},...e}}),{});[...Array.from(document.getElementsByTagName("img")).map((e=>{const i=e.src.replace(".jpg","").split("/"),n=i[i.length-1];if(t[n]){var r;const i=(null===(r=(0,o.rZ)(e))||void 0===r?void 0:r.width)||1,a=t[n].downloadSize;return{fileName:n,renderedSize:i,downloadedSize:a,ratio:a/i}}return{fileName:n,renderedSize:1,downloadedSize:1,ratio:1}})),...Array.from(document.querySelectorAll('div[role="img"]')).map((e=>{const i=e.style.backgroundImage.split('"')[1].replace(".jpg","").split("/"),n=i[i.length-1];if(t[n]&&e instanceof HTMLDivElement){var r;const i=(null===(r=(0,o.rZ)(e))||void 0===r?void 0:r.width)||1,a=t[n].downloadSize;return{fileName:n,renderedSize:i,downloadedSize:a,ratio:a/i}}return{fileName:n,renderedSize:1,downloadedSize:1,ratio:1}}))].forEach((t=>{const{ratio:i,fileName:n,downloadedSize:o}=t;t.ratio>1.05&&(0,r.A9)(`checkImageRatio.${e}`,{count:Math.round(10*i)/10,tags:{fileName:`${o}_${n}`}})}))};var s=i(860273),l=i(543059),c=i(607150);const d=({constraintMap:e,initialNavTiming:t,annotations:i})=>({...i,...(0,c.jh)("constraint_",e),...(0,c.jh)("mark_",(0,l.gQ)()),...(0,c.jh)("browser_",{...t?(0,c.D3)(t):{},...(0,c.rX)()})});var u=i(358864),p=i(505771),h=i(156381);const m=(e,t)=>{const{firstInputDelay:i}=(0,h.v2)();return[...e.map((e=>(0,p.Z)(e,t))).filter(Boolean),...i?[{name:"fid",id:(0,u.Z)(),parentId:t,startTime:i.startTime,endTime:i.endTime,annotationMap:{},binaryAnnotationMap:{}}]:[]]};var _=i(435851),g=i(172071);const v=({eventPrefix:e,endTime:t,tags:i,resourceArr:n,resourceType:o="allResources"})=>{const r=n.length;if(r>0&&"object"==typeof n[0]&&!Array.isArray(n[0])){const a=[...n].sort(((e,t)=>e.fetchStart-t.fetchStart)),s=[...n].sort(((e,t)=>e.responseEnd-t.responseEnd));let l=1;const c=t/5;let d=0;for(;l<=5;){let t=0;for(;d<=r-1&&a[d].fetchStart<=c*l;)d+=1,t+=1;g.Z.gauge(`${e}.tags.${o}.fetchStartInterval${l}of5`,t,.2,i),g.Z.gauge(`${e}.${o}.fetchStartInterval${l}of5`,t,.2),l+=1}const u={};u.zeroPercentInFlight=a[0].fetchStart,u.twentyFivePercentInFlight=a[Math.floor(r/4)].fetchStart,u.fiftyPercentInFlight=a[2*Math.floor(r/4)].fetchStart,u.seventyFivePercentInFlight=a[3*Math.floor(r/4)].fetchStart,u.hundredPercentInFlight=a[r-1].fetchStart,u.twentyFivePercentComplete=s[Math.floor(r/4)].responseEnd,u.fiftyPercentComplete=s[2*Math.floor(r/4)].responseEnd,u.seventyFivePercentComplete=s[3*Math.floor(r/4)].responseEnd,u.hundredPercentComplete=s[r-1].responseEnd;for(const t in u)u[t]&&(g.Z.timing(`${e}.tags.${o}.${t}`,u[t],.2,i),g.Z.timing(`${e}.${o}.${t}`,u[t],.2))}},f=({annotateExperiments:e,endTime:t,entries:i,metricIdSurface:n,pwtStaticContext:o})=>{const r=`${(0,_.Z)(o)}.${n}`,a=[r];e&&e.forEach((e=>{const t=o.getExperimentGroup(e)||"null";a.push(`${r}.${e}.${t}`)}));const s={lcpTimingBucket:(e=>{let t;return t=e<=2500?"Good":e>2500&&e<=4e3?"Needs Improvement":"Poor",t})((0,h.Bn)())||"unknown"},l=Array.from(i.filter((e=>"number"==typeof e.encodedBodySize&&e.encodedBodySize>=1e4&&e.responseEnd<=t))),c=[],d=[],u=[],p=[],m=[];l.forEach((e=>{"img"===e.initiatorType?c.push(e):"css"===e.initiatorType?d.push(e):"script"===e.initiatorType?u.push(e):"xmlhttprequest"===e.initiatorType?p.push(e):"link"===e.initiatorType&&e.name.includes("i.pinimg.com")&&m.push(e)})),a.forEach((e=>{v({eventPrefix:e,endTime:t,tags:s,resourceArr:l}),v({eventPrefix:e,endTime:t,tags:s,resourceArr:c,resourceType:"image"}),v({eventPrefix:e,endTime:t,tags:s,resourceArr:d,resourceType:"css"}),v({eventPrefix:e,endTime:t,tags:s,resourceArr:u,resourceType:"scripts"}),v({eventPrefix:e,endTime:t,tags:s,resourceArr:p,resourceType:"xhr"}),v({eventPrefix:e,endTime:t,tags:s,resourceArr:m,resourceType:"preloadedImage"})}))};var y=i(22773),x=i(453821),b=i(638089);const w=({annotateExperiments:e,annotations:t,binaryAnnotations:i,constraintMap:n,endTime:o,imageTimings:r,metricId:a,pwtStaticContext:l,startTime:c,traceId:u,spans:p})=>{const h=(0,y.Cg)();let _;"initial_app_load"===a.navigationType&&(_=(0,s.Z)());const g=r.map((({name:e})=>e)),v=h.map((e=>(0,x.p)(e,g))).filter((({timing:e})=>!(({startTime:e,responseEnd:t},i)=>e>i.endTime||!!t&&t<i.startTime||e<i.startTime-100)(e,{startTime:c,endTime:o})));return"board"!==a.surface&&"pin_closeup"!==a.surface||"initial_app_load"!==a.navigationType||!1!==l.isAuthenticated||f({annotateExperiments:e,endTime:o,entries:h,metricIdSurface:a.surface,pwtStaticContext:l}),{type:"COMPLETE",traceId:u,startTime:c,endTime:o,spans:m(v,u).concat(p),annotationMap:d({constraintMap:n,initialNavTiming:_,annotations:t}),binaryAnnotationMap:(0,b.rA)({annotateExperiments:e,binaryAnnotations:i,entries:h,metricId:a,performanceResources:v,pwtEndTime:o,pwtStaticContext:l})}};let P=!1;const S=(e,t)=>e&&t?P?((0,r.H)("duplicated_initial_app_load_surface_pwt"),(0,u.Z)()):(P=!0,t):(0,u.Z)();var T=i(883119),I=i(226464),k=i(785893);function E({children:e,heading:t}){return(0,k.jsxs)("table",{style:{width:"100%"},cellPadding:4,children:[(0,k.jsx)("thead",{children:(0,k.jsx)("tr",{children:(0,k.jsx)("th",{colSpan:2,style:{background:"#efefef"},children:(0,k.jsx)(T.xv,{weight:"bold",align:"center",children:t})})})}),(0,k.jsx)("tbody",{children:e})]})}function A({name:e,children:t}){return(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{children:(0,k.jsx)(T.xv,{weight:"bold",children:e})}),(0,k.jsx)("td",{children:"string"==typeof t?(0,k.jsx)(T.xv,{children:t}):t})]})}function C({result:e}){return"ABORT"===e.type?(0,k.jsx)(A,{name:"Abort Reason",children:e.reason}):(0,k.jsxs)(n.Fragment,{children:[(0,k.jsx)(A,{name:"PWT (ms)",children:(0,k.jsx)(T.xv,{align:"end",children:Math.round(e.endTime-e.startTime)})}),(0,k.jsx)(A,{name:"PinTrace",children:(0,k.jsx)(T.xv,{italic:!0,children:(0,k.jsx)(T.rU,{href:`https://pintrace.pinadmin.com/zipkin/traces/${e.traceId.toString(16)}`,target:"blank",display:"inlineBlock",onClick:({dangerouslyDisableOnNavigation:e})=>e(),underline:"hover",children:"Open in a new tab"})})})]})}function j({data:e}){const{metricId:t,constraints:i,constraintMap:n,startTime:o,result:r}=e;return(0,k.jsxs)(T.xu,{children:[(0,k.jsxs)(E,{heading:(0,I.KJ)(t),children:[(0,k.jsx)(A,{name:"Thrift Id",children:String((0,I.Rp)(t))}),(0,k.jsx)(A,{name:"Surface",children:t.surface}),(0,k.jsx)(A,{name:"Navigation Type",children:t.navigationType}),(0,k.jsx)(A,{name:"Viewer Authed",children:String(t.isAuthenticated)})]}),(0,k.jsx)(E,{heading:"Constraints",children:i.map((e=>(0,k.jsx)(A,{name:e,children:(0,k.jsx)(T.xv,{align:"end",children:n[e]?Math.round(n[e]-o):"pending..."})},`constraint_${e}`)))}),(0,k.jsx)(E,{heading:"Result",children:r?(0,k.jsx)(C,{result:r}):(0,k.jsx)(A,{name:"result",children:(0,k.jsx)(T.$j,{accessibilityLabel:"profiling PWT",show:!0})})})]})}var R=i(223815);const D=e=>e.result?"COMPLETE"===e.result.type?"darkGray":"red":"gray";function O({data:e}){const[t,i]=(0,n.useState)(!1);return(0,k.jsx)(R.Z,{children:(0,k.jsxs)(T.mh,{children:[(0,k.jsx)(T.xu,{position:"fixed",margin:3,marginBottom:12,bottom:!0,left:!0,width:50,height:50,dangerouslySetInlineStyle:{__style:{zIndex:2e3}},children:(0,k.jsx)(T.hU,{accessibilityLabel:"PwtDebugger",bgColor:"lightGray",iconColor:D(e),icon:"flash",size:"lg",onClick:()=>i(!0)})}),t&&(0,k.jsx)(T.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:2e3}},children:(0,k.jsx)(T.u_,{accessibilityModalLabel:"Pinner Wait Time Debugger Details",heading:"Pinner Wait Time",onDismiss:()=>i(!1),footer:null,size:"sm",children:(0,k.jsx)(j,{data:e})})})]})})}var L=i(558775);const M=(e,t)=>{const i=(0,n.useRef)(e);(0,n.useEffect)((()=>{i.current=e}),[e]);const o=(0,n.useRef)(t);(0,n.useEffect)((()=>{o.current=t}),[t]),(0,n.useEffect)((()=>()=>o.current(i.current)),[])},N=(e,t)=>{const[i,o]=(0,n.useState)(t);return{state:i,dispatch:t=>o((i=>e(i,t)))}};var z=i(985271),F=i(7789),Z=i(383434),B=i(567450),U=i(276602),H=i(198462);const V=["initial_app_load","client_route_push"],W=(0,Z.X)("PwtSurface"),$="NavigationComplete",G="VisuallyComplete",K=(e,t)=>{e.isSampled&&(0,L.Z)({metricId:e.metricConfig.metricId,pwtStaticContext:e.metricConfig.pwtStaticContext,result:{type:"ABORT",reason:t}})},q=e=>{if(e.metricConfig.constraints.every((t=>e.constraintMap[t]))){const t=Math.max(...e.metricConfig.constraints.map((t=>e.constraintMap[t])));return((e,t)=>{var i;const{metricConfig:{metricId:n,pwtStaticContext:o,annotateExperiments:s},annotations:c,binaryAnnotations:d,constraintMap:u,startTime:p,imageTimings:h,isSampled:m,spans:_}=e;(0,l.L8)(`PWT_Complete_${(0,I.KJ)(n)}`);const g=S("initial_app_load"===n.navigationType,null===(i=o.serverData)||void 0===i?void 0:i.trace_id),v=w({annotateExperiments:s,annotations:c,binaryAnnotations:d,constraintMap:u,endTime:t,imageTimings:h,metricId:n,pwtStaticContext:o,startTime:p,traceId:g,spans:_});m&&(0,L.Z)({metricId:n,pwtStaticContext:o,result:v});try{a(String(v.binaryAnnotationMap["metricId.surface"].value))}catch(f){(0,r.H)("image_ratio_check_error",{error:f})}return{...e,result:v,status:"DONE"}})(e,t)}return e},Y=(e,t)=>{const{constraint:i,time:n}=t,o=(0,I.KJ)(e.metricConfig.metricId);return z.Z?e.metricConfig.constraints.find((e=>e===i))?e.constraintMap[i]?(W(`constraint "${i}" is already complete.`),(0,r.H)("duplicated_constraint_complete",{constraint:i,action:o}),e):(W(`marking constraint "${i}" as complete`),(0,l.ZP)(`constraint_${i}_is_complete`),q({...e,constraintMap:{...e.constraintMap,[i]:n||z.Z.now()}})):(W(`marked constraint "${i}" is not a required constraint.`),e):((0,r.H)("missing_window_performance",{action:o}),e)},X=(e,t)=>{if(W("dispatch action",t),"INIT_ROUTE"===t.type)return((e,t)=>{const{metricConfig:i,startTime:n,isSampled:o}=t;if("TIMING"===e.status&&n!==e.startTime&&K(e,"routeUpdatedOnSameSurface"),!i)return{status:"DISABLED",metricConfig:null};const a=(0,I.KJ)(i.metricId);return"TIMING"===e.status&&e.startTime===n&&e.constraintMap.NavigationComplete?((0,r.H)("duplicated_init_route_action",{action:a}),e):("Other"===i.pwtStaticContext.browserName&&!1===i.metricId.isAuthenticated&&"initial_app_load"===i.metricId.navigationType?((0,r.A9)(`TIMING.${a}`,{tags:{userAgent:null===(s=window)||void 0===s||null===(l=s.navigator)||void 0===l?void 0:l.userAgent}}),(0,r.A9)(`TIMING.sampled.${a}`,{tags:{userAgent:null===(c=window)||void 0===c||null===(d=c.navigator)||void 0===d?void 0:d.userAgent},sampleRate:.5})):((0,r.A9)(`TIMING.${a}`),(0,r.A9)(`TIMING.sampled.${a}`,{sampleRate:.5})),Y({status:"TIMING",metricConfig:i,startTime:n,constraintMap:{},annotations:{},binaryAnnotations:{},imageTimings:[],isSampled:o,spans:[]},{constraint:$}));var s,l,c,d})(e,t.payload);if("TIMING"!==e.status)return W(`ignoring action due to invalid state ${e.status}`,t),e;switch(t.type){case"ABORT":K(e,t.reason);const i={type:"ABORT",reason:t.reason};return{...e,status:"DONE",result:i};case"ANNOTATE":const{name:n}=t.payload;if(!z.Z)return e;const o=z.Z.now();return W(`adding annotation {${n}: ${o}}`),{...e,annotations:{...e.annotations,[n]:o}};case"BINARY_ANNOTATE":const{name:a,value:s,annotationType:l}=t.payload;return W(`adding binary annotation {${a}: ${s}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,[a]:{value:s,type:l}}};case"MARK_CONSTRAINT_COMPLETE":return Y(e,t.payload);case"REMOVE_CONSTRAINT":return((e,t)=>{if(!z.Z){const t=(0,I.KJ)(e.metricConfig.metricId);(0,r.H)("missing_window_performance",{action:t})}W(`removing constraint "${t}"`);const i=e.metricConfig.constraints.filter((e=>e!==t)),{[t]:n,...o}=e.constraintMap;return q({...e,constraintMap:o,metricConfig:{...e.metricConfig,constraints:i}})})(e,t.payload);case"SET_SEGMENT":return((e,t)=>{if(!z.Z){const t=(0,I.KJ)(e.metricConfig.metricId);(0,r.H)("missing_window_performance",{action:t})}W(`updating pwt segment to "${t}"`);const i={...e.metricConfig.metricId,segment:t};return{...e,metricConfig:{...e.metricConfig,metricId:i}}})(e,t.payload);case"SET_VISUALLY_COMPLETE_RESULT":{const{payload:{imageTimings:i}}=t;if(0===i.length){K(e,"visuallyComplete_noImages");const t={type:"ABORT",reason:"visuallyComplete_noImages"};return{...e,status:"DONE",result:t}}const n=Math.max(...i.map((e=>e.responseEnd||0)));return Y({...e,imageTimings:i},{constraint:G,time:n})}case"ADD_SUBSPAN":const{startTime:c}=e,{payload:{name:d,startTime:p,endTime:h,annotations:m,binaryAnnotations:_,parentId:g}}=t;return{...e,spans:[...e.spans,{name:d,id:(0,u.Z)(),startTime:p||c,endTime:h,annotationMap:{...m},binaryAnnotationMap:{..._},parentId:g}]};case"START_SUBSPAN":return{...e,spans:[...e.spans,{name:t.payload.name,id:(0,u.Z)(),startTime:z.Z?z.Z.now():0,endTime:1/0,annotationMap:{...t.payload.annotations},binaryAnnotationMap:{...t.payload.binaryAnnotations},parentId:t.payload.parentId}]};case"STOP_SUBSPAN":const v=e.spans.findIndex((e=>e.name===t.payload.name));return v>-1?(e.spans[v].endTime=z.Z?z.Z.now():0,t.payload.annotations&&(e.spans[v].annotationMap={...e.spans[v].annotationMap,...t.payload.annotations}),t.payload.binaryAnnotations&&(e.spans[v].binaryAnnotationMap={...e.spans[v].binaryAnnotationMap,...t.payload.binaryAnnotations})):(0,r.H)("invalid_subspan_stop_name",{name:t.payload.name}),e;default:const f=(0,I.KJ)(e.metricConfig.metricId);return(0,r.H)("invalid_pwt_surface_action",{action:f}),e}};function J({children:e,...t}){var i;const o=(0,H.fM)(),a=(e=>{if(!e)return"initial_app_load";switch(e.action){case"PUSH":return"client_route_push";case"REPLACE":return"client_route_replace";default:return null}})(o),s=["seo_web_react18_render","web_react18_render_auth","web_react18_render_unauth","web_duplo_default",...null!==(i=t.annotateExperiments)&&void 0!==i?i:[]],l={...t,annotateExperiments:s,navigationInfo:{navigationType:a,clientNavigation:o}},{state:c,context:d}=(({surface:e,constraints:t,segment:i,measureGridVisuallyComplete:o,annotateExperiments:r,customEnabledNavigationTypes:a,navigationInfo:{clientNavigation:s,navigationType:l},sampleRate:c})=>{const d=(0,n.useRef)("NOT_SET"),u=(0,H.N5)(),{state:p,dispatch:h}=N(X,{status:"DISABLED",metricConfig:null});if(d.current!==s&&(d.current=s,u)){const{isAuthenticated:n}=u,d=a||V,p=e&&l&&d.includes(l)?{metricId:{type:"surface",surface:e,navigationType:l,isAuthenticated:n,segment:i},annotateExperiments:r,constraints:[$,...t||[],...o?[G]:[]],pwtStaticContext:u}:null;h({type:"INIT_ROUTE",payload:{metricConfig:p,startTime:s?s.time:0,isSampled:!c||Math.random()<c}})}if((0,n.useEffect)((()=>{const e=e=>{h({type:"ABORT",reason:e})};B.Z.onSessionPause(e);const t=()=>{window.removeEventListener("resize",t),h({type:"ABORT",reason:"windowResized"})};return window.addEventListener("resize",t),()=>{B.Z.removePauseListener(e),window.removeEventListener("resize",t)}}),[]),M(p,(e=>{W("handling unmount",e),"TIMING"===e.status&&K(e,"unmount")})),"TIMING"!==p.status||!p.constraintMap.NavigationComplete)return{state:p,context:null};const{startTime:m,metricConfig:_}=p;return{state:p,context:{id:m,metricId:_.metricId,abort:e=>h({type:"ABORT",reason:e}),addAnnotation:e=>h({type:"ANNOTATE",payload:{name:e}}),addBinaryAnnotation:(e,t,i)=>h({type:"BINARY_ANNOTATE",payload:{name:e,value:t,annotationType:i}}),setVisuallyCompleteResult:_.constraints.includes(G)?e=>h({type:"SET_VISUALLY_COMPLETE_RESULT",payload:e}):null,markConstraintComplete:e=>h({type:"MARK_CONSTRAINT_COMPLETE",payload:{constraint:e,time:z.Z?z.Z.now():0}}),removeConstraint:e=>h({type:"REMOVE_CONSTRAINT",payload:e}),setSegment:e=>h({type:"SET_SEGMENT",payload:e}),addSubspan:(e,t,i,n={},o={},r=null)=>h({type:"ADD_SUBSPAN",payload:{name:e,startTime:t,endTime:i,annotations:n,binaryAnnotations:o,parentId:r}}),startSubspan:(e,t={},i={},n=null)=>h({type:"START_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:i,parentId:n}}),stopSubspan:(e,t={},i={},n=null)=>h({type:"STOP_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:i,parentId:n}})}}})(l);return(()=>{const e=(0,U.EV)(),t=!!e;(0,n.useEffect)((()=>{if(t){const t=null!=e&&e.metricId?(0,I.KJ)(e.metricId):null;(0,r.H)("nested_pwt_surface",{action:t})}}),[t])})(),(0,k.jsxs)(n.Fragment,{children:[(0,k.jsx)(U.Sb,{value:d,children:e}),F.DQ&&"DISABLED"!==c.status&&(0,k.jsx)(O,{data:{metricId:c.metricConfig.metricId,constraints:c.metricConfig.constraints,constraintMap:c.constraintMap,startTime:c.startTime,result:"DONE"===c.status?c.result:null}})]})}},276602:(e,t,i)=>{i.d(t,{EV:()=>a,Sb:()=>r,gD:()=>o});var n=i(425288);const{Consumer:o,Provider:r,useMaybeHook:a}=(0,n.Z)("pwtSurfaceContext")},991067:(e,t,i)=>{i.d(t,{Z:()=>a});const n=()=>{var e;return!(null===(e=window.performance)||void 0===e||!e.timing)};var o=i(985271),r=i(969853);function a(e){return!("desktop"===e&&!n())&&(!!o.Z&&(0,r.v)())}},7789:(e,t,i)=>{i.d(t,{DQ:()=>r,eD:()=>n,is:()=>o});const n=window.location.search.includes("debug_tracing"),o=window.location.search.includes("debug_lab_tracing"),r=n||o},226464:(e,t,i)=>{i.d(t,{KJ:()=>d,Rp:()=>c});const n={id:14,name:"own_profile"},o={id:15,name:"other_profile"},r={initial_app_load:{unauth:{board:{id:114,name:"board_page_interactive"},pin_closeup:{id:113,name:"pin_page_interactive"},other_profile:{id:115,name:"user_page_interactive"},topic:{id:119,name:"topic_page_interactive"},sterling_signup:{id:201,name:"sterling_signup_main_pageload"},sterling_login:{id:202,name:"sterling_login_main_pageload"}},auth:{bizhub:{id:607,name:"bizhub_pinteractive"},homefeed:{id:19,name:"home_feed_pinteractive"},sterling_reporting_details:{id:218,name:"sterling_reporting_details_pageload"},sterling_reporting_overview:{id:219,name:"sterling_reporting_overview_pageload"},sterling_ads_create:{id:221,name:"sterling_adscreate_main_pageload"},sterling_ads_duplicate:{id:206,name:"sterling_adsduplication_main_pageload"},sterling_ads_edit:{id:204,name:"sterling_adsedit_main_pageload"},sterling_billing_profile:{id:203,name:"sterling_billingprofile_main_pageload"},sterling_bulk_editor:{id:205,name:"sterling_bulkeditor_main_pageload"},sterling_pin_builder:{id:222,name:"sterling_adscreate_pinbuilder_pageload"},sterling_recommendations:{id:223,name:"sterling_recommendations_pageload"},product_details:{id:120,name:"product_details_interactive"}}},client_route_push:{unauth:{},auth:{bizhub:{id:608,name:"bizhub_page_render"},homefeed:{id:2,name:"home_feed_render"},search:{id:3,name:"search_feed_render"},search_tab:{id:25,name:"search_tab_render"},pin_closeup:{id:13,name:"pin_closeup_details"},product_details:{id:37,name:"product_details_render"},your_shop:{id:36,name:"your_shop_feed_render"},own_profile:n,other_profile:o}},client_route_replace:{unauth:{},auth:{own_profile:n,other_profile:o,product_details:{id:37,name:"product_details_render"}}}},a={client_route_push:{auth:{pin_closeup:{story_pin:{id:700,name:"story_pin_closeup"}}}}},s={board_picker:16,grid_bottom_spinner:12,facebook_autologin:500,google_autologin:501,story_pin_step:701},l=e=>{var t,i;const{navigationType:n,isAuthenticated:o,segment:s,surface:l}=e,c=o?"auth":"unauth",d=null===(t=a[n])||void 0===t||null===(i=t[c])||void 0===i?void 0:i[l];return s&&d&&d[s]||r[n][c][l]},c=e=>{if("stopwatch"===e.type)return s[e.name]||null;const t=l(e);return t?t.id:null},d=e=>{if("stopwatch"===e.type)return e.name;const{navigationType:t,isAuthenticated:i,segment:n,surface:o}=e,r=i?"auth":"unauth",a=l(e);return a?a.name:`${t}_${r}_${o}${n?"_"+n:""}`}},383434:(e,t,i)=>{i.d(t,{X:()=>r,v:()=>o});var n=i(7789);const o=(e,t)=>{n.DQ&&(e.style.outline=`10px solid ${t}`,e.style.outlineOffset="-30px")},r=e=>(t,...i)=>{n.DQ&&console.log("string"==typeof t?`[PWT:${e}] ${t}`:t,...i)}},317254:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(969853),o=i(667294),r=i(276602),a=i(543059);var s=i(198462);function l({children:e,isAtEndOfFeed:t,pinData:i,itemCount:l,includeBackgroundImages:c=!1,includeVideos:d=!1,includeSections:u=!1}){var p;return(null===(p=(0,s.N5)())||void 0===p?void 0:p.isAuthenticated)||(u=!0),(0,n.Z)({pinData:i,isAtEndOfFeed:t,includeBackgroundImages:c,includeVideos:d,includeSections:u}),function(e){const t=(0,r.EV)(),i=(0,o.useRef)(null);(0,o.useEffect)((()=>{e!==i.current&&(i.current=e,t&&(0,a.ZP)(a.at))}),[!!t,e])}(l),e}},317672:(e,t,i)=>{i.d(t,{F9:()=>d,LM:()=>l,VZ:()=>r,cQ:()=>u,rZ:()=>a});var n=i(790348),o=i(91885);const r=()=>"number"==typeof window.innerHeight&&"number"==typeof window.pageYOffset&&!!document.querySelector&&!!document.querySelectorAll,a=e=>e instanceof HTMLDivElement||e instanceof HTMLVideoElement?e.getBoundingClientRect():e.parentElement instanceof HTMLElement?e.parentElement.getBoundingClientRect():null,s=e=>{if(e instanceof HTMLImageElement)return e.src;if(e instanceof HTMLVideoElement)return e.attributes.poster.value;const t=((e.style||{}).backgroundImage||"").match(/^url\(["'](.*)["']\)$/);return t&&t[1]||null},l=()=>document.querySelector?document.querySelectorAll(o.wc).length:((0,n.H)("missing_document_query_selector"),0),c=(e,t)=>{const i=a(e);if(!i)return(0,n.H)("missing_client_rect"),!1;if(i.width<100&&i.height<100){if(e instanceof HTMLImageElement)return!1;const t=s(e);if(null!=t&&t.endsWith("svg"))return!1}return(({top:e,height:t},{foldY:i,pageYOffset:n})=>{const o=e+n;if(o>=i)return!1;const r=Math.min(t,i-o);return r>.5*t||r>.2*i})(i,t)},d=()=>{const e=(()=>{if(!document.querySelector)return(0,n.H)("missing_document_query_selector"),null;const e=document.querySelectorAll(o.wc);return e[e.length-1]||null})();if(!e)return!1;const t=window.innerHeight||0,i=window.pageYOffset||0;return e.getBoundingClientRect().top+i>=t},u=(e,t,i)=>{if(!document.querySelector)return(0,n.H)("missing_document_query_selector"),[];const r={foldY:window.innerHeight||0,pageYOffset:window.pageYOffset||0},a=[o.Wf,...e?[o.fF]:[],...t?[o.$N]:[]].join(","),l=[...document.querySelectorAll(a)];if(i){const e=[...document.querySelectorAll('div[data-test-id="board-section"]')],t=e=>{const i=[...e.children];!i.length&&e.style.backgroundImage?l.push(e):i.length&&i.forEach((e=>{t(e)}))};e.forEach((e=>{t(e)}))}return l.reduce(((e,i)=>{if((i instanceof HTMLImageElement||i instanceof HTMLDivElement||i instanceof HTMLVideoElement&&t)&&c(i,r)){const t=s(i);if(t){const n=(t||"").replace(/.*\//,"");return e.concat([{element:i,fileName:n}])}}return e}),[])}},91885:(e,t,i)=>{i.d(t,{$N:()=>l,Kb:()=>n,Wf:()=>a,fF:()=>s,wc:()=>r});const n="pwt-grid-item",o=['div[data-grid-item="true"]',"div.Grid__Item",`div[data-test-id="${n}"]`],r=o.join(","),a=o.map((e=>`${e} img`)).join(","),s=o.map((e=>`${e} div[style*=background-image]`)).join(","),l=o.map((e=>`${e} video`)).join(",")},969853:(e,t,i)=>{i.d(t,{Z:()=>m,v:()=>h});var n=i(667294),o=i(543059),r=i(35954),a=i(226464),s=i(22773),l=i(790348),c=i(276602),d=i(317672),u=i(383434);const p=(0,u.X)("GridProfiler"),h=()=>!!window.addEventListener&&!!window.removeEventListener&&(0,d.VZ)();function m({isAtEndOfFeed:e,pinData:t,includeBackgroundImages:i,includeVideos:h=!1,includeSections:m}){const _=(0,c.EV)(),g=null==_?void 0:_.id,v=null==_?void 0:_.setVisuallyCompleteResult,[f,y]=(0,n.useState)({status:"DISABLED"});(0,n.useEffect)((()=>{y(v?{status:"LAYOUT",failedCount:0,numOfItemsChecked:0}:{status:"DISABLED"})}),[g,v]),(0,n.useEffect)((()=>{if("DISABLED"!==f.status&&(0,o.ZP)(`GridVisuallyCompleteProfiler_${f.status}`),p("new status",f),"LAYOUT"===f.status){const e=((e,t)=>{const i=()=>{window.removeEventListener(e,i),t()};return window.addEventListener(e,i),()=>window.removeEventListener(e,i)})("scroll",(()=>{(0,o.ZP)("scrollDuringLayout")}));return()=>{e()}}return()=>{}}),[f.status]),(0,r.Z)((()=>{if(!_||!v)return;const{abort:n,metricId:o}=_;switch(f.status){case"LAYOUT":{const t=((e,t)=>{if(!t){const t=(0,d.LM)();if(t===e)return p("No new items, so skip the viewport-fill check."),{complete:!1,numOfItemsChecked:e};if(!(0,d.F9)())return p("Viewport may not be filled yet."),{complete:!1,numOfItemsChecked:t}}return{complete:!0}})(f.numOfItemsChecked,e);t.complete?y({status:"TIMING",failedCount:0,pinElements:(0,d.cQ)(i,h,m)}):500*f.failedCount>6e4?((0,l.A9)(`images.${(0,a.KJ)(o)}.visuallyComplete.maxLayoutAttempt`),n("visuallyComplete_layoutTimeout"),y({status:"DISABLED"})):y({...f,failedCount:f.failedCount+1,numOfItemsChecked:t.numOfItemsChecked});break}case"TIMING":{const e=(0,s.Cg)(),i=f.pinElements.length,r=[];let c=0,d=0,h=0;if(f.pinElements.forEach((({element:t,fileName:i})=>{const n=e.find((e=>e.name.endsWith(i)));n?n.responseEnd?(r.push(n),(0,u.v)(t,"green")):(h+=1,(0,u.v)(t,"blue")):t instanceof HTMLImageElement&&t.complete?(d+=1,(0,u.v)(t,"red")):(c+=1,(0,u.v)(t,"greenyellow"))})),c||h)100*f.failedCount>6e4?((0,l.A9)(`images.${(0,a.KJ)(o)}.visuallyComplete.maxAttempt`,{tags:{totalImageCount:i,incompleteCount:c,noTimingCount:d,noTimingResponseEndCount:h}}),n("visuallyComplete_timingTimeout"),y({status:"DISABLED"})):y({...f,failedCount:f.failedCount+1});else{if(p(`All ${r.length} images are fetched`),t&&t.length){const e=((e,t)=>{let i=0,n=0,o=0,r=0,a=0;return e=e.filter((e=>"pin"===e.type)),t.forEach(((t,s)=>{var l,c,d,u,p,h;const m=t.fileName.split(".")[0];let _;_=e[s],m!==(null===(l=_)||void 0===l?void 0:l.image_signature)&&(_=e.find((e=>m===(null==e?void 0:e.image_signature)))),void 0===_?a+=1:_.is_promoted||"PROMOTED_PIN"===(null===(c=_.recommendation_reason)||void 0===c?void 0:c.reason)||null!==(d=_)&&void 0!==d&&null!==(u=d.promoter)&&void 0!==u&&u.length?o+=1:null!==_.story_pin_data_id&&void 0!==_.story_pin_data_id?i+=1:null!==(p=_)&&void 0!==p&&null!==(h=p.videos)&&void 0!==h&&h.video_list?n+=1:r+=1})),{storyPinCount:i,videoCount:n,adCount:o,imageCount:r,unknownCount:a}})(t,f.pinElements);Object.entries(e).forEach((([e,t])=>{_.addBinaryAnnotation(e,t,"I16")})),(0,l.A9)(`${(0,a.KJ)(o)}.pinTypes`,{tags:e})}v({imageTimings:r}),y({status:"DISABLED"}),(0,l.A9)(`images.${(0,a.KJ)(o)}.visuallyComplete.complete`,{tags:{totalImageCount:i,noTimingCount:d}})}break}}}),(e=>("LAYOUT"===e.status?500:"TIMING"===e.status&&100)||null)(f))}},790348:(e,t,i)=>{i.d(t,{A9:()=>p,DG:()=>d,H:()=>h,S$:()=>m,iF:()=>u});var n=i(172071),o=i(383434),r=i(50286),a=i(7789);const s=(0,o.X)("logPwtStats");let l=null,c=!0;function d(e){l={browserName:e.userAgent.browserName,browserVersion:e.userAgent.browserVersion,deviceType:(0,r.Mq)(e),isAuthenticated:e.isAuthenticated,isBot:e.isBot,isSocialBot:e.isSocialBot}}const u=e=>{l&&(l.historyAction=e)},p=(e,t={sampleRate:1},i=!0)=>{const o=a.DQ?1:t.sampleRate;if(!l)return s("pwt.metrics_quality.no_context"),void n.Z.increment("pwt.metrics_quality.no_context",o,{eventName:e});const{browserName:r,browserVersion:c,deviceType:d,isBot:u,isSocialBot:p}=l,h=`pwt.${(p?"socialBot":u&&"bot")||"nonbot"}.metrics_quality.${d}.${e}`,m={...t.tags||{},browserName:r,browserVersion:(null==c?void 0:c.split(".")[0])||"0"},_=t.count;i&&(s(`${h}: ${"number"==typeof _?_:1}`),t.tags&&s(Object.entries(t.tags))),a.is||n.Z.count(h,"number"==typeof _?_:1,o,m)},h=(e,t)=>p(`ERROR.${null!=t&&t.action?t.action+".":""}${e}`,{tags:t}),m=({appLoadName:e,clientNavName:t},i)=>{if(l){const n="APP_VOLUME.";c?(p(n.concat(e),{tags:{browserSupportsPwtProfiler:!!i}}),c=!1):"PUSH"===l.historyAction&&p(n.concat(t),{tags:{browserSupportsPwtProfiler:!!i}})}else n.Z.increment("pwt.metrics_quality.no_context",1,{eventName:e.concat(`.${t}`)})}},543059:(e,t,i)=>{i.d(t,{Ao:()=>l,BA:()=>c,L8:()=>u,ZP:()=>p,at:()=>o,gQ:()=>s,tl:()=>d});var n=i(985271);const o="masonryPagination";let r={};const a=e=>`📌 ${e}`,s=()=>{const e={};return Object.keys(r).forEach((t=>{(r[t]||[]).slice(0,3).forEach(((i,n)=>{e[n?`${t}_${n+1}`:t]=i}))})),e},l=(e,t)=>(r[e]||[]).filter((e=>e<t)).length,c=(e,t)=>l(e,t)>0,d=()=>{n.Z&&Object.keys(r).forEach((e=>((e,t)=>{const i=a(t);e.clearMarks(i),e.clearMeasures(i)})(n.Z,e))),r={}},u=e=>{n.Z&&(r[e]=(r[e]||[]).concat([n.Z.now()]),((e,t,i,n)=>{const o=a(t);e.measure(o,i,n)})(n.Z,e))},p=e=>{n.Z&&(r[e]=(r[e]||[]).concat([n.Z.now()]),((e,t)=>{const i=a(t);e.mark(i)})(n.Z,e))}},528961:(e,t,i)=>{i.d(t,{cC:()=>r,jy:()=>o,qr:()=>s,sk:()=>a});const n=e=>"number"==typeof e?Math.round(e):e,o=e=>({type:"I16",value:n(e)}),r=e=>({type:"I32",value:n(e)}),a=e=>({type:"STRING",value:e}),s=e=>({type:"BOOL",value:e})},607150:(e,t,i)=>{i.d(t,{D3:()=>r,Hd:()=>l,jh:()=>s,rX:()=>a});var n=i(672115),o=i(156381);const r=e=>({...(0,n.Z)(e),domComplete:e.domComplete||0,domContentLoadedEventEnd:e.domContentLoadedEventEnd||0,domContentLoadedEventStart:e.domContentLoadedEventStart||0,domInteractive:e.domInteractive||0,loadEventEnd:e.loadEventEnd||0,loadEventStart:e.loadEventStart||0}),a=()=>{const{firstInputDelay:e,largestContentfulPaint:t}=(0,o.v2)();return{firstInputDelayStart:(null==e?void 0:e.startTime)||0,firstInputDelayEnd:(null==e?void 0:e.endTime)||0,largestContentfulPaint:t||0}},s=(e,t)=>Object.keys(t).reduce(((i,n)=>({...i,[`${e}${n}`]:t[n]})),{}),l=(e,t)=>Object.keys(e).reduce(((i,n)=>t.includes(n)?{...i,[n]:e[n]}:i),Object.freeze({}))},638089:(e,t,i)=>{i.d(t,{ng:()=>v,rA:()=>y});var n=i(602738),o=i(226464),r=i(22773),a=i(156381),s=i(543059),l=i(528961);const c=(e,t)=>(e||[]).reduce(((e,i)=>({...e,[`experiment.${i}`]:(0,l.sk)(t(i))})),{}),d=(e,t)=>"number"==typeof t?e(t):null,u=e=>e.reduce(((e,t)=>e+t),0),p=(e,t)=>Object.keys(t).reduce(((i,n)=>({...i,[`${e}${n}`]:t[n]})),{}),h=e=>{if(!e.length)return{};const t=e.map((({startTime:e,requestStart:t,responseStart:i,responseEnd:n})=>{const o=t||e;return{startTime:e,requestStart:o,responseStart:i||o,responseEnd:n}})),i=u(t.map((e=>e.requestStart-e.startTime))),n=u(t.map((e=>e.responseStart-e.requestStart))),o=u(t.map((e=>e.responseEnd-e.responseStart))),r=i+n+o,a=u(e.map((e=>e.decodedBodySize||0)));return{decodedBodySize:(0,l.cC)((s=a,Number(Number(s/1024).toFixed(3)))),"duration.all":(0,l.cC)(r),"duration.requestStartToResponseStart":(0,l.cC)(n),"duration.responseStartToResponseEnd":(0,l.cC)(o),"duration.startToRequestStart":(0,l.cC)(i)};var s},m=e=>{const t=e.filter((e=>!!e.responseEnd));return{...e.length?{...h(t),"count.completed":(0,l.cC)(t.length)}:{},"count.all":(0,l.cC)(e.length)}},_=e=>{const t=["timeSecond1","timeSecond2","timeSecond3"],i={timeSecond1:{start:0,end:0,count:0},timeSecond2:{start:0,end:0,count:0},timeSecond3:{start:0,end:0,count:0}},n={script_deferred:[],external:[],visually_complete:[],script:[],css:[],video:[],image:[],xmlhttprequest:[],other:[]};if(e.length){const{requestStart:o,startTime:r}=e[0].timing,a=o||r;i.timeSecond1.start=a,i.timeSecond1.end=a+1e3,i.timeSecond2.start=a+1e3,i.timeSecond2.end=a+2e3,i.timeSecond3.start=a+2e3,i.timeSecond3.end=a+3e3,e.forEach((e=>{const{timing:o}=e;n[e.category]=n[e.category].concat([o]),e.isDeferred&&(n.script_deferred=n.script_deferred.concat([o])),e.isExternal&&(n.external=n.external.concat([o])),e.isVisuallyCompleteRequired&&(n.visually_complete=n.visually_complete.concat([o]));const{requestStart:r,startTime:a,responseEnd:s}=o,l=r||a;t.forEach((e=>{const{start:t,end:n}=i[e];(l>=t&&l<n||l<t&&s>t)&&(i[e].count+=1)}))}))}const o={...p("concurrentRequests.",Object.keys(i).reduce(((e,t)=>e={...e,[t]:(0,l.cC)(i[t].count)}),{}))};return{...Object.keys(n).reduce(((e,t)=>({...e,...p(`resource.${t}.`,m(n[t]))})),o)}},g=(e,t,i)=>{var a;const{devicePixelRatio:s,navigator:c,innerWidth:u,innerHeight:p,performance:h}=window,{deviceMemory:m,hardwareConcurrency:_,platform:g,userAgent:v,connection:f}=c,{memory:y}=h,{appType:x,appVersion:b,browserName:w,browserVersion:P,deviceType:S,isAppShell:T,isAuthenticated:I,isBot:k,isSocialBot:E,locale:A,osName:C,stageName:j}=t,R="desktop"===S?x||5:x||6;let D;const{navigationType:O}=e;let L=null;if("initial_app_load"===O){var M;D=1;const e=null===(M=(0,n.Z)("navigation")[0])||void 0===M?void 0:M.transferSize;L=e?parseFloat((.001*e).toFixed(1)):null}else D=4;return{"app.type":(0,l.jy)(R),"app.version":(0,l.sk)(b),"browser.name":(0,l.sk)(w),"browser.version":(0,l.sk)(P),"cpu.speed":(0,l.jy)(_),"device.memory":(0,l.jy)(m),"device.type":(0,l.jy)(0),"device.typeName":(0,l.sk)(S),"device.version":(0,l.sk)("unknown"),"pwt.cause":(0,l.jy)(D),"net.effectiveType":(0,l.sk)((null==f?void 0:f.effectiveType)||null),"net.downlink":(0,l.cC)(d((e=>10*Math.round(e/10)),null==f?void 0:f.downlink)),"net.downlinkMax":(0,l.cC)(d((e=>10*Math.round(e/10)),null==f?void 0:f.downlinkMax)),"net.rtt":(0,l.cC)(d((e=>10*Math.round(e/10)),null==f?void 0:f.rtt)),"net.speed":(0,l.cC)((0,r.Hv)(i,!1)),"pwt.result":(0,l.jy)(1),"view.type":(0,l.cC)(0),"viewport.height":(0,l.cC)(p||0),"viewport.width":(0,l.cC)(u||0),devicePixelRatio:(0,l.cC)(s||0),isAppShell:(0,l.qr)(T),isAuthenticated:(0,l.qr)(I),isBot:(0,l.qr)(k),isSocialBot:(0,l.qr)(E),locale:(0,l.sk)(A),osName:(0,l.sk)(C),...null!==L&&{htmlResponseSize:(0,l.cC)(L)},nextHopProtocol:(0,l.sk)((null===(a=(0,n.Z)("navigation")[0])||void 0===a?void 0:a.nextHopProtocol)||null),platform:(0,l.sk)(g||null),profilerVersion:(0,l.sk)("3"),pwtActionName:(0,l.jy)((0,o.Rp)(e)),stageName:(0,l.sk)(j),userAgent:(0,l.sk)(v),usedJSHeapSize:(0,l.cC)((null==y?void 0:y.usedJSHeapSize)||0),totalJSHeapSize:(0,l.cC)((null==y?void 0:y.totalJSHeapSize)||0),jsHeapSizeLimit:(0,l.cC)((null==y?void 0:y.jsHeapSizeLimit)||0)}},v=({annotateExperiments:e,metricId:t,pwtStaticContext:i,binaryAnnotations:n={},performanceResourceTimings:o=[]})=>({...c(e,i.getExperimentGroup),...g(t,i,o),...n,stopwatchVersion:(0,l.jy)(1)}),f=(e,t)=>{var i;const{navigator:n}=window,{serviceWorker:o}=n,{surface:r,navigationType:c,isAuthenticated:d}=e,{cumulativeLayoutShiftScore:p,longTaskDurations:h}=(0,a.v2)();return{...h.length?{"longTask.count":(0,l.cC)(h.length),"longTask.maxDuration":(0,l.cC)(Math.max(...h)),"longTask.totalDuration":(0,l.cC)(u(h))}:{},cumulativeLayoutShiftScore:(0,l.cC)(100*p),"masonry.paginationMarkCount":(0,l.cC)((0,s.Ao)(s.at,t)),"metricId.isAuthenticated":(0,l.qr)(d),"metricId.navigationType":(0,l.sk)(c),"metricId.surface":(0,l.sk)(r),resourceBufferClearedCount:(0,l.jy)((0,s.Ao)("resourceBufferCleared",t)),scrollDuringLayout:(0,l.qr)((0,s.BA)("scrollDuringLayout",t)),serviceWorker:(0,l.qr)(o?!!o.controller:null),serviceWorkerState:(0,l.sk)((null==o||null===(i=o.controller)||void 0===i?void 0:i.state)||null)}},y=({annotateExperiments:e,binaryAnnotations:t={},entries:i,metricId:n,performanceResources:o,pwtEndTime:r,pwtStaticContext:a})=>({...t,..._(o),...c(e,a.getExperimentGroup),...g(n,a,i),...f(n,r)})},860273:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(985271);const o=()=>{const[e]=n.Z?n.Z.getEntriesByType("navigation"):[];return e}},453821:(e,t,i)=>{i.d(t,{i:()=>n,p:()=>a});const n=({name:e,initiatorType:t})=>{switch(t){case"xmlhttprequest":return"xmlhttprequest";case"img":return"image";case"video":return"video";default:{const t=e.split("."),i=(t.length>1&&t.pop()||"").toLowerCase();return["js","mjs"].includes(i)?"script":"css"===i?"css":["mp4","m4v","mov","ts","m3u8"].includes(i)?"video":["bmp","gif","jpg","jpeg","png","tiff","webp","svg"].includes(i)?"image":"other"}}},o=e=>{const t=e.replace(new RegExp(`^${window.location.origin||""}`),""),i=document&&document.querySelector(`head > script[src='${t}']`);return!!i&&i.hasAttribute("defer")},r=e=>["pinimg","pinterest","pinterdev"].every((t=>!e.includes(`${t}`))),a=(e,t)=>{const i=n(e),{name:a}=e;return{category:i,isDeferred:"script"===i&&o(a),isExternal:r(a),isVisuallyCompleteRequired:"image"===i&&t.includes(a),timing:e}}},558775:(e,t,i)=>{i.d(t,{Z:()=>b});let n=null;const o=(e,t)=>(n=n||{results:[],context:t},n.results.push(e),n);var r=i(176532),a=i(7789),s=i(383434),l=i(226464),c=i(790348),d=i(860273),u=i(358864),p=i(602738),h=i(528961);const m=(e,t)=>Object.keys(e).reduce(((i,n)=>{const o=e[n];return o&&(i[n]={timestamp:t+o}),i}),{}),_=({span:e,timeOrigin:t})=>{return{id:e.id,parent_id:e.parentId||null,result:1,name:e.name,timestamp:t+e.startTime,duration:e.endTime-e.startTime,annotations:m(e.annotationMap,t),binary_annotations:(i=e.binaryAnnotationMap,Object.keys(i).reduce(((e,t)=>{const n=i[t];if(!n)return e;const{value:o,type:r}=n;return null==o?e:e.concat({name:t,value:o,annotation_type:r})}),[]))};var i},g=(e,{startTime:t,endTime:i,annotationMap:n,binaryAnnotationMap:o,parentId:r,traceId:a})=>({name:`pwt/${e}`,startTime:t,endTime:i,annotationMap:n,binaryAnnotationMap:o,parentId:r,id:a}),v=({annotations:e})=>e.reduce(((e,{key:t,timestamp:i})=>({...e,[`server_${t}`]:{timestamp:i}})),{}),f=(e,t)=>({...e,annotations:{...v(t),...e.annotations},binary_annotations:[...t.binary_annotations,...e.binary_annotations]}),y=({traceId:e,actionName:t,result:i,timeOrigin:n,serverDataToJoin:o})=>{let r=_({span:g(t,i),timeOrigin:n}),a=null;return o&&(r=f(r,o),a=((e,t,i)=>{var n;const o=(0,d.Z)();return(null==o?void 0:o.responseEnd)?f(_({span:{name:"html",startTime:0,endTime:(null==o?void 0:o.responseEnd)||1,annotationMap:{},binaryAnnotationMap:{nextHopProtocol:(0,h.sk)((null===(n=(0,p.Z)("navigation")[0])||void 0===n?void 0:n.nextHopProtocol)||null)},id:e.server_span_id||(0,u.Z)(),parentId:t},timeOrigin:i}),e):null})(o,e,n)),{trace_id:e,spans:[r,...a?[a]:[],...i.spans.map((e=>_({span:e,timeOrigin:n})))]}},x=(0,s.X)("reportResult");function b({metricId:e,pwtStaticContext:t,result:i,isAuth:n}){const{serverData:s}=t,d=(0,l.KJ)(e),u=`${i.type}.${d}`,p=`${i.type}.sampled.${d}`,h=void 0!==n&&{tags:{isAuth:n}}||void 0;if((0,c.A9)(i.reason?u.concat(`.${i.reason}`):u,h),(0,c.A9)(i.reason?p.concat(`.${i.reason}`):p,{...h,sampleRate:.5}),"COMPLETE"!==i.type)return void x(`Abort metric ${d}`,i);const m=null!==(_=window.performance)&&void 0!==_&&_.now?Date.now()-window.performance.now():"unknown";var _,g;if("unknown"===m)return x(`Unable to convert to absolute times for ${d} due to missing time origin`),void(0,c.A9)(`missingTimeOrigin.${d}`,h);if(a.is&&(window.PWT_LAB_DATA=o(i,t)),i.spans.length&&(i.spans=i.spans.map((e=>(e.parentId||e.id===i.traceId||"network_resources"===e.name||(e.parentId=i.traceId),e)))),!a.is){const n=e.navigationType&&"initial_app_load"===e.navigationType,o=i.traceId,l=y({traceId:o,actionName:d,result:i,timeOrigin:m,serverDataToJoin:n&&s||null});(0,r.Z)({type:"POST",url:"/_/_/trace/trace/",data:{report_data:JSON.stringify(l),report_context:JSON.stringify((g=t,{debugTrace:a.eD,locale:g.locale,stageName:g.stageName}))}}),x(`PinTrace ${d} will be available shortly: https://pintrace.pinadmin.com/zipkin/traces/${o.toString(16)}`,{duration:i.endTime-i.startTime,result:i,pwtStaticContext:t})}}},672115:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>({connectEnd:e.connectEnd||0,connectStart:e.connectStart||0,domainLookupEnd:e.domainLookupEnd||0,domainLookupStart:e.domainLookupStart||0,fetchStart:e.fetchStart||0,requestStart:e.requestStart||0,redirectEnd:e.redirectEnd||0,redirectStart:e.redirectStart||0,responseEnd:e.responseEnd||0,responseStart:e.responseStart||0,secureConnectionStart:e.secureConnectionStart||0,startTime:e.startTime||0,workerStart:e.workerStart||0,unloadEventStart:e.unloadEventStart||0,unloadEventEnd:e.unloadEventEnd||0})},505771:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(358864),o=i(672115),r=i(528961);const a=({category:e,isDeferred:t,isExternal:i})=>[e].concat(t?["deferred"]:[]).concat(i?["external"]:[]).join("_");function s(e,t){const{category:i,timing:s,isDeferred:l,isExternal:c,isVisuallyCompleteRequired:d}=e;return s.responseEnd&&("image"!==i||d)?{name:a(e),id:(0,n.Z)(),parentId:t,startTime:s.startTime,endTime:s.responseEnd,annotationMap:(0,o.Z)(s),binaryAnnotationMap:{category:(0,r.sk)(i),decodedBodySize:(0,r.cC)(s.decodedBodySize||0),initiatorType:(0,r.sk)(s.initiatorType),isDeferred:(0,r.qr)(l),isExternal:(0,r.qr)(c),name:(0,r.sk)(s.name),nextHopProtocol:(0,r.sk)(s.nextHopProtocol),transferSize:(0,r.cC)(s.transferSize||0)}}:null}},31062:(e,t,i)=>{i.d(t,{ku:()=>T,Jx:()=>w,PY:()=>S});var n=i(860273),o=i(156381);const r=()=>(0,o.PJ)().reduce(((e,{identifier:t,loadTime:i,renderTime:n})=>e[`${t}_loadTime`]?e[`${t}_dupe_loadTime`]?{...e,[`${t}_dupe_loadTime`]:i,[`${t}_dupe_renderTime`]:n}:e:{...e,[`${t}_loadTime`]:i,[`${t}_renderTime`]:n}),Object.freeze({}));var a=i(672115),s=i(607150),l=i(22773),c=i(464609);const d=e=>{switch(e){case"pin_closeup":{const e=(0,c.Z)();return(e=>{const t=(0,l.y0)();return e.reduce(((e,{name:i,match:n})=>t.filter((e=>n(e))).slice(0,2).reduce(((e,t,n)=>({...e,...(0,s.jh)(`${i}${n?"_dupe1":""}_`,(0,a.Z)(t))})),e)),Object.freeze({}))})([{name:"mainImage",match:({name:t})=>t===e},{name:"PinResource",match:({name:e})=>e.includes("PinResource")}])}default:return{}}};var u=i(169213),p=i(358864),h=i(558775),m=i(505771),_=i(383434),g=i(543059),v=i(453821),f=i(638089),y=i(790348);const x=(0,_.X)("LightStopwatch"),b={},w=({annotateExperiments:e,annotateMarks:t,annotateResourceTimingForSurface:i,name:o,pwtStaticContext:a})=>{const l=(()=>{let e=[],t=null;if(window.PerformanceObserver){const i=1e3;t=(0,u.Z)({entryTypes:["resource"]},(t=>{e=e.concat(t.getEntries()),e.length>i&&(e=e.slice(-i))}))}return{get:()=>e,disconnect:()=>{t&&t.disconnect()}}})();let c=!0,_={};(0,y.A9)(`TIMING.${o}`,{tags:{isAuth:a.isAuthenticated}});const w={type:"stopwatch",name:o,navigationType:"initial_app_load"},P={abort:e=>{c?(c=!1,(0,h.Z)({metricId:w,pwtStaticContext:a,result:{type:"ABORT",reason:e}})):(0,y.H)("duplicate_abort_action",{action:o})},error:(e,t)=>{const i={...t,action:o};c?(e&&(0,y.H)(e,i),l&&l.disconnect(),c=!1):(0,y.H)("duplicate_error_action",i)},stop:u=>{if(!c)return void(0,y.H)("duplicate_stop_action",{action:o});c=!1,l.disconnect();const x=(0,p.Z)(),b=(0,n.Z)(),P=l.get(),S={type:"COMPLETE",traceId:(0,p.Z)(),startTime:0,endTime:u,spans:[{name:"network_resources",id:x,startTime:0,endTime:u,annotationMap:{},binaryAnnotationMap:{},parentId:null},...P.map((e=>(0,m.Z)((0,v.p)(e,[]),x))).filter(Boolean)],annotationMap:{...(0,s.jh)("resource_",i?d(i):{}),...(0,s.jh)("element_",r()),...(0,s.jh)("mark_",t&&t.length?(0,s.Hd)((0,g.gQ)(),t):{}),...(0,s.jh)("browser_",b?(0,s.D3)(b):{})},binaryAnnotationMap:(0,f.ng)({annotateExperiments:e,metricId:w,pwtStaticContext:a,performanceResourceTimings:P,binaryAnnotations:_})};(0,h.Z)({metricId:w,pwtStaticContext:a,result:S,isAuth:a.isAuthenticated})},addBinaryAnnotation:(e,t,i)=>{x(`adding binary annotation {${e}: ${String(t)}}`),_={..._,[e]:{value:t,type:i}}}};return b[o]=P,P},P=e=>b[e],S=e=>!!P(e),T=({stopwatchName:e,binaryAnnotationName:t,value:i,annotationType:n})=>{const o=P(e);o&&o.addBinaryAnnotation(t,i,n)}},156381:(e,t,i)=>{i.d(t,{Af:()=>g,Bn:()=>m,Kj:()=>p,PJ:()=>l,UQ:()=>v,Ux:()=>c,on:()=>a,v2:()=>d});var n=i(581341),o=i(169213);const r={cumulativeLayoutShiftScore:0,firstInputDelay:null,longTaskDurations:[],largestContentfulPaint:null,elementTimings:[]},a=()=>{r.longTaskDurations=[]},s=(0,n.Z)((()=>r.elementTimings)),l=()=>s.get(),c=e=>{e&&s.save(),r.elementTimings=[]},d=()=>r;let u=0;const p=()=>u;let h;const m=()=>h;let _;const g=()=>_,v=()=>{(0,o.Z)({type:"element",buffered:!0},(e=>{r.elementTimings=r.elementTimings.concat(e.getEntries().reduce(((e,{identifier:t,loadTime:i,renderTime:n})=>e.concat("string"==typeof t&&"number"==typeof i&&"number"==typeof n?[{identifier:t,loadTime:i,renderTime:n}]:[])),[]))})),(0,o.Z)({entryTypes:["longtask"]},(e=>{e.getEntries().map((e=>r.longTaskDurations.push(e.duration)))}),(()=>a())),(0,o.Z)({type:"first-input",buffered:!0},((e,t)=>{const i=e.getEntries()[0];i&&i.startTime&&i.processingStart&&(r.firstInputDelay={startTime:i.startTime,endTime:i.processingStart},_=r.firstInputDelay.startTime),t.disconnect()}),(()=>{r.firstInputDelay=null})),(0,o.Z)({type:"largest-contentful-paint",buffered:!0},(e=>{const t=e.getEntries(),i=t.length,n=t[i-1];n&&(u=i,r.largestContentfulPaint=n.renderTime||n.loadTime||null,h=n.renderTime||n.loadTime||null)})),(0,o.Z)({type:"layout-shift",buffered:!0},(e=>{e.getEntries().forEach((e=>{e.hadRecentInput||(r.cumulativeLayoutShiftScore+=e.value)}))}))}},311560:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>{switch(e){case"BR":case"MX":case"AR":case"CL":case"CO":return"LatAm";case"US":return"US";default:return"OTHER"}}},581341:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>{let t=null;return{get:()=>t||e(),save:()=>{t=e()}}}},435851:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>{const{deviceType:t,isBot:i,isSocialBot:n}=e;return`coreWebVitalsLite.v1.${(n?"socialBot":i&&"bot")||"nonbot"}.${t}`}},169213:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t,i)=>{if(!window.PerformanceObserver)return null;try{const n=new window.PerformanceObserver(t);return n.observe(e),window.addEventListener("beforeunload",(()=>{n.disconnect()})),i&&window.addEventListener("popstate",(()=>{i()})),n}catch(n){return null}}},464609:(e,t,i)=>{i.d(t,{Z:()=>o,f:()=>n});const n="closeupImage",o=()=>{if(!document.querySelector)return null;const e=document.querySelector('head>link[rel="preload"][as="image"][href^="https://i.pinimg.com/"]');return e instanceof HTMLLinkElement?e.href:null}},358864:(e,t,i)=>{function n(){let e="";for(let t=0;t<15;t+=1){e+="0123456789"[Math.floor(10*Math.random())]}return Number(e)}i.d(t,{Z:()=>n})},22773:(e,t,i)=>{i.d(t,{Cg:()=>_,Eg:()=>v,Hv:()=>y,LH:()=>f,MM:()=>x,X_:()=>p,y0:()=>g});var n=i(581341),o=i(169213),r=i(543059),a=i(602738),s=i(7789),l=i(453821),c=i(790348);let d;function u(){window.performance&&window.performance.clearResourceTimings&&((0,r.ZP)("resourceBufferCleared"),s.DQ&&console.info("Warning: Clearing resource timings in default buffer."),(0,c.A9)("resourceBufferSize",{count:(0,a.Z)("resource").length}),window.performance.clearResourceTimings())}const p=({size:e})=>{if(window.performance){window.PerformanceObserver?(d=(0,a.Z)("resource"),(0,o.Z)({entryTypes:["resource"]},(t=>{d=(d||[]).concat(t.getEntries()),d.length>e&&(d=d.slice(-e))}))):(window.addEventListener("popstate",(()=>{(0,a.Z)("resource").length>e&&u()})),window.performance.setResourceTimingBufferSize&&window.performance.setResourceTimingBufferSize(e));try{window.performance.onresourcetimingbufferfull=()=>{d||u()}}catch(t){}}},h=()=>d||(0,a.Z)("resource"),m=(0,n.Z)(h),_=h,g=()=>m.get(),v=e=>{e&&m.save(),d&&((0,c.A9)("customBufferSize",{count:d.length}),d=[]),u()},f=()=>({customBufferSize:d?d.length:0,defaultBufferSize:(0,a.Z)("resource").length}),y=(e,t=!0)=>{let i=0,n=0;const o=(r=e.filter((e=>t?!("image"!==(0,l.i)(e)||(e.responseEnd||(i+=1),e.transferSize||(n+=1),!e.responseEnd||!e.transferSize)):!!e.responseEnd&&!!e.transferSize)).map((e=>8*(e.transferSize||0)/((e.responseEnd-e.responseStart)/1e3)/1e3))).length?r.reduce(((e,t)=>e+t),0)/r.length:null;var r;return t&&(i>0&&(0,c.A9)("images.downloadSpeed.noResponseEnd",{tags:{count:i}},!1),n>0&&(0,c.A9)("images.downloadSpeed.transferSize",{tags:{count:n}},!1)),o},x=e=>{if(!e)return"unknown";const t=Math.floor(e/1e3);return t<1?"0-1":t<5?"1-5":t<10?"5-10":t<20?"10-20":t<40?"20-40":t<80?"40-80":"80_or_above"}},602738:(e,t,i)=>{function n(e){var t,i;return(null===(t=window)||void 0===t||null===(i=t.performance)||void 0===i?void 0:i.getEntriesByType)&&window.performance.getEntriesByType(e)||[]}i.d(t,{Z:()=>n})},985271:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(o=window.performance)&&o.clearMarks&&o.clearMeasures&&o.clearResourceTimings&&o.getEntries&&o.getEntriesByName&&o.getEntriesByType&&o.mark&&o.measure&&o.now&&o.setResourceTimingBufferSize?o:null;var o},681227:(e,t,i)=>{function n(e){const t=Object.keys(e);if(t.length>0){return t.sort(((t,i)=>e[i]-e[t])).slice(0,3)}return null}function o(e){const t=Object.values(e);if(t.length>0){return t.reduce(((e,t)=>e+t),0)}return 0}function r(e,t){const{videos:i,is_downstream_promotion:n,is_promoted:o,story_pin_data_id:r,board:a}=e;return!(o||n||(!i||!i.id)&&!r||t||null!=a&&a.is_collaborative&&a.collaborated_by_me)}i.d(t,{At:()=>n,J6:()=>r,Ud:()=>o})},561195:(e,t,i)=>{i.d(t,{A:()=>l,Z:()=>c});var n=i(667294),o=i(498913),r=i.n(o),a=i(883119),s=i(785893);const l=({fill:e,width:t,color:i})=>{const o="half"===e?(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(a.xu,{position:"absolute",children:(0,s.jsx)(a.JO,{accessibilityLabel:"",color:"default",icon:"star-half",size:12})}),(0,s.jsx)(a.JO,{accessibilityLabel:"",color:"subtle",icon:"star",size:12})]}):(0,s.jsx)(a.JO,{accessibilityLabel:"",color:"full"===e?"default":"subtle",icon:"star",size:12});return(0,s.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{marginRight:"3px"}},display:"inlineBlock","data-test-id":`rating-star-${e}`,children:o})};function c({max_rating:e,rating:t,width:i,color:o}){const a=[],c=function(e,t){return 5*(t=t<=e?t:e)/e}(parseFloat(e)||5,parseFloat(t)||0);if(Number.isNaN(c))return null;const d=Math.floor(c),u=c-d;return r()(d,(e=>a.push((0,s.jsx)(l,{color:o,fill:"full",width:i},e)))),u>=.75?a.push((0,s.jsx)(l,{color:o,fill:"full",width:i},a.length)):u>=.25&&a.push((0,s.jsx)(l,{color:o,fill:"half",width:i},a.length)),r()(5-a.length,(()=>a.push((0,s.jsx)(l,{color:o,fill:"empty",width:i},a.length)))),(0,s.jsx)(n.Fragment,{children:a})}},923297:(e,t,i)=>{function n({m:e=0,h:t=0}){let i;return i=t<=0?t:e>45?t+1:e>15?t+.5:t,{m:e,h:t,rm:t>0?0:e,rh:i}}function o(e){const t=Math.floor(e/3600);return n({m:Math.floor(e%3600/60),h:t})}i.d(t,{X:()=>n,u:()=>o})},844897:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(639693),o=i.n(n),r=i(985913),a=i(883119),s=i(785893);function l({category:e,ingredients:t,textSize:i="300"}){return(0,s.jsxs)(a.xu,{children:[e&&(0,s.jsx)(a.xu,{children:(0,s.jsx)(a.xv,{weight:"bold",size:i,children:e})}),(0,s.jsx)("ul",{children:t.map(((e,t)=>(0,s.jsx)("li",{"data-test-id":"recipe-ingredient",itemProp:"recipeIngredient",children:(0,s.jsx)(a.xu,{marginTop:1,children:(0,s.jsxs)(a.xv,{size:i,children:[e.amt||null," ",e.name]})})},t)))})]})}var c=i(134185),d=i(898781),u=i(578661);function p({columnGap:e,recipeProps:t,marginOverrides:i}){const n=(0,d.ZP)(),{diets:p,image:h,name:m,categorizedIngredients:_,fromAggregatedData:g}=t.recipe;let v;if(_&&_.length){const e=[];_.forEach((t=>e.push(t.ingredients)));const t=(f=o()(e),f.reduce(((e,t)=>e.concat(t)),[])).length;v=_&&_.length&&t?(0,r.Z)(n.ngettext('{{ count }} ingredient', '{{ count }} ingredients', t, 'Ingredients title and count in closeup recipe description', 'Ingredients title and count in closeup recipe description'),{count:t.toString()}):n._('Ingredients', 'Ingredients title and count in closeup recipe description', 'Ingredients title and count in closeup recipe description')}var f;return(0,s.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{marginTop:(null==i?void 0:i.outerMarginTop)||80}},children:(0,s.jsxs)(c.Z,{itemScope:!0,itemType:u.G,children:[(0,s.jsx)("meta",{content:m,itemProp:"name"}),(0,s.jsx)("meta",{content:h,itemProp:"image"}),(0,s.jsx)(a.xu,{"data-test-id":"ingredients-heading",marginBottom:4,children:(0,s.jsx)(a.X6,{size:"400",children:g?m:v})}),p&&p.length>0&&(0,s.jsx)(a.xu,{marginBottom:4,children:(0,s.jsx)(a.xv,{inline:!0,size:"200",children:p.join(" ")})}),Array.isArray(_)&&_.length>0&&(1===_.length?(0,s.jsx)(a.xu,{column:12,"data-test-id":"single-column-ingredients",children:_.map((({category:e,ingredients:t},n)=>(0,s.jsx)(a.xu,{marginBottom:(null==i?void 0:i.ingredientMarginBottom)||2,children:(0,s.jsx)(l,{category:e,ingredients:t,textSize:"100"})},n)))}):(0,s.jsxs)(a.xu,{display:"flex","data-test-id":"dual-column-ingredients",children:[(0,s.jsx)(a.xu,{column:6,children:_.slice(0,Math.ceil(_.length/2)).map((({category:e,ingredients:t},n)=>(0,s.jsx)(a.xu,{marginBottom:(null==i?void 0:i.ingredientMarginBottom)||2,children:(0,s.jsx)(l,{category:e,ingredients:t,textSize:"100"})},n)))}),e,(0,s.jsx)(a.xu,{column:6,children:_.slice(Math.ceil(_.length/2)).map((({category:e,ingredients:t},n)=>(0,s.jsx)(a.xu,{marginBottom:(null==i?void 0:i.ingredientMarginBottom)||2,children:(0,s.jsx)(l,{category:e,ingredients:t,textSize:"100"})},n)))})]}))]})})}},469823:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294),o=i(561195),r=i(883119),a=i(785893);function s({recipeData:e}){var t;if(null!==(t=e.aggregate_rating)&&void 0!==t&&t.rating_value&&e.aggregate_rating.review_count){var i,s,l;const t="number"==typeof(null===(i=e.cook_times)||void 0===i||null===(s=i.cook)||void 0===s?void 0:s.m)&&"number"==typeof(null===(l=e.cook_times.prep)||void 0===l?void 0:l.m)?`${e.cook_times.cook.m+e.cook_times.prep.m} minutes · `:"";return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)(o.Z,{rating:e.aggregate_rating.rating_value,max_rating:e.aggregate_rating.best_rating,width:12},e.aggregate_rating.rating_value),(0,a.jsx)(r.xv,{inline:!0,size:"200",children:` ${e.aggregate_rating.review_count} · ${t}`})]})}return null}},886858:(e,t,i)=>{i.d(t,{Z:()=>a,k:()=>r});const n=new Set(["bookmarks","client_tracking_params","get_page_metadata","in_nux","invite_code","original_referrer","source","top_level_source","top_level_source_depth"]),o=e=>!n.has(e)&&!e.startsWith("__track__");function r(e){return e.split(/([^=]+=[^=]+),/).filter(Boolean).reduce(((e,t)=>{const[i,n]=t.split("=");return e[i]=JSON.parse(n),e}),{})}const a=e=>e?Object.keys("object"==typeof e&&e||{}).filter((e=>"string"==typeof e)).filter(o).sort().map((t=>`${t}=${JSON.stringify(null==e[t]?null:e[t])}`)).join(","):""},932995:(e,t,i)=>{function n(e,t,i){const n=[...e],o=n.splice(t,1)[0];return n.splice(i,0,o),n}i.d(t,{Z:()=>n})},780280:(e,t,i)=>{i.d(t,{B:()=>u,LC:()=>c,P2:()=>l,fH:()=>d,gf:()=>p});var n=i(667294),o=i(608832),r=i(620707),a=i(785893);const s=(0,n.createContext)();function l({children:e,value:t}){const[i,l]=(0,n.useState)(t),c=(0,n.useMemo)((()=>({requestContext:i,updateRequestContext:e=>{const t={...i,...e};(0,r.Ak)(i,e)||l(t),(0,o.J)(t)}})),[i]);return(0,a.jsx)(s.Provider,{value:c,children:e})}const c=({children:e})=>{const t=(0,n.useContext)(s);if(!t)throw new Error("RequestContextConsumer must be used within a RequestContextProvider");return e(t.requestContext)},d=({children:e})=>{const t=(0,n.useContext)(s);if(!t)throw new Error("RequestContextConsumer must be used within a RequestContextProvider");return e(t.requestContext)};function u(){const e=(0,n.useContext)(s);if(!e)throw new Error("useRequestContext must be used within a RequestContextProvider");return e.requestContext}function p(){const e=(0,n.useContext)(s);if(!e)throw new Error("useUpdateRequestContext must be used within a RequestContextProvider");return e.updateRequestContext}},608832:(e,t,i)=>{let n;function o(e){n=e}function r(){return n}i.d(t,{J:()=>o,l:()=>r})},505920:(e,t,i)=>{i.d(t,{UZ:()=>u,Z8:()=>p,my:()=>h});var n=i(667294),o=(i(702664),i(6637)),r=i(425288),a=i(785893);function s(e,t,i){var n;const o=[...null!==(n=t[e][i.payload.name])&&void 0!==n?n:[],i.payload.handler],r={...t};return r[e]={...t[e],[i.payload.name]:o},r}function l(e,t,i){if(!t[e][i.payload.name])return t;const n=t[e][i.payload.name].filter((e=>e!==i.payload.handler)),o={...t};return o[e]={...t[e],[i.payload.name]:n},o}const{Provider:c,useHook:d}=(0,r.Z)("ResourceContext");function u({children:e}){const[{listeners:t,moreListeners:i},r]=(0,n.useReducer)(((e,t)=>{switch(t.type){case"addListener":return s("listeners",e,t);case"addMoreListener":return s("moreListeners",e,t);case"removeListener":return l("listeners",e,t);case"removeMoreListener":return l("moreListeners",e,t);default:return e}}),{listeners:{},moreListeners:{}});o.Z.fetchCompleteCallback=({resource:e,options:i,response:n,normalizedResponse:o,refresh:r,resourceSchema:a})=>{t[e]&&t[e].forEach((t=>t({isRefresh:r,normalizedResponse:o,options:i,schema:a,resource:e,response:n})))},o.Z.fetchMoreCompleteCallback=({resource:e,options:t,response:n,normalizedResponse:o,refresh:r,resourceSchema:a})=>{i[e]&&i[e].forEach((i=>i({isRefresh:r,normalizedResponse:o,options:t,schema:a,resource:e,response:n})))};const d=(0,n.useMemo)((()=>({listenerDispatch:r})),[]);return(0,a.jsx)(c,{value:d,children:e})}function p(e,t){const{listenerDispatch:i}=d();(0,n.useEffect)((()=>(i({type:"addListener",payload:{name:e,handler:t}}),()=>{i({type:"removeListener",payload:{name:e,handler:t}})})))}function h(e,t){const{listenerDispatch:i}=d();(0,n.useEffect)((()=>(i({type:"addMoreListener",payload:{name:e,handler:t}}),()=>{i({type:"removeMoreListener",payload:{name:e,handler:t}})})))}},379725:(e,t,i)=>{i.d(t,{U:()=>l,b:()=>c});var n=i(886858),o=i(6637),r=i(414327),a=i(718368);function s({fetchOptions:e,resource:t,retry:i}){return(l,c)=>{var d,u,p;const{bookmark:h,headers:m,options:_,refresh:g,schema:v}=e,f=(0,n.Z)(_);if(null!==(d=c().resources)&&void 0!==d&&null!==(u=d[t])&&void 0!==u&&null!==(p=u[f])&&void 0!==p&&p.fetching&&!i)return Promise.resolve();const y=i?i.bookmark:h,x=y?{..._,bookmarks:[y]}:_;return l((0,r.LQ)(t,_,!0)),o.Z.create(t,x).callGet(void 0,m).then((n=>{var c,d,u;const p=null===(c=n.resource_response)||void 0===c?void 0:c.data,[m]=n.bookmarks||[];if(Array.isArray(p)&&0===p.length&&m&&m!==a.q){const n=i?i.count:0;if(!(n>=a.s))return l(s({resource:t,fetchOptions:e,retry:{count:n+1,bookmark:m}}))}null===(d=o.Z.customDataManipulations)||void 0===d||d.call(o.Z,t,p);const{normalizedResponse:f,resourceSchema:y}=(null===(u=o.Z.normalizeResponse)||void 0===u?void 0:u.call(o.Z,{data:p,opts:{bookmark:h,options:_,schema:v},resource:t}))||{normalizedResponse:null,resourceSchema:void 0};return h?(l((0,r.Dm)(t,_,n,f,y)),o.Z.fetchMoreCompleteCallback&&o.Z.fetchMoreCompleteCallback({resource:t,options:_,response:n,normalizedResponse:f,refresh:g,resourceSchema:y})):(l((0,r.Sr)(t,_,n,f,g,y)),o.Z.fetchCompleteCallback&&o.Z.fetchCompleteCallback({resource:t,options:_,response:n,normalizedResponse:f,refresh:g,resourceSchema:y})),Promise.resolve()}),(e=>{l((0,r.Tl)(t,_,e))}))}}const l=(e,{bookmark:t,headers:i,options:n,schema:o})=>s({resource:e,fetchOptions:{bookmark:t,headers:i,options:n,refresh:!1,schema:o}}),c=(e,{headers:t,options:i,schema:n})=>s({resource:e,fetchOptions:{headers:t,options:i,refresh:!0,schema:n}})},718368:(e,t,i)=>{i.d(t,{q:()=>n,s:()=>o});const n="-end-",o=10},204088:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(704115),o=i(826067),r=i(314880);function a({experimentHash:e,windowIsInFocus:t}){try{const i={"X-Pinterest-AppState":t?"active":"background"};e&&(i["X-Pinterest-ExperimentHash"]=e);const a=(0,n.Z)();a.force_country&&(i["X-Force-Country"]=a.force_country);const s=(0,o.JJ)();if(s&&(i["X-Pinterest-Source-Url"]=s),"undefined"!=typeof window){const e=(0,r.H)();e&&(i["X-Pinterest-PWS-Handler"]=e)}return i}catch(i){return{}}}},338739:(e,t,i)=>{i.d(t,{AF:()=>n,KK:()=>o,aW:()=>s,cR:()=>r,se:()=>l,zP:()=>a});const n="CREATE_COMPLETE",o="FETCHING",r="FETCH_ERROR",a="FETCH_COMPLETE",s="FETCH_MORE_COMPLETE",l="RESOURCE_INVALIDATE"},414327:(e,t,i)=>{i.d(t,{Dm:()=>l,LQ:()=>r,Sr:()=>s,Tl:()=>a,XM:()=>o,jB:()=>c});var n=i(338739);function o(e,t,i,o){return{type:n.AF,payload:{resource:e,options:t,response:i,normalizedResponse:o}}}function r(e,t,i){return{type:n.KK,payload:{resource:e,options:t,isFetching:i}}}const a=(e,t,i)=>({type:n.cR,payload:{resource:e,options:t,error:i}});function s(e,t,i,o,r,a){return{type:n.zP,payload:{isRefresh:r,normalizedResponse:o,options:t,resource:e,response:i,schema:a}}}function l(e,t,i,o,r){return{type:n.aW,payload:{resource:e,options:t,response:i,normalizedResponse:o,schema:r}}}function c(e,t){return{type:n.se,payload:{resource:e,optionsOrOptionsKey:t}}}},784590:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(702664),r=i(886858),a=i(718368),s=i(276775),l=i(780280),c=i(379725);const d={};function u(e){const{enabledRouteRefresh:t,__unstableEnableSuspenseSupport:i,headers:u,name:p,noCache:h,options:m,schema:_}=null!=e?e:{name:"DisabledResource",options:null},g=!e,v=(0,o.useDispatch)(),f=(0,r.Z)(m),y=(0,n.useRef)(null),x=(0,n.useRef)(),b=(0,s.useHistory)(),w=b&&"POP"!==b.action,P=e=>(e[p]||d)[f]||d,S=(0,o.useSelector)((({resources:e})=>P(e).nextBookmark)),T=(0,o.useSelector)((({resources:e})=>P(e).data)),I=(0,o.useSelector)((({resources:e})=>P(e).auxData)),k=(0,o.useSelector)((({resources:e})=>P(e).error)),E=(0,o.useSelector)((({resources:e})=>Boolean(P(e).fetching))),A=Boolean(k)||void 0!==T,C=A&&!E&&S===a.q,j=Boolean(A&&t&&w&&!g),[R,D]=(0,n.useState)(j),O=(0,n.useCallback)((e=>{y.current=v((0,c.U)(p,{options:m,schema:_,bookmark:e,headers:u}))}),[v,p,f,_,u]),L=()=>{y.current=v((0,c.b)(p,{options:m,schema:_,headers:u}))},{isBot:M}=(0,l.B)(),N=()=>{if(!g&&x.current!==f){const e=void 0===x.current;x.current=f,!A&&!E||e&&k&&(({httpStatus:e})=>!e||e>=500)(k)?O():(!M&&h||j)&&L()}};(0,n.useEffect)((()=>{i||N()})),i&&N();const z=(0,n.useCallback)((()=>{g||(L(),D(!0))}),[g,c.b,p,f,u,D]),F=(0,n.useCallback)((()=>{!S||C||E||g||O(S)}),[g,O,S,C,E]);if(y.current)if(A&&!E)y.current=null;else if(i)throw y.current;const Z=(0,n.useRef)({auxData:void 0,data:void 0,error:void 0,fetchMore:F,isAtEnd:!1,isFetching:!1,isLoaded:!1,isRefreshing:!1,nextBookmark:void 0,refresh:z}),B={auxData:I,data:T,error:k,fetchMore:F,isAtEnd:C,isFetching:E,isLoaded:A,isRefreshing:R,nextBookmark:S,refresh:z};return(0,o.shallowEqual)(B,Z.current)||(!R||!Z.current.data&&j||(0,o.shallowEqual)(B.data,Z.current.data)||(B.isRefreshing=!1,D(!1)),Z.current=B),Z.current}},418614:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(784590),o=i(50286),r=i(780280),a=i(826067);var s=i(276775);function l({checkExperiments:e,disableFetch:t,viewer:i}){var n;const l=(0,s.useLocation)(),c=(0,s.useRouteMatch)(),d=(0,r.B)(),u=function({advertiser:e,deviceType:t,location:{pathname:i,search:n},inviteCode:o,match:{params:r,path:s},viewer:l}){return{advertiser:e,deviceType:t,routeData:{inviteCode:o,matchPath:s,params:r,parsedSearch:(0,a.mB)(n),pathname:i,search:n},user:{country:l.country||void 0,id:l.id||void 0,isAuth:l.isAuth,isEmployee:!!l.isEmployee||!1,isPartner:!!l.isPartner||!1,username:l.username||void 0,firstHomeFeedRequestAfterNux:l.firstHomeFeedRequestAfterNux||void 0}}}({advertiser:d.advertiser,deviceType:(0,o.Mq)(d),location:l,match:c,viewer:i,inviteCode:null!==(n=d.inviteCode)&&void 0!==n?n:""}),p=!!t&&t(u),h=!(!p&&e)||e(d.experimentsClient);return{args:u,fetchDisabled:p||!h}}var c=i(19121);function d({getOptions:e,checkExperiments:t,disableFetch:i,...o}){const r=function(){const e=(0,c.Z)();return{country:e.country||void 0,id:e.id||void 0,isAuth:e.isAuth,isEmployee:!!e.isEmployee||!1,isPartner:!!e.isPartner||!1,username:e.username||void 0,firstHomeFeedRequestAfterNux:e.firstHomeFeedRequestAfterNux||void 0}}(),{args:a,fetchDisabled:s}=l({checkExperiments:t,disableFetch:i,viewer:r}),d=e?e(a):void 0;return(0,n.Z)(s?null:{options:d,...o})}},817656:(e,t,i)=>{i.d(t,{AB:()=>n,Ej:()=>o,Sf:()=>r});const n=412,o=429,r=500},134185:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);const o=e=>{const t=e.itemType?{itemScope:!0,itemType:e.itemType}:{};return(0,n.jsx)("div",{"data-test-id":"rich-pin-information",...t,children:e.children||null})}},578661:(e,t,i)=>{i.d(t,{G:()=>n});const n="https://schema.org/Recipe"},736688:(e,t,i)=>{i.d(t,{QO:()=>l,V3:()=>a,cO:()=>u,dn:()=>c,fP:()=>d,j1:()=>p,v_:()=>s});var n=i(841726),o=i(867820),r=i(623568);const a=e=>{const{thumbnail:t,url:i,width:n,height:o,duration:r}=e||{};return t&&i&&n&&o&&{thumbnail:t,url:i,width:n,height:o,duration:r}||void 0};function s(e,t){if(t&&t.products&&t.products[0]){const i=t.products[0],n=!(!i.name&&!e),r=!(!t.aggregate_rating||0===t.aggregate_rating.rating_count&&0===t.aggregate_rating.review_count||Number.isNaN(parseFloat(t.aggregate_rating.rating_value))),a=!(!i.offer_summary||!i.offer_summary.min_price&&!i.offer_summary.price),s=n&&(r||a);return(({isEligible:e,hasName:t,hasAggregateRating:i,hasOffers:n})=>{(0,o.My)("closeup_main_pin.leaf_snippet.is_product",{isEligible:e,hasName:t,hasAggregateRating:i,hasOffers:n})})({isEligible:s,hasName:n,hasAggregateRating:r,hasOffers:a}),s}return!1}const l=(e,{userName:t,fullName:i})=>{const n=t||"";return{"@type":"Person",name:i||n,url:e+"/"+n}};function c(e,t,i,o,r,a,s,l){i=i.trim(),t=t.trim();let c="";c=s&&l&&!t&&a&&s("seo_title_fallback_snippets_ffe").anyEnabled?t||a||i||o:t||i||o;const d=()=>t||r;if(!e||!e.metatags)return{title:c,description:i||d()};const{description:u=""}=e.metatags;var p;return{title:c,description:(p=u,(0,n.o)(p||"").trim())||d()}}const d=(e,t,i)=>{let n=t;return i?(n="recipe"===e?i._('Pinterest Recipe', 'pin.closeup.leafsnippet.recipe', 'Default recipe title and description for crawlers'):"howto"===e?i._('Pinterest How To', 'pin.closeup.leafsnippet.howto', 'Default how to title and description for crawlers'):"video"===e?i._('Pinterest Video', 'pin.closeup.leafsnippet.video', 'Default video title and description for crawlers'):"product"===e?i._('Pinterest Product', 'pin.closeup.leafsnippet.product', 'Default product title and description for crawlers'):i._('Pin page', 'pin.closeup.leafsnippet.pin', 'Default pin title and description for crawlers'),{fallbackTitle:n,fallbackDescription:n}):{fallbackTitle:n,fallbackDescription:n}},u=e=>{if(!e)return;const t=e.rating_count,i=e.review_count;if(!(!!t||!!i)||Number.isNaN(parseFloat(e.rating_value)))return;const n=t||i;return{"@type":"AggregateRating",ratingValue:e.rating_value,ratingCount:n,bestRating:5,worstRating:1}},p=(e,t=!0)=>{var i,n,o,a;const s=!!(0,r.iR)(e.videos),l=t&&!!(0,r.cL)({embedSrc:null===(i=e.embed)||void 0===i?void 0:i.src,embedSubtype:null===(n=e.embed)||void 0===n?void 0:n.subtype,embedType:null===(o=e.embed)||void 0===o?void 0:o.type}),c=!(null===(a=e.story_pin_data)||void 0===a||!a.total_video_duration);return s||l||c}},857079:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(883119),o=i(785893);function r({accessibilityLabel:e}){return(0,o.jsx)(n.kC,{alignItems:"center",justifyContent:"center",children:(0,o.jsx)(n.$j,{accessibilityLabel:e,show:!0})})}},995228:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294),o=i(966476),r=i(464228),a=i(785893);function s({children:e,fallback:t,dangerouslyServerRenderForGraphQL:i=!1}){const s=t||null,l=(0,o.Z)(),c=(0,r.P)();return c&&"legacy"!==c?i||l?(0,a.jsx)(n.Suspense,{fallback:s,children:e}):s:(0,a.jsx)(n.Suspense,{fallback:s,children:e})}},947599:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i(995228).Z},909499:(e,t,i)=>{i.d(t,{Hd:()=>a,_R:()=>o,lw:()=>n,wF:()=>r});const n={PINS:"pins",PINS_BUYABLE:"buyable_pins",PINS_MINE:"my_pins",PINS_VIDEO:"videos",BOARDS:"boards",USERS:"users",IDEA_PINS:"idea_pins"},o=e=>{switch(e){case n.PINS:return 43;case n.PINS_MINE:return 107;case n.PINS_BUYABLE:return 254;case n.PINS_VIDEO:return 3306;case n.BOARDS:return 44;case n.USERS:return 45;default:return null}},r=e=>{switch(e){case n.PINS:return 60;case n.PINS_MINE:return 63;case n.PINS_BUYABLE:return 3800;case n.PINS_VIDEO:return 64;case n.BOARDS:return 61;case n.USERS:return 62;default:return null}},a=e=>{switch(e){case n.USERS:return 1000392;case n.PINS_BUYABLE:return 1000391;case n.PINS:default:return 29}}},862628:(e,t,i)=>{function n(e){return(e||"").trim().replace(/\s+/g," ")}i.d(t,{Z:()=>n})},648284:(e,t,i)=>{function n({appliedProductFilters:e,autoCorrectionDisabled:t,filters:i,query:n,scope:o,selectedPinImgSig:r,user:a}){const s=[o,i,e,a,r,n].map((e=>null!=e?e:"")).join(":");return t?"auto-correction-disabled:"+s:s}function o(e){const{autoCorrectionDisabled:t,appliedProductFilters:i,appliedFilters:n,filters:o,selectedPinImgSig:r,query:a,rs:s,scope:l,bubbleId:c,user:d}=e;return{name:"BaseSearchResource",options:function({autoCorrectionDisabled:e=!1,appliedFilters:t=null,appliedProductFilters:i=null,bubbleId:n=null,filters:o=null,query:r=null,rs:a="direct_navigation",scope:s="pins",selectedPinImgSig:l=null,sourceId:c=null,user:d}){return{article:n,applied_filters:t,appliedProductFilters:i,auto_correction_disabled:e,corpus:l?"personalize":null,customized_rerank_type:l?"manas_graph_sage_only_wand_rewrite":null,filters:o,query:r,query_pin_sigs:l,redux_normalize_feed:!0,rs:a,scope:s,source_id:c,user:d}}({autoCorrectionDisabled:!!t,appliedProductFilters:i,appliedFilters:n,filters:o,query:a,rs:s,scope:l,selectedPinImgSig:r,bubbleId:c,user:d})}}i.d(t,{Ht:()=>o,Tb:()=>n})},706922:(e,t,i)=>{function n(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function o(e,t){if(n(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(let r=0;r<i.length;r+=1)if(!Object.prototype.hasOwnProperty.call(t,i[r])||!n(e[i[r]],t[i[r]]))return!1;return!0}i.d(t,{Z:()=>o})},835209:(e,t,i)=>{function n({richPinData:e={}}){return((null==e?void 0:e.products)||[])[0]}i.d(t,{Z:()=>n})},53325:(e,t,i)=>{i.d(t,{$O:()=>s,GZ:()=>c,OE:()=>d,Xv:()=>l,Z0:()=>n,_z:()=>r,fM:()=>a,qA:()=>o,zX:()=>u});const n=40,o=4,r=106,a=133,s=.1,l=10,c=246,d=197,u=236},458882:(e,t,i)=>{i.d(t,{l:()=>r,r:()=>a});var n=i(667294);const o=(0,n.createContext)(null),r=()=>(0,n.useContext)(o),a=o.Provider},667679:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(458882),o=i(780679);const r=()=>{const e=(0,o.g)(),t=(0,n.l)();return i=>{const{mobileOptions:n,desktopOptions:o,reason:r,attributionLabel:a}=i;e?e.showDesktopSignupModal({signupFlow:"login"===(null==o?void 0:o.modalType)?{type:"login"}:{type:"signup"},reason:r,attributionLabel:a,...null==o?void 0:o.modalOptions}):t&&t.showMobileSignupModal({reason:r,attributionLabel:a,headingType:null==n?void 0:n.headingType})}}},31149:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#EFEFEF"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.1106 19.6408C18.2759 19.551 18.4653 19.5 18.6667 19.5H37.3333C37.5535 19.5 37.7594 19.561 37.9351 19.667C37.9351 19.667 37.9352 19.667 37.9352 19.667L28.7395 27.2024C28.3095 27.5547 27.6905 27.5547 27.2605 27.2024L18.0648 19.667C18.0799 19.6579 18.0951 19.6492 18.1106 19.6408ZM14 20.8611V20.6667C14 18.0893 16.0893 16 18.6667 16H37.3333C39.9107 16 42 18.0893 42 20.6667V20.8611V34.6667C42 37.244 39.9107 39.3333 37.3333 39.3333H18.6667C16.0893 39.3333 14 37.244 14 34.6667V20.8611ZM38.5 23.7292V34.6667C38.5 35.311 37.9777 35.8333 37.3333 35.8333H18.6667C18.0223 35.8333 17.5 35.311 17.5 34.6667V23.7292L25.0422 29.9095C26.7622 31.319 29.2378 31.319 30.9578 29.9096L38.5 23.7292Z",fill:"black"})]})}},659522:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("path",{d:"M56 28C56 12.536 43.464 0 28 0S0 12.536 0 28c0 13.975 10.24 25.56 23.625 27.66V36.094h-7.11V28h7.11v-6.169c0-7.017 4.18-10.893 10.576-10.893 3.064 0 6.268.546 6.268.546v6.891h-3.53c-3.479 0-4.564 2.159-4.564 4.373V28h7.766l-1.242 8.094h-6.524V55.66C45.761 53.56 56 41.975 56 28Z",fill:"#1877F2"}),(0,n.jsx)("path",{d:"M38.9 36.094 40.14 28h-7.765v-5.252c0-2.215 1.085-4.373 4.563-4.373h3.53v-6.89s-3.203-.547-6.267-.547c-6.396 0-10.576 3.876-10.576 10.893V28h-7.11v8.094h7.11V55.66a28.206 28.206 0 0 0 8.75 0V36.094h6.524Z",fill:"#fff"})]})}},331744:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("path",{d:"M28 56c15.464 0 28-12.536 28-28S43.464 0 28 0 0 12.536 0 28s12.536 28 28 28Z",fill:"#00B900"}),(0,n.jsx)("path",{d:"M46.625 26.32c0-8.335-8.354-15.115-18.625-15.115-10.267 0-18.625 6.78-18.625 15.115 0 7.471 6.627 13.73 15.578 14.91.606.13 1.432.401 1.642.92.187.47.122 1.208.06 1.684l-.265 1.596c-.08.471-.373 1.843 1.615 1.003 1.988-.835 10.724-6.314 14.634-10.812 2.693-2.964 3.986-5.969 3.986-9.3Z",fill:"#fff"}),(0,n.jsx)("path",{d:"M24.215 22.293H22.91c-.201 0-.364.163-.364.364v8.115c0 .2.163.364.364.364h1.306c.2 0 .364-.163.364-.364v-8.12a.363.363 0 0 0-.364-.36ZM33.208 22.293H31.9c-.2 0-.364.163-.364.364v4.82l-3.72-5.02c-.009-.015-.018-.024-.027-.038l-.005-.005-.023-.023c-.005 0-.005-.005-.005-.005-.005-.005-.014-.01-.019-.014l-.009-.01c-.005-.004-.014-.008-.019-.013-.004-.005-.009-.005-.009-.005a.036.036 0 0 0-.019-.01c-.004 0-.009-.004-.009-.004-.005-.004-.014-.004-.019-.01-.004 0-.009-.004-.014-.004l-.023-.01c-.005 0-.01 0-.014-.004-.01 0-.014-.005-.019-.005h-.014c-.004 0-.014 0-.018-.004H26.212c-.2 0-.364.163-.364.364v8.115c0 .2.164.364.364.364h1.307c.2 0 .364-.163.364-.364v-4.82l3.724 5.03a.283.283 0 0 0 .093.089s.005 0 .005.005c.01.004.014.009.023.014.005 0 .005.004.01.004.004.005.01.005.018.01.005.004.01.004.02.009.004 0 .008.005.008.005.01.004.02.004.024.009h.004c.028.01.061.014.094.014h1.306c.201 0 .364-.163.364-.364v-8.125a.37.37 0 0 0-.368-.36ZM21.065 29.097h-3.551v-6.445c0-.2-.164-.364-.364-.364h-1.307c-.2 0-.364.163-.364.364v8.115c0 .098.037.187.103.252l.004.005.005.005c.065.06.154.102.252.102h5.217c.201 0 .364-.163.364-.364v-1.306a.358.358 0 0 0-.359-.364ZM40.422 24.323c.201 0 .364-.163.364-.364v-1.307c0-.2-.163-.364-.364-.364h-5.217a.353.353 0 0 0-.252.103l-.005.005c0 .004-.004.004-.004.004a.373.373 0 0 0-.103.252v8.115c0 .098.037.187.103.252l.004.005.005.005c.065.06.154.102.252.102h5.217c.201 0 .364-.163.364-.364v-1.306c0-.2-.163-.364-.364-.364h-3.55v-1.372h3.55c.201 0 .364-.164.364-.364v-1.307c0-.2-.163-.364-.364-.364h-3.55v-1.372h3.55v.005Z",fill:"#00B900"})]})}},757146:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#fff"}),(0,n.jsx)("rect",{x:".5",y:".5",width:"55",height:"55",rx:"27.5",stroke:"#767676",strokeOpacity:".4"}),(0,n.jsx)("path",{d:"M28 12c-9.012 0-16 6.604-16 15.52 0 4.664 1.912 8.696 5.024 11.48.26.232.42.56.428.912l.088 2.848c.028.908.964 1.5 1.796 1.132l3.176-1.4c.268-.12.572-.14.856-.064 1.46.4 3.012.616 4.632.616 9.012 0 16-6.604 16-15.52S37.012 12 28 12Z",fill:"url(#paint0_radial_3730_649)"}),(0,n.jsx)("path",{d:"m18.392 32.06 4.7-7.456a2.401 2.401 0 0 1 3.472-.64l3.74 2.804a.96.96 0 0 0 1.156-.004l5.048-3.832c.672-.512 1.552.296 1.104 1.012l-4.704 7.452a2.401 2.401 0 0 1-3.472.64l-3.74-2.804a.96.96 0 0 0-1.156.004l-5.048 3.832c-.672.512-1.552-.292-1.1-1.008Z",fill:"#fff"}),(0,n.jsx)("defs",{children:(0,n.jsxs)("radialGradient",{id:"paint0_radial_3730_649",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(18.16 43.826) scale(34.8672)",children:[(0,n.jsx)("stop",{stopColor:"#09F"}),(0,n.jsx)("stop",{offset:".61",stopColor:"#A033FF"}),(0,n.jsx)("stop",{offset:".935",stopColor:"#FF5280"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#FF7061"})]})})]})}},464240:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#1DA1F2"}),(0,n.jsx)("path",{d:"M24.34 42c11.37 0 17.591-9.429 17.591-17.591 0-.265 0-.53-.012-.796a12.596 12.596 0 0 0 3.087-3.207c-1.11.494-2.303.82-3.557.976a6.22 6.22 0 0 0 2.725-3.424 12.299 12.299 0 0 1-3.93 1.495 6.17 6.17 0 0 0-4.51-1.953 6.19 6.19 0 0 0-6.186 6.185c0 .483.06.953.157 1.411-5.136-.253-9.694-2.725-12.744-6.463a6.184 6.184 0 0 0-.832 3.111 6.2 6.2 0 0 0 2.749 5.148 6.254 6.254 0 0 1-2.797-.771v.084a6.196 6.196 0 0 0 4.955 6.065 6.028 6.028 0 0 1-1.628.217c-.397 0-.783-.036-1.157-.109a6.182 6.182 0 0 0 5.775 4.293 12.4 12.4 0 0 1-7.68 2.652c-.494 0-.989-.024-1.471-.084A17.587 17.587 0 0 0 24.34 42Z",fill:"#fff"})]})}},22641:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e=56}){return(0,n.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,n.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#25D366"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M39.206 16.65A15.75 15.75 0 0 0 27.99 12c-8.74 0-15.854 7.113-15.857 15.855a15.821 15.821 0 0 0 2.117 7.927L12 44l8.406-2.205a15.837 15.837 0 0 0 7.577 1.93h.007c8.74 0 15.853-7.114 15.856-15.857a15.76 15.76 0 0 0-4.64-11.218ZM27.99 41.047h-.005c-2.365 0-4.684-.636-6.708-1.837l-.482-.286-4.988 1.309 1.331-4.864-.313-.499a13.146 13.146 0 0 1-2.015-7.014c.003-7.266 5.915-13.178 13.185-13.178a13.09 13.09 0 0 1 9.318 3.865 13.098 13.098 0 0 1 3.856 9.324c-.003 7.267-5.915 13.18-13.179 13.18Zm7.23-9.871c-.397-.199-2.345-1.157-2.708-1.289-.364-.132-.628-.198-.891.198-.264.397-1.024 1.29-1.255 1.554-.231.264-.462.297-.858.099-.396-.199-1.673-.617-3.187-1.966-1.178-1.051-1.973-2.348-2.204-2.745-.231-.397-.024-.611.173-.808.178-.178.397-.463.595-.695.198-.23.264-.396.396-.66.132-.265.066-.496-.033-.695-.098-.198-.89-2.148-1.221-2.941-.322-.773-.649-.668-.892-.68a16.01 16.01 0 0 0-.759-.014c-.264 0-.693.099-1.057.495-.363.397-1.387 1.356-1.387 3.305 0 1.95 1.42 3.835 1.618 4.1.199.264 2.794 4.265 6.769 5.982.945.409 1.683.653 2.259.835.948.302 1.812.26 2.495.157.76-.114 2.344-.958 2.674-1.884.33-.925.33-1.719.23-1.884-.098-.166-.362-.266-.758-.464Z",fill:"#fff"})]})}},619277:(e,t,i)=>{i.d(t,{o$:()=>o,ty:()=>r,vE:()=>a});var n=i(425288);const{Provider:o,MaybeConsumer:r,useMaybeHook:a}=(0,n.Z)("inviteContext")},296011:(e,t,i)=>{i.d(t,{Z:()=>l,t:()=>c});var n=i(667294),o=i(6637),r=i(167912);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const s={};class l extends n.Component{constructor(...e){super(...e),a(this,"state",{invite:s[this.props.invite_code]||null,loaded:this.props.invite_code in s})}componentDidMount(){const{invite_code:e}=this.props;o.Z.create("InviteCodeMetadataResource",{invite_code:e}).callGet().then((t=>{if(t&&t.resource_response){const i=t.resource_response.data;s[e]=i,this.setState({invite:i,loaded:!0})}})).catch((()=>{this.setState({invite:null,loaded:!0})}))}render(){const{invite:e,loaded:t}=this.state;return t?this.props.children(e):null}}class c extends n.Component{constructor(...e){super(...e),a(this,"state",{invite:s[this.props.invite_code]||null,loaded:this.props.invite_code in s})}componentDidMount(){const{invite_code:e,relayEnvironment:t,inviteQuery:i}=this.props;(0,r.fetchQuery)(t,i,{invite_code:e}).subscribe({next:e=>{var t;if(null!==(t=e.v3GetInviteCodeQuery)&&void 0!==t&&t.data){const t=e.v3GetInviteCodeQuery;this.setState({invite:t,loaded:!0})}},error:()=>{this.setState({invite:null,loaded:!0})}})}render(){const{invite:e,loaded:t}=this.state;return t?this.props.children(e):null}}},867060:(e,t,i)=>{i.d(t,{c:()=>n,y:()=>o});const n={10:13098,11:13099,6:13100,5:13101,14:13102,12:13103,15:13104,8:13105,4:13106,1:13107,18:13108,19:13109,20:13110,21:13111,22:13112,23:13113,26:13114,27:13115,29:13116},o={pin:1,board:2,did_it:6,pinner:3,user:3,today_article:8}},223815:(e,t,i)=>{i.d(t,{U:()=>a,Z:()=>s});var n=i(755742),o=i(785893);const r=()=>{},a=e=>{e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()};function s({allowClickAndDrag:e,allowEsc:t,allowMediaPlay:i,allowScroll:s,children:l}){const c=e=>function(e,t){t&&e.keyCode===n.Z.ESCAPE||a(e)}(e,t);return(0,o.jsx)("div",{onAbort:a,onAnimationEnd:a,onAnimationIteration:a,onAnimationStart:a,onBlur:r,onCanPlay:i?r:a,onCanPlayThrough:a,onChange:a,onClick:e?r:a,onCompositionEnd:a,onCompositionStart:a,onCompositionUpdate:a,onContextMenu:a,onCopy:a,onCut:a,onDoubleClick:a,onDurationChange:a,onEmptied:a,onEncrypted:a,onEnded:a,onError:a,onFocus:r,onInput:a,onInvalid:a,onKeyDown:c,onKeyPress:c,onKeyUp:c,onLoad:a,onLoadedData:a,onLoadedMetadata:a,onLoadStart:a,onMouseDown:a,onMouseEnter:a,onMouseLeave:a,onMouseMove:e?r:a,onMouseOut:a,onMouseOver:a,onMouseUp:e?r:a,onPaste:a,onPause:a,onPlay:a,onPlaying:a,onProgress:a,onRateChange:a,onScroll:s?r:a,onSeeked:a,onSeeking:a,onSelect:a,onStalled:a,onSubmit:a,onSuspend:a,onTimeUpdate:a,onTouchCancel:a,onTouchEnd:e?r:a,onTouchMove:e?r:a,onTouchStart:e?r:a,onTransitionEnd:a,onVolumeChange:a,onWaiting:a,onWheel:a,children:l})}},704177:(e,t,i)=>{i.d(t,{Tl:()=>c,Xb:()=>u,ZP:()=>p,y7:()=>d});var n=i(231486),o=i(226198);class r{constructor(e){this._cookie=e}length(){const e=n.U2(this._cookie),t=e?JSON.parse(e):{};return Object.keys(t).length}getItem(e){const t=n.U2(this._cookie);return(t?JSON.parse(t):{})[e]}setItem(e,t){const i=n.U2(this._cookie),o=i?JSON.parse(i):{};o[e]=t,n.t8(this._cookie,JSON.stringify(o))}removeItem(e){const t=n.U2(this._cookie),i=t?JSON.parse(t):{};delete i[e],n.t8(this._cookie,JSON.stringify(i))}prependItem(e,t,i=1/0){const n=this.getItem(e),o=Array.isArray(n)?n:[];o.unshift(t),o.length>i&&o.pop(),this.setItem(e,o)}clear(){n.zN(this._cookie.name)}}class a{length(){return window.sessionStorage.length}getItem(e){const t=window.sessionStorage.getItem(e);return null!==t?JSON.parse(t):null}setItem(e,t){window.sessionStorage.setItem(e,JSON.stringify(t))}removeItem(e){window.sessionStorage.removeItem(e)}prependItem(e,t,i=1/0){const n=window.sessionStorage.getItem(e),o=n?JSON.parse(n):[];o.unshift(t),o.length>i&&o.pop(),window.sessionStorage.setItem(e,JSON.stringify(o))}clear(){window.sessionStorage.clear()}}class s{length(){return window.localStorage.length}getItem(e){const t=window.localStorage.getItem(e);return null!==t?JSON.parse(t):t}setItem(e,t){window.localStorage.setItem(e,JSON.stringify(t))}removeItem(e){window.localStorage.removeItem(e)}prependItem(e,t,i=1/0){const n=window.localStorage.getItem(e),o=n?JSON.parse(n):[];o.unshift(t),o.length>i&&o.pop(),window.localStorage.setItem(e,JSON.stringify(o))}clear(){window.localStorage.clear()}}const l=function(e){let t;try{t=e?window.sessionStorage:window.localStorage}catch(c){t=null}const i=e?o.Gl:o.sy;let n=!1;const l=t;if(l)try{l.setItem("testing","test"),l.removeItem("testing")}catch(c){if(c.code!==window.DOMException.QUOTA_EXCEEDED_ERR||0!==l.length)throw c;n=!0}else n=!0;return n?new r(i):e?new a:new s},c=function(e,t=[]){return[...t,e].join("_")},d=l(!0),u=l(!1),p={sessionStorage:d,localStorage:u,createKey:c}},957161:(e,t,i)=>{i.d(t,{L_:()=>o,Nh:()=>r,qn:()=>n});const n=(e,t=null)=>{try{return"undefined"!=typeof window&&window.localStorage.getItem(e)||t}catch(i){return console.error("Cannot access localStorage."),t}},o=e=>{try{if("undefined"==typeof window)return;window.localStorage.removeItem(e)}catch(t){console.error("Cannot access localStorage.")}},r=(e,t)=>{try{if("undefined"==typeof window)return;window.localStorage.setItem(e,t)}catch(i){console.error("Cannot access localStorage.")}}},696157:(e,t,i)=>{i.d(t,{E9:()=>l,F6:()=>h,MM:()=>P,MS:()=>n,On:()=>p,SI:()=>b,TJ:()=>c,TO:()=>u,W3:()=>s,WM:()=>x,XC:()=>f,XS:()=>S,Y9:()=>g,Yp:()=>m,_b:()=>o,_l:()=>v,bY:()=>d,e9:()=>r,iu:()=>y,kl:()=>w,om:()=>a,ou:()=>T,qo:()=>_});const n="visitedPagesBeforeLogin",o="_lastVisitedPages",r="visitedPinLandingPagesBeforeLogin",a="visitedBoardLandingPagesBeforeLogin",s="lastVisitedPage",l="unauthTopicsFollowed",c="unauthPins",d="unauthHybridLoginModalView",u="unauthHybridClickthroughCount",p="unauthHybridClickthroughTS",h="signupTime",m="signupInterestsPickerScrollDown",_="signupTriedSkipInputName",g="signupTriedSkipGender",v="signupInterestsPickerStartTime",f="signupUserLocale",y="signupUserCountry",x="uoiou",b="unauthRevisitation",w="urh",P="lineOAuthOneTimeCode",S="unlinkNetwork",T="mfapc"},622096:(e,t,i)=>{i.d(t,{L_:()=>o,Nh:()=>r,qn:()=>n});const n=(e,t)=>{if("undefined"==typeof window)return t;try{return window.sessionStorage.getItem(e)}catch(i){return window.console.error("Cannot access sessionStorage."),t}},o=e=>{if("undefined"!=typeof window)try{window.sessionStorage.removeItem(e)}catch(t){window.console.error("Cannot access sessionStorage.")}},r=(e,t)=>{if("undefined"!=typeof window)try{window.sessionStorage.setItem(e,t)}catch(i){window.console.error("Cannot access sessionStorage.")}}},124364:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(898781),o=i(883119),r=i(785893);function a({height:e,isDenseView:t,rounding:i,width:a}){const s=(0,n.ZP)();return(0,r.jsx)(o.xu,{color:"default",display:"flex",justifyContent:"center",alignItems:"center",position:"relative",rounding:i,overflow:"hidden",width:a,height:e,"data-test-id":"unavailable-pin",children:(0,r.jsxs)(o.kC,{direction:"column",alignItems:"center",children:[(0,r.jsx)(o.xu,{paddingY:t?2:4,children:(0,r.jsx)(o.JO,{accessibilityLabel:s._('Pin not available', 'story-pin.Closeup.UnavailableIdeaPin.icon.accessibilityLabel', 'Accessibility label on icon'),color:"default",icon:"alert",size:20})}),(0,r.jsx)(o.xv,{weight:"bold",children:s._('Unavailable', 'story-pin.Closeup.UnavailableIdeaPin.Unavailable', 'Text on an unavailable idea Pin that has been deleted')}),!t&&(0,r.jsx)(o.xu,{paddingY:1,children:(0,r.jsx)(o.xv,{children:s._('Removed by the creator', 'story-pin.Closeup.UnavailableIdeaPin.Removed', 'Text on an unavailable idea Pin explaining it has been removed by its creator')})})]})})}},226347:(e,t,i)=>{i.d(t,{Hx:()=>h,RC:()=>p,Wr:()=>u});var n=i(667294),o=i(311541),r=i(425288),a=i(924687),s=i(785893);const l=()=>Promise.resolve().then(i.bind(i,924687)),{Provider:c,useHook:d}=(0,r.Z)("IdeaPinVideoPlayer");function u({children:e}){const[t,i]=(0,o.Z)(l,a.initialState),r=(0,n.useMemo)((()=>({dispatch:i,ideaPinVideoPlayerControls:t})),[i,t]);return(0,s.jsx)(c,{value:r,children:e})}function p(){const{dispatch:e}=d();return(0,n.useMemo)((()=>({updateSeekTime:t=>{e({type:"UPDATE_SEEK_TIME",payload:{seekTime:t}})},clearSeekTime:()=>{e({type:"CLEAR_SEEK_TIME",payload:{seekTime:void 0}})},updateSeekingIdeaPin:t=>{e(t?{type:"UPDATE_SEEKING_IDEA_PIN",payload:{seekingIdeaPin:t}}:{type:"UPDATE_SEEKING_IDEA_PIN",payload:{seekingIdeaPin:t,seekTime:void 0}})},updateCurrentTime:t=>{e({type:"UPDATE_CURRENT_TIME",payload:{currentTime:t}})},updateDuration:t=>{e({type:"UPDATE_DURATION",payload:{duration:t}})}})),[e])}function h(){const{ideaPinVideoPlayerControls:e}=d();return e}},924687:(e,t,i)=>{i.r(t),i.d(t,{default:()=>o,initialState:()=>n});const n={seekTime:void 0,seekingIdeaPin:!1,currentProgressInfo:{currentTime:0,duration:0}};function o(e=n,t){switch(t.type){case"UPDATE_SEEK_TIME":return{...e,seekTime:t.payload.seekTime};case"CLEAR_SEEK_TIME":return{...e,seekTime:void 0};case"UPDATE_SEEKING_IDEA_PIN":return{...e,seekingIdeaPin:t.payload.seekingIdeaPin};case"UPDATE_CURRENT_TIME":return{...e,currentProgressInfo:{...e.currentProgressInfo,currentTime:t.payload.currentTime}};case"UPDATE_DURATION":return{...e,currentProgressInfo:{...e.currentProgressInfo,duration:t.payload.duration}};default:return e}}},940882:(e,t,i)=>{i.d(t,{J:()=>n,Z:()=>o});const n=-1;function o(e){switch(e){case 0:return"shopping-bag";case 1:return"tag";default:return"search"}}},985913:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(858142);const o=/\{\{\s*(\w+)\s*\}\}/g,r=(e,t)=>(0,n.Z)(o,e,t)},858791:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")},936776:(e,t,i)=>{i.d(t,{Z:()=>o});const n=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,o=e=>n.test(e)},927104:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t)=>e.length>t?e.substr(0,t-3).trim()+"…":e},858142:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t,i)=>t?t.replace(e,((e,t)=>i&&Object.prototype.hasOwnProperty.call(i,t)?i[t]:"")):""},66699:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(985913),o=i(858791);const r=(e,t)=>{const i={};return Object.keys(t).forEach((e=>{i[e]=t[e]?(0,o.Z)(t[e].toString()):""})),(0,n.Z)(e,i)}},883561:(e,t,i)=>{i.d(t,{ZP:()=>n});function n(e,t=80,i="…",n=false){let o;if(!e)return"";if(e.length<=t)return e;if(" "!==e[t-1]&&" "===e[t]||n)o=e.substring(0,t);else{const i=e.lastIndexOf(" ",t);o=e.substring(0,i)}return o=o.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""),o+i}},841726:(e,t,i)=>{i.d(t,{Z:()=>o,o:()=>n});function n(e,t){const i=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>|<!--[\s\S]*/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,((e,t)=>i.indexOf("<"+t.toLowerCase()+">")>-1?e:""))}const o=e=>e.replace(/(<([^>]+)>)/gi,"")},70061:(e,t,i)=>{function n(e){return e.replace(/[_.-](\w|$)/g,((e,t)=>t.toUpperCase()))}i.d(t,{Z:()=>n})},966113:(e,t,i)=>{i.d(t,{$B:()=>b,$h:()=>X,AH:()=>Je,Ay:()=>a,C5:()=>we,Cm:()=>be,Et:()=>E,F2:()=>x,GE:()=>B,GH:()=>D,HH:()=>Ge,Hk:()=>Ae,Hl:()=>Te,Hm:()=>w,Hv:()=>T,IA:()=>Ue,JR:()=>U,Jb:()=>Y,Jq:()=>oe,Js:()=>z,KD:()=>c,KU:()=>L,K_:()=>Z,LU:()=>p,Lq:()=>d,Ml:()=>Oe,Mo:()=>K,Ms:()=>_e,Mv:()=>Ie,N1:()=>tt,NW:()=>j,PR:()=>ve,Pe:()=>Ke,QL:()=>Xe,R_:()=>v,Rf:()=>W,Sr:()=>C,T1:()=>$e,TA:()=>r,TM:()=>Ne,To:()=>Se,U5:()=>me,UF:()=>pe,UX:()=>De,Uc:()=>ge,Um:()=>Ce,V$:()=>le,VO:()=>je,Vg:()=>ne,W3:()=>Le,W_:()=>Be,Wg:()=>A,X1:()=>u,X9:()=>o,XV:()=>Ve,ZB:()=>J,ZE:()=>q,_I:()=>G,_O:()=>ee,_P:()=>P,au:()=>M,c9:()=>N,cC:()=>We,cD:()=>ye,cP:()=>xe,cv:()=>ae,dF:()=>Qe,fP:()=>ke,gO:()=>V,hX:()=>de,hw:()=>f,iC:()=>k,iY:()=>ue,lf:()=>g,lq:()=>te,lw:()=>ce,m7:()=>he,mB:()=>He,mI:()=>qe,mx:()=>m,nB:()=>fe,o1:()=>Me,oi:()=>l,q4:()=>Pe,qe:()=>y,rO:()=>Ye,rT:()=>_,ru:()=>Fe,sX:()=>R,sr:()=>re,tS:()=>Ee,t_:()=>se,tq:()=>I,v0:()=>et,v3:()=>H,vB:()=>h,vK:()=>ze,w0:()=>Re,wU:()=>F,wq:()=>Ze,x$:()=>s,yF:()=>Q,z:()=>O,zX:()=>S,zw:()=>$,zz:()=>ie});var n=i(401060);const o=`${(0,n.Z)({site:"sterling",path:"/conversions/tag"})}`,r=`${(0,n.Z)({site:"sterling",path:"/?redirect=PINTEREST_TAG"})}`,a="https://business.pinterest.com/verified-merchant-program",s="https://apps.shopify.com/pinterest-1",l="https://woocommerce.com/products/pinterest-for-woocommerce/",c="/business/convert/",d="/_/_/help/",u="https://help.pinterest.com/business/article/report-offline-conversion-events",p="https://help.pinterest.com/business/article/modeled-conversions",h="https://help.pinterest.com/article/merchant-details",m="https://www.pinterest.com/_/_/help/business/article/third-party-and-dynamic-tracking",_="/settings/account-settings/",g="/password/reset/",v="https://www.pinterest.com/_/_/policy/privacy-policy/",f="https://www.pinterest.com/_/_/policy/copyright/",y="https://www.pinterestcareers.com/",x="https://www.pinterest.com/_/_/policy/terms-of-service/",b="https://policy.pinterest.com/de/impressum/",w="/business/create/",P="https://www.pinterest.com/_/_/help/articles/claim-your-website",S="https://www.pinterest.com/settings/claim",T="https://www.pinterest.com/_/_/help/business/article/bulk-upload-video-pins",I="https://www.pinterest.com/_/_/help/business/article/conversion-insights",k="https://www.pinterest.com/_/_/help/business/article/pinterest-tag-implementation-overview",E="https://www.pinterest.com/_/_/help/business/article/enhanced-match",A="https://www.pinterest.com/_/_/help/business/article/automatic-enhanced-match",C="https://www.pinterest.com/_/_/help/business/article/share-and-manage-access-to-your-ad-accounts",j="https://www.pinterest.com/_/_/business/",R="https://www.pinterest.com/_/_/help/articles/pinterest-analytics",D="274266067164",O="1655662257",L="ads.pinterest.com",M=`${(0,n.Z)({site:"sterling"})}`,N="https://pinterest.onelink.me/TVSr/dwebios",z="https://pinterest.onelink.me/TVSr/dwebandroid",F="/_/_/about/",Z="https://www.pinterest.com/_/_/help/articles/block-or-unblock-someone",B="/about/copyright/dmca-pin/",U="https://tagmanager.google.com",H="694505692171-31closf3bcmlt59aeulg2j81ej68j6hk.apps.googleusercontent.com",V="https://www.pinterest.com/_/_/help/",W="https://business.pinterest.com",$="https://www.pinterest.com/pin/12345/",G="https://www.pinterest.com/_/_/policy/cookies/",K="https://www.pinterest.com/_/_/business/content/creative-best-practices",q="/login/",Y="https://help.pinterest.com/contact",X="https://developers.pinterest.com/docs/conversions/conversion-management/",J="https://policy.pinterest.com/merchant-guidelines",Q=`${(0,n.Z)({site:"sterling",path:"/promoted_pin_v2/campaign/"})}`,ee=`${(0,n.Z)({site:"analytics"})}`,te=`${(0,n.Z)({site:"analytics",path:"/audience-insights/"})}`,ie="https://trends.pinterest.com",ne="https://trends-internal.pinadmin.com",oe=`${(0,n.Z)({site:"www"})}/advertiser/quick-promote`,re="https://www.pinterest.com/business/verified-merchant/status",ae="https://policy.pinterest.com/notice-at-collection",se="https://careers.pinterest.com/",le="https://www.pinterest.com/_/_/business/business-terms-of-service/",ce="https://www.pinterest.com/_/_/help/",de="https://help.pinterest.com/?context=business",ue="https://developers.pinterest.com",pe="https://www.pinterest.com/_/_/help/articles/promoted-pins",he="https://help.pinterest.com/article/promoted-pins",me="/_/_/policy/terms-of-service/",_e="https://policy.pinterest.com/community-guidelines",ge="https://business.pinterest.com/business-terms-of-service",ve=["CA"],fe=["CA"],ye="https://accounts.pinterest.com",xe="https://www.pinterest.com/_/_/help/contact",be="https://www.pinterest.com/_/_/business/Pinterest-product-specs",we="https://www.pinterest.com/_/_/help/business/article/pinterest-product-specs",Pe="https://www.pinterest.com/_/_/help/business/article/story-pins",Se="https://help.pinterest.com/business/article/audience-targeting",Te="https://pinterest.com/_/_/help/article/your-privacy-and-data-settings",Ie="https://pinterest.com/_/_/help/article/update-your-search-privacy",ke="https://pinterest.com/_/_/help/article/personalization-and-data#info-ad",Ee="https://www.pinterest.com/_/_/help/article/third-party-analytics-or-advertising-providers-pinterest-uses-or-allows",Ae="https://help.pinterest.com/business/article/about-catalogs",Ce="https://help.pinterest.com/business/article/data-source-setup",je="https://help.pinterest.com/business/article/data-source-ingestion",Re="https://help.pinterest.com/business/article/create-product-groups",De="https://help.pinterest.com/en/business/article/before-you-get-started-with-catalogs#section-9441",Oe="https://help.pinterest.com/en/business/article/promote-your-product-groups",Le="https://pinterest.com/_/_/help/landing/request-a-feature",Me="https://www.pinterest.com/_/_/help/business/article/video-pins",Ne="ms-windows-store://pdp/?productid=9PFHDSF91B9R",ze="https://www.pinterest.com/_/_/newsroom/",Fe="https://www.pinterest.com/_/_/policy/",Ze="https://www.pinterest.com/_/_/help/business/article/set-up-the-pinterest-tag",Be="https://www.pinterest.com/_/_/help/business/article/install-the-pinterest-tag",Ue="https://www.pinterest.com/_/_/help/business/article/google-tag-manager-and-pinterest-tag",He="https://www.pinterest.com/_/_/help/business/article/squarespace-and-pinterest-tag",Ve="https://www.pinterest.com/_/_/help/business/article/bigcommerce-and-pinterest-tag",We="https://help.pinterest.com/business/article/before-you-get-started-with-catalogs",$e="https://help.pinterest.com/business/article/verified-merchant-program",Ge=`${(0,n.Z)({site:"sterling",path:"/conversions/tag-health"})}`,Ke=`${(0,n.Z)({site:"analytics",path:"/conversion-insights/"})}`,qe="https://pinterest.com/_/_/help/article/manage-your-linked-business-account",Ye="/add-account",Xe="/settings/account-settings/",Je="/settings/personal-information",Qe=`${(0,n.Z)({site:"sterling",path:"/recommendations"})}`,et="/business/hub",tt="https://pinterest.com/_/_/help/article/protect-your-account"},700380:(e,t,i)=>{function n(e,t){let i;const n=(...n)=>{i||(e(...n),i=setTimeout((()=>i=null),t))};return n.cancel=()=>{void 0!==i&&clearTimeout(i)},n}i.d(t,{Z:()=>n})},430323:(e,t,i)=>{i.d(t,{Z:()=>f});var n=i(667294),o=i(722767),r=i(706922),a=i(245474),s=i(558068),l=i(350118),c=i(780280),d=i(790123),u=i(425288);const{Provider:p,useMaybeHook:h}=(0,u.Z)("timeSpentContext");var m=i(785893);function _(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class g extends n.Component{constructor(e){super(e),_(this,"componentWillUnmount",(()=>{this.unregisterComponent()})),_(this,"getContext",(()=>{const{clientTrackingParams:e,component:t,element:i,objectId:n,timeSpentContext:o,view:r,viewParameter:a}=this.props;return{view:r||o&&o.view,viewParameter:a||o&&o.viewParameter,component:t||o&&o.component,element:i,objectId:n||o&&o.objectId,clientTrackingParams:e||o&&o.clientTrackingParams,getParentUuid:()=>this.getUuid(),getGrandparentUuid:()=>this.getParentId()}})),_(this,"getLoggerContext",(()=>{const e={...this.getContext()};return delete e.getParentUuid,e})),_(this,"getParentId",(()=>{const{timeSpentContext:e,shouldUseGrandparentId:t=!1}=this.props;if(t&&e&&e.getGrandparentUuid){const t=e.getGrandparentUuid();if(t)return t}return e&&e.getParentUuid?e.getParentUuid():void 0})),_(this,"getUuid",(()=>this.state.timedPair?this.state.timedPair.uuid:void 0)),_(this,"getTimedPair",(()=>this.state.timedPair)),_(this,"setTimedPair",(e=>this.setState({timedPair:e}))),_(this,"isRegistered",!1),_(this,"registerComponent",(()=>{this.props.timeSpentManager.registerComponent(this),this.isRegistered=!0})),_(this,"unregisterComponent",(()=>{this.isRegistered&&(this.props.timeSpentManager.unregisterComponent(this),this.isRegistered=!1)})),_(this,"handleVisibilityChange",(e=>{const{intersectionRatio:t}=e[0],{bottom:i,left:n,right:o,top:r}=e[0].intersectionRect;t>0?this.registerComponent():0===t&&(0===i&&0===n&&0===o&&0===r?this.unregisterComponent():this.registerComponent())})),this.state={timedPair:new a.Z(this.getLoggerContext())}}componentDidUpdate(e){!this.isRegistered||e.view===this.props.view&&e.viewParameter===this.props.viewParameter&&e.component===this.props.component&&e.element===this.props.element&&e.objectId===this.props.objectId&&(0,r.Z)(e.auxData,this.props.auxData)&&(0,r.Z)(e.viewData,this.props.viewData)||(this.unregisterComponent(),setTimeout(this.registerComponent))}render(){const{children:e}=this.props;return(0,m.jsx)(p,{value:this.getContext(),children:(0,m.jsx)(o.Z,{options:{threshold:0},onVisibilityChange:this.handleVisibilityChange,children:n.Children.only(e)})})}}function v(e){var t;const i=(0,s.Hv)(),o=h(),r=(0,d.w)(),a=(0,l.H0)(),{requestIdentifier:u=""}=(0,c.B)(),p={app_instance_id:u.slice(0,8),...null!==(t=e.auxData)&&void 0!==t?t:{}};return(0,n.useEffect)((()=>{null==r||r.setHistoryStackContext(i)}),[i,r]),(0,n.useEffect)((()=>{null==r||r.setPins(null!=a?a:{})}),[a,r]),r?(0,m.jsx)(g,{...e,auxData:p,timeSpentContext:o,timeSpentManager:r,children:e.children}):e.children}v.displayName="TimeSpent";const f=v},790123:(e,t,i)=>{i.d(t,{j:()=>u,w:()=>d});var n=i(829407),o=i(19121),r=i(407043),a=i(50286),s=i(425288),l=i(785893);const{Provider:c,useMaybeHook:d}=(0,s.Z)("TimeSpentManagerContext");function u({children:e,value:t}){const i=(0,r.v)(),s=(0,a.HG)(),{isAuth:d}=(0,o.Z)(),u=s&&d;return(0,n.Z)((()=>{document.hasFocus()&&t(i,u).registerApp(),t(i,u).addEventListeners()})),(0,l.jsx)(c,{value:t(i,u),children:e})}},245474:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(172045),o=i(17314);function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const a="undefined"!=typeof window&&window.performance&&window.performance.now?()=>Math.floor(1e6*window.performance.now()):()=>1e6*Date.now();const s=class{constructor(e){r(this,"start",(()=>(this.startTime=a(),this.startTime))),r(this,"end",(()=>(this.endTime=a(),this.duration=this.startTime?this.endTime-this.startTime:null,this.duration)));try{this.uuid=(0,n.Z)()}catch(t){this.uuid=(0,o.Z)()}e&&Object.assign(this,e)}}},784641:(e,t,i)=>{i.d(t,{E5:()=>c,T7:()=>n,Y_:()=>d,Yj:()=>a,d9:()=>p,nx:()=>u,pe:()=>s,xt:()=>l});i(883119);function n(e,t,i,n){const o=function(e,t){return t?"shop":0===e||2===e?"trending":1===e?"best":"article"}(e,t),r=function(e){return e.toLowerCase().replace(/[.,\/#!?$%\^&\*+;:{}=\-_`~()\’'"]/g,"").trim().replace(/\s+/g,"-")}(i);return`/today/${o}/${encodeURIComponent(r)}/${n}/`}const o={"www.pinterest.com":"US","www.pinterest.co.uk":"GB","www.pinterest.ca":"CA","www.pinterest.com.au":"AU","br.pinterest.com":"BR","www.pinterest.com.mx":"MX","ar.pinterest.com":"AR","www.pinterest.cl":"CL","co.pinterest.com":"CO","www.pinterest.de":"DE","www.pinterest.at":"AT","www.pinterest.ch":"CH","www.pinterest.fr":"FR","in.pinterest.com":"IN","id.pinterest.com":"ID","www.pinterest.jp":"JP"},r={US:"en",GB:"en",CA:"en",AU:"en",BR:"pt",MX:"es",AR:"es",CL:"es",CO:"es",PE:"es",DE:"de",AT:"de",CH:"de",FR:"fr",IN:"en",ID:"id",JP:"ja",IT:"it"},a=(e,t)=>{const i=r[e];return!(null===i||i!==t&&!t.startsWith(i))},s=e=>o[e],l=(e,t,i)=>e||(t||i||""),c=(e,t)=>e||((null==t?void 0:t.origin_pinner)||(null==t?void 0:t.pinner)),d=e=>"todayarticle"===e.type,u=e=>Array.isArray(e)&&e.length>0&&e.every((e=>"story"===e.type)),p=e=>{var t,i;return(null!==(t=e.height)&&void 0!==t?t:1)/(null!==(i=e.width)&&void 0!==i?i:1)}},482981:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(784641);function o(e){const{article_creator_user:t,display_type:i,feed_source:o,header_pin_id:r,id:a,is_product_pin_feed:s,title:l,video_pin:c}=e;switch(i){case 0:case 1:return l?(0,n.T7)(o,null!=s&&s,l,a):"";case 8:return null!=t&&t.username?`/${encodeURIComponent(t.username)}/`:"";case 3:case 6:return r?`/pin/${r}/`:"";case 2:return null!=c&&c.id?`/pin/${c.id}/`:"";default:return""}}},867820:(e,t,i)=>{i.d(t,{yl:()=>d,qJ:()=>p,Nc:()=>v,dy:()=>f,NC:()=>g,My:()=>m,tj:()=>h});var n=i(6637);const o="unauthHistories",r="authHistories",a="trackHistoryClickInternalUrl";var s=i(622096);let l=[];let c;function d(e){l.length&&(n.Z.create("UserRegisterTrackActionResource",{actions:l}).callUpdate({showError:!1,async:!e}),l=[],c=null)}function u(e,t){const i=(0,s.qn)(a);if((0,s.L_)(a),i)return;let n=(0,s.qn)(e);if(n=n?n.split(","):[],n.length){const e=`${t}.${n.reduce(((e,t)=>e+"-"+t))}`;l.push({name:e,aux_data:{}})}(0,s.L_)(e)}const p=e=>{u(o,e),u(r,`${e}_auth`),l.length&&d(!0)};function h(e,t){let i="undefined"!=typeof window&&window.encodeURIComponent&&encodeURIComponent(e)||e;t||(t={}),-1!==i.indexOf("%")&&(t.invalid_action&&(t.invalid_action_original=t.invalid_action),t.invalid_action=i,i="track_register_action.web.invalid_action.with_percent"),l.push({name:i,aux_data:t}),c||(c=setTimeout((()=>d()),5e3)),function(e,t){if("undefined"!=typeof window)try{const i=new URL(window.location.href).searchParams.get("consoleTra");if(window.PINTEREST_DEV_LOG||i){const i=window.PINTEREST_DEV_REGEX||"";i&&!(e||"").match(i)||(t&&"object"==typeof t&&Object.keys(t).length?console.log(e+": %O",t):console.log(e))}}catch(i){}}(e,t)}function m(e,t){h(e,{tags:t?{...t}:Object.freeze({})})}function _(e,t,i=!1){if("undefined"==typeof window)return;let n=(0,s.qn)(e);n=n?n.split(","):[],n.push(t),(0,s.Nh)(e,n.join()),e!==r&&m(`lex.${t}`),i&&(0,s.Nh)(a,!0)}function g(e,t=!1){_(o,e,t)}function v(e,t=!1){_(r,e,t)}const f=({event:e,provider:t})=>{m(`pinner_conversion.autologin.${t}.${e}`)}},52022:(e,t,i)=>{i.d(t,{S:()=>s,Z:()=>l});var n=i(667294),o=i(867820),r=i(53987),a=i(276775);const s=e=>(0,r.L6)(e)?"pin":(0,r.am)(e)?"board":(0,r.Xn)(e)?"login":(0,r.C$)(e)?"home":(0,r.cD)(e)?"profile":(0,r.dr)(e)?"ideas":(0,r.gT)(e)?"ideas-root":(0,r.tZ)(e)?"videos":(0,r.$Y)(e)?"article":(0,r.E0)(e)?"shopping-spotlight":(0,r.Zz)(e)?"today":(0,r.j8)(e)?"unauth-profile":"other";function l(){const e=(0,a.useLocation)();return(0,n.useCallback)((({action:t,item:i,within:n})=>{const r=s(e);(0,o.My)(`logged_out_product.interaction.${r}.${t}`,{item:i||"none",within:n||"none"})}),[e])}},207112:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294),o=i(883119),r=i(785893);class a extends n.Component{constructor(e){var t,i,o;super(e),o={manualTruncate:!1},(i="state")in(t=this)?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,this.ref=(0,n.createRef)()}componentDidMount(){const{maxHeightPx:e,shaveOptions:t={}}=this.props,n=this.ref&&this.ref.current;if(!n)return;const o=void 0===n.textContent?"innerText":"textContent",r=n[o];("boolean"!=typeof t.spaces||t.spaces?r.split(" "):r).length<2?this.setState({manualTruncate:!0}):i.e(14118).then(i.bind(i,448433)).then((({default:i})=>{i(n,e,t)}))}render(){const{maxWidthPx:e,maxHeightPx:t,inline:i=!1}=this.props,{manualTruncate:n}=this.state,a={maxWidth:e,maxHeight:t},s=i?{display:"inline",...a}:{...a};return n?(0,r.jsx)(o.xu,{overflow:"hidden",dangerouslySetInlineStyle:{__style:s},ref:this.ref,"data-test-id":"truncater",children:this.props.children}):(0,r.jsx)(o.xu,{ref:this.ref,dangerouslySetInlineStyle:{__style:s},"data-test-id":"truncater",children:this.props.children})}}const s=a},200310:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(667294),o=i(116303),r=i(898781),a=i(112690),s=i(719626),l=i(349700),c=i(591042),d=i(883119),u=i(785893);function p({color:e="default",pinId:t,title:i,user:p,startsAt:h,isEpisodeUpcoming:m,isEpisodeReplay:_,viewParameterType:g=3582,viewType:v=1}){const f=(0,r.ZP)(),y=(0,a.Z)(),{referrer:x}=(0,c.iH)(),[b,w]=(0,n.useState)({});if((0,n.useEffect)((()=>{w((0,s.p)(h))}),[h]),!p)return null;const P=e=>{y({event_type:102,view_type:v,view_parameter:g,component:0,...e})};return(0,u.jsxs)(d.xu,{dangerouslySetInlineStyle:{__style:{padding:"8px 6px 16px"}},children:[!!i&&(m||_)&&(0,u.jsx)(d.xu,{marginBottom:2,children:(0,u.jsxs)(d.iP,{href:`/tv/${t}/?referrer=${x}`,onTap:()=>P(),role:"link",children:[m&&(0,u.jsxs)(d.xu,{children:[(0,u.jsx)(d.xv,{size:"200",weight:"bold",lineClamp:2,children:i}),(0,u.jsx)(d.xv,{size:"100",color:"default",lineClamp:2,children:(0,l.nk)(f._('Live on {{ date }} {{ time }}', 'episodeAttribution.formattedDateTime.text', 'When the episode will go live'),{date:b.shortDate,time:b.time})})]}),_&&(0,u.jsxs)(d.xu,{children:[(0,u.jsx)(d.xv,{size:"200",weight:"bold",lineClamp:2,children:i}),(0,u.jsx)(d.xv,{size:"100",color:"default",lineClamp:2,children:(0,l.nk)(f._('Aired on {{ mmddyyy }}', 'episodeAttribution.formattedDateTime.text', 'When the episode was aired'),{mmddyyy:b.mmddyyy})})]})]})}),(0,u.jsx)(d.iP,{href:`/${p.username}`,onTap:()=>P({element:11619}),role:"link",children:(0,u.jsxs)(d.kC,{alignItems:"center",children:[(0,u.jsx)(d.xu,{marginStart:-2,paddingX:2,children:(0,u.jsx)(o.Z,{name:"",size:"sm",src:p.image_medium_url})}),(0,u.jsx)(d.xv,{color:e,size:"200",lineClamp:1,children:p.full_name||""})]})})]})}},447635:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(667294),o=i(200310),r=i(218672),a=i(898781),s=i(112690),l=i(349700),c=i(591042),d=i(883119),u=i(582637),p=i(785893);const h=16/9;function m({feedItem:e,gridIndex:t}){const i=(0,a.ZP)(),m=(0,s.Z)(),{gridItemWidth:_,referrer:g}=(0,c.iH)(),{creator_class:v,creator_class_instance:f,id:y}=e,{creator:x,hero_images:b}=v,{title:w,starts_at:P,hero_images:S}=f,T=S?S["312x"]:b?b["312x"]:{},I=(0,u.Zz)(f),k=(0,u.oi)(f),E=(e=>{const{duration:t}=e&&e.video_list&&e.video_list.V_HLSV4||{};if(!t)return"";const i=Math.trunc(t/1e3),n=Math.trunc(t/6e4),o=Math.trunc(t/36e5),r=n-60*o,a=i-60*r-60*o*60;let s=o>0?`${o}:${r.toString().padStart(2,"0")}`:`${r}`;return s+=`:${a.toString().padStart(2,"0")}`,s})(f.replay_video),A=E.length>0?E:i._('Processing video', 'EpisodeGridRep.pillText.fallback', 'A label indicating that the video is still processing.'),C=new d.Ry(1),j=i._('Watch', 'EpisodeGridRep.button.text', 'A label indicating that button can be interacted with to watch the video.'),[R,D]=(0,n.useState)(_?_*h:void 0);return(0,p.jsx)(d.xu,{children:T.url&&(0,p.jsxs)(n.Fragment,{children:[R?(0,p.jsxs)(d.xu,{alignItems:"center",direction:"column",display:"flex",height:R,justifyContent:"between",position:"relative",rounding:3,width:_,children:[(0,p.jsx)(d.xu,{position:"absolute",left:!0,top:!0,paddingX:3,paddingY:3,zIndex:C,children:(0,p.jsx)(r.Z,{text:A,backgroundColor:"black"})}),(0,p.jsx)(d.iP,{fullHeight:!0,fullWidth:!0,href:`/tv/${y}/?referrer=${g}`,onTap:()=>{var e;return m({event_type:102,view_type:1,view_parameter:3582,component:0,aux_data:{content_ids:{pin:y},grid_index:t,referrer:g,story_id:null===(e=v.recap_pin)||void 0===e?void 0:e.id}})},role:"link",children:(0,p.jsx)(d.zd,{width:"100%",height:"100%",rounding:3,wash:!0,children:(0,p.jsx)(d.Ee,{alt:w,color:"gray",fit:"cover",naturalHeight:T.height,naturalWidth:T.width,src:T.url})})}),(0,p.jsx)(d.xu,{position:"absolute",bottom:!0,marginBottom:4,children:(0,p.jsx)(d.zx,{text:j,role:"link",href:`/tv/${y}/?referrer=${g}`,accessibilityLabel:(0,l.nk)(i._('Watch {{episodeTitle}}', 'webapp.app.pinTv.watchBtn.a11yText', 'episodeTitle: a11y text for watch button for the episode'),{episodeTitle:w}).join("")})})]}):(0,p.jsx)(d.xu,{ref:e=>{if(e){const t=e.offsetWidth;D(t*h)}},width:"100%",dangerouslySetInlineStyle:{__style:{paddingBottom:"calc(100% * 16 / 9)"}}}),(0,p.jsx)(o.Z,{isEpisodeReplay:k,isEpisodeUpcoming:I,pinId:y,startsAt:P,title:w,user:x})]})})}},218672:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(883119),o=i(785893);function r({text:e,backgroundColor:t}){return(0,o.jsxs)(n.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:t}},display:"flex",paddingX:2,paddingY:1,rounding:"pill",children:[(0,o.jsx)(n.xu,{color:"primary"===t?"default":"primary",dangerouslySetInlineStyle:{__style:{marginRight:5}},height:6,rounding:"circle",width:6}),(0,o.jsx)(n.xv,{color:"inverse",size:"100",weight:"bold",children:e})]})}},591042:(e,t,i)=>{i.d(t,{J1:()=>s,iH:()=>l,xs:()=>a});var n=i(667294),o=(i(883119),i(425288)),r=i(273712);const a=({pinId:e})=>{const[t,i]=(0,n.useState)({}),[o,a]=(0,n.useState)(e),[s,l]=(0,n.useState)(0);return{activePinId:o,getSubscription:e=>{if(!t)return r.d0.UNKNOWN;switch(t[e]){case!0:return r.d0.TRUE;case!1:return r.d0.FALSE;default:return r.d0.UNKNOWN}},setSubscription:(e,t)=>{i((i=>i&&i[e]!==t?{...i,[e]:t}:i))},setActivePinId:a,setVolume:l,volume:s}},{Provider:s,useHook:l}=(0,o.Z)("LiveSessionContext")},38530:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(6637),o=i(898781),r=i(112690),a=i(19121),s=i(883119),l=i(273712),c=i(591042),d=i(785893);function u({color:e="white",componentType:t,creatorClassId:i,pinId:u,size:p,viewParameterType:h,viewType:m}){const _=(0,o.ZP)(),g=(0,r.Z)(),{isAuth:v}=(0,a.Z)(),{getSubscription:f,referrer:y,setSubscription:x,showSignup:b}=(0,c.iH)(),w=f(u);if(w===l.d0.UNKNOWN)return null;const P=w?{text:_._('Attending', 'liveSession.button.attending', 'Button indicating user is subscribed to reminders; click to unsubscribe')}:{text:_._('Remind me', 'liveSession.button.remindMe', 'Button to subscribe to reminders')};return(0,d.jsx)(s.zx,{color:e,onClick:({event:e})=>{if(e.preventDefault(),e.stopPropagation(),g({event_type:102,view_type:m,view_parameter:h,component:t,element:w?12384:12383,aux_data:{content_ids:{pin:u},referrer:y}}),v){const e=n.Z.create("ApiResource",{url:`/v3/classes/${i}/subscription/`,data:{id:u}});w?e.callDelete():e.callUpdate(),x(u,!w)}else b&&b()},selected:w,size:p,text:P.text})}},585112:(e,t,i)=>{i.d(t,{Z:()=>_,t:()=>h});var n=i(667294),o=i(218672),r=i(38530),a=i(898781),s=i(112690),l=i(349700),c=i(591042),d=i(666842),u=i(883119),p=i(785893);const h={grid:2,closeup:6},m=16/9;function _({creatorClass:e,creatorClassInstance:t,pinId:i,variant:h="grid",width:_,height:g}){const v=(0,s.Z)(),{referrer:f}=(0,c.iH)(),y=(0,a.ZP)(),{id:x}=e,{starts_at:b,title:w,hero_images:P}=t,{url:S,width:T,height:I}=P["624x"],{V_HLSV4:k}=t.preview_video&&t.preview_video.video_list||{},E="closeup"===h,A=()=>{const e=function(e){const t=new Date(e)-new Date;return Math.floor(t/864e5)}(b),t=function(e){const t=new Date(e)-new Date;return Math.floor(t/36e5)}(b),i=function(e){const t=new Date(e)-new Date;return Math.floor(t/36e5)}(b);return e>=1?(0,l.nk)(y.ngettext('{{ numDaysUntilEvent }} day', '{{ numDaysUntilEvent }} days', e, 'upcomingEpisode.badge.daysUntil', 'Number of days remaining until the event'),{numDaysUntilEvent:e}):t>=1?(0,l.nk)(y.ngettext('{{ numHoursUntilEvent }} hour', '{{ numHoursUntilEvent }} hours', t, 'upcomingEpisode.badge.hoursUntil', 'Number of hours remaining until the event'),{numHoursUntilEvent:t}):i>1?(0,l.nk)(y.ngettext('{{ numMinutesUntilEvent }} minute', '{{ numMinutesUntilEvent }} minutes', i, 'upcomingEpisode.badge.minutesUntil', 'Number of minutes remaining until the event'),{numMinutesUntilEvent:i}):y._('Live soon', 'liveSession.badge.liveSoon', 'A label indicating event is happening soon.')},{gridItemWidth:C}=(0,c.iH)(),j=_||C,R=g||(j?j*m:void 0),D=new u.Ry(1),O=(0,p.jsx)(r.Z,{componentType:200,creatorClassId:x,pinId:i,size:E?"lg":"md",viewParameterType:3582,viewType:1}),[L,M]=(0,n.useState)(g||(j?j*m:void 0)),N=e=>{if(e){const t=e.offsetWidth;M(t*m)}};return R?E?(0,p.jsxs)(u.xu,{rounding:3,position:"relative",alignItems:"center",direction:"column",display:"flex",justifyContent:"between",width:j,height:R||L,children:[(0,p.jsx)(u.xu,{position:"absolute",left:!0,top:!0,paddingX:3,paddingY:3,zIndex:D,children:(0,p.jsx)(o.Z,{text:A(),backgroundColor:"black"})}),k?(0,p.jsx)(u.xu,{width:"100%",height:"100%",rounding:3,children:(0,p.jsx)(d.Z,{autoplay:!0,format:d.k.CLOSEUP,height:R,video:k,width:j,bgImgUrl:S})}):(0,p.jsx)(u.zd,{width:"100%",height:"100%",rounding:3,wash:!0,children:(0,p.jsx)(u.Ee,{src:S,alt:w,naturalWidth:T,naturalHeight:I,color:"gray",fit:"cover"})})]}):(0,p.jsxs)(u.xu,{rounding:3,position:"relative",alignItems:"center",direction:"column",display:"flex",justifyContent:"between",width:j,height:R,"data-test-id":`upcoming-episode-${i}`,children:[(0,p.jsx)(u.xu,{position:"absolute",left:!0,top:!0,paddingX:3,paddingY:3,zIndex:D,children:(0,p.jsx)(o.Z,{text:A(),backgroundColor:"black"})}),(0,p.jsx)(u.iP,{href:`/tv/${i}/?referrer=${f}`,onTap:()=>{var t;return v({event_type:102,view_type:1,view_parameter:3582,component:200,aux_data:{content_ids:{pin:i},referrer:f,story_id:null===(t=e.recap_pin)||void 0===t?void 0:t.id,story_type:"upcoming_creator_classes"}})},role:"link",fullHeight:!0,fullWidth:!0,children:(0,p.jsx)(u.zd,{width:"100%",height:"100%",rounding:3,wash:!0,children:(0,p.jsx)(u.Ee,{src:S,alt:w,naturalWidth:T,naturalHeight:I,color:"gray",fit:"cover"})})}),(0,p.jsx)(u.xu,{position:"absolute",bottom:!0,marginBottom:4,children:O})]}):(0,p.jsx)(u.xu,{ref:N,width:"100%",dangerouslySetInlineStyle:{__style:{paddingBottom:"calc(100% * 16 / 9)"}}})}},666842:(e,t,i)=>{i.d(t,{Z:()=>c,k:()=>l});var n=i(667294),o=i(898781),r=i(591042),a=i(883119),s=i(785893);const l={GRID:"grid",HERO:"hero",HEAD:"head",CLOSEUP:"closeup"};function c({autoplay:e=!1,children:t,controls:i,height:c,format:d,video:u,width:p,bgImgUrl:h}){const{volume:m,setVolume:_,renderTvVideo:g}=(0,r.iH)(),[v,f]=(0,n.useState)(e),y=(0,o.ZP)();if(!u)return null;const{height:x,url:b,width:w}=u,P=p/c;return(0,s.jsx)(a.zd,{height:c,rounding:d===l.HEAD?"circle":d===l.CLOSEUP?0:4,width:p,children:d===l.GRID?(0,s.jsx)(a.Ee,{alt:"",color:"",naturalHeight:x,naturalWidth:w,src:h,children:(0,s.jsx)(a.xu,{height:"100%",position:"relative",width:"100%",children:t})}):g&&g({autoplay:e,accessibilityMaximizeLabel:y._('Maximize', 'Video.accessibilityMaximizeLabel', 'Maximize accessibility Label'),accessibilityMinimizeLabel:y._('Minimize', 'Video.accessibilityMinimizeLabel', 'Minimize accessibility Label'),accessibilityMuteLabel:y._('Mute', 'Video.accessibilityMuteLabel', 'Mute accessibility Label'),accessibilityPauseLabel:y._('Pause', 'Video.accessibilityPauseLabel', 'Pause accessibility Label'),accessibilityPlayLabel:y._('Play', 'Video.accessibilityPlayLabel', 'Play accessibility Label'),accessibilityProgressBarLabel:y._('Progress bar', 'Video.accessibilityProgressBarLabel', 'Video progress bar accessibility label'),accessibilityUnmuteLabel:y._('Unmute', 'Video.accessibilityUnmuteLabel', 'Unmute accessibility Label'),aspectRatio:P,captions:"",controls:i,loop:!0,onPlay:()=>{},onPlayError:()=>{},playing:v,playsInline:!0,poster:h,src:b,volume:m,setPlaying:f,setVolume:_,children:(0,s.jsx)(a.xu,{height:"100%",position:"relative",width:"100%",children:t})})})}},273712:(e,t,i)=>{i.d(t,{$J:()=>n,Ct:()=>p,Ff:()=>u,Md:()=>l,My:()=>a,Rp:()=>s,ak:()=>r,d0:()=>h,jm:()=>c,oo:()=>o,vw:()=>d});const n={SMALL:"SMALL",MEDIUM:"MEDIUM",LARGE:"LARGE",MOBILE_SMALL:"MOBILE_SMALL",MOBILE_LARGE:"MOBILE_LARGE"},o=2,r=6,a=3,s=1.5,l=16,c=8,d=16/9,u=25,p={PRE_LIVE:1,OFFLINE:2,LIVE:3,POST_LIVE:4},h={TRUE:!0,FALSE:!1,UNKNOWN:void 0}},582637:(e,t,i)=>{i.d(t,{Zz:()=>a,fN:()=>r,oi:()=>o});var n=i(273712);const o=e=>e.live_status===n.Ct.POST_LIVE,r=e=>e.live_status===n.Ct.LIVE,a=e=>e.live_status===n.Ct.PRE_LIVE},719626:(e,t,i)=>{i.d(t,{Z:()=>a,p:()=>r});var n=i(926467),o=i(273712);function r(e){return{date:e?(0,n.Z)(new Date(e),"eeee, MMMM do,"):"",shortDate:e?(0,n.Z)(new Date(e),"eee, MMM do,"):"",formalDate:e?(0,n.Z)(new Date(e),"d MMM yyy"):"",dayOfWeek:e?(0,n.Z)(new Date(e),"EEEE"):"",time:e?(0,n.Z)(new Date(e),"h:mm aaa"):"",mmddyyy:e?(0,n.Z)(new Date(e),"MM/dd/yyyy"):"",Emmmdd:e?(0,n.Z)(new Date(e),"E, MMM dd"):""}}function a(e){var t,i;const n=e.creator_class_instance.live_status===o.Ct.POST_LIVE;return{pinId:e.id,classId:e.creator_class.id,storyId:null===(t=e.creator_class.recap_pin)||void 0===t?void 0:t.id,creatorClassInstance:e.creator_class_instance,creatorClassInstanceId:e.creator_class_instance.id,title:e.creator_class_instance.title,isLive:e.creator_class_instance.live_status===o.Ct.LIVE,postLive:n,path:`/tv/${e.id}/?referrer=${e.referrer||0}`,recapPath:`/pin/${(null===(i=e.creator_class.recap_pin)||void 0===i?void 0:i.id)||e.id}/?referrer=${e.referrer||0}`,creator:{avatar:e.creator_class.creator.image_medium_url,host:e.creator_class.creator.full_name||e.creator_class.creator.username,path:`/${e.creator_class.creator.username}`},video:n&&e.creator_class_instance.replay_video?e.creator_class_instance.replay_video.video_list.V_720P:e.creator_class_instance.preview_video?e.creator_class_instance.preview_video.video_list.V_720P:e.creator_class_instance.hero_video?e.creator_class_instance.hero_video.video_list.V_720P:null,subscriberCount:e.creator_class.subscriber_count,subscribers:e.creator_class.subscribers}}},758127:(e,t,i)=>{i.d(t,{U:()=>r,Z:()=>a});var n=i(883119),o=i(785893);const r=", ";function a(){return(0,o.jsx)(n.xu,{display:"visuallyHidden",children:r})}},477802:(e,t,i)=>{i.d(t,{W:()=>a,Z:()=>r});var n=i(883119),o=i(785893);function r({data:e}){return(0,o.jsx)(n.xu,{overflow:"auto",dangerouslySetInlineStyle:{__style:{border:"2px solid red"}},"data-test-id":"debug-info",children:(0,o.jsx)("pre",{children:JSON.stringify(e,null,2).replace(/\\n/g,"\n")})})}const a=e=>(0,o.jsx)(n.xu,{width:236,dangerouslySetInlineStyle:{__style:{marginTop:10}},children:(0,o.jsx)(r,{...e})})},948618:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(883119),o=i(785893);function r({ariaHidden:e=!1,color:t="darkGray",size:i}){return(0,o.jsx)("span",{"aria-hidden":e,style:{padding:"0 4px"},children:(0,o.jsx)(n.xv,{color:t,inline:!0,size:null!=i?i:"200",children:"·"})})}},939106:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(667294),o=i(948618),r=i(883119),a=i(785893);function s(e){return null!=e}function l({additionalPadding:e,color:t="darkGray",inline:i,items:l}){const c=e?(0,a.jsx)("span",{style:{padding:`0 ${4*e}px`},children:(0,a.jsx)(o.Z,{color:t})}):(0,a.jsx)(o.Z,{color:t}),d=l.filter(s).reduce(((e,t,i)=>[...e,0!==i?c:null,t]),[]).filter(s).map(((e,t)=>(0,a.jsx)(n.Fragment,{children:e},t)));return 0===d.length?null:i?(0,a.jsx)(r.xu,{children:d}):(0,a.jsx)(r.kC,{alignItems:"center",justifyContent:"start",children:d})}},343341:(e,t,i)=>{i.d(t,{F9:()=>a,Zo:()=>o,nE:()=>r});var n=i(425288);const{Provider:o,Consumer:r,useHook:a}=(0,n.Z)("toastManagerContext")},753311:(e,t,i)=>{i.d(t,{M:()=>a,Q:()=>r});var n=i(667294);const o=(0,n.createContext)(null),r=()=>(0,n.useContext)(o),a=o.Provider},690035:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(753311);const o=()=>{const e=(0,n.Q)();return t=>{if(e){const{pinId:i,location:n,seoPlacementConfig:o}=t;e.showUnauthContextMenu({pinId:i,location:n,seoPlacementConfig:o})}}}},579164:(e,t,i)=>{i.d(t,{Z:()=>n});const n=Object.freeze({SAME_ORIGIN:1,TRUSTED_DIFFERENT_ORIGIN:2,UNTRUSTED:3,INVALID:4})},567831:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t,i)=>e.match(/^https{0,1}:\/\//)?e:(void 0===t&&(t=window.location.protocol),void 0===i&&(i=window.location.hostname,window.location.port&&(i+=":"+window.location.port)),""!==i&&"/"!==e.charAt(0)&&(e="/"+e),t+"//"+i+e)},794230:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(643913),o=i(704115),r=i(441609),a=i.n(r);const s=(e,t)=>{if(!a()(t)){const i=e.split("?"),r=i[0],a=i[1],s=a?(0,o.Z)(a):{},l=Object.assign({},s,t);return r+"?"+(0,n.Z)(l)}return e}},170168:(e,t,i)=>{i.d(t,{Ag:()=>r,C0:()=>l,Vi:()=>a,YD:()=>u,kS:()=>o,oo:()=>s,vC:()=>c,vI:()=>d});var n=i(401060);const o="https://www.pinterest.com/business/hub/",r="https://www.pinterest.com/homefeed/",a="www.pinterest.com",s="https://help.pinterest.com",l="https://www.pinterest.com",c=(0,n.Z)({site:"developers"}),d=`${(0,n.Z)({site:"sterling"})}`,u=`${(0,n.Z)({site:"analytics"})}`},29538:(e,t,i)=>{i.d(t,{X:()=>o,c:()=>n});const n="pinterest.com",o="pinterdev.com"},250059:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>e?"string"==typeof e?e:e.pathname?e.pathname:"":""},643913:(e,t,i)=>{function n(e){const t=[];for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const o=i,r=e[i];if(void 0!==r){let e;e=Array.isArray(r)?encodeURIComponent(o)+"=["+r.map((e=>encodeURIComponent(e))).join(",")+"]":"object"==typeof r?n(r):encodeURIComponent(o)+"="+encodeURIComponent(r),t.push(e)}}return t.join("&")}i.d(t,{Z:()=>n})},704115:(e,t,i)=>{function n(e){null==e&&"undefined"!=typeof window&&(e=window.location.search);const t={};if(e){"?"===e[0]&&(e=e.substring(1));const i=/\+/g,n=/([^&=]+)=?([^&]*)/g,o=function(e){let t=e.replace(i," ");try{t=decodeURIComponent(t)}catch(n){t=unescape(t)}return t};let r=n.exec(e);for(;r;){t[o(r[1])]=o(r[2]),r=n.exec(e)}}return t}i.d(t,{Z:()=>n})},547239:(e,t,i)=>{i.d(t,{Z:()=>l});const n=(e,t)=>-1!==e.indexOf(t,e.length-t.length);var o=i(89254),r=i(579164),a=i(966113),s=i(29538);const l=e=>{if("undefined"==typeof window)return r.Z.INVALID;const t=(0,o.Z)(e);let i="",l="";try{i=window.location.origin,l=window.location.hostname}catch(c){}if(t.origin===i)return r.Z.SAME_ORIGIN;if(t.hostname===l)return r.Z.TRUSTED_DIFFERENT_ORIGIN;if(t.hostname){const e=[s.c,s.X];for(const i of e)if(t.hostname===i||n(t.hostname||"","."+i))return r.Z.TRUSTED_DIFFERENT_ORIGIN}return t.origin&&"https://www.pinterest.com"===t.origin?r.Z.TRUSTED_DIFFERENT_ORIGIN:"https"!==t.protocol||"pinterest.onelink.me"!==t.host||e!==a.c9&&e!==a.Js?t.origin?r.Z.UNTRUSTED:r.Z.INVALID:r.Z.TRUSTED_DIFFERENT_ORIGIN}},401060:(e,t,i)=>{i.d(t,{Z:()=>n});new RegExp(/\bdev\b.*/);function n({site:e,path:t=""}){const i="sterling"===e?"ads":e;if(t&&!t.startsWith("/"))throw new Error(`${t} needs to start with '/' -- hostForSite() does not append a trailing slash to the host, so all paths should start with '/'`);return`https://${i}.pinterest.com${t}`}},826067:(e,t,i)=>{i.d(t,{Gw:()=>p,JJ:()=>c,Jx:()=>l,OM:()=>o.Z,Qc:()=>a.Z,Qg:()=>s.Z,XP:()=>u,mB:()=>d,ru:()=>n.Z,sD:()=>h,tV:()=>m,vx:()=>r.Z});var n=i(794230),o=i(547239),r=i(579164),a=i(89254),s=i(954931);const l=e=>{if(!e)return"";try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return""}},c=()=>{const{pathname:e,search:t}=window.location;return e+("?"===t?"":t)},d=(e,t={shouldDecode:!0})=>e?("?"===e[0]&&(e=e.substr(1)),e.split("&").reduce(((e,i)=>{const[n,o]=i.split(/=(.+)/);return null!=t&&t.shouldDecode?e[l(n)]=l(o):e[n]=o,e}),{})):{},u=e=>Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&"),p=(e,t)=>{if(0===t.length)return e;const[i,o]=e.split("?"),r=Object.entries(d(o)).filter((([e,i])=>!t.includes(e))).reduce(((e,[t,i])=>({...e,[t]:i})),{});return(0,n.Z)(i,r)},h=e=>/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e);function m(e,...t){let i=e[0];for(let o=0;o<t.length;o+=1)i+=(n=t[o],encodeURIComponent(n).replace(/~/g,"%7E").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/!/g,"%21").replace(/\\/g,"%5C").replace(/'/g,"%27")+e[o+1]);var n;return i}},149230:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(954931);const o=({url:e})=>!(!e||!e.match(/^https{0,1}:\/\//)||(0,n.Z)(e))},954931:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(547239),o=i(579164);const r=e=>[o.Z.SAME_ORIGIN,o.Z.TRUSTED_DIFFERENT_ORIGIN].includes((0,n.Z)(e))},508847:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(567831);const o=(e,t)=>0===e.lastIndexOf(t,0),r=({url:e})=>{const t=(0,n.Z)("/");return o(e,t)?e.substr(t.length-1):e}},188682:e=>{function t(e){for(var i=t.options,n=i.parser[i.strictMode?"strict":"loose"].exec(e),o={},r=14;r--;)o[i.key[r]]=n[r]||"";return o[i.q.name]={},o[i.key[12]].replace(i.q.parser,(function(e,t,n){t&&(o[i.q.name][t]=n)})),o}t.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:(?<!\\)@]*)(?::([^:@]*))?)?@)?([^:\/?#\\]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},t.options.strictMode=!0,e.exports=t},89254:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(188682),o=i.n(n);const r=(e,t)=>{let i,n;const r=o()(e);switch(r.protocol){case"http":case"https":r.userInfo&&(r.userInfo.endsWith("%23")||r.userInfo.endsWith("#"))?(i=r.protocol+"://"+r.userInfo,n=""):r.userInfo?(i=r.protocol+"://"+r.host,n=r.host):(i=r.protocol+"://"+r.authority,n=r.host);break;case"":if(0===r.source.indexOf("//")){if(t)i=null;else try{i=window.location.protocol+"//"+r.authority}catch(a){i=null}n=r.host}else if(t)i=null,n=null;else try{i=window.location.protocol+"//"+window.location.hostname,n=window.location.hostname}catch(a){i=null,n=null}break;default:i=null,n=r.host}return{...r,origin:i,hostname:n}}},50286:(e,t,i)=>{i.d(t,{HG:()=>l,Mq:()=>o,Wb:()=>s,ZP:()=>c,ml:()=>a});var n=i(780280);function o(e){const{isMobile:t,isTablet:i}=e.userAgent;return i?"tablet":t?"phone":"desktop"}const r=()=>o((0,n.B)()),a=()=>"phone"===r(),s=()=>"tablet"===r(),l=()=>"desktop"===r(),c=r},311541:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(667294);function o(e,t){const i=(0,n.useRef)([]),[o,r]=(0,n.useState)(),[a,s]=(0,n.useReducer)(null!=o?o:()=>t,t),l=(0,n.useCallback)((t=>{o?s(t):(i.current.length||e().then((e=>{r((()=>e.default))})),i.current=[...i.current,t])}),[e,o]);return(0,n.useEffect)((()=>{o&&(i.current.forEach(s),i.current=[])}),[o]),[a,l]}},829407:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(667294);const o=e=>{(0,n.useEffect)(e,[])}},215292:(e,t,i)=>{i.d(t,{Z:()=>a,q:()=>r});var n=i(667294);const o=()=>{const[e,t]=(0,n.useState)(!1),[i,o]=(0,n.useState)(!1),[r,a]=(0,n.useState)(!1);return{active:e,focused:i,hovered:r,onBlur:()=>{o(!1),t(!1)},onFocus:()=>o(!0),onMouseDown:()=>t(!0),onMouseEnter:()=>a(!0),onMouseLeave:()=>{a(!1),t(!1)},onMouseUp:()=>t(!1)}};function r({children:e}){return e(o())}const a=o},198125:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(667294);function o(){const[e,t]=(0,n.useState)(!1);return{isHovering:e,handleMouseEnter:(0,n.useCallback)((()=>t(!0)),[t]),handleMouseLeave:(0,n.useCallback)((()=>t(!1)),[t])}}},35954:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(667294);const o=(e,t)=>{const i=(0,n.useRef)((()=>{}));(0,n.useEffect)((()=>{i.current=e}),[e]),(0,n.useEffect)((()=>{if(null===t)return()=>{};const e=setInterval((()=>i.current()),t);return()=>clearInterval(e)}),[t])}},807609:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(411465),o=i(966476);const r=()=>{const e=(0,n.Z)(),t=(0,o.Z)();return e&&!t}},411465:(e,t,i)=>{i.d(t,{G:()=>s,Z:()=>l});var n=i(667294),o=i(276775),r=i(785893);const a=(0,n.createContext)(!0);function s({children:e}){const t=(0,o.useLocation)(),[i,s]=(0,n.useState)(!0),l=(0,n.useRef)(t);return(0,n.useEffect)((()=>{l.current!==t&&(l.current=t,s(!1))}),[t]),(0,r.jsx)(a.Provider,{value:i,children:e})}function l(){return(0,n.useContext)(a)}},81072:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(667294),o=i(700380);const r=()=>{const[e,t]=(0,n.useState)(0);return(0,n.useEffect)((()=>{const e=(0,o.Z)((()=>t(window.scrollY)),10);return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}}),[]),e}},19121:(e,t,i)=>{i.d(t,{$:()=>o,Z:()=>a});var n=i(425288);const{Provider:o,useHook:r}=(0,n.Z)("viewer"),a=r},357787:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(667294),o=i(973935),r=i(785893);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const s=new Map;let l=null;const c=e=>{e.forEach((e=>{const t=s.get(e.target);t&&t(e)}))},d=e=>{class t extends n.Component{constructor(...e){super(...e),a(this,"seen",!1),a(this,"enter",(e=>{const t=e.intersectionRatio>0||e.isIntersecting;this.seen=t,this.seen&&this.props.onVisibilityChanged(!0)})),a(this,"leave",(()=>{const e=this._node;e&&(e=>s.has(e))(e)&&this.seen&&(this.props.onVisibilityChanged(!1),this.seen=!1)})),a(this,"observe",(e=>{try{this._node=o.findDOMNode(this)}catch(n){return}if(!this._node)return;const{inAdsDesktopVideoExperiment:t}=this.props,i=this._node;((e,t="-64px 0px 0px 0px",i)=>{const n={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:t,threshold:[0,.5,1]};l=l||new window.IntersectionObserver(c,n),s.set(e,i),l.observe(e)})(i,e,(e=>{if(!s.has(i))return;const n=t?e.intersectionRatio>=.5:e.intersectionRatio>0||e.isIntersecting,o=this.props.trackFullVisible?e.intersectionRatio>=1:n,r=this.props.trackFullVisible?0===e.intersectionRatio:!o;!this.seen&&o?this.enter(e):this.seen&&r&&this.leave()}))}))}componentDidMount(){const{rootMargin:e}=this.props;this.observe(e)}componentWillUnmount(){const e=this._node;e&&(this.leave(),(e=>{l.unobserve(e),s.delete(e)})(e))}render(){return(0,r.jsx)(e,{...this.props})}}return a(t,"displayName",`DeprecatedWithVisibilityChanged(${e.displayName||e.name})`),t}},46584:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294);const o=new Map;let r=null;const a=e=>{e.forEach((e=>{const t=o.get(e.target);t&&t(e)}))};function s({onVisibilityChanged:e,inAdsDesktopVideoExperiment:t,trackFullVisible:i,rootMargin:s}){const l=(0,n.useRef)(null);let c=!1;const d=()=>{var t;l.current instanceof HTMLElement&&(t=l.current,o.has(t))&&(c&&(e(!1),c=!1))},u=(0,n.useCallback)((n=>{l.current instanceof HTMLElement&&((e,t="-64px 0px 0px 0px",i)=>{const n={root:"undefined"==typeof document?null:document.querySelector("#mainContainer"),rootMargin:t,threshold:[0,.5,1]};r=r||new window.IntersectionObserver(a,n),o.set(e,i),r.observe(e)})(l.current,n,(n=>{if(!o.has(l.current))return;const r=t?n.intersectionRatio>=.5:n.intersectionRatio>0||n.isIntersecting,a=i?n.intersectionRatio>=1:r,s=i?0===n.intersectionRatio:!a;!c&&a?(t=>{const i=t.intersectionRatio>0||t.isIntersecting;c=i,c&&e(!0)})(n):c&&s&&d()}))}),[l.current]);return(0,n.useEffect)((()=>(u(s),()=>{var e;l.current instanceof HTMLElement&&(d(),e=l.current,r.unobserve(e),o.delete(e))})),[u]),l}},134906:(e,t,i)=>{i.d(t,{Bh:()=>d,C9:()=>x,CB:()=>h,CU:()=>a,FU:()=>k,GT:()=>s,Gy:()=>g,J_:()=>S,Jx:()=>m,MZ:()=>v,VC:()=>p,VG:()=>l,ZA:()=>c,Zt:()=>_,a3:()=>E,aH:()=>r,h7:()=>P,nw:()=>y,oR:()=>b,qA:()=>u,qp:()=>T,sG:()=>f,vd:()=>I,xk:()=>w});var n=i(89254);const o=e=>{const t={"０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","　":" "},i=String(e).split("");return i.forEach(((e,n)=>{const o=t[e];o&&(i[n]=o)})),i.join("")};function r(e){return function(t,i){const n=[];t&&/\S/.test(t)||n.push(e.message);const o={errors:n,warnings:[]};return i&&i(o),o}}const a=new RegExp(["(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*",'|^"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*"',")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+[A-Z]{2,20}$)","|\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$"].join(""),"i");function s(e){return function(t,i){const n=[];(t=t&&t.trim()).match(a)||n.push(e.message);const o={errors:n,warnings:[]};return i&&i(o),o}}function l(e){return function(t,i){const n=[];(t=t&&t.trim()).match(/^[^0-9].*$/)||n.push(e.message);const o={errors:n,warnings:[]};return i&&i(o),o}}function c(e){return function(t,i){const n=[];if(t){const i=parseInt(t,10);Number.isNaN(i)?n.push(e.invalidAgeString):(e.ageTooShortString&&i<10&&n.push(e.ageTooShortString),i<=0||i>120?n.push(e.invalidAgeString):e.checkUnderAgeWithString&&i<13&&n.push(e.checkUnderAgeWithString))}const o={errors:n,warnings:[]};return i&&i(o),o}}function d(e){return function(t,i){const n=(t=t&&t.trim()).replace(/[\(\)\+\-\. ]/g,""),o=[],r=!1!==e.checkLength&&n.length<7;!t||t.match(/^(\(?\+?[0-9]*\)?)?[0-9_\- \.\(\)]*$/g)&&!r||o.push(e.message);const a={errors:o,warnings:[]};return i&&i(a),a}}function u(e){return function(t,i){const n=/^\d+$/,r=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=o(t))&&!t.match(n)&&r.push(e.message));const a={errors:r,warnings:[]};return i&&i(a),a}}function p(e){return function(t,i){const n=/^[\d\ -]+$/,r=[];"number"==typeof t||"string"==typeof t&&(t=t&&t.trim(),(t=o(t))&&!t.match(n)&&r.push(e.message));const a={errors:r,warnings:[]};return i&&i(a),a}}const h=e=>!!e.match(/^(https?:\/\/){0,1}[a-z0-9_\-]+\..+/gi);function m(e){return function(t,i){const n=[];t&&!h(t)&&n.push(e.message);const o={errors:n,warnings:[]};return i&&i(o),o}}function _(e){return function(t,i){const o=[];if(t)try{const i=(0,n.Z)(t);i&&i.protocol&&("http"!==i.protocol||"localhost"===i.hostname)||o.push(e.message)}catch(a){o.push(e.message)}const r={errors:o,warnings:[]};return i&&i(r),r}}function g(e){return function(t,i){const n=[];(e.should_trim||!1)&&(t=t&&t.trim());const o=t.length;e.min&&o<e.min?n.push(e.minErrorString):e.max&&o>e.max&&n.push(e.maxErrorString);const r={errors:n,warnings:[]};return i&&i(r),r}}function v(e){return function(t,i){const n=!e.checkExclusion,o=e.substrings,r=[];(n&&!o.some((e=>t.includes(e)))||!n&&o.some((e=>t.includes(e))))&&r.push(e.message);const a={errors:r,warnings:[]};return i&&i(a),a}}function f(e){return function(t,i){const n=[];t!==(e&&e.targetValue)&&n.push(e.message);const o={errors:n,warnings:[]};return i&&i(o),o}}function y(e){return function(t,i){const n=[];(t?parseFloat(t):0)<e.value&&n.push(e.message);const o={errors:n,warnings:[]};return i&&i(o),o}}function x(e){return function(t,i){const n=new Date(t),o=[];e.date instanceof Date&&n instanceof Date&&e.date<n&&o.push(e.message);const r={errors:o,warnings:[]};return i&&i(r),r}}function b(e){return function(t,i){const n=[];/^[\040-\176]*$/.test(t)||n.push(e.message);const o={errors:n,warnings:[]};return i&&i(o),o}}function w(e){return function(t,i){let n=2;if(e.hasFractionalCents)n=3;else if(e.currencyCode){const{maximumFractionDigits:t}=new Intl.NumberFormat(void 0,{style:"currency",currency:e.currencyCode}).resolvedOptions();n=t}const o=new RegExp(n?`^\\d*(\\.\\d{1,${n}})?$`:"^\\d*$"),r=[];"number"==typeof t&&(t=t.toString()),t&&!t.match(o)&&(t=t&&t.trim(),r.push(e.message));const a={errors:r,warnings:[]};return i&&i(a),a}}function P(e){return function(t,i){const n=[];Number(t)>=1e13&&n.push(e.message);const o={errors:n,warnings:[]};return i&&i(o),o}}function S(e){return function(t,i){t=t&&t.trim();const n=[],o=new Date(t);t&&!o.getTime()&&n.push(e.message);const r={errors:n,warnings:[]};return i&&i(r),r}}function T(e){return function(t,i){const n=t&&t.trim(),o=[];n&&!n.match(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)&&o.push(e.message);const r={errors:o,warnings:[]};return i&&i(r),r}}function I(e){return function(t,i){const n=[];e.pattern.test(t)||n.push(e.message);const o={errors:n,warnings:[]};return i&&i(o),o}}function k(e,t){const i=e.map((e=>e(t).errors));return[].concat(...i)}function E(e,t){let i="";return t.some((t=>{const n=t(e);return n.errors.length>0&&(i=n.errors[0],!0)})),i}},562559:(e,t,i)=>{i.d(t,{Z:()=>x});var n=i(667294),o=i(867631),r=i.n(o),a=i(112690),s=i(19121),l=i(965900),c=i(773285),d=i(780280),u=i(883119),p=i(969315),h=i(179888),m=i(226347),_=i(785893);function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const v=(e,t)=>{if(t){const i="control"===t?"v3.pinimg.com":"v2.pinimg.com";return e.replace("v.pinimg.com",i)}return e},f=(e,t)=>"string"==typeof e?v(e,t):Array.isArray(e)?((e,t)=>e[0].src&&t?[{...e[0],src:v(e[0].src,t)}]:e)(e,t):e;class y extends n.PureComponent{constructor(...e){super(...e),g(this,"state",{canPlayVideo:!1,isManifestParsed:!1,playbackState:h.Cy.DEFAULT,videoStartTime:this.props.seekTime||0}),g(this,"errorRetryCount",1),g(this,"firstFragBuffered",!1),g(this,"hasPlaybackStarted",!1),g(this,"hasVideoSessionStarted",!1),g(this,"hasVideoSessionEnded",!1),g(this,"hls",null),g(this,"fragStartupTime",{}),g(this,"lastLevelSwitchKbps",null),g(this,"lastStallTime",null),g(this,"lastPauseTime",null),g(this,"logSessionStartOnNextPlay",!1),g(this,"playerId",""),g(this,"videoSessionId",""),g(this,"videoVisibleTime",null),g(this,"playbackPerformance",{canPlayTime:null,detailedErrors:"",downloadedKiloBytes:0,errorCode:0,errorName:"",errorReason:"",hasFatalError:!1,loadStartTime:null,numberOfStalls:0,numberOfSeeks:0,playbackStartTimestamp:null,segments:[],srcString:"string"==typeof this.props.src?v(this.props.src,this.props.quicExpGroup):v(this.props.src[0].src,this.props.quicExpGroup),totalStallDurationMs:0,totalPauseDurationMs:0,videoCreatedTime:null}),g(this,"initializeHls",(()=>{this.destroyHls();const{src:e,hlsConfig:t,quicExpGroup:i}=this.props,n=new(r())(t),o=f(e,i);n.loadSource(o),this.videoPlayerRef&&n.attachMedia(this.videoPlayerRef.video),n.on(r().Events.FRAG_BUFFERED,this.handleHlsFragBuffered),n.on(r().Events.FRAG_CHANGED,this.handleHlsFragChanged),n.on(r().Events.FRAG_LOADING,this.handleHlsFragLoading),n.on(r().Events.FRAG_LOADED,this.handleHlsFragLoaded),n.on(r().Events.MANIFEST_PARSED,(()=>{this.setState({isManifestParsed:!0})})),n.on(r().Events.LEVEL_SWITCHED,this.handleHlsLevelSwitched),n.on(r().Events.ERROR,this.handleHlsError),this.hls=n})),g(this,"destroyHls",(()=>{const{hls:e}=this;e&&e.destroy()})),g(this,"addSegment",(e=>{const{segments:t}=this.playbackPerformance,i=t&&t[t.length-1];if(this.hls&&t.length&&i&&i.uri!==e.url){this.updateWatchDurationForCurrentSegment();const i=this.videoPlayerRef&&this.videoPlayerRef.video,n=this.hls&&this.hls.levels||{},o="number"==typeof e.level?n[e.level]:{},r=this.fragStartupTime[e.url];let a=-1;r&&r.startLoadTime&&r.endLoadTime&&(a=r.endLoadTime-r.startLoadTime);const s={indicatedKbps:o.bitrate/h.bR,duration:e.duration,level:e.level,lastStartPlayTime:this.getCurrentVideoTime(),numServerAddressChange:-1,observedKbps:this.hls&&this.hls.bandwidthEstimate/h.bR||-1,playbackStartDate:Date.now(),serverAddress:"",sn:e.sn,sourceWidth:o.width,sourceHeight:o.height,startupTimeMs:a,switchBitrateKbps:this.lastLevelSwitchKbps||-1,uri:e.url,viewportWidth:i&&i.clientWidth||-1,viewportHeight:i&&i.clientHeight||-1,watchedDurationMs:0};t.push(s)}})),g(this,"initializeSegments",(e=>{const{contextLogData:t={}}=this.props,{is_closeup_video:i=!1}=t,{segments:n}=this.playbackPerformance;if(!n.length)if(this.hls&&this.videoPlayerRef&&this.videoPlayerRef.video&&e){if(!n.length&&"number"==typeof e.level){const t=this.videoPlayerRef&&this.videoPlayerRef.video,i=this.hls.levels,o="number"==typeof e.level?i[e.level]:{},r=this.fragStartupTime[e.url];let a=-1;r&&r.startLoadTime&&r.endLoadTime&&(a=r.endLoadTime-r.startLoadTime),this.lastLevelSwitchKbps=this.hls.bandwidthEstimate/h.bR;const s={indicatedKbps:o.bitrate/h.bR,duration:e.duration,level:e.level,lastStartPlayTime:null,numServerAddressChange:-1,observedKbps:this.hls.bandwidthEstimate/h.bR||-1,playbackStartDate:null,serverAddress:"",sn:e.sn,sourceWidth:o.width,sourceHeight:o.height,startupTimeMs:a,switchBitrateKbps:this.lastLevelSwitchKbps||-1,uri:e.url,viewportWidth:t.clientWidth,viewportHeight:t.clientHeight,watchedDurationMs:0};n.push(s)}}else(0,p.tE)("initializeSegmentsFailed",!0,i)})),g(this,"getCurrentVideoTime",(()=>this.videoPlayerRef&&this.videoPlayerRef.video?this.videoPlayerRef.video.currentTime*h.gJ:null)),g(this,"handleCanPlayVideo",(e=>{const{contextLogData:t={},onReady:i,playing:n}=this.props,{is_closeup_video:o=!1}=t,{canPlayVideo:r}=this.state;(0,p.tE)("handleCanPlayVideo",!0,o,{firstCanPlayEvent:!r,playing:n}),this.playbackPerformance.hasFatalError=!1,r||(this.playbackPerformance.canPlayTime=new Date),this.setState({canPlayVideo:!0}),i&&i(e)})),g(this,"handleEnded",(e=>{const{loop:t,onEnded:i}=this.props,{segments:n}=this.playbackPerformance,o=n&&n[n.length-1];t&&this.videoPlayerRef&&this.videoPlayerRef.video?(this.updateWatchDurationForCurrentSegment(),o&&(o.lastStartPlayTime=0),this.fragStartupTime={}):t||this.logPlaybackPerformance(h.$f,{initiator:"videoEnded",loop:t}),this.setState({playbackState:h.Cy.ENDED}),i&&i(e)})),g(this,"handleHlsError",((e,t)=>{var i;const{contextLogData:n={}}=this.props,{is_closeup_video:o=!1}=n;if(this.playbackPerformance.detailedErrors+=`${this.playbackPerformance.detailedErrors.length>0?", ":""}${t.details}`,t.fatal){var a,s,l,c;this.playbackPerformance.hasFatalError=!0,this.playbackPerformance.errorName=t.type,this.playbackPerformance.errorReason=t.details,this.playbackPerformance.errorCode=t.response&&t.response.code?t.response.code:0;const e={errorName:t.type,errorReason:t.details,errorRetryCount:this.errorRetryCount,errorMessage:(null===(a=t.err)||void 0===a||null===(s=a.message)||void 0===s?void 0:s.slice(0,50))||"unknown",errorResponse:(null===(l=t.response)||void 0===l||null===(c=l.text)||void 0===c?void 0:c.slice(0,50))||"unknown",playbackState:this.state.playbackState};if((0,p.tE)("fatalError",!0,o,e),this.errorRetryCount>0)switch(this.errorRetryCount-=1,t.type){case r().ErrorTypes.NETWORK_ERROR:if(t.details===r().ErrorDetails.MANIFEST_LOAD_ERROR||t.details===r().ErrorDetails.MANIFEST_LOAD_TIMEOUT||t.details===r().ErrorDetails.MANIFEST_LOAD_PARSING_ERROR){var d;const{src:e,quicExpGroup:t}=this.props,i=f(e,t);null===(d=this.hls)||void 0===d||d.loadSource(i)}else{var u;null===(u=this.hls)||void 0===u||u.startLoad()}break;case r().ErrorTypes.MEDIA_ERROR:null===(i=this.hls)||void 0===i||i.recoverMediaError()}}this.updateWatchDurationForCurrentSegment(),this.setState({playbackState:h.Cy.FAILED})})),g(this,"handleHlsFragBuffered",((e,t)=>{this.firstFragBuffered||(this.initializeSegments(t.frag),this.firstFragBuffered=!0)})),g(this,"handleHlsFragChanged",((e,t)=>{this.addSegment(t.frag)})),g(this,"handleHlsFragLoading",((e,t)=>{var i;const n=null===(i=t.frag)||void 0===i?void 0:i.url;n&&!this.fragStartupTime[n]&&(this.fragStartupTime[n]={startLoadTime:new Date})})),g(this,"handleHlsFragLoaded",((e,t)=>{var i;t.frag&&t.frag.loaded&&(this.playbackPerformance.downloadedKiloBytes+=t.frag.loaded/h.Fm);const n=null===(i=t.frag)||void 0===i?void 0:i.url;n&&this.fragStartupTime[n]&&this.fragStartupTime[n].startLoadTime&&(this.fragStartupTime[n].endLoadTime=new Date)})),g(this,"handleHlsLevelSwitched",(()=>{this.hls&&this.hls.bandwidthEstimate&&(this.lastLevelSwitchKbps=this.hls.bandwidthEstimate/h.bR)})),g(this,"handleLoadedMetadata",(()=>{this.setState({playbackState:h.Cy.LOADED_METADATA})})),g(this,"handleLoadStart",(()=>{this.playbackPerformance.loadStartTime=new Date,this.setState({playbackState:h.Cy.LOAD_START})})),g(this,"handleLoadedData",(()=>{this.setState({playbackState:h.Cy.LOADED_DATA})})),g(this,"handlePlaying",(()=>{this.playbackPerformance.hasFatalError=!1,this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.updateStallDuration(),this.updatePauseDuration(),this.setState({playbackState:h.Cy.PLAYING}),this.props.clearSeekTime()})),g(this,"handleUserPause",(e=>{const{onControlsPause:t}=this.props;this.lastPauseTime=new Date,t&&t(e)})),g(this,"handleVideoPause",(()=>{this.state.playbackState!==h.Cy.STALLING&&this.state.playbackState!==h.Cy.SEEKING&&(this.updateWatchDurationForCurrentSegment(),this.lastPauseTime||this.updateStallDuration()),this.setState({playbackState:h.Cy.PAUSED})})),g(this,"handleSeeking",(()=>{this.playbackPerformance.numberOfSeeks+=1;const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&(t.lastStartPlayTime=null),this.state.playbackState!==h.Cy.ENDED&&this.setState({playbackState:h.Cy.SEEKING})})),g(this,"handleStalled",(()=>{null===this.lastStallTime&&this.state.playbackState!==h.Cy.ENDED&&(this.lastStallTime=new Date,this.playbackPerformance.numberOfStalls+=1),this.setState({playbackState:h.Cy.STALLING})})),g(this,"handleTimeUpdate",(e=>{const{onTimeChange:t}=this.props;t&&t(e),this.state.playbackState===h.Cy.PLAYING&&(this.updateWatchDurationForCurrentSegment(),this.setLastSegmentStartPlayTime())})),g(this,"resetPlaybackMetrics",(()=>{this.hasPlaybackStarted=!1,this.hasVideoSessionStarted=!1,this.hasVideoSessionEnded=!0,this.lastLevelSwitchKbps=null,this.lastStallTime=null,this.lastPauseTime=null,this.videoSessionId="",this.videoVisibleTime=null,this.logSessionStartOnNextPlay=!1;const e={...this.playbackPerformance.segments[this.playbackPerformance.segments.length-1],lastStartPlayTime:null,playbackStartDate:null,switchBitrateKbps:-1,watchedDurationMs:0};this.playbackPerformance.detailedErrors="",this.playbackPerformance.downloadedKiloBytes=0,this.playbackPerformance.errorCode=0,this.playbackPerformance.errorName="",this.playbackPerformance.errorReason="",this.playbackPerformance.hasFatalError=!1,this.playbackPerformance.numberOfStalls=0,this.playbackPerformance.numberOfSeeks=0,this.playbackPerformance.playbackStartTimestamp=null,this.playbackPerformance.totalStallDurationMs=0,this.playbackPerformance.segments=[e]})),g(this,"setLastSegmentStartPlayTime",(()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.lastStartPlayTime&&(t.lastStartPlayTime=this.getCurrentVideoTime())})),g(this,"setLastSegmentPlaybackStartDate",(()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.playbackStartDate&&(t.playbackStartDate=Date.now())})),g(this,"setPlaybackStartTime",(()=>{this.hasPlaybackStarted||(this.playbackPerformance.playbackStartTimestamp=Date.now(),this.hasPlaybackStarted=!0)})),g(this,"setVideoPlayerRef",(e=>{const{setVideoRef:t}=this.props;if(e&&(t&&t(e),this.videoPlayerRef=e,this.videoPlayerRef.video)){const e=this.videoPlayerRef.video;e.addEventListener("loadedmetadata",this.handleLoadedMetadata),e.addEventListener("loadeddata",this.handleLoadedData),e.addEventListener("pause",this.handleVideoPause),e.readyState>=3&&(this.setState({canPlayVideo:!0}),this.playbackPerformance.canPlayTime=new Date)}})),g(this,"updateStallDuration",(()=>{null!==this.lastStallTime&&(this.playbackPerformance.totalStallDurationMs+=new Date-this.lastStallTime,this.lastStallTime=null)})),g(this,"updatePauseDuration",(()=>{if(null!==this.lastPauseTime){const e=this.lastPauseTime;this.playbackPerformance.totalPauseDurationMs+=new Date-e,this.lastPauseTime=null}})),g(this,"updateWatchDurationForCurrentSegment",(()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1],i=t?t.lastStartPlayTime:null,n=this.getCurrentVideoTime();if(t&&null!==i&&"number"==typeof n&&"number"==typeof i){const e=n-i;e>0&&(t.watchedDurationMs+=e,t.lastStartPlayTime=null)}})),g(this,"logPlaybackPerformance",((e,t)=>{const{contextLogData:i={},userId:n,isAutoPlay:o,logContextEvent:r}=this.props,{is_closeup_video:a=!1}=i,{canPlayTime:s,detailedErrors:l,downloadedKiloBytes:c,errorCode:d,errorName:u,errorReason:m,hasFatalError:_,playbackStartTimestamp:g,totalPauseDurationMs:v,totalStallDurationMs:f,segments:y,srcString:x,loadStartTime:b,numberOfStalls:w,numberOfSeeks:P}=this.playbackPerformance,S=this.videoPlayerRef&&this.videoPlayerRef.video,T=e===h.DR,I=T&&!this.hasVideoSessionStarted,k=!T&&!this.hasVideoSessionEnded&&this.hasVideoSessionStarted;if(this.hls&&S&&(I||k)){var E;let I=-1;s&&b&&(I=s>b?s-b:0);let k=-1;s&&this.videoVisibleTime&&(k=s>this.videoVisibleTime?s-this.videoVisibleTime:0),T&&(this.videoSessionId=(0,h.Y7)(n),this.playerId=this.playerId||(0,h.EB)());const A={autoplaying:o,averageVideoKbps:-1,detailedErrors:l,downloadedKiloBytes:c,isCellular:!1,errorCode:d,errorName:u,errorReason:m,fatalError:_,nativeVideoDurationMs:S.duration*h.gJ||-1,numberOfStalls:w,numberOfSeeks:P,overallPausedDurationMs:v,overallBufferDurationMs:f,overallWatchedDurationMs:-1,rebufferRate:-1,playbackSessionId:this.videoSessionId,playbackStartTimestamp:g||-1,segments:[],sessionMark:e,screenPixelScale:null!==(E=window)&&void 0!==E&&E.devicePixelRatio?window.devicePixelRatio:-1,startupPlayerWidth:S.clientWidth,startupPlayerHeight:S.clientHeight,startupTimeMs:I,startupLatencyMs:k,startupVariantKbps:-1,startupVariantWatchedDurationMs:-1,startupVariantWidth:S.videoWidth,startupVariantHeight:S.videoHeight,videoUrl:x};if(!T&&y.length){const e=this.hls.levels,t=y[0];this.updateWatchDurationForCurrentSegment(),this.updateStallDuration();const i=y.reduce(((t,i)=>{if(i&&"number"==typeof i.level&&e&&e.length>0){return t+(e[i.level]||{}).bitrate*(i.watchedDurationMs||0)/h.gJ}return t}),0),n=y.reduce(((e,t)=>e+(t.watchedDurationMs||0)),0);let o=null,r=0,a=0;do{r+=y[a].watchedDurationMs,o=o||y[a].level,a+=1}while(a<y.length&&y[a].level===o);A.startupVariantKbps=t.indicatedKbps,A.startupVariantWatchedDurationMs=r,A.startupVariantWidth=t.sourceWidth,A.startupVariantHeight=t.sourceHeight,A.startupPlayerWidth=t.viewportWidth,A.startupPlayerHeight=t.viewportHeight,A.overallWatchedDurationMs=n,n>0?(A.averageVideoKbps=i/(n/h.gJ),A.rebufferRate=this.playbackPerformance.totalStallDurationMs/n):0===n&&(A.averageVideoKbps=-1,A.rebufferRate=-1,A.errorName="invalid_watch_duration"),A.segments=y}else A.errorName="invalid_watch_duration";(0,p.ZP)(A,!0,a,{playbackState:this.state.playbackState,...t});const{clientTrackingParams:C,component:j,durationNs:R,element:D,objectId:O,pairId:L,viewData:M,view:N,viewParameter:z,...F}=i;r({aux_data:{...F,is_closeup_video:a,playback_session_id:this.videoSessionId},clientTrackingParams:C,component:j,duration_ns:R,element:D,event_data:{videoPerformanceData:A},event_type:3606,object_id_str:O,pair_id:L,view_data:M,view_parameter:z,view_type:N}),T?(this.hasVideoSessionStarted=!0,this.hasVideoSessionEnded=!1):this.resetPlaybackMetrics(),(0,p.tE)(T?"sessionStart":"sessionEnd",!0,a,{playbackState:this.state.playbackState,...t})}}))}componentDidMount(){const{contextLogData:e={},playing:t}=this.props,{is_closeup_video:i=!1}=e;this.playbackPerformance.videoCreatedTime=new Date,this.initializeHls(),(0,p.tE)("videoMounted",!0,i),t&&(this.videoVisibleTime=new Date,this.logPlaybackPerformance(h.DR,{initiator:"mount"}))}componentDidUpdate(e){const{loop:t,playing:i,src:n,visible:o,appInFocus:r,seekTime:a}=this.props;var s,l;a&&a!==e.seekTime&&this.setState({videoStartTime:a}),(typeof(s=e.src)!=typeof(l=n)||(Array.isArray(l)?s.length!==l.length||l.some(((e,t)=>!Array.isArray(s)||e.type!==s[t].type||e.src!==s[t].src)):l!==s))&&this.initializeHls(),e.appInFocus&&!r&&(this.logPlaybackPerformance(h.$f,{initiator:"update",loop:t}),this.logSessionStartOnNextPlay=!0),e.visible&&!1===o&&(this.logSessionStartOnNextPlay=!1,this.updatePauseDuration(),this.logPlaybackPerformance(h.$f,{initiator:"update",loop:t})),!1===e.visible&&!0===o&&(this.videoVisibleTime=this.videoVisibleTime||new Date,i?(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(h.DR,{initiator:"update"})):this.logSessionStartOnNextPlay=!0),i&&r&&this.logSessionStartOnNextPlay&&(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(h.DR,{initiator:"update"}),this.logSessionStartOnNextPlay=!1)}componentWillUnmount(){const{loop:e}=this.props;this.updatePauseDuration(),this.logPlaybackPerformance(h.$f,{initiator:"unmount",loop:e}),this.destroyHls()}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:o,accessibilityProgressBarLabel:r,accessibilityUnmuteLabel:a,aspectRatio:s,backgroundColor:l,captions:c,controls:d,loop:p,loopOverride:h,onDurationChange:m,onFullscreenChange:g,onLoadedChange:v,onControlsPlay:y,onPlayheadDown:x,onPlayheadUp:b,onSeek:w,onVolumeChange:P,playbackRate:S,playing:T,playsInline:I,poster:k,preload:E,quicExpGroup:A,src:C,volume:j}=this.props,{canPlayVideo:R,isManifestParsed:D,videoStartTime:O}=this.state,L=f(C,A);return(0,_.jsx)(u.nk,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:o,accessibilityProgressBarLabel:r,accessibilityUnmuteLabel:a,aspectRatio:s,backgroundColor:l,captions:c,controls:d,loop:void 0===h?p:h,onDurationChange:m,onEnded:this.handleEnded,onFullscreenChange:g,onLoadStart:this.handleLoadStart,onLoadedChange:v,onControlsPause:this.handleUserPause,onControlsPlay:y,onPlaying:this.handlePlaying,onPlayheadDown:x,onPlayheadUp:b,onReady:this.handleCanPlayVideo,onSeek:w,onSeeking:this.handleSeeking,onStalled:this.handleStalled,onTimeChange:this.handleTimeUpdate,onVolumeChange:P,onWaiting:this.handleStalled,playbackRate:S,onPlay:()=>{},onPlayError:()=>{},playing:D&&R&&T,playsInline:I,poster:k,preload:E,ref:this.setVideoPlayerRef,src:L,startTime:O,volume:j})}}const x=(0,n.memo)((function(e){const{country:t,isAuthenticated:i,isBot:n,isSocialBot:o,unauthId:r,userAgent:u}=(0,d.B)(),h=(0,a.Z)(),g=(0,s.Z)(),{browserName:v,browserVersion:f,isMobile:x}=u,{contextLogData:b={}}=e,{is_closeup_video:w=!1,view:P,viewParameter:S}=b,{checkExperiment:T}=(0,c.F)(),{seekTime:I}=(0,m.Hx)(),{clearSeekTime:k}=(0,m.RC)();let E=null;i&&(E=T("web_video_quic").group.length?T("web_video_quic").group:null);const{appUI:A}=(0,l.I)(),C=T("web_video_fail_to_start_fix").anyEnabled?A.appInFocus:e.appInFocus,j={browserName:v,browserVersion:f,country:t,isAuthenticated:i,isBot:n,is_closeup_video:w,isMobile:x,isSocialBot:o,view:P,viewParameter:S};return(0,p.r$)(j),(0,_.jsx)(y,{...e,userId:g.id||r,appInFocus:C,quicExpGroup:E,logContextEvent:h,seekTime:I,clearSeekTime:k})}))},964082:(e,t,i)=>{function n(e,t){const{organicVideosAutoplaying:i,promotedVideosAutoplaying:n}=t,o={...i,...n};for(const r in o){const{paused:t}=o[r];if(r!==e&&!t)return!1}return!0}i.d(t,{Z:()=>n})},36971:(e,t,i)=>{function n(e,t){const{organicVideosAutoplaying:i,promotedVideosAutoplaying:n}=t,o={...i,...n};return o[e]&&o[e].currentTime}i.d(t,{Z:()=>n})},428258:(e,t,i)=>{i.d(t,{Z:()=>r,t:()=>o});const n=()=>{var e,t;const i="undefined"!=typeof window?null===(e=window.navigator)||void 0===e||null===(t=e.connection)||void 0===t?void 0:t.effectiveType:void 0;let n,o=null===(r=window)||void 0===r||!r.devicePixelRatio||window.devicePixelRatio<=1?"1x":"2x";var r;return i?"4g"===i?n="40-80":(o="1x",n="0-1"):n="unknown",{downloadSpeedGroup:n,screenDimension:o}};function o(e){const{downloadSpeedGroup:t,screenDimension:i}=n(),o={"1x":e.V_EXP3,"2x":e.V_EXP5},r={"1x":e.V_EXP7,"2x":e.V_EXP7};return{unknown:o,"0-1":o,"1-5":{"1x":e.V_EXP4,"2x":e.V_EXP5},"5-10":{"1x":e.V_EXP5,"2x":e.V_EXP5},"10-20":{"1x":e.V_EXP6,"2x":e.V_EXP6},"20-40":r,"40-80":r,"80_or_above":r}[t][i]||e.V_720P||void 0}function r(e){const{video_list:t={}}=e,i=o(t),n=t.V_HLSV3_MOBILE||void 0;return i?{hlsv3:n,mp4:i}:{hlsv3:n}}},868565:(e,t,i)=>{function n(e){const t=e.videos&&e.videos.video_list;return t&&Object.keys(t).length?t.V_HLSV3_MOBILE||t.V_HLSV4||t.V_720P:null}i.d(t,{Z:()=>n})},463045:(e,t,i)=>{function n(e,t){const{organicVideosAutoplaying:i,promotedVideosAutoplaying:n}=t,o={...i,...n};return!!o[e]&&!o[e].paused}i.d(t,{Z:()=>n})},969315:(e,t,i)=>{i.d(t,{ZP:()=>u,r$:()=>c,tE:()=>d});var n=i(311560),o=i(172071),r=i(179888);const a=["isCellular","videoUrl","sessionMark"];let s={},l="";const c=e=>{const{browserName:t,browserVersion:i,country:o,isAuthenticated:r,isBot:a,isMobile:c,isSocialBot:d,view:u="unknown",viewParameter:p="unknown"}=e;l=(d?"socialBot":a&&"bot")||"nonbot";const h=(0,n.Z)(o);s={browserName:t,browserVersion:(null==i?void 0:i.split(".")[0])||"0",isAuthenticated:r,isMobile:c,region:h,view:u,viewParameter:p}};function d(e,t,i,n={}){const r=i?"closeup":"nonCloseup",a=t?"hls":"nonHls",c={...n,...s},d=`web.video.${a}.${l}.${r}.${e}`;o.Z.increment(d,1,c)}function u(e,t,i,n={}){const c=i?"closeup":"nonCloseup",d=t?"hls":"nonHls",u=e.sessionMark===r.DR?"sessionStart":"sessionEnd",p={...n,...s};if(Object.entries(e).forEach((([t,i])=>{const n=`web.video.${d}.${l}.${c}.${u}.${t}`,r=parseInt(i,10),s="number"==typeof r?r:-1;var h;if(!a.includes(t))if(t.includes("fatalError")&&!0===i){const{errorCode:t,errorName:i,errorReason:r}=e;o.Z.increment(n,1,{errorCode:t,errorName:i,errorReason:r,...p})}else if(t.includes("Width")||t.includes("Height")){const e=(h=s)<0?"negative":0===h?"zero":h<200?"xs":h<400?"s":h<600?"m":h<800?"l":h<1e3?"xl":h<1200?"xxl":"over1200";o.Z.increment(n,1,{dimensionBucket:e,...p})}else if("numberOfStalls"===t){let e=i;s>1e3?e="over1000":s>10?e="over10":s<0&&(e="negative"),o.Z.increment(n,1,{numberOfStalls:e,...p})}else"screenPixelScale"===t?o.Z.increment(n,1,{screenPixelScale:i||-1,...p}):s>=0?(0===s&&o.Z.increment(`${n}.zero`,1,p),o.Z.timing(n,s,1),o.Z.timing(`${n}_with_tags`,s,1,p)):s<0&&o.Z.increment(`${n}.negative`,1,p)})),e.sessionMark!==r.DR){const{rebufferRate:t,screenPixelScale:i,startupLatencyMs:n,startupVariantWidth:r,startupPlayerWidth:a}=e,s=`web.video.${d}.${l}.${c}.${u}`;if("number"==typeof r&&"number"==typeof a&&"number"==typeof i){const e=1.5*r>i*a;o.Z.increment(`${s}.upscaled.${e?"good":"bad"}`,1,p)}"number"==typeof n&&o.Z.increment(`${s}.startupLatency.${n<500?"good":"bad"}`,1,p),"number"==typeof t&&o.Z.increment(`${s}.rebufferRate.${t<.01?"good":"bad"}`,1,p)}}},179888:(e,t,i)=>{i.d(t,{$f:()=>r,Cy:()=>c,DR:()=>o,EB:()=>p,Fm:()=>l,Y7:()=>u,bR:()=>s,gJ:()=>a,lG:()=>d});var n=i(172045);const o=1,r=2,a=1e3,s=1e3,l=1e3,c=Object.freeze({DEFAULT:0,LOAD_START:1,LOADED_METADATA:2,LOADED_DATA:3,PLAYING:4,PAUSED:5,SEEKING:6,STALLING:7,FAILED:8,ENDED:9}),d=Object.freeze({MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4});function u(e){return e+"-"+(0,n.Z)()}function p(){return(0,n.Z)()}},121630:(e,t,i)=>{i.d(t,{Z:()=>r,e:()=>o});var n=i(81226);const o=e=>{if("undefined"==typeof window)return"";let t=0;const i=document.querySelector('[data-test-id="header"]');if(null!==i){const{height:e}=i.getBoundingClientRect();t+=e}switch(e){case"AuthHomefeed":const e=document.querySelector('[data-root-margin="more-ideas-tabs"]');if(null!==e){const{height:i}=e.getBoundingClientRect();t+=i}break;case"SearchItem":const i=document.querySelector('[data-root-margin="search-improvements-bar"]');if(null!==i){const{height:e}=i.getBoundingClientRect();t+=e}const n=document.querySelector('[data-test-id="search-tab-bar"],[data-root-margin="search-one-bar"]');if(null!==n){const{height:e}=n.getBoundingClientRect();t+=e}}return-1*t+"px 0px 0px 0px"},r=e=>{var t,i,o,r,a;return(0,n.Z)((null===(t=e.videos)||void 0===t?void 0:t.duration)||(null===(i=e.videos)||void 0===i||null===(o=i.video_list)||void 0===o||null===(r=o.V_HLSV4)||void 0===r?void 0:r.duration)||(null===(a=e.story_pin_data)||void 0===a?void 0:a.total_video_duration)||0)}},905723:(e,t,i)=>{i.d(t,{Z:()=>n});const n={V_HLSV4:"V_HLSV4",V_720P:"V_720P"}},523563:(e,t,i)=>{function n(e,t,i){return Object.keys(e).reduce(((i,n)=>i+Math.abs(e[n]-t[n])),0)<=i}i.d(t,{Z:()=>n})},229428:(e,t,i)=>{function n(e){return e.filter((e=>e.is_stela))}function o(e){return e.filter((e=>!!e.label))}i.d(t,{k:()=>n,m:()=>o})},975540:(e,t,i)=>{function n({cropArea:{x:e,y:t,w:i,h:n},scaledWidth:o,scaledHeight:r}){return{x:e/o,y:t/r,w:i/o,h:n/r}}i.d(t,{Z:()=>n})},599611:(e,t,i)=>{function n({cropArea:{x:e=0,y:t=0,w:i=0,h:n=0},scaledWidth:o,scaledHeight:r}){return{h:Math.floor(n*r),w:Math.floor(i*o),x:Math.floor(e*o),y:Math.floor(t*r)}}i.d(t,{Z:()=>n})},94047:(e,t,i)=>{function n({cropArea:{x:e,y:t,w:i,h:n},cropSource:o,searchQuery:r,entrySource:a,trafficSource:s,imageSignature:l}){const c=[];e>=0&&t>=0&&i>=0&&n>=0&&c.push(`x=${e}`,`y=${t}`,`w=${i}`,`h=${n}`),o&&c.push(`cropSource=${o}`),a&&c.push(`entrySource=${a}`),r&&c.push(`q=${r}`),l&&c.push(`imageSignature=${l}`),s&&"unknown"!==s&&c.push(`rs=${s}`);return c.length?`?${c.join("&")}`:""}i.d(t,{Z:()=>n})},297852:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(94047);function o({cropArea:e,cropSource:t,entrySource:i,isUnified:o,imageSignature:r,pinId:a,searchQuery:s,trafficSource:l,view:c}){return`/pin/${a}/${o?"related-products":"visual-search"}/${o||"products"!==c?"":"products/"}${(0,n.Z)({cropArea:e,cropSource:t,entrySource:i,trafficSource:l,searchQuery:s,imageSignature:r})}`}},43760:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(768559),o=i(102500),r=i(48714);function a({url:e,pinId:t,pin:i,location:a,auxData:s}){var l,c;const d={check_only:!0,client_tracking_params:i?(0,n.Z)({boardUrl:null===(l=i.board)||void 0===l?void 0:l.url,callToCreateSourcePinId:i.call_to_create_source_pin_id,location:a,pinId:i.id,pinnerUserName:null===(c=i.pinner)||void 0===c?void 0:c.username,storyPinDataId:i.story_pin_data_id,trackingParams:i.tracking_params,trackingParamsMap:i.tracking_params_map}):void 0,pin_id:i?i.id:t,url:e,aux_data:JSON.stringify(s)};(0,o.Z)(d).callGet().then((o=>{if(o&&o.resource_response&&!o.resource_response.error){const{resource_response:e}=o,{redirect_status:t,url:i}=e.data;if(!["blocked","suspicious","porn"].includes(t)){if(window.Windows.Foundation&&window.Windows.System&&window.Windows.System.Launcher&&window.Windows.System.Launcher.launchUriAsync){const e=new window.Windows.Foundation.Uri(i);window.Windows.System.Launcher.launchUriAsync(e)}return}}if(i){var l,c;const o=(0,n.Z)({boardUrl:null===(l=i.board)||void 0===l?void 0:l.url,callToCreateSourcePinId:i.call_to_create_source_pin_id,location:a,pinId:i.id,pinnerUserName:null===(c=i.pinner)||void 0===c?void 0:c.username,storyPinDataId:i.story_pin_data_id,trackingParams:i.tracking_params,trackingParamsMap:i.tracking_params_map});(0,r.Gj)({url:e,pinId:t,csrId:null,clientTrackingParams:o,auxData:s})}else(0,r.Gj)({url:e,pinId:t})}))}},869899:(e,t,i)=>{i.r(t),i.d(t,{RoleBasedAccessControlProvider:()=>y,useRoleBasedAccessControlContext:()=>f});var n=i(667294),o=i(389643),r=i(784590),a=i(19121),s=i(773285),l=i(425288),c=i(70061);const d=e=>{const t={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&("object"!=typeof e[i]||null===e[i]||Array.isArray(e[i])?t[(0,c.Z)(i)]=e[i]:t[(0,c.Z)(i)]=d(e[i]));return t},u=(e,t)=>{const i=[];for(const r in e)r!==t&&i.push({id:r,...d(e[r])});const n=i.sort((({user:{businessName:e}},{user:{businessName:t}})=>e.localeCompare(t))),o=new Map;for(const r of n)o.set(r.id,r);return o};var p=i(622096);const h={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},m=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}},_=e=>{const[t,i]=(0,n.useReducer)(m,h),o=(({dispatch:e,isEnabled:t,state:i})=>{const{orbacVisibility:o,disableProfileChanger:r,headerVisible:a}=i;return{changeProfile:(0,n.useCallback)((i=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:i})}),[t,e]),toggleORBACVisibility:(0,n.useCallback)((i=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:null!=i?i:!o})}),[t,e,o]),toggleDisableProfileChanger:(0,n.useCallback)((i=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:null!=i?i:!r})}),[t,e,r]),toggleHeaderVisibility:(0,n.useCallback)((i=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:null!=i?i:!a})}),[t,e,a])}})({dispatch:i,isEnabled:e,state:t}),{activeProfile:r,orbacVisibility:a}=t;(0,n.useEffect)((()=>{const e=(0,p.qn)("orbacActiveProfile",!1);e&&i({type:"SET_ACTIVE_PROFILE",payload:e})}),[]),(0,n.useEffect)((()=>{const e=(0,p.qn)("orbacVisibilty",!1);e&&i({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})}),[]),(0,n.useEffect)((()=>{(0,p.Nh)("orbacVisibility",a)}),[a]),(0,n.useEffect)((()=>{(0,p.Nh)("orbacActiveProfile",r)}),[r]);return{state:t,actions:o,receiveProfiles:(0,n.useCallback)(((e,t)=>{i({type:"LOAD_PROFILES",payload:u(e,t)})}),[i])}};var g=i(785893);const{Provider:v,useMaybeHook:f}=(0,l.Z)("RoleBasedAccessControlContext"),y=({children:e})=>{const{checkExperiment:t}=(0,s.F)(),i=(0,a.Z)(),l=Boolean(i.isAuth&&i.isPartner&&t("web_m10n_business_access_orbac_www").anyEnabled),{state:c,actions:d,receiveProfiles:u}=_(l),{activeProfile:p,headerVisible:h,profiles:m=[]}=c,f=m?Array.from(m.values()):[],y=(0,o.Z)(f),x=!!(i.isAuth&&f.length>0)&&y,b=i.isAuth?i.id:"",w=i.isAuth?i.username:"",{changeProfile:P,toggleORBACVisibility:S,toggleDisableProfileChanger:T,toggleHeaderVisibility:I}=d;(0,n.useEffect)((()=>{l&&("string"!=typeof y?p||P(b):P(y))}),[y,b,l,P,p]),(0,n.useEffect)((()=>{l&&(x&&!h&&I(!0),!x&&h&&I(!1))}),[I,x,l,h,m]);const{data:k}=(0,r.Z)(l?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),E=null==k?void 0:k.profiles;let A;i&&i.isAuth&&c.activeProfile===i.id?A={id:i.id,permissions:["OWNER"],user:{username:w,businessName:i.fullName,imgUrl:i.imageSmallUrl}}:p&&c.profiles&&(A=c.profiles.get(p)),(0,n.useEffect)((()=>{E&&u(E,b)}),[u,E,b]);const C=c.profiles?Array.from(c.profiles.values()):[];return(0,g.jsx)(v,{value:{profiles:C,headerVisible:c.headerVisible,activeProfile:A,changeProfile:P,toggleORBACVisibility:S,toggleDisableProfileChanger:T,toggleHeaderVisibility:I},children:e})}},717615:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(389643),o=i(773285),r=i(869899);const a=()=>{const{checkExperiment:e}=(0,o.F)(),t=(0,r.useRoleBasedAccessControlContext)(),{activeProfile:i}=t||{},a=e("web_m10n_business_access_orbac_www").anyEnabled,s=(0,n.Z)((null==t?void 0:t.profiles)||[]),{anyEnabled:l}=e("useorbacroutematcher_in_useorbacactingas");return a?l&&!s?Object.freeze({}):i&&(i.viewerMeetsMfaRequirement||(i.permissions||[]).includes("OWNER"))?i:Object.freeze({}):Object.freeze({})}},389643:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(702664),o=i(19121),r=i(773285),a=i(53987),s=i(276775);const l=e=>{var t;const i=(0,s.useLocation)(),l=(0,o.Z)(),{anyEnabled:c}=(0,r.F)().checkExperiment("web_m10n_business_access_orbac_www"),d=(0,s.useRouteMatch)("/:username"),u=null==d||null===(t=d.params)||void 0===t?void 0:t.username,p=(0,s.useRouteMatch)("/pin/:id"),h=(0,n.useSelector)((e=>{var t,i,n,o;return!(null==p||null===(t=p.params)||void 0===t||!t.id)&&(null==e||null===(i=e.pins)||void 0===i||null===(n=i[p.params.id])||void 0===n||null===(o=n.pinner)||void 0===o?void 0:o.id)}));if((0,a.ej)(i))return!1;if((0,a.RU)(i))return!0;if((0,a.mY)(i))return c;const m=e.concat(l.isAuth?{user:{username:l.username},id:l.id}:{}).find((e=>{const{user:t={},id:i}=e||{},{username:n}=t;return!!(n&&u||h&&i)&&(n===u||h===i)}));return!!m&&m.id}},231947:(e,t,i)=>{i.d(t,{D3:()=>c,DX:()=>s,KY:()=>d,Ms:()=>n,N1:()=>u,_P:()=>a,lJ:()=>r,nl:()=>o,q6:()=>l});const n=(e,t)=>{let i=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(i=t.user.username),i},o=(e,t)=>Boolean(t&&t.user&&e&&e.isAuth&&t.id!==e.id?t.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),r=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",a=(e,t,i)=>{var n;return i&&i.user&&t&&t.isAuth&&i.id!==t.id?i.user.merchantId:null===(n=e.advertiser)||void 0===n?void 0:n.merchant_id},s=(e,t,i)=>i&&i.user&&e.isAuth&&i.id!==e.id?i.user.scheduledPinCount||0:e.isAuth&&t&&t.scheduled_pin_count||0,l=(e,t,i)=>!!(e&&e.isAuth&&i&&i.id&&i.id!==e.id&&i.id===t),c=(e,t,i)=>!!(l(e,t,i)||e&&e.isAuth&&t===e.id),d=(e,t,i)=>{const n=t&&t.owner&&t.owner.id||"";return c(e,n,i)};function u(e,t,i){const n=t?t.id:"";return c(e,n,i)}},522679:(e,t,i)=>{i.d(t,{N:()=>u,t:()=>p});var n=i(667294),o=i(904431),r=i(924196),a=i(78714),s=i(6637),l=i(425288),c=i(785893);const{Provider:d,useHook:u}=(0,l.Z)("LinkedAccount");function p({children:e}){const[t,i]=(0,n.useState)(!1),[l,u]=(0,n.useState)([]),p=(0,n.useCallback)((({businessName:e,thirdPartyApps:t,thirdPartyMarketingTrackingEnabled:n,nextUrl:l})=>{i(!0);const c={business_name:e,third_party_apps:t};return s.Z.create("BusinessOwnershipResource",c).callCreate({showError:!0}).then((()=>{n&&(o.Z.reportFacebookConversion(r.Z.FACEBOOK_ADVERTISER_ID,"CompleteRegistration",{content_name:"/business/convert"}),o.Z.reportPinterestConversion("track","lead",{lead_type:"Self-serve"}),o.Z.reportLinkedInConversion(r.Z.LINKEDIN_PARTNER_ID,r.Z.LINKEDIN_CONVERSION_ID_SUBMISSION_EVENT),o.Z.reportGoogleConversion(r.Z.GOOGLE_ADWORDS_ID,r.Z.GOOGLE_ADWORDS_LABEL_BUSINESS_CONVERT)),i(!1),(e=>{(0,a.Z)(e?`/?next=${encodeURIComponent(e)}`:"/")})(l)})).catch((e=>(i(!1),Promise.reject({error:e}))))}),[i]),h=(0,n.useMemo)((()=>({createLinkedBusinessAccount:p,linkedBusinessCreationLoading:t,userAccounts:l,userAccountsRetrieved:u})),[p,t,u,l]);return(0,c.jsx)(d,{value:h,children:e})}},965900:(e,t,i)=>{i.d(t,{g:()=>h,I:()=>p});var n=i(667294),o=i(567450),r=i(150361),a=i.n(r);const s={appInFocus:!0,footerPlusButtonVisible:!0,isAutoplay:!1,showTypeaheadOverlay:!1,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,organicVideosAutoplaying:{},promotedVideosAutoplaying:{}},viewportSize:"lg"},l=(e=s,t)=>{if("TOGGLE_TYPEAHEAD_OVERLAY"===t.type)return{...e,showTypeaheadOverlay:t.payload};if("SET_CURRENT_VIDEO"===t.type){const{payload:i}=t,{pinId:n,isPromoted:o,currentTime:r,inVideoGridAutoplayExp:s}=i,{videosAutoplaying:l}=e,{currentlyPlayingOrganicVideoId:c,promotedVideosAutoplaying:d,organicVideosAutoplaying:u}=l,p=a()(d),h=a()(u);return!o&&c&&s?e:(o?p[n]={pinId:n,currentTime:r,paused:!1}:h[n]={pinId:n,currentTime:r,paused:!1},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:o?c:n,promotedVideosAutoplaying:p,organicVideosAutoplaying:h}})}if("SET_IS_AUTOPLAY"===t.type)return{...e,isAutoplay:t.payload};if("PAUSE_CURRENT_VIDEO"===t.type){const{payload:i}=t,{pinId:n,isPromoted:o,currentTime:r}=i,{videosAutoplaying:s}=e,{promotedVideosAutoplaying:l,organicVideosAutoplaying:c}=s,d=a()(l),u=a()(c);return o?d[n]={...d[n],paused:!0,currentTime:r}:u[n]={...u[n],paused:!0,currentTime:r},{...e,videosAutoplaying:{currentlyPlayingOrganicVideoId:null,promotedVideosAutoplaying:d,organicVideosAutoplaying:u}}}return"SET_APP_FOCUS_STATE"===t.type?{...e,appInFocus:t.payload}:"SET_VIEWPORT_SIZE"===t.type?{...e,viewportSize:t.payload}:"SET_FOOTER_VISIBILITY_STATE"===t.type?{...e,footerPlusButtonVisible:t.payload}:e};var c=i(425288),d=i(785893);const{Provider:u,useHook:p}=(0,c.Z)("AppUI");function h({children:e}){const[t,i]=(0,n.useReducer)(l,s),r=(0,n.useCallback)((e=>i({type:"PAUSE_CURRENT_VIDEO",payload:e})),[]),a=(0,n.useCallback)((e=>i({type:"SET_APP_FOCUS_STATE",payload:e})),[]),c=(0,n.useCallback)((e=>i({type:"SET_CURRENT_VIDEO",payload:e})),[]),p=(0,n.useCallback)((e=>i({type:"SET_FOOTER_VISIBILITY_STATE",payload:e})),[]),h=(0,n.useCallback)((e=>i({type:"SET_IS_AUTOPLAY",payload:e})),[]),m=(0,n.useCallback)((e=>i({type:"SET_VIEWPORT_SIZE",payload:e})),[]),_=(0,n.useCallback)((e=>i({type:"TOGGLE_TYPEAHEAD_OVERLAY",payload:e})),[]),g=(0,n.useMemo)((()=>({pauseAutoplay:r,setCurrentVideo:c,setFooterPlusButtonVisible:p,setIsAutoplay:h,setViewportSize:m,toggleTypeaheadOverlay:_,setAppFocusState:a,appUI:t})),[r,c,p,h,m,_,a,t]);return(0,n.useEffect)((()=>{o.Z.onSessionResume((()=>{a(!0)})).onSessionPause((()=>{a(!1)}))}),[a]),(0,d.jsx)(u,{value:g,children:e})}},40706:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(62700),o=i(883119),r=i(785893);const a={chip:{marginRight:1,flex:"1 1 0"},chipInner:{paddingBottom:"100%"},chipContainer:{marginRight:-1}};function s({pin:e,enableCloseupLink:t}){const{aggregated_pin_data:i}=e,{pin_tags_chips:s}=i||{},l=s&&s.length>=3?s.slice(0,3):[];return(0,r.jsx)(o.xu,{display:"flex",dangerouslySetInlineStyle:{__style:a.chipContainer},children:l.map((i=>{var s,l,c,d;const u=(null===(s=i.images)||void 0===s?void 0:s["750x"])||{},p=(0,r.jsx)(o.Ee,{alt:"",fit:"cover",naturalHeight:null!==(l=u.height)&&void 0!==l?l:1,naturalWidth:null!==(c=u.width)&&void 0!==c?c:1,role:"presentation",src:null!==(d=u.url)&&void 0!==d?d:""});return(0,r.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:a.chip},"data-test-id":"collageChip",children:(0,r.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:a.chipInner},position:"relative",children:(0,r.jsx)(o.xu,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,children:(0,r.jsx)(o.zd,{height:"100%",wash:!0,width:"100%",children:t?(0,r.jsx)(n.Z,{sizing:"fullSize",collageChipId:i.id,pin:e,children:p}):p})})})},i.id)}))})}},199387:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294),o=i(407043),r=i(576440);function a(e,t){const{logContextEvent:i}=(0,o.v)(),{componentType:a,contextLogData:s,viewParameter:l,viewType:c}=(0,r.E)(),{aux_data:d,view_type:u,view_parameter:p,component:h,clientTrackingParams:m,..._}=null!=t?t:{};return(0,n.useCallback)((()=>{i({event_type:e,view_type:u||c,view_parameter:p||l,component:h||a,clientTrackingParams:m,..._,aux_data:{...d,...s}})}),[i,d,m,_,p,u,h,a,s,e,l,c])}},225692:(e,t,i)=>{i.d(t,{X:()=>o,Z:()=>r});var n=i(667294);const o=120;function r(e,t=0,i=o){const[r,a]=(0,n.useState)(e?"active":"inactive");return(0,n.useEffect)((()=>{if(!e){const e=setTimeout((()=>a("inactive")),i);return()=>{clearTimeout(e)}}if(t){const e=setTimeout((()=>a("active")),t);return()=>{clearTimeout(e)}}a("active")}),[e]),r}},350445:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(898781),o=i(883119),r=i(785893);const a={__path:"M12 18.5A6.508 6.508 0 0 1 5.5 12c0-1.706.689-3.307 1.835-4.5H6.5a1 1 0 1 1 0-2h4.185v4.474a1 1 0 0 1-2 0V8.972A4.505 4.505 0 0 0 7.5 12c0 2.481 2.019 4.5 4.5 4.5s4.5-2.019 4.5-4.5a4.49 4.49 0 0 0-3.112-4.283 1 1 0 1 1 .615-1.902A6.482 6.482 0 0 1 18.5 12c0 3.584-2.916 6.5-6.5 6.5M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0"},s={__path:"M17.496 14.572a1 1 0 0 1-1 1h-.001a1.001 1.001 0 0 1-.999-1.001l.002-4.652-7.29 7.288a.995.995 0 0 1-.707.293.999.999 0 0 1-.707-1.707l7.293-7.29L9.428 8.5a1 1 0 0 1 .001-2h.001l8.071.005-.005 8.067zM12 0C5.373 0 0 5.373 0 12c0 6.628 5.373 12 12 12 6.628 0 12-5.372 12-12 0-6.627-5.372-12-12-12z"},l={overlay:{__style:{backgroundColor:"#000"}}};function c({backgroundImage:e,naturalHeight:t,naturalWidth:i,onRestartVideo:c,pinTitle:d,pin:u}){const p=(0,n.ZP)(),{id:h}=u;return(0,r.jsxs)(o.Ee,{alt:d||p._('pin image', 'image of a pin', 'image of a pin'),naturalHeight:t,naturalWidth:i,src:e,children:[(0,r.jsx)(o.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,opacity:.8,dangerouslySetInlineStyle:l.overlay}),(0,r.jsxs)(o.xu,{justifyContent:"center",direction:"column",display:"flex",position:"absolute",height:"100%",width:"100%","data-test-id":`video-end-card-${h}`,children:[(0,r.jsx)(o.iP,{rounding:2,children:(0,r.jsxs)(o.xu,{display:"flex",justifyContent:"center",padding:2,children:[(0,r.jsx)(o.JO,{accessibilityLabel:p._('Visit site', 'Button when pressed goes to pin\'s website', 'Button when pressed goes to pin\'s website'),color:"light",dangerouslySetSvgPath:s,size:25}),(0,r.jsx)(o.xu,{margin:1}),(0,r.jsx)(o.xv,{color:"light",lineClamp:1,weight:"bold",children:p._('Visit site', 'Button when pressed goes to pin\'s website', 'Button when pressed goes to pin\'s website')})]})}),(0,r.jsx)(o.xu,{margin:3}),(0,r.jsx)(o.iP,{onTap:c,rounding:2,children:(0,r.jsxs)(o.xu,{display:"flex",justifyContent:"center",padding:2,children:[(0,r.jsx)(o.JO,{accessibilityLabel:p._('Watch again', 'Button when pressed restarts the video', 'Button when pressed restarts the video'),color:"light",dangerouslySetSvgPath:a,size:25}),(0,r.jsx)(o.xu,{margin:1}),(0,r.jsx)(o.xv,{color:"light",lineClamp:1,weight:"bold",children:p._('Watch again', 'Button when pressed restarts the video', 'Button when pressed restarts the video')})]})})]})]})}},697247:(e,t,i)=>{i.d(t,{$:()=>r,B:()=>o});var n=i(425288);const{Provider:o,useHook:r}=(0,n.Z)("SurfaceContext",{surface:"Unknown"})},576440:(e,t,i)=>{i.d(t,{B:()=>o,E:()=>r});var n=i(425288);const{Provider:o,useHook:r}=(0,n.Z)("trackingParametersContext")},62700:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(605028),o=i(66699),r=i(898781),a=i(287072),s=i(35495),l=i(883119),c=i(407043),d=i(243943),u=i(576440),p=i(785893);function h({sizing:e="default",children:t,collageChipId:i,componentType:h,contextLogData:m,elementType:_,pin:g,viewParameter:v,viewType:f}){const y=(0,r.ZP)(),{logContextEvent:x}=(0,c.v)(),b=(0,u.E)(),{carousel_data:w,id:P}=g,{isLeadPin:S}=(0,n.Z)(g);let T,I=`/pin/${i||P}/`;const k=(0,d.Xx)();if(null!=k&&k.variantUrl&&(I=`/pin/${k.variantUrl}/`),w){const{carousel_slots:e=[],id:t,index:i=0}=w;I=`/pin/${P}/`,T={carousel_slot_id:e[i]&&e[i].id,carousel_data_id:t,carousel_slot_index:i}}T={...T||{},...(0,s.Kl)(g,m)||{}};const E=(0,a.Z)({href:I,externalData:{auxData:T,pin:g}});return(0,p.jsx)(l.iP,{accessibilityLabel:(0,o.Z)(y._('{{ pinTitle }} pin page', 'pinRep.closeupLink.tapArea.accessibilityLabel', 'Accessibility label with pin title on individual links'),{pinTitle:g.grid_title||g.title||g.description||""}),mouseCursor:"zoomIn",rounding:2,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{var i,n;t(),S?(x({event_type:8948,view_type:f||b.viewType,view_parameter:v||b.viewParameter,component:null,aux_data:{closeup_navigation_type:"click",lead_form_id:null===(i=g.promoted_lead_form)||void 0===i?void 0:i.lead_id}}),x({event_type:12,view_type:f||b.viewType,view_parameter:v||b.viewParameter,component:null,aux_data:{lead_form_id:null===(n=g.promoted_lead_form)||void 0===n?void 0:n.lead_id,...(0,s.Kl)(g,{})||{}}})):(x({event_type:101,component:h||b.componentType,element:_,object_id_str:P,view_type:f||b.viewType,view_parameter:v||b.viewParameter,aux_data:{...m,...(0,s.Kl)(g,m)||{}}}),x({event_type:8948,view_type:f||b.viewType,view_parameter:v||b.viewParameter,component:h||b.componentType,element:_,object_id_str:P,aux_data:{closeup_navigation_type:"click",...m,...(0,s.Kl)(g,m)||{}}})),E({event:e})},fullWidth:"fullSize"===e,fullHeight:"fullSize"===e,href:I,role:"link",children:t})}},841509:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(883119),o=i(785893);function r({children:e,additionalStyles:t={}}){return(0,o.jsx)(n.xu,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",...t}},"data-test-id":"contentLayer",children:e})}},337986:(e,t,i)=>{i.d(t,{Z:()=>w});var n=i(667294),o=i(499128),r=i(898781),a=i(883119),s=i(785893);function l(e){const t=(0,r.ZP)(),{onHide:i}=e,n=(0,s.jsx)(a.xv,{children:t._('Thank you for helping improve signal detection on Pinterest!', 'pinRep.actionBar.signalDetector.toast', 'Toast text displayed when a user submits a signal for review')});return(0,s.jsx)(o.ZP,{onHide:i,text:n})}var c=i(6637),d=i(19121),u=i(343341);const p=function({anchor:e,onDismiss:t,pinId:i,signals:o}){const p=(0,r.ZP)(),[h,m]=(0,n.useState)(0),_=(0,d.Z)(),{showOneToast:g}=(0,u.F9)();if(!_.isEmployee)return null;const v=o.map((({signal_message:e})=>({href:"#",text:null!=e?e:""}))),{background_color:f,icon_url:y,signal_id:x,signal_message:b}=o[h];return(0,s.jsx)(a.mh,{children:(0,s.jsx)(a.J2,{anchor:e,idealDirection:"right",onDismiss:t,positionRelativeToAnchor:!1,size:"lg",children:(0,s.jsxs)(a.xu,{padding:4,width:"100%",children:[o.length>1&&(0,s.jsx)(a.xu,{overflow:"scrollX",padding:1,marginBottom:4,children:(0,s.jsx)(a.mQ,{activeTabIndex:h,onChange:({event:e,activeTabIndex:t,dangerouslyDisableOnNavigation:i})=>{i(),(({activeTabIndex:e,event:t})=>{t.preventDefault(),m(e)})({activeTabIndex:t,event:e})},tabs:v})}),(0,s.jsx)(a.kC,{alignItems:"center",justifyContent:"start",children:(0,s.jsx)(a.X6,{size:"400",children:p._('Signal detected:', 'pinRep.actionBar.signalDetector.header', 'Header for signal detector flyout')})}),(0,s.jsx)(a.xu,{paddingY:3,children:(0,s.jsxs)(a.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"center",children:[(0,s.jsx)(a.xu,{height:40,overflow:"hidden",rounding:"circle",width:40,children:y?(0,s.jsx)(a.Ee,{alt:p._('Signal display', 'pinRep.actionBar.signalDetector.signalAsset', 'Asset to represent the signal detected'),color:"white",naturalHeight:1,naturalWidth:1,src:y}):(0,s.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:f}},height:40,width:40})}),(0,s.jsx)(a.xv,{size:"200",children:b})]})}),(0,s.jsx)(a.xu,{marginBottom:3,children:(0,s.jsx)(a.xv,{size:"200",children:p._('If you think this detection is inaccurate, please send this Pin for review. It will help improve Pinterest.', 'pinRep.actionBar.signalDetector.instructions', 'Instructions to the user for how to handle inaccurate detection')})}),(0,s.jsxs)(a.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"start",children:[(0,s.jsx)(a.zx,{fullWidth:!0,color:"red",size:"md",text:p._('Send for review', 'pinRep.actionBar.signalDetector.button.review', 'Button label for users to send the pin for review'),onClick:()=>{const e={pin_id:i,signal_id:x,user:_.id};c.Z.create("SignalReviewRequestResource",e).callCreate(),t(),g((({hideToast:e})=>(0,s.jsx)(l,{onHide:e})))}}),(0,s.jsx)(a.zx,{fullWidth:!0,color:"gray",size:"md",text:p._('Cancel', 'pinRep.actionBar.signalDetector.button.cancel', 'Button label for users to cancel'),onClick:t})]})]})})})};var h=i(241244),m=i(319915),_=i(947599),g=i(215292);function v({signals:e,pinId:t}){const{background_color:i,icon_url:o,signal_message:r}=e[0],[l,c]=(0,n.useState)(!1),d=(0,n.useRef)();return(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(m.Z,{name:"SafeSuspense_DebugSignal_FeedbackButton",children:(0,s.jsx)(_.Z,{children:(0,s.jsx)(a.xu,{"data-test-id":"debug-signals-feedback-button",children:(0,s.jsx)(h.Z,{children:(0,s.jsx)(g.q,{children:({hovered:e,onMouseEnter:t,onMouseLeave:n})=>(0,s.jsx)(a.iP,{onTap:()=>c((e=>!e)),rounding:"pill",onMouseEnter:t,onMouseLeave:n,children:(0,s.jsxs)(a.xu,{color:e?"dark":"transparentDarkGray",rounding:"pill",display:"flex",alignItems:"center",padding:3,ref:d,children:[(0,s.jsx)(a.xu,{display:"flex",width:24,height:24,rounding:"circle",color:"default",marginEnd:1,justifyContent:"center",alignItems:"center",children:(0,s.jsx)(a.xu,{width:20,height:20,rounding:"circle",overflow:"hidden",children:(0,s.jsx)(a.Ee,{alt:"",color:i,src:null!=o?o:"",naturalHeight:1,naturalWidth:1})})}),(0,s.jsx)(a.xv,{color:"inverse",size:"200",weight:"bold",children:r})]})})})})})})}),l&&d&&d.current&&(0,s.jsx)(p,{anchor:d.current,onDismiss:()=>c(!1),pinId:t,signals:e})]})}const f=({signal:e,anchor:t,setShowFlyout:i,setStore:n})=>{var o;const{hovered:r,onMouseEnter:l,onMouseLeave:c}=(0,g.Z)();return(0,s.jsx)(a.iP,{onTap:()=>(e=>{i((e=>!e)),n(e)})(e),rounding:"pill",onMouseEnter:l,onMouseLeave:c,children:(0,s.jsxs)(a.xu,{color:r?"dark":"transparentDarkGray",rounding:"pill",display:"flex",alignItems:"center",padding:3,ref:t,children:[(0,s.jsx)(a.xu,{display:"flex",minWidth:24,height:24,rounding:"circle",marginEnd:1,color:"default",justifyContent:"center",alignItems:"center",children:(0,s.jsx)(a.xu,{width:20,height:20,rounding:"circle",overflow:"hidden",children:(0,s.jsx)(a.Ee,{alt:"",color:e.background_color,src:null!==(o=e.icon_url)&&void 0!==o?o:"",naturalHeight:1,naturalWidth:1})})}),(0,s.jsx)(a.xv,{color:"inverse",size:"200",weight:"bold",children:e.signal_message})]})})};const y=function({anchor:e,onDismiss:t,pinId:i,signal:n}){const o=(0,r.ZP)(),p=(0,d.Z)(),{showOneToast:h}=(0,u.F9)();if(!p.isEmployee)return null;const{background_color:m,icon_url:_,signal_id:g,signal_message:v}=n;return(0,s.jsx)(a.mh,{children:(0,s.jsx)(a.J2,{anchor:e,idealDirection:"right",onDismiss:t,positionRelativeToAnchor:!1,size:"lg",children:(0,s.jsxs)(a.xu,{padding:4,width:"100%",children:[(0,s.jsx)(a.kC,{alignItems:"center",justifyContent:"start",children:(0,s.jsx)(a.X6,{size:"400",children:o._('Signal detected:', 'pinRep.actionBar.signalDetector.header', 'Header for signal detector flyout')})}),(0,s.jsx)(a.xu,{paddingY:3,children:(0,s.jsxs)(a.kC,{alignItems:"center",gap:2,justifyContent:"center",children:[(0,s.jsx)(a.xu,{height:40,overflow:"hidden",rounding:"circle",width:40,children:_?(0,s.jsx)(a.Ee,{alt:o._('Signal display', 'pinRep.actionBar.signalDetector.signalAsset', 'Asset to represent the signal detected'),color:"white",naturalHeight:1,naturalWidth:1,src:_}):(0,s.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:m}},height:40,width:40})}),(0,s.jsx)(a.xv,{size:"200",children:v})]})}),(0,s.jsx)(a.xu,{marginBottom:3,children:(0,s.jsx)(a.xv,{size:"200",children:o._('If you think this detection is inaccurate, please send this Pin for review. It will help improve Pinterest.', 'pinRep.actionBar.signalDetector.instructions', 'Instructions to the user for how to handle inaccurate detection')})}),(0,s.jsxs)(a.kC,{alignItems:"center",gap:2,justifyContent:"start",children:[(0,s.jsx)(a.zx,{fullWidth:!0,color:"red",size:"md",text:o._('Send for review', 'pinRep.actionBar.signalDetector.button.review', 'Button label for users to send the pin for review'),onClick:()=>{const e={pin_id:i,signal_id:g,user:p.id};c.Z.create("SignalReviewRequestResource",e).callCreate(),t(),h((({hideToast:e})=>(0,s.jsx)(l,{onHide:e})))}}),(0,s.jsx)(a.zx,{fullWidth:!0,color:"gray",size:"md",text:o._('Cancel', 'pinRep.actionBar.signalDetector.button.cancel', 'Button label for users to cancel'),onClick:t})]})]})})})};function x({signals:e,pinId:t}){const[i,o]=(0,n.useState)(!1),r=(0,n.useRef)(null),[l,c]=(0,n.useState)(e[0]);return(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(m.Z,{name:"SafeSuspense_DebugSignal_FeedbackButton",children:(0,s.jsx)(_.Z,{children:(0,s.jsx)(a.xu,{"data-test-id":"debug-signals-feedback-button",children:(0,s.jsx)(h.Z,{children:(0,s.jsx)(a.kC,{alignItems:"stretch",justifyContent:"start",children:e.map((e=>(0,s.jsx)(a.xu,{marginEnd:2,children:(0,s.jsx)(f,{signal:e,anchor:r,setShowFlyout:o,setStore:c})},e.signal_id)))})})})})}),i&&(0,s.jsx)(y,{anchor:r.current,onDismiss:()=>o(!1),pinId:t,signal:l})]})}var b=i(276775);function w({pin:e}){const t=(0,d.Z)(),{search:i}=(0,b.useLocation)(),o=(0,n.useMemo)((()=>new URLSearchParams(i)),[i]);if(!t.isEmployee)return null;const{id:r,deb_ads:a,deb_content_quality:l,deb_inclusive_product:c,deb_shopping:u,deb_trust_and_safety:p}=e;if(a)return(0,s.jsx)(v,{pinId:r,signals:a});if(l)return(0,s.jsx)(v,{pinId:r,signals:l});if(c){if("skin_tone"===o.get("type")){const e=c.filter((e=>"visual_signals_hair_pattern_v1"!==e.signal_id));return(0,s.jsx)(x,{pinId:r,signals:e})}{const e=c.filter((e=>"visual_body_analyses_v2_0"!==e.signal_id));return(0,s.jsx)(x,{pinId:r,signals:e})}}return u?(0,s.jsx)(v,{pinId:r,signals:u}):p?(0,s.jsx)(v,{pinId:r,signals:p}):null}},525199:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(883119),o=i(225692),r=i(785893);function a(e,t){return{hidden:{opacity:0,transition:t?`opacity ${t}ms ease`:void 0},visible:{opacity:1,transition:e?`opacity ${e}ms ease`:void 0}}}function s({children:e,fadeInDuration:t=0,fadeOutDuration:i=o.X,visibility:s}){return"none"!==s&&e?(0,r.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:a(t,i)[s]},children:e}):null}},43671:(e,t,i)=>{i.d(t,{ZP:()=>g});var n=i(667294),o=i(841509),r=i(898781),a=i(55275),s=i(310227),l=i(407043),c=i(883119),d=i(785893);const u={base:{transition:"all 250ms",opacity:0},blurred:{backgroundPosition:"50% 50%",backgroundSize:"cover",borderRadius:s.Oc,filter:"blur(10px)",opacity:1}},p={base:{transition:"all 250ms"},blurred:{backgroundColor:"rgba(0,0,0,0.6)"}},h={base:{opacity:0,transition:"all 250ms"},visible:{opacity:1}},m=["followed","related","search"],_=["pfy","pfyBoard"];function g({feedbackType:e,pin:t,hideContents:i=!1}){var g;const{logContextEvent:v}=(0,l.v)(),f=(0,r.ZP)(),[y,x]=(0,n.useState)(!1),[b,w]=(0,n.useState)(!1);(0,n.useEffect)((()=>x(!0)),[]);const P=()=>w(!0),{feedbackText:S,images:T,showFeedbackOverlay:I,undoAction:k}=t,E=T&&(null===(g=T["236x"])||void 0===g?void 0:g.url),{image:A,subTitle:C,title:j,unfollow:R}=null!=S?S:{},D=!m.includes(e),O=_.includes(e),L=()=>{v({event_type:101,view_type:1,view_parameter:92,element:11347})};return(0,d.jsxs)(c.xu,{color:"transparent",dangerouslySetInlineStyle:{__style:{borderRadius:s.Oc}},"data-test-id":"obscured-overlay",overflow:"hidden",position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:[(0,d.jsxs)(c.xu,{dangerouslySetInlineStyle:{__style:{borderRadius:s.Oc}},margin:-4,overflow:"hidden",position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:[E&&(0,d.jsx)(o.Z,{additionalStyles:{...u.base,...y?u.blurred:{},backgroundImage:`url("${E}")`}}),(0,d.jsx)(o.Z,{additionalStyles:{...p.base,...p.blurred}})]}),(0,d.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{...h.base,...!I&&y?h.visible:{}}},height:"100%",padding:4,position:"relative",width:"100%",children:!i&&(0,d.jsx)(c.xu,{height:"100%",children:(0,d.jsxs)(c.xu,{"data-test-id":"PinFeedbackConfirmation",display:"flex",direction:"column",height:"100%",maxWidth:216,children:[(0,d.jsx)(c.xu,{marginBottom:2,children:(0,d.jsx)(c.X6,{color:"light",size:"400",children:j})}),(0,d.jsxs)(c.xu,{display:"flex",marginBottom:1,children:[A&&(0,d.jsx)(c.xu,{marginEnd:3,children:(0,d.jsx)(c.zd,{width:A.width,height:A.height,rounding:2,wash:!0,children:(0,d.jsx)(c.Ee,{alt:C||"",fit:"cover",naturalHeight:1,naturalWidth:1,src:A.url||""})})}),(0,d.jsx)(c.xv,{color:"light",overflow:"normal",children:C})]}),(0,d.jsxs)(n.Fragment,{children:[k&&(0,d.jsx)(c.xu,{children:(0,d.jsx)(c.iP,{onTap:k,children:(0,d.jsx)(c.xv,{color:"inverse",weight:"bold",overflow:"normal",children:f._('Undo', 'Text on the button to navigate to undo hiding a pin', 'Text on the button to navigate to undo hiding a pin')})})}),(0,d.jsxs)(c.xu,{marginTop:"auto",children:[!k&&!b&&R&&!O&&(0,d.jsx)(c.zx,{fullWidth:!0,color:"white",onClick:()=>(0,a.t)(R.action,R.actionOptions,P),text:f._('Unfollow', 'Text on the button to unfollow a specific board / user', 'Text on the button to unfollow a specific board / user')}),D&&(0,d.jsx)(c.zx,{role:"link",color:"white",fullWidth:!0,href:"/edit",onClick:L,text:f._('Tune your feed', 'Text on the button to navigate to homefeed control', 'Text on the button to navigate to homefeed control')})]})]})]})})})]})}},379884:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(852964),o=i(898781),r=i(55275),a=i(883119),s=i(814197),l=i(349700),c=i(407043),d=i(680046),u=i(785893);function p({anchor:e,feedbackData:t,feedbackType:i,pinId:p,onDismiss:h,onHide:m,recommendationReason:_,viewParameter:g,viewType:v}){const{logContextEvent:f}=(0,c.v)(),y=(0,o.ZP)(),x=(0,d.ZP)({i18n:y,interpolateNamedTemplate:l.nk}),b=(e,o)=>{const a=(0,n.Z)(_),s=_&&(0,d.yl)(_),l=_&&(0,d.XZ)(_),{action:c,actionOptions:u}=x.getHidePinAction({feedbackData:t,feedbackType:i,pinId:p,recommendationReasonId:a,throughId:s,throughProperties:l,complaintReason:e});(e=>{f({event_type:101,view_type:v,view_parameter:g,element:e,component:(0,d.nb)(i)})})(o),(0,r.t)(c,u),m()},w="promoted"===i?[{text:y._('Not relevant to me', 'homefeed.hideReasons.reason.notRelevant', 'Feedback option for Pin that is not relevant'),reason:10,elementType:1296},{text:y._('Seen Pin too many times', 'homefeed.hideReasons.reason.seenTooMany', 'Feedback option for Pin that has been seen too many times'),reason:3,elementType:11172},{text:y._('Blurry or pixelated image', 'homefeed.hideReasons.reason.lowQualityPicture', 'Feedback option for Pin with low quality picture'),reason:13,elementType:10898}]:[{text:y._('Not relevant to me', 'homefeed.hideReasons.reason.notRelevant', 'Feedback option for Pin that is not relevant'),reason:10,elementType:1296},{text:y._('Not in a language I understand', 'homefeed.hideReasons.reason.languageDontUnderstand', 'Feedback option for Pin that is in a language I dont understand'),reason:15,elementType:11178},{text:y._('Seen Pin too many times', 'homefeed.hideReasons.reason.seenTooMany', 'Feedback option for Pin that has been seen too many times'),reason:3,elementType:295},{text:y._('Blurry or pixelated image', 'homefeed.hideReasons.reason.lowQualityPicture', 'Feedback option for Pin with low quality picture'),reason:13,elementType:10898},{text:y._('Other', 'homefeed.hideReasons.reason.other', 'Feedback option for Pin hidden for other reasons'),reason:8,elementType:11179}];return(0,u.jsx)(a.Lt,{anchor:e,idealDirection:"down",onDismiss:h,zIndex:s.lI,id:"pin-action-dropdown",children:(0,u.jsx)(a.Lt.Section,{label:y._('Got a moment? Tell us why.', 'homefeed.hideReasons.title', 'Title of follow up question after negative Pin feedback'),children:w.map((({text:e,reason:t,elementType:i})=>(0,u.jsx)(a.Lt.Item,{onSelect:()=>b(t,i),option:{value:`hide-reason-${e.split(" ").join("-")}`,label:e},dataTestId:`hide-reason-${e.split(" ").join("-")}`})))})})}},685909:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(667294),o=i(294184),r=i.n(o),a=i(391254),s=i(149230),l=i(927104),c=i(898781),d=i(883119),u=i(785893);class p extends n.Component{constructor(...e){var t,i,n;super(...e),n={showBoardName:!1},(i="state")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}componentDidMount(){this.timer=setTimeout((()=>{this.setState({showBoardName:!0})}),950)}componentWillUnmount(){clearTimeout(this.timer)}render(){const{showBoardName:e}=this.state,{isDenseView:t,isNewlySaved:i,name:o,shouldUseLegoStyles:c,type:p,url:h}=this.props;if(c&&t)return null;const m="boardless"===p?this.props.i18n._('Saved to Profile', 'Saved.render.title', 'Text indicating saved to your profile'):o;let _,g;if(!i||e||c){const e=c?(0,u.jsx)(d.xv,{color:"inverse",size:"300",weight:"bold",children:m.length<=20?m:(0,l.Z)(m,20)}):(0,u.jsx)(d.X6,{color:"inverse",size:"400",lineClamp:1,children:m}),t=(0,s.Z)({url:h})?"nofollow":"none";_=h?(0,u.jsx)(d.rU,{rel:t,href:h,children:e}):e}else _=(0,u.jsx)(d.xv,{color:"inverse",children:(0,u.jsx)("span",{className:"deprecatedTextSizeXL",children:this.props.i18n._('Saved!', 'Indication that a pin has been saved', 'Indication that a pin has been saved')})});return i&&(g=e?"board":"saved"),(0,u.jsxs)(n.Fragment,{children:[(0,u.jsx)(a.Z,{unsafeCSS:"\n.SavedAnimation {\n  &.saved {\n    animation: SavedAnimation--down-then-right 1s cubic-bezier(0, 0.33, 0.33, 1.1);\n  }\n\n  &.board {\n    animation: SavedAnimation--to-right 0.12s cubic-bezier(0, 0.33, 0.33, 1.1);\n  }\n}\n\n@keyframes SavedAnimation--down-then-right {\n  0% {\n    opacity: 0;\n    transform: translateY(-24px);\n  }\n\n  33% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n\n  80% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n\n  100% {\n    opacity: 0;\n    transform: translateX(24px);\n  }\n}\n\n@keyframes SavedAnimation--to-right {\n  from {\n    opacity: 0;\n    transform: translateX(-16px);\n  }\n\n  to {\n    opacity: 1;\n    transform: translateX(0);\n  }\n}\n"}),(0,u.jsx)("div",{"data-test-id":"savedInfo",className:!c&&r()("SavedAnimation",g),children:_})]})}}const h=function(e){const t=(0,c.ZP)();return(0,u.jsx)(p,{...e,i18n:t})}},108529:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(333155);function o(e){return n.zI.includes(e)}},485308:(e,t,i)=>{i.d(t,{J:()=>n});const n=228},852964:(e,t,i)=>{i.d(t,{Z:()=>o});const n={REPIN_BOARD:1,USER_ACTIVITY:4,CLICKTHROUGH:9,FRESH_REPIN_BOARD:47,FRESH_CLICKTHROUGH:48,FRESH_USER_ACTIVITY:49,LOCAL_REPIN_BOARD:13,LOCAL_CLICKTHROUGH:32,LOCAL_USER_ACTIVITY:33,P2P_CLICKTHROUGH:28,INSTANT_PFY_NON_MATERIALIZABLE:36,FOLLOWED_INTEREST:5,TOPIC_BEST_PINS:70,EMBEDDING_BASED_BEST_PINS:173,RECOMMENDED_TOPICS:65,RECOMMENDED_GEO_INTERESTS:192,USER_SEQUENCE_INTERESTS_PINS:193,GRAPHSAGE_USER_EMBEDDINGS_TO_ORGANIC_PINS:109,NAVBOOST_PFY:89,NAVBOOST_P2P:88,NOTIFICATION_NEWS_HUB:138,GEMINI_INTERESTS_FRESH:104,INTENTIONAL_DISTRIBUTION_USER_TO_CREATOR_STORY_PIN:100,INTENTIONAL_DISTRIBUTION_USER_TO_CREATOR_STORY_PIN_ENGAGEMENT:175,INTENTIONAL_DISTRIBUTION_USER_TO_CREATOR_VIDEO:95,INTENTIONAL_DISTRIBUTION_DOMAIN:86,INTENTIONAL_DISTRIBUTION_TOPICS_STORY_PINS:91,INTENTIONAL_DISTRIBUTION_TOPICS_VIDEO:98,GRAPHSAGE_MULTI_PINS_TO_CREATOR_PINS_REALTIME:135,GRAPHSAGE_MULTI_PINS_TO_VIDEO_PINS_REALTIME:139,GRAPHSAGE_MULTI_PINS_TO_STORY_PINS_REALTIME:140,INTENTIONAL_DISTRIBUTION_MANUAL_TAGGEED_INTERESTS_VIDEO:118,INTENTIONAL_DISTRIBUTION_MANUAL_TAGGED_INTERESTS_STORY_PIN:130,CREATOR_DIRECT_INJECT:148,USER_INTERESTS_TO_LONGTERM_CREATOR_PINS:141,GRAPHSAGE_PRODUCT_PINS:97,GRAPHSAGE_USER_EMBEDDINGS_TO_PINS:108,PROMOTED_PIN:15,UNKNOWN:0,RECOMMENDED_CATEGORY:2,COOKIE_MONSTER:3,REALTIME_P2B:6,REALTIME_P2B_CLOSEUP:22,RECOMMENDED_INTEREST:7,VISUALLY_SIMILAR:8,BOARD_FOLLOW:35,USER_FOLLOW:45,RECOMMENDED_COMMERCE:10,EVERYTHING_FEED:11,RECOMMENDED_LOCAL_PIN:12,SEARCH:46,P2P_USER_COMMERCE:16,COMMERCE_EDUCATION:17,LANDING_PAGE_PINS:18,FOLLOWING_FEED:19,POPULAR_FEED:20,P2P_DYNAMIC_GRID:23,LANDING_PAGE_INTEREST_PINS:24,FRESH_PIN_FROM_PIN:25,FRESH_PIN_FROM_INTEREST:26,FRESH_PIN_FROM_BOARD:27,SIFTER_VIDEO_FROM_INTEREST:39,SIFTER_PRODUCTS:57,SIFTER_DISTRIBUTION_A:50,SIFTER_DISTRIBUTION_B:51,SIFTER_DISTRIBUTION_C:52,SIFTER_DISTRIBUTION_D:53,SIFTER_DISTRIBUTION_E:54,SIFTER_ACTIVATION_EXPERIMENT:58,SIFTER_FRESHMAKER_PIN_FROM_INTEREST:40,P2P_CLOSEUP:29,P2P_LIKE:30,P2P_PIN_CREATE:31,INSTANT_PFY:34,DYNAMIC_INSERTION:37,DYNAMIC_INSERTION_BOARD_FOLLOW:38,HYPERLOCAL_INTEREST_BOARD:41,NUX_BOARD_FOLLOW_P2P:42,INDIRECT_DOMAIN_PIN:43,PIXIE_PINS_FOR_BOARD:44,SCREENSHOT_SAVE:55,TEXT_EMBEDDINGS:56,FRESH_TEXT_EMBEDDINGS:67,PREFETCH_LOAD:60,DIVERSE_TOPICS:62,QUIZ_RESULTS:63,INTENTIONAL_DISTRIBUTION_TOPICS:64,INTENTIONAL_DISTRIBUTION_TOPICS_THIRD_PARTY:90,INTENTIONAL_DISTRIBUTION_GEMINI:73,INTENTIONAL_DISTRIBUTION_GEMINI_V5:120,INTENTIONAL_DISTRIBUTION_SHOP_STYLE_STL:74,INTENTIONAL_DISTRIBUTION_GRAPHSAGE:78,INTENTIONAL_DISTRIBUTION_REPIN_BOARD:80,INTENTIONAL_DISTRIBUTION_CLICKTHROUGH:81,INTENTIONAL_DISTRIBUTION_USER_ACTIVITY:82,INTENTIONAL_DISTRIBUTION_CREATOR_BASELINE:92,INTENTIONAL_DISTRIBUTION_RECOMMENDED_TOPICS:102,INTENTIONAL_DISTRIBUTION_RECOMMENDED_TOPICS_STORY_PIN:103,INTENTIONAL_DISTRIBUTION_RECOMMENDED_TOPICS_DIVERSITY:105,PIXIE_RECENT_ACTION:66,NATIVE_CONTENT_TOPICS:68,BUBBLE_OPEN_TOPICS:69,TOPIC_BEST_PINS_V2:77,DAILY_BEST_PINS:79,TOPIC_BEST_PINS_V3:101,TOPIC_BEST_STORY_PINS:164,REC_SEQ_STORY_PIN_CLS:165,DARK_PROMOTED_PIN:71,POST_EXPLORE_TOPICS:72,GRAPHSAGE_EMBEDDINGS:75,DEMOGRAPHIC_PFY:76,SHOPPING_STL:83,UNAUTH_PIXIE_P2B:84,UNAUTH_PIXIE_P2P:85,VIDEO_EMBEDDINGS:87,VIDEO_EMBEDDINGS_GEMINI_V5:121,GEMINI_V5_EMBEDDINGS_STATIC:93,GEMINI_V5_EMBEDDINGS_FRESH:94,GEMINI_V5_EMBEDDINGS_REALTIME:106,GEMINI_V5_EMBEDDINGS_STORYPIN:107,CURATED_VIDEO_INTEREST:96,GRAPHSAGE_PRODUCT_PINS_LONGER_HISTORY:112,GRAPHSAGE_SHOPPABLE_INSPIRATION:126,GRAPHSAGE_PRODUCT_PINS_EXPERIMENTAL:134,NUX_GRAPHSAGE:99,GRAPHSAGE_USER_EMBEDDINGS_TO_PRODUCT_PINS:110,GRAPHSAGE_VIDEO_PINS:113,RECBOOST_REPIN_BOARD:114,RECBOOST_CLICKTHROUGH:115,RECBOOST_USER_ACTIVITY:116,RECBOOST_CREATOR_BOARDS:129,RECOMMENDED_BOARDS:117,RECOMMENDED_ANNOTATION_BOARDS:136,RECOMMENDED_GRAPHSAGE_BOARDS:153,INTENTIONAL_DISTRIBUTION_RECOMMENDED_GRAPHSAGE_BOARDS:191,RECOMMENDED_CREATOR_BOARDS:124,ANNOTATION_REC_CREATOR_BOARDS:127,INTENTIONAL_DISTRIBUTION_MANUAL_INTERESTS_VIDEO:119,INTENTIONAL_DISTRIBUTION_INTERESTS_VIDEO:143,INTENTIONAL_DISTRIBUTION_INTERESTS_STORY_PIN:144,REPIN_CREATOR_BOARD:122,GRAPHSAGE_USER_EMBEDDINGS_TO_CREATOR_PINS:123,GRAPHSAGE_USER_EMBEDDINGS_TO_CREATOR_PINS_REALTIME:131,FRESH_SIG_FROM_BOARD:125,RECENT_ENGAGED_CREATOR_BOARDS:128,RECENT_ENGAGED_BOARDS:132,SHOPPING_CREATOR_REALTIME:133,GRAPHSAGE_BASED_RECOMMENDED_CREATOR_BOARDS:137,PIXIE_P2P:142,NEW_USE_CASE_PINS:145,RECBOOST_NEW_USE_CASES:146,SEARCHSAGE_PFY:147,SEARCHSAGE_SHOPPING_PFY:155,INTEREST_EXPLORATION:149,INTEREST_EXPLORATION_TRENDY_QUERIES:150,INTEREST_EXPLORATION_RELATED_INTERESTS:151,RECBOOST_INTERESTS:152,HF_STORY_SHOPPING_RETARGETING:154,RECBOOST_STORY_PINS:156,RECBOOST_STORY_BOARDS:157,PINNABILITY_EMBEDDINGS:158,PINNABILITY_FRESH_STORY_EMBEDDINGS:159,PINNABILITY_STORY_EMBEDDINGS:160,EXPLORATION_STORY_PINS:161,EXPLORATION_STORY_PINS_BASELINE:162,EXPLOITATION_STORY_PINS:163,ANNOTATION_REC_CREATOR_STORY_PINS:166,GRAPHSAGE_MULTI_PINS_TO_STORY_PINS:167,IDEASTREAM_GRAPHSAGE_STORY_PINS:168,HF_EDUCATION_PIN_INSERTION:169,RP_EDUCATION_PIN_INSERTION:170,USER_TO_CREATOR_STORY_PINS:171,USER_TO_CREATOR_STORY_PINS_ENGAGEMENT:176,COENGAGEMENT_STORY_PINS:172,ANNOTATION_STORY_PINS:177,DISCOVER_STREAM_DEMOGRAPHIC_FALLBACK:178,DISCOVER_STREAM_CELEBRITY:179,GRAPHSAGE_SHOPIFY_VMP_PRODUCT_PINS:180,CREATOR_BEST_IDEA_PINS:181,INTEREST_BEST_IDEA_PINS:182,NAVBOOST_STORY_PINS:183,SHOPPING_DISTRIBUTION_PINS:185,WATCH_TAB_EHQ_STORIES:186,NOTIF_LEARNED_RETRIEVAL:187,LANDING_PAGE_PIN_RECOMMENDATIONS:188,PINNERSAGE_LEARNED_EMBEDDINGS:189,TOPIC_FEED:190,RTC_IMPROVEMENT_TEST_1:501,RTC_IMPROVEMENT_TEST_2:502,RTC_IMPROVEMENT_TEST_3:503,RTC_IMPROVEMENT_TEST_4:504,RTC_IMPROVEMENT_TEST_5:505,RTC_IMPROVEMENT_TEST_6:506,RTC_IMPROVEMENT_TEST_7:507,RTC_IMPROVEMENT_TEST_8:508,RTC_IMPROVEMENT_TEST_9:509,RTC_IMPROVEMENT_TEST_10:510,RTC_IMPROVEMENT_TEST_11:511,RTC_IMPROVEMENT_TEST_12:512,RTC_IMPROVEMENT_TEST_13:513,RTC_IMPROVEMENT_TEST_14:514,RTC_IMPROVEMENT_TEST_15:515,RTC_BLENDER_TEST:516,P2P_COMMERCE:21,P2P:14,LENS_CAMERA_VISUALLY_SIMILAR:111,RECENT_FOLLOWED_INTEREST:59,RECENT_FOLLOWED_BOARD:61,GRAPHSAGE_SHOPIFY_VMP_MERCHANT_ACTIVATION_PRODUCT_PINS:174,FOLLOWED_INTEREST_SEO_BESPIN_EXPORATION:184,XPIXIE_TO_PRODUCT_PINS:194};function o(e){return e&&e.reason&&n[e.reason]}},333155:(e,t,i)=>{i.d(t,{UP:()=>s,Wv:()=>o,ZF:()=>n,zI:()=>r,zl:()=>a});const n=["AuthHomefeed","CloseupRelatedProducts","FollowingFeedGrid","RelatedPinGrid","RelatedProductsFeed","SearchItem"],o=["ArticleProductsStory","CloseupRelatedProducts","ProductPinsFeed","RelatedProductsFeed","ShoppingPackageItem","RelatedProductsFeed","UserProfilePinGrid","ShoppingGridShippedMetadataWithVisitButton"],r=[...o,"ShoppingGridShippedMetadata","ShoppingSquareGridDomain","ShoppingSquareGridDomainNoMetadata","ProductPinsFeed","ShoppingCatalogsProductsMetadata","ShoppingDynamicHeightGrid"],a=["ShoppingSquareGridDomain","ShoppingGridShippedMetadata","ShoppingSquareGridStorefront","ShoppingSquareGridStorefrontDomain","ShoppingGridShippedMetadataWithVisitButton"],s=["BaseBoardPinGrid"]},675725:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(680046),o=i(349700);function r({feedbackOptions:e,pin:t,viewParameter:i},r){const{board:a,pinner:s}=null!=t?t:{},{getFeedbackType:l}=(0,n.ZP)({i18n:r,interpolateNamedTemplate:o.nk});return l({board:a,feedback:e,pin:t,pinner:s,viewParameter:i})}},8320:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(63552),o=i(883119),r=i(785893);const a={__style:{borderRadius:"4px",padding:"10px 14px"}},s={borderWidth:"1px",borderStyle:"solid",borderColor:"white"},l={__style:{borderRadius:"4px",padding:"10px 14px 9px 8px",whiteSpace:"nowrap"}},c=({accessibilityLabel:e,color:t,customStyles:i,forwardedRef:c,icon:d,inline:u=!1,minHeight:p=40,minWidth:h=70,onTouch:m,pressState:_,shape:g,text:v})=>{const f=(e=>"primary"===e||"transparent"===e||"dark"===e?"inverse":"default")(t),y=(({color:e,icon:t})=>t?l:"transparent"===e?{__style:{...a.__style,...s}}:a)({color:t,icon:d}),x=(0,r.jsx)(o.xu,{position:"relative",children:(0,r.jsx)(o.xu,{color:t,display:u?"inlineBlock":"flex",justifyContent:"center",minHeight:p,minWidth:h,dangerouslySetInlineStyle:"pill"===g?(b=i,{__style:{borderRadius:"24px",paddingTop:"10px",paddingBottom:"10px",paddingLeft:"14px",paddingRight:"14px",...b}}):y,children:(0,r.jsxs)(o.kC,{alignItems:"center",justifyContent:"center",children:[d&&(0,r.jsx)(o.xu,{paddingX:"check"===d?2:0,children:(0,r.jsx)(o.JO,{accessibilityLabel:e,color:f,icon:d,inline:!0,size:"check"===d?16:20})}),(0,r.jsx)(o.xv,{color:f,inline:!0,size:"300",lineClamp:1,weight:"bold",children:v})]})})});var b;return m?(0,r.jsx)(n.Z,{onTouch:m,rounding:"pill"===g?"pill":2,pressState:_||"none",children:(0,r.jsx)(o.xu,{ref:c,children:x})}):x}},167234:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(667294),o=i(977558),r=i(883119),a=i(992813),s=i(697335),l=i(49028),c=i(785893);function d({children:e,className:t,forwardRef:i,offset:d=0,position:u,shouldShowShadow:p=!1,style:h={},top:m}){const{setIsContentHeaderPresent:_}=(0,a.i)();(0,n.useEffect)((()=>(_(!0),function(){_(!1)})),[]);const{currentScrollPosition:g,isScrolled:v,setSubheaderShadow:f}=(0,l.WQ)();(0,n.useEffect)((()=>(p&&f("contentHeader"),()=>{p&&f(null)})),[p]);let y=!1;"pending"!==m&&(y=null!=m?g>=m:v);const x=(0,s.t)(),b=(0,c.jsx)("div",{className:t,ref:i,style:{...h,top:x+d,...y&&p?{...o.Rz,zIndex:499}:{},...u&&"sticky"!==u?{position:u}:{}},children:e});return"sticky"===u?(0,c.jsx)(r.Le,{top:x+d,children:b}):b}},992813:(e,t,i)=>{i.d(t,{Z:()=>l,i:()=>s});var n=i(667294),o=i(425288),r=i(785893);const{Provider:a,useHook:s}=(0,o.Z)("ContentHeader");function l({children:e}){const[t,i]=(0,n.useState)(!1),o=(0,n.useMemo)((()=>({isContentHeaderPresent:t,setIsContentHeaderPresent:i})),[t]);return(0,r.jsx)(a,{value:o,children:e})}},313951:(e,t,i)=>{i.d(t,{i5:()=>x,sX:()=>P,aX:()=>b,Z5:()=>y,NG:()=>w,MT:()=>S,iu:()=>T});var n=i(667294),o=i(6637),r=i(350118),a=i(682492),s=i.n(a);const l=(e,t)=>e.data[t]&&e.data[t].messages||[];function c(e,t){const i={};return e.filter((e=>!!e)).reduce(((e,n)=>{const o=t(n);return i[o]?(s()(i[o],n),e):(i[o]=n,e.concat([n]))}),[])}function d(e){return[...e].sort(((e,t)=>new Date(e.created_ms||e.created_at)-new Date(t.created_ms||t.created_at)))}function u(e,t,i){return d(c(l(e,t).concat(i),(e=>e.id)))}const p={conversationsUnseenCount:0,data:{},newsHubCount:0,open:null,objectAttachment:null,showConversationsDropdown:!1,showNewMessageView:!1,ui:{},unread:0};function h(e=p,t){if("CONVERSATION_OPEN"===t.type)return{...e,open:t.payload.id,objectAttachment:null,showNewMessageView:!1,ui:{...e.ui,[t.payload.id]:{contactRequestId:t.payload.contactRequestId||"",isPreview:t.payload.isPreview}}};if("CONVERSATION_CLOSE"===t.type)return{...e,open:null,objectAttachment:null,showNewMessageView:!1,ui:{...e.ui,[t.payload.id]:{contactRequestId:t.payload.contactRequestId||"",isPreview:!1,isDeclined:t.payload.isDeclined}}};if("CONVERSATION_CREATE"===t.type){const{id:i}=t.payload;return{...e,data:{...e.data,[i]:{...e.data[i]||{},...t.payload}}}}if("CONVERSATION_DELETE"===t.type){const i={...e,data:{...e.data}},{id:n}=t.payload;return delete i.data[n],i}if("FETCH_COMPLETE"===t.type){const{options:i,resource:n,response:o}=t.payload,r=o.resource_response.data;if("ConversationMessagesResource"===n){const t=r||[],n=(null==i?void 0:i.conversation_id)||"",o=u(e,n,t),a=o[o.length-1];return{...e,data:{...e.data,[n]:{...e.data[n],id:n,messages:o,unread:0,last_message:a}}}}if("ConversationsResource"===n){const t=r||[],i={...e,data:{...e.data}};return t.forEach((e=>{const{id:t,created_at:n,name:o,board:r,emails:a,unread:s,users:l,last_message:c}=e,d=u(i,t,[c]);i.data[t]={...i.data[t],id:t,created_at:n,name:o,board:r,emails:a||[],unread:s||0,users:l||[],last_message:c,messages:d}})),i}if("ConversationResource"===n){const t=r||{},{id:i}=t,n={...e,data:{...e.data}};return i&&(n.data[i]={...n.data[i],...t}),n}if("NewsHubBadgeResource"===n){if(r){const t=r.conversations_unseen_count||0;return{...e,unread:t}}return e}}else{if("MESSAGE_SEND_PENDING"===t.type){const{id:i,message:n}=t.payload;return e.data[i]?{...e,data:{...e.data,[i]:{...e.data[i],id:i,messages:[...e.data[i].messages,n]}}}:e}if("MESSAGE_SEND_PENDING_SUCCESS"===t.type){const{id:i,tempMessage:n,newMessage:o}=t.payload;if(e.data[i]){if(l(e,i).find((e=>e.id===n.id&&e.created_ms===n.created_ms))){const t=d(c(l(e,i).filter((e=>e.id!==n.id)).concat([o]),(e=>e.id)));return{...e,data:{...e.data,[i]:{...e.data[i],last_message:o,messages:t}}}}}return e}if("MESSAGE_SEND_PENDING_FAILURE"===t.type){const{id:i,tempMessageId:n}=t.payload;if(e.data[i]){const t=l(e,i).filter((e=>e.id!==n));return{...e,data:{...e.data,[i]:{...e.data[i],messages:t}}}}return e}if("OPEN_NEW_MESSAGE"===t.type){const{objectAttachment:i}=t.payload||null;return{...e,showNewMessageView:!0,open:null,objectAttachment:i}}if("CLOSE_DROPDOWN"===t.type)return{...e,showConversationsDropdown:!1,objectAttachment:null,showNewMessageView:!1};if("OPEN_DROPDOWN"===t.type)return{...e,showConversationsDropdown:!0};if("UPDATE_NEWSHUB_COUNT"===t.type)return{...e,newsHubCount:t.payload};if("UPDATE_UNREAD_COUNT"===t.type)return{...e,conversationsUnseenCount:t.payload};if("CLEAR_MESSAGE_BADGE"===t.type){const{id:i}=t.payload;return{...e,data:{...e.data,[i]:{...e.data[i],unread:0}}}}if("CONVERSATION_SAVE_POSITION"===t.type){const{id:i,position:n}=t.payload;return{...e,data:{...e.data,[i]:{...e.data[i],position:n}}}}if("CONVERSATION_RESET_POSITION"===t.type){const{id:i}=t.payload;return{...e,data:{...e.data,[i]:{...e.data[i],position:null}}}}}return e}var m=i(425288),_=i(505920),g=i(785893);const v=(()=>{let e=0;return()=>e++})(),{Provider:f,useHook:y}=(0,m.Z)("Conversations");function x({children:e}){const[t,i]=(0,n.useReducer)(h,p),r=(0,n.useCallback)((e=>i({type:"FETCH_COMPLETE",payload:e})),[]);(0,_.Z8)("ConversationMessagesResource",r),(0,_.my)("ConversationMessagesResource",r),(0,_.Z8)("ConversationsResource",r),(0,_.Z8)("ConversationResource",r),(0,_.Z8)("NewsHubBadgeResource",r);const a=(0,n.useCallback)(((e,t=!1,n="")=>i({type:"CONVERSATION_OPEN",payload:{id:e,isPreview:t,contactRequestId:n}})),[]),s=(0,n.useCallback)(((e,t="",n=!1)=>i({type:"CONVERSATION_CLOSE",payload:{id:e,contactRequestId:t,isDeclined:n}})),[]),l=(0,n.useCallback)((e=>i({type:"CONVERSATION_CREATE",payload:e})),[]),c=(0,n.useCallback)((e=>i({type:"CONVERSATION_DELETE",payload:{id:e}})),[]),d=(0,n.useCallback)(((e,t)=>i({type:"CONVERSATION_SAVE_POSITION",payload:{id:e,position:t}})),[]),u=(0,n.useCallback)((e=>i({type:"CONVERSATION_RESET_POSITION",payload:{id:e}})),[]),m=(0,n.useCallback)(((e,t,n)=>{o.Z.create("ConversationsResource",{user_ids:e,emails:t,text:""}).callCreate().then((e=>{const t=e&&e.resource_response.data;i({type:"CONVERSATION_OPEN",payload:{id:t.id}})})).catch((e=>{const t=e.message_detail||e.message||"";n(t)}))}),[]),v=(0,n.useCallback)((()=>{i({type:"CLOSE_DROPDOWN"})}),[]),y=(0,n.useCallback)((()=>{i({type:"OPEN_DROPDOWN"})}),[]),x=(0,n.useCallback)((e=>{i({type:"OPEN_NEW_MESSAGE",payload:{objectAttachment:e}})}),[]),b=(0,n.useCallback)(((e,t)=>i({type:"MESSAGE_SEND_PENDING",payload:{id:e,message:t}})),[]),w=(0,n.useCallback)(((e,t,n)=>i({type:"MESSAGE_SEND_PENDING_SUCCESS",payload:{id:e,tempMessage:t,newMessage:n}})),[]),P=(0,n.useCallback)(((e,t)=>i({type:"MESSAGE_SEND_PENDING_FAILURE",payload:{id:e,tempMessageId:t}})),[]),S=(0,n.useCallback)((e=>i({type:"UPDATE_NEWSHUB_COUNT",payload:e})),[]),T=(0,n.useCallback)((e=>i({type:"UPDATE_UNREAD_COUNT",payload:e})),[]),I=(0,n.useCallback)((e=>i({type:"CLEAR_MESSAGE_BADGE",payload:{id:e}})),[]),k=(0,n.useMemo)((()=>({clearMessageBadge:I,conversationOpen:a,conversationClose:s,conversationCreate:l,conversationDelete:c,conversationGet:m,saveConversationPosition:d,resetConversationPosition:u,dropdownClose:v,dropdownOpen:y,newMessageOpen:x,pendingMessageSend:b,pendingMessageSuccess:w,pendingMessageFailure:P,updateNewsHubCount:S,updateUnreadCount:T,conversations:t})),[I,a,s,l,c,m,d,u,v,y,x,b,w,P,S,T,t]);return(0,g.jsx)(f,{value:k,children:e})}function b(){const{conversationCreate:e}=y();return async t=>{let i;const n=o.Z.create("ConversationsResource",t);try{var r;const t=null===(r=(await n.callCreate()).resource_response)||void 0===r?void 0:r.data;t&&(e(t),i=t)}catch(a){throw new Error(a.message)}return i}}function w(){const{conversations:e,conversationCreate:t,pendingMessageSend:i,pendingMessageSuccess:n,pendingMessageFailure:a}=y(),s=(0,r.AF)();return async(r,l,c,d)=>{const{text:u,pinId:p,boardId:h,userId:m,didItId:_}=l;async function g(){const e=o.Z.create("ConversationMessagesResource",{conversation_id:r,text:u,pin:p,board:h,user:m,user_did_it_data:_,source:c}),t=`${v()}`,l={text:u,sender:d,created_at:(new Date).toString(),created_ms:Date.now(),id:t,pin:p?s[p]:null,type:"tempMessage"};i(r,l);try{var g;const t=null===(g=(await e.callCreate()).resource_response)||void 0===g?void 0:g.data;t&&n(r,l,t)}catch(f){throw a(r,t),new Error(f.message)}}if(e.data[r])await g();else{const e=o.Z.create("ConversationResource",{conversation_id:r});try{var f;const i=null===(f=(await e.callGet()).resource_response)||void 0===f?void 0:f.data;i&&(t(i),await g())}catch(y){throw new Error(y.message)}}}}function P(e){const{conversations:t}=y();return t.data[e]}function S(e){const{conversations:t}=y();return t.ui[e]||{contactRequestId:"",isDeclined:!1,isPreview:!1}}function T(){const{conversations:{data:e}}=y(),t=(i=e,Object.keys(i).map((e=>i[e]))).filter((e=>e.users&&e.last_message));var i,n;return n=t,Array.from(n).sort(((e,t)=>new Date((t.last_message||t).created_at)-new Date((e.last_message||e).created_at)))}},375574:(e,t,i)=>{i.d(t,{Z:()=>S});var n=i(667294),o=i(702664),r=i(898781),a=i(883119),s=i(785893);function l(e){const t=(0,r.ZP)(),{viewType:i,boardId:n,handleTouch:o}=e,l=t._('Board', 'createMenuLinkButton.Create.Board.Label', 'label for creating a new board option'),c=t._('Section', 'createMenuLinkButton.Create.Section.Label', 'label for creating a new section option');return 5===i&&n?(0,s.jsx)(a.iP,{role:"link",href:`/board/${n}/create_section/`,rounding:2,onTap:o,children:(0,s.jsx)(a.xu,{paddingY:2,"data-test-id":"addSectionButton",children:(0,s.jsx)(a.X6,{size:"400",children:c})})}):(0,s.jsx)(a.iP,{role:"link",onTap:o,href:"/board/create/",children:(0,s.jsx)(a.xu,{paddingY:2,"data-test-id":"createMenuCreateBoardButton",children:(0,s.jsx)(a.X6,{size:"400",children:l})})})}var c=i(276775),d=i(805410);function u({disabledPinCreation:e,handleDisablePublish:t,handleTouch:i}){const n=(0,r.ZP)(),o=(0,c.useHistory)(),l=e=>({base64Image:e,method:d.I}),u=n._('Photo', 'createPinButton.Photo.Upload.Label', 'label to upload pin from camera roll photos');return(0,s.jsx)(a.iP,{tapStyle:"none",onTap:()=>{e?t():i()},children:(0,s.jsxs)(a.xu,{position:"relative",paddingY:2,children:[(0,s.jsx)(a.X6,{size:"400",children:u}),e?null:(0,s.jsx)("input",{id:"upload-pin",type:"file",accept:"image/*",onChange:e=>{const t=new FileReader;t.readAsDataURL(e.target.files[0]),t.onload=()=>{const e=t.result;o.push({pathname:`/pin/create/${d.I}/`,state:l(String(e))})}},style:{opacity:0,position:"absolute",top:"0px",height:"100%",width:"100%"}})]})})}var p=i(121151);function h({isOpen:e,onDismiss:t}){const i=(0,r.ZP)();return(0,s.jsx)(p.ZP,{accessibilityModalLabel:i._('Disabled Pin Publishing Error Message Modal', 'disabledPinCreationModal.modal.accessibilityLabel', 'Label for disabled pin creation modal'),isOpen:e,mobileAccessibilityCloseIconLabel:i._('Close disabled publishing message modal', 'disabledPinCreationModal.modal.closeIconLabel', 'Label for the close button on the disabled publishing modal'),onDismiss:t,type:"DisabledPublishingModal",children:(0,s.jsxs)(a.xu,{alignItems:"center",direction:"column",display:"flex",paddingX:6,paddingY:4,children:[(0,s.jsx)(a.X6,{children:i._('Oops...', 'disabledPinCreationModal.modal.heading', 'Exclamation used to show recognition of a mistake.')}),(0,s.jsx)(a.xu,{paddingY:3,children:(0,s.jsx)(a.xv,{children:i._('Our server is experiencing a mild case of the hiccups at the moment. Please try refreshing and publishing again later.', 'disabledPinCreationModal.modal.text', 'Message to let users know there is an error.')})}),(0,s.jsx)(a.xu,{paddingY:3,children:(0,s.jsx)(a.zx,{color:"red",onClick:()=>t(),size:"lg",text:i._('Dismiss', 'disabledPinCreationModal.button.dismiss', 'Button text for closing the disabled pin creation modal')})})]})})}var m=i(941646),_=i(881802),g=i(134906),v=i(773285),f=i(112690),y=i(927383),x=i(859704);function b(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const w=e=>{const t=window&&window.innerWidth||0,i=e._('Enter a link to create a Pin, https://...', 'placeholder in text field where a user inputs a URL to create a Pin', 'placeholder in text field where a user inputs a URL to create a Pin'),n=e._('Enter a link, https://...', 'placeholder in text field where a user inputs a URL to create a Pin - short version, 30 char limit', 'placeholder in text field where a user inputs a URL to create a Pin - short version, 30 char limit');return t<380?n:i};class P extends n.PureComponent{constructor(...e){super(...e),b(this,"state",{createPinFromLinkUrl:"",showCreateModal:!1,showInlineTextEditCreatePin:!1,showPublishingDisabledError:!1,urlValidationError:null}),b(this,"createPinFromLinkInput",(0,n.createRef)()),b(this,"closeCreateModal",(()=>{this.setState({showCreateModal:!1,showInlineTextEditCreatePin:!1}),this.props.updatePinBuilderInput({isInputOpen:!1,submittedLink:""})})),b(this,"clearValidationError",(()=>{this.setState({urlValidationError:null})})),b(this,"openCreateModal",(e=>{this.handleTouch(),this.props.requireAuthForLimitedLogin({fn:()=>this.setState({showCreateModal:!0}),modalHeader:(0,_.is)(this.props.i18n)})()})),b(this,"handleCreatePinFromLinkTouch",(()=>{this.setState({showInlineTextEditCreatePin:!0}),this.props.updatePinBuilderInput({isInputOpen:!0})})),b(this,"handleDisablePublish",(()=>{this.setState({showCreateModal:!1,showPublishingDisabledError:!0})})),b(this,"handleLinkFieldChange",(({value:e})=>{this.setState({createPinFromLinkUrl:e})})),b(this,"handlePinFromLinkFormSubmit",((e,t)=>{const{createPinFromLinkUrl:i}=this.state;e.preventDefault();const{errors:n}=(0,g.Jx)({message:this.props.i18n._('Oops! Please enter a valid URL.', 'URL validation error message on Pin builder form', 'URL validation error message on Pin builder form')})(i),[o]=n;o?this.setState({urlValidationError:o}):this.handleUrlValidationSuccess(t)})),b(this,"handleTouch",(()=>{const{logContextEvent:e,viewType:t,elementType:i}=this.props;e({view_type:t,view_parameter:3106,element:i,event_type:102})})),b(this,"handleUrlValidationSuccess",(e=>{this.setState({showInlineTextEditCreatePin:!1});const t=this.state.createPinFromLinkUrl;this.props.updatePinBuilderInput({submittedLink:t}),e.push({pathname:"/pin-builder/",state:{createPinFromLinkUrl:t}}),this.closeCreateModal()})),b(this,"renderCreatePinFromLinkOption",(()=>{const{disabledPinCreation:e,history:t}=this.props,{createPinFromLinkUrl:i,showInlineTextEditCreatePin:n}=this.state,o=this.props.i18n._('Website', 'editPin.CreatePinFromUrl.Label', 'label for option to create a pin from a url');return(0,s.jsx)(a.kC,{alignItems:"center",height:46,justifyContent:"start",children:n?(0,s.jsx)("form",{onSubmit:e=>this.handlePinFromLinkFormSubmit(e,t),style:{width:"100%"},children:(0,s.jsxs)(a.xu,{display:"flex",justifyContent:"between",position:"relative",children:[(0,s.jsxs)(a.xu,{ref:this.createPinFromLinkInput,width:"100%",children:[this.renderErrorFlyout(),(0,s.jsx)(a.nv,{id:"create-pin-from-link",onChange:this.handleLinkFieldChange,onFocus:()=>this.setState({urlValidationError:null}),placeholder:w(this.props.i18n),size:"lg",value:i})]}),(0,s.jsx)(a.hU,{accessibilityLabel:this.props.i18n._('Create Pin from entered link', 'navigation button to confirm user will create a Pin from a link they entered', 'navigation button to confirm user will create a Pin from a link they entered'),iconColor:"darkGray",icon:"arrow-forward",onClick:({event:e})=>this.handlePinFromLinkFormSubmit(e,t),size:"lg"})]})}):(0,s.jsx)(a.iP,{onTap:()=>{e?this.handleDisablePublish():this.handleCreatePinFromLinkTouch()},tapStyle:"none",children:(0,s.jsx)(a.xu,{position:"relative","data-test-id":"websiteButton",children:(0,s.jsx)(a.X6,{size:"400",children:o})})})})})),b(this,"renderErrorFlyout",(()=>{const{urlValidationError:e}=this.state;return e&&(0,s.jsx)(a.J2,{anchor:this.createPinFromLinkInput.current,color:"red",idealDirection:"up",onDismiss:this.clearValidationError,size:"sm",children:(0,s.jsx)(a.xu,{padding:3,width:"100%",children:(0,s.jsx)(a.xv,{align:"center",color:"inverse",weight:"bold",children:e})})})}))}componentDidMount(){const{isInputOpen:e,submittedLink:t}=this.props;(e||t)&&this.setState({showCreateModal:!!e,showInlineTextEditCreatePin:!!e,createPinFromLinkUrl:t||""})}render(){const{bgColor:e,boardId:t,buttonPadding:i,disabledPinCreation:o,i18n:r,iconButtonColor:c="gray",iconButtonSize:d="xl",viewType:_}=this.props,{showCreateModal:g,showPublishingDisabledError:v}=this.state;let f=this.props.i18n._('Add a Pin or board', 'heading in profile create modal', 'heading in profile create modal');164===_?f=this.props.i18n._('Add to section', 'heading in section create modal', 'heading in section create modal'):5===_&&(f=this.props.i18n._('Add a Pin or section', 'heading in profile create modal', 'heading in profile create modal')||r._('Add to board', 'heading in board create modal', 'heading in board create modal'));const y=4===_?this.props.i18n._('Add to profile', 'editPin.AddToProfile.Modal.Header', 'heading in profile create modal'):f;return(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(a.kC,{alignItems:"center",justifyContent:"start",children:(0,s.jsx)(m.Z,{id:"createMenuCreateButton",children:(0,s.jsx)(a.hU,{accessibilityLabel:this.props.i18n._('Create a Pin or board', 'icon that opens model prompting user to create a new pin or board', 'icon that opens model prompting user to create a new pin or board'),bgColor:e,iconColor:c,icon:"add",size:d,padding:"auto"!==i?i:1,onClick:({event:e})=>this.openCreateModal(e)})})}),g&&(0,s.jsx)(p.ZP,{mobileAccessibilityCloseIconLabel:this.props.i18n._('close board and pin create modal', 'close modal that prompts user to create a new pin or board', 'close modal that prompts user to create a new pin or board'),accessibilityModalLabel:"",heading:y,isOpen:this.state.showCreateModal,onDismiss:this.closeCreateModal,type:"create_menu",children:(0,s.jsx)(a.xu,{padding:3,children:(0,s.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,s.jsxs)(n.Fragment,{children:[(0,s.jsxs)(a.xu,{paddingX:2,children:[(0,s.jsx)(a.xv,{children:this.props.i18n._('Create', 'editPin.Create.Section.Text', 'Section title to Create new things on Edit Pin add modal')}),(0,s.jsx)(n.Fragment,{children:this.renderCreatePinFromLinkOption()}),(0,s.jsx)(u,{disabledPinCreation:o,handleDisablePublish:this.handleDisablePublish,handleTouch:this.handleTouch})]}),164!==_&&(0,s.jsxs)(a.xu,{marginTop:6,paddingX:2,children:[(0,s.jsx)(a.xv,{children:this.props.i18n._('Add', 'editPin.Section.Add.Text', 'Section Add title on Edit Pin add modal')}),(0,s.jsx)(l,{boardId:t,handleTouch:()=>{this.handleTouch(),this.closeCreateModal()},viewType:_})]})]}),(0,s.jsx)(a.xu,{display:"flex",justifyContent:"center",marginBottom:2,marginTop:7,children:(0,s.jsx)(a.zx,{onClick:()=>this.closeCreateModal(),size:"lg",text:this.props.i18n._('Close', 'editPin.Modal.Close.Button', 'Button text to close modal on EditPin')})})]})})}),v&&(0,s.jsx)(h,{isOpen:!0,onDismiss:()=>{this.setState({showPublishingDisabledError:!1})}})]})}}function S(e){const t=(0,r.ZP)(),{checkExperiment:i}=(0,v.F)(),n=["disable_all","disable_web_pins"].includes(i("disable_pin_creation").group),a=(0,o.useDispatch)(),l=(0,c.useHistory)(),{pinBuilder:d}=(0,o.useSelector)((e=>e.session)),u=(0,f.Z)(),p=d&&d.isInputOpen,h=d&&d.submittedLink,m=(0,y.Z)();return(0,s.jsx)(P,{...e,disabledPinCreation:n,history:l,i18n:t,isInputOpen:p,logContextEvent:u,requireAuthForLimitedLogin:m,submittedLink:h,updatePinBuilderInput:e=>a((0,x.p)(e))})}},57791:(e,t,i)=>{i.d(t,{MZ:()=>R,di:()=>O,Ai:()=>D});var n=i(667294),o=i(598615),r=i(296679),a=i(8320),s=i(329900),l=i(954571),c=i(250059),d=i(149230),u=i(407043),p=i(48714),h=i(276775);const m=({children:e,external:t,externalQueryParams:i,target:n,href:o})=>{const{logContextEvent:r}=(0,u.v)(),a=(0,h.useHistory)(),s=(0,h.useLocation)();if(!o)return null;const l=(0,c.Z)(o);return e({navigate:e=>{e.preventDefault(),(0,d.Z)({url:l})||t?(0,p.lI)({href:l,queryParams:i,location:s},r,null):(0,p.G3)({event:e,href:o,history:a,target:"blank"===n?"blank":null})}})};var _=i(883119),g=i(785893);const v=({accessibilityLabel:e,children:t,external:i,externalQueryParams:n,inline:o=!1,newTab:r,nofollow:a,onTouch:s,onBlur:l,onFocus:d,pressState:u,rounding:p,to:h})=>(0,g.jsx)(m,{external:i,target:r?"blank":null,externalQueryParams:n,href:h,children:({navigate:i})=>(0,g.jsx)(_.rU,{accessibilityLabel:e,onBlur:l?({event:e})=>l(e):void 0,onFocus:d?({event:e})=>d(e):void 0,underline:"none",href:(0,c.Z)(h),display:o?"inlineBlock":"block",onClick:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),null==s||s(e),e.defaultPrevented||i(e)},rel:a?"nofollow":"none",rounding:p,tapStyle:(Array.isArray(u)?u:[u]).includes("compress")?"compress":"none",children:t})}),f=({external:e,externalQueryParams:t,newTab:i,onTouch:n,to:o,...r})=>(0,g.jsx)(m,{external:e,target:i?"blank":null,externalQueryParams:t,href:o,children:({navigate:e})=>(0,g.jsx)(a.Z,{onTouch:t=>{null==n||n(t),t.defaultPrevented||e(t)},...r})});var y=i(938917),x=i(112690),b=i(19121),w=i(53987),P=i(30287),S=i(948376),T=i(236617),I=i(773285),k=i(780280),E=i(698330),A=i(957161),C=i(622096);const j=(e,t=!1)=>function({isAppUpsellDisabled:i,...a}){const{children:c,clientTrackingParams:d,deeplinkUri:u,external:p,onTouch:m,refresh:v,to:f,viewParameter:j,viewType:R}=a,D=(0,y.Z)(),[O,L]=(0,n.useState)(!1),{isAuth:M}=(0,b.Z)(),{userAgent:{platform:N},locale:z}=(0,k.B)(),F=(0,E.Tt)(),Z=(0,x.Z)(),{checkExperiment:B}=(0,I.F)(),U=(0,h.useLocation)(),H=(0,T.L)(),V=()=>{Z({event_type:1701,view_type:R,view_parameter:j}),O&&L(!1)};return(0,g.jsxs)(_.xu,{"data-test-id":"deeplink-wrapper",children:[O&&(0,g.jsx)(o.Z,{componentType:14157,within:"deep-link-app-upsell-modal",children:({handleOpenApp:e})=>(0,g.jsx)(r.Z,{clientTrackingParams:d,isOpen:!0,onDismiss:()=>{Z({component:14157,element:10308,event_type:10220,view_type:R||32,view_parameter:j,aux_data:{app_upsell_type:"deep-link-app-upsell-modal"}})},onOpenInApp:()=>{(0,A.Nh)("deeplinkBehavior","branchfallback"),e({deepLinkUri:u}),V()},shouldTrackDismiss:!0,to:f,viewParameter:j,viewType:R})}),(0,g.jsx)(s.Z,{children:n=>(0,g.jsx)(e,{...a,onTouch:e=>{const o=D&&!i&&M&&!p&&!v&&!(0,P.FP)(window)&&!("ios"===N&&(z||"").startsWith("ar"))&&(0,S.kp)((0,l.Z)(null==F?void 0:F.created_at));if(o){const{group:t}=B("mweb_auth_learning_app_upsell");t.startsWith("enabled_related_pin_click")?(0,w.uM)(U)&&setTimeout((()=>{H.setTypeVal(`learning_${t}`)}),500):(e.stopPropagation(),e.preventDefault(),L(!0))}else"branchfallback"!==(0,A.qn)("deeplinkBehavior")||(0,C.qn)("fallbackAttempt")||(e.stopPropagation(),e.preventDefault(),(0,C.Nh)("fallbackAttempt",1),n(u,`${window.location.origin}${r=f,"string"==typeof r?r:`${r.pathname||""}${r.search?`?${r.search}`:""}`}`),V());var r;t&&o||!m||m(e)},children:c})})]})},R=j(v),D=j(f),O=j(a.Z,!0)},329900:(e,t,i)=>{i.d(t,{Z:()=>g});var n=i(172071),o=i(826067);const r="http://play.google.com/store/apps/details?id=com.pinterest",a=["access_token","new_password","new_password_confirm","password","next"],s=(e,t)=>t?(0,o.ru)(e,{invite_code:t}):e,l=(e,t,i)=>{if("ios"===t&&"string"==typeof e&&e.startsWith("discover/article/")){const t=e.split("/")[2];e=`discover_article/${t}/?is_deeplink=1`}return"string"==typeof e?s(e,i):"ios"===t||"ipad"===t?s(e.iOS,i):"android"===t?s(e.android,i):null},c=({deeplinkUri:e,fallbackUrl:t,invite_code:i,platform:s,redirectToLite:c,unauthId:d,userAgent:u})=>{if(e){const p=(({deeplinkUri:e,invite_code:t,platform:i,fallbackUrl:n,unauthId:r})=>({deeplink_path:l(e,i,t),current_page_url:(0,o.Gw)("undefined"!=typeof window?window.location.href:"",a),install_id:r,utm_source:140,utm_medium:2152,...n?{af_r:n}:null}))({deeplinkUri:e,fallbackUrl:t,invite_code:i,platform:s,unauthId:d,userAgent:u});if(n.Z.increment("mweb.deeplink",1,{platform:s}),i&&n.Z.increment("mweb.deeplink.invite_code",1),n.Z.increment("mweb.deeplink.unauthId",1,{withUnauthId:Boolean(d)}),c){n.Z.increment("mweb.deeplink.lite_link",1);const e=(({unauthId:e})=>{const t=(0,o.XP)({utm_source:"mweb",utm_medium:"upsell",utm_campaign:"twa",utm_content:e});return{referrer:encodeURI(t)}})({unauthId:d});window.location.href=(0,o.ru)("http://play.google.com/store/apps/details?id=com.pinterest.twa",e)}else if("android"===s){const t=(({deeplinkUri:e,invite_code:t,platform:i,unauthId:n})=>{const r=JSON.stringify({deeplink_path:l(e,i,t),current_page_url:(0,o.Gw)("undefined"!=typeof window?window.location.href:"",a),install_id:n});return{referrer:(0,o.XP)({utm_source:"mweb",utm_medium:"upsell",utm_content:r})}})({deeplinkUri:e,invite_code:i,platform:s,unauthId:d});"getInstalledRelatedApps"in navigator?navigator.getInstalledRelatedApps().then((e=>{if(e.length>0){const e=(0,o.ru)(window.location.href,p);window.open(e)}else window.location.href=(0,o.ru)(r,t)})).catch(n.Z.increment("mweb_android.deeplink.playStore.error",1)):window.location.href=(0,o.ru)(r,t)}else{if(n.Z.increment("mweb.deeplink.appsflyer_link",1),"ios"===s&&"undefined"!=typeof window&&window.location.href.includes("show_yip_modal"))return void(window.location.href=(0,o.ru)("https://pinterest.com/pinterest-predicts",p));window.location.href=(0,o.ru)("https://pinterest.onelink.me/TVSr/21e04bfd",p)}}};var d=i(619277),u=i(948376),p=i(780280),h=i(785893);function m({children:e,invite_code:t}){const{unauthId:i,userAgent:{platform:n,raw:o}}=(0,p.B)();return e((async(e,r)=>{c({deeplinkUri:e,fallbackUrl:r,invite_code:t,platform:n,redirectToLite:(0,u.Rp)({platform:n,userAgent:o}),unauthId:i,userAgent:o})}))}const _=e=>(0,h.jsx)(d.ty,{children:t=>(0,h.jsx)(m,{...e,invite_code:t})});_.displayName="DeepLinkNavigator";const g=_},326960:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(667294),o=i(172071),r=i(883119),a=i(813401),s=i(112690),l=i(785893);function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const d=(e,t)=>{const i=e&&e.replace(".","_");return t?i&&i.substring(0,50):i};class u extends n.Component{constructor(...e){super(...e),c(this,"state",{href:void 0}),c(this,"onEvent",(()=>new Promise(((e,t)=>{"undefined"==typeof window&&t();const{filename:i,imgSrc:n,isAndroidTwa:r,isChromeOnIOS:a,isUnauth:s,logContextEvent:l,category:c,viewParameter:u,viewType:p,pinId:h,imageSignature:m}=this.props,{href:_}=this.state;window.AndroidTwa&&window.AndroidTwa.downloadImage?(window.AndroidTwa.downloadImage(n,d(i,r)),e()):a?(this.imageDownload&&this.imageDownload.click(),e()):null==_&&fetch(n,{headers:new Headers({Origin:window.location.origin}),mode:"cors"}).then((e=>e.blob())).then((t=>{this.setState({href:window.URL.createObjectURL(t)},(()=>{this.imageDownload&&(this.imageDownload.click(),e())}))})).catch((()=>this.setState({href:this.DOWNLOAD_ERROR}))),o.Z.increment(`mweb.${s?"unauth":"auth"}.download.click.${c||"no_category"}`),l({event_type:82,object_id_str:h,view_type:p||3,view_parameter:u||139,aux_data:{image_signature:m}})})))),c(this,"DOWNLOAD_ERROR","error")}render(){const{children:e,filename:t,imgSrc:i,isAndroidTwa:o,isChromeOnIOS:a}=this.props,{href:s}=this.state,c=null!=s&&s!==this.DOWNLOAD_ERROR;return(0,l.jsxs)(n.Fragment,{children:[e(this.onEvent),a&&i?(0,l.jsx)(r.xu,{display:"none",children:(0,l.jsx)("a",{ref:e=>this.imageDownload=e,rel:"noopener noreferrer",tabIndex:-1,target:"_blank",href:i})}):c&&(0,l.jsx)(r.xu,{display:"none",children:(0,l.jsx)("a",{ref:e=>this.imageDownload=e,tabIndex:-1,download:d(t,o),href:s})})]})}}function p(e){const t=(0,a.xC)(),i=(0,s.Z)();return(0,l.jsx)(u,{...e,isAndroidTwa:t,logContextEvent:i})}},920085:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(867820);async function o({filename:e,imgSrc:t,imageDownloadSuccessCallback:i,category:o,isUnauth:r,pinId:a,viewParameter:s,viewType:l},c){return"undefined"==typeof window?Promise.resolve():((0,n.My)(`web.${r?"unauth":"auth"}.download.click.${o||"no_category"}`),c({event_type:82,object_id_str:a,view_type:l||3,view_parameter:s||139}),t&&document?fetch(t,{headers:new Headers({Origin:window.location.origin}),mode:"cors"}).then((e=>e.blob())).then((t=>{var n,o;const r=document.createElement("a");r.href=window.URL.createObjectURL(t),r.setAttribute("download",e&&e.replace(".","_")),r.style.display="none",null===(n=document.body)||void 0===n||n.appendChild(r),r.click(),null===(o=document.body)||void 0===o||o.removeChild(r),null==i||i()})).catch((()=>{throw new Error("Download image error")})):Promise.resolve())}},616211:(e,t,i)=>{i.d(t,{W:()=>s,Z:()=>l});var n=i(898781),o=i(883119),r=i(785893);const a={__path:"M10.52 3.11a2 2 0 013.59 0l2.06 4.17c.02.06.08.1.15.11l4.6.67a2 2 0 011.1 3.41l-3.32 3.25a.2.2 0 00-.06.17l.78 4.58a2 2 0 01-2.9 2.11l-4.11-2.16a.2.2 0 00-.19 0l-4.11 2.16a2 2 0 01-2.9-2.1l.78-4.59a.2.2 0 00-.06-.17l-3.32-3.25a2 2 0 011.1-3.41l4.6-.67a.2.2 0 00.15-.1zm3.9 5.15l-1.75-3.53a.4.4 0 00-.71 0L10.2 8.26a2 2 0 01-1.5 1.1l-3.9.56a.4.4 0 00-.23.69l2.83 2.75a2 2 0 01.57 1.77L7.31 19a.4.4 0 00.58.42l3.5-1.83a2 2 0 011.86 0l3.48 1.83a.4.4 0 00.59-.42l-.67-3.88a2 2 0 01.57-1.77l2.83-2.75a.4.4 0 00-.22-.69l-3.9-.56a2 2 0 01-1.51-1.1z"},s={__path:"M10.52 3.11a2 2 0 013.59 0l2.06 4.17c.02.06.08.1.15.11l4.6.67a2 2 0 011.1 3.41l-3.32 3.25a.2.2 0 00-.06.17l.78 4.58a2 2 0 01-2.9 2.11l-4.11-2.16a.2.2 0 00-.19 0l-4.11 2.16a2 2 0 01-2.9-2.1l.78-4.59a.2.2 0 00-.06-.17l-3.32-3.25a2 2 0 011.1-3.41l4.6-.67a.2.2 0 00.15-.1z"};function l({isCloseupButton:e,isDisabled:t,isFavorited:i,onTap:l,size:c}){const d=(0,n.ZP)();return e?(0,r.jsx)(o.hU,{accessibilityLabel:d._('Favorite icon', 'pinRep.footer.favoriteIcon', 'Accessible label for favorite icon on Pin'),dangerouslySetSvgPath:i?s:a,disabled:t,iconColor:"darkGray",onClick:l,size:"lg"}):(0,r.jsx)(o.iP,{disabled:t,onTap:l,children:(0,r.jsx)(o.JO,{accessibilityLabel:d._('Favorite icon', 'pinRep.footer.favoriteIcon', 'Accessible label for favorite icon on Pin'),color:"default",dangerouslySetSvgPath:i?s:a,size:c})})}},676464:(e,t,i)=>{function n(e){const t=e.split("/");return[t[2],t[1]]}function o(e,t){return!e||!e.some((e=>e.pin_type===t))}i.d(t,{E:()=>o,J:()=>n})},629337:(e,t,i)=>{i.d(t,{iK:()=>Re,G9:()=>Te,ZP:()=>De,kk:()=>Se,cV:()=>ke});var n=i(667294),o=i(702664),r=i(157796),a=i(391254),s=i(283698),l=i(313047),c=i(100183),d=i(639952),u=i(81636),p=i(898781),h=i(883119),m=i(785893);function _(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const g="BizNuxHomefeedLoader",v=[140,220,265],f=["#E2780D","#0074e8","#0FA573","#FAB904","#133A5E","#FF8A8A"],y=e=>({position:"absolute",width:"100%",height:"100%",top:"0px",left:"0px",zIndex:"1",pointerEvents:"none",...e?{WebkitAnimationDuration:".4s",WebkitAnimationDelay:"1.15s",WebkitAnimationFillMode:"forwards",WebkitAnimationName:`${g}_FadeOut`,animationDuration:".5s",animationDelay:"1.2s",animationFillMode:"forwards",animationName:`${g}_FadeOut`}:{}}),x=e=>e?{WebkitAnimationDuration:".4s",WebkitAnimationDelay:".5s",WebkitAnimationFillMode:"forwards",WebkitAnimationName:`${g}_FadeOut`,animationDuration:".4s",animationDelay:".5s",animationFillMode:"forwards",animationName:`${g}_FadeOut`}:{},b=[`${g}_FadeOut {\n    from { opacity: 1 }\n    to { opacity: 0 }\n  }`,`${g}_SlideUp {\n    from {\n      -webkit-transform: translateY(100vh);\n      transform: translateY(100vh);\n    }\n    to {\n      -webkit-transform: translateY(0);\n      transform: translateY(0);\n    }\n  }`];class w extends n.PureComponent{constructor(...e){super(...e),_(this,"state",{enterAnimationFinished:!1,startExitAnimation:!1}),_(this,"enterAnimationDidFinished",(()=>{this.setState({enterAnimationFinished:!0})})),_(this,"startExitAnimation",(()=>{const{dismissLoader:e}=this.props;this.setState({startExitAnimation:!0},(()=>{this.exitAnimationTimeout=setTimeout((()=>{e()}),1700)}))}))}componentDidMount(){window.scrollTo(0,0),this.enterAnimationTimeout=setTimeout((()=>{this.enterAnimationDidFinished()}),2e3)}componentDidUpdate(e){const{homefeedLoading:t}=this.props,{enterAnimationFinished:i,startExitAnimation:n}=this.state;!i||t||n||(0,s.Z)(this.startExitAnimation)}componentWillUnmount(){clearTimeout(this.enterAnimationTimeout),clearTimeout(this.exitAnimationTimeout)}get gridCellDimensionsByColumn(){const{gridContainerRef:e}=this.props;if(!e.current)return null;const t=e.current.querySelectorAll(".PinCard__imageWrapper"),i=Array.from({length:this.numberOfColumns},(e=>[]));for(let n=0;n<t.length;n+=1){const e=t[n].getBoundingClientRect();i[Math.round(e.left/(window.innerWidth/this.numberOfColumns))].push(e)}return i}get numberOfColumns(){return Math.max(Math.floor(window.innerWidth/200),2)}computeGridCellLayout(e,t,i){const n=this.numberOfColumns+1,o=(window&&window.innerWidth-16*n)/this.numberOfColumns;return{left:e*o+16*(e+1),top:i,width:o,height:v[(e+t)%v.length]}}renderGrid(){const{selectedTopics:e}=this.props,{startExitAnimation:t}=this.state,i=Array(this.numberOfColumns).fill(l.DEFAULT_HEIGHT),n=this.gridCellDimensionsByColumn,o=e.map(((e,o)=>{const r=o%this.numberOfColumns,a=Math.floor(o/this.numberOfColumns),s=f[o%f.length],l=i[r],c=this.computeGridCellLayout(r,a,l),d=(({color:e,startAnimation:t,originDimension:i,destinationDimension:n={}})=>{const o=n&&n.height>0?{top:n.top,left:n.left,width:n.width,height:n.height}:{opacity:0};return{position:"absolute",WebkitTransitionDuration:".5s",WebkitTransitionDelay:".6s",WebkitTransitionProperty:"all",WebkitTransitionTimingFunction:"ease-in-out",transitionDuration:".5s",transitionDelay:".6s",transitionProperty:"all",transitionTimingFunction:"ease-in-out",height:i.height,width:i.width,left:i.left,top:i.top,backgroundColor:e,borderRadius:"8px",...t?o:{}}})({color:s,startAnimation:t,originDimension:c,destinationDimension:n&&n[r][a]});return i[r]+=16+c.height,(0,m.jsx)(h.xu,{dangerouslySetInlineStyle:{__style:d},children:(0,m.jsx)(h.xu,{margin:5,display:"flex",justifyContent:"start",alignItems:"start",dangerouslySetInlineStyle:{__style:x(t)},children:(0,m.jsx)(h.X6,{color:"light",size:"500",children:e.name})})},o)}));return(0,m.jsx)(h.xu,{dangerouslySetInlineStyle:{__style:{position:"absolute",height:"100%",width:"100%",left:0,top:0,WebkitTransform:"translateY(100vh)",WebkitAnimationDuration:".8s",WebkitAnimationDelay:"1.2s",WebkitAnimationFillMode:"forwards",WebkitAnimationName:`${g}_SlideUp`,transform:"translateY(100vh)",animationDuration:".8s",animationDelay:"1.2s",animationFillMode:"forwards",animationName:`${g}_SlideUp`}},children:o})}render(){const{startExitAnimation:e}=this.state;return(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)(a.Z,{unsafeCSS:(0,c.Ll)(b)}),(0,m.jsx)(h.xu,{color:"default",dangerouslySetInlineStyle:{__style:y(e)},children:(0,m.jsxs)(h.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)(r.Z,{duration:3700,finalProgress:100}),(0,m.jsx)(h.xu,{margin:10,dangerouslySetInlineStyle:{__style:{WebkitAnimationDuration:".5s",WebkitAnimationDelay:"1.4s",WebkitAnimationFillMode:"forwards",WebkitAnimationName:`${g}_FadeOut`,animationDuration:".5s",animationDelay:"1.25s",animationFillMode:"forwards",animationName:`${g}_FadeOut`}},children:(0,m.jsx)(h.X6,{children:this.props.i18n._('Personalizing your feed with...', 'Loading homefeed details', 'Loading homefeed details')})})]}),this.renderGrid()]})})]})}}function P(e){const t=(0,p.ZP)(),i=(0,o.useSelector)((({topics:e})=>e)),n=(0,o.useDispatch)();return(0,u.Q)({view_type:24,view_parameter:261}),(0,m.jsx)(w,{...e,dismissLoader:()=>n((0,d.MI)(!1)),i18n:t,selectedTopics:Object.keys(i).filter((e=>i[e].is_followed)).map((e=>i[e]))})}var S=i(223019),T=i(200310),I=i(447635),k=i(491563),E=i(63552),A=i(172071),C=i(317254),j=i(920231),R=i(698629),D=i(394663);function O({text:e,isSelected:t,icon:i,animationType:n,position:o,hasStartPulling:r,isExecuted:a}){return(0,m.jsxs)(h.xu,{display:"flex",direction:"column",alignItems:"center",marginBottom:6,children:[(0,m.jsx)(h.xu,{color:t?"dark":"secondary","data-test-id":"action-animated-icon",rounding:"circle",padding:r?4:0,dangerouslySetInlineStyle:t&&a?{__style:{transform:"rotate(360deg)",transition:"all .9s ease-out"}}:{__style:{transition:"all .3s ease-out",marginTop:t&&"move"===n?40:0}},children:(0,m.jsx)(h.JO,{size:100*o<24?100*o:24,icon:i,accessibilityLabel:e,color:t?"light":"dark"})}),(0,m.jsx)(h.xu,{padding:1,"data-test-id":"action-animated-text",dangerouslySetInlineStyle:{__style:{opacity:t?1:0,transition:"all .3s ease-out"}},children:(0,m.jsx)(h.xv,{align:"center",size:"100",children:e})})]})}function L({enabled:e,onSelect:t,refreshing:i}){const o=(0,n.useRef)(null),[r,a]=(0,n.useState)(0),[s,l]=(0,n.useState)(!1),c=i?0:r/250,d=c>0,u=()=>{l(!1),a(0)};(0,n.useEffect)((()=>{if(e){const e=e=>{window.scrollY<=0&&!i&&(o.current=e.touches[0].clientY)},n=e=>{if(o.current){const t=.5*(e.touches[0].clientY-o.current);t>0&&(a(t),e.preventDefault())}},s=e=>{o.current&&(l(!0),t({pullDistance:r,position:c,resetState:u}),o.current=null)};return window.addEventListener("touchstart",e),window.addEventListener("touchmove",n,{passive:!1}),window.addEventListener("touchend",s),()=>{window.removeEventListener("touchstart",e),window.removeEventListener("touchmove",n,{passive:!1}),window.removeEventListener("touchend",s)}}}),[e,t,r,i,c]);const p=o.current;return{pullDistance:r,hasStartPulling:d,position:c,startYRefCurrent:p,PULL_MENU_DISTANCE:250,isExecuted:s}}var M=i(407043),N=i(276775);function z({enabled:e,onPull:t,refreshing:i}){const n=(0,p.ZP)(),o=(0,N.useHistory)(),{logContextEvent:r}=(0,M.v)(),a=e=>e>=.6,s=e=>e>.4&&e<.6,{position:l,hasStartPulling:c,PULL_MENU_DISTANCE:d,isExecuted:u}=L({enabled:e,onSelect:e=>{const{position:i,resetState:n}=e;s(i)?setTimeout((()=>{r({view_type:1,event_type:158,view_parameter:92}),t(),n()}),500):a(i)?setTimeout((()=>{r({view_type:1,event_type:10144,view_parameter:92}),o.push("edit/"),n()}),500):n()},refreshing:i}),_=n._('Refresh', 'pullMenu.refresh', 'Pull down on grid to refresh items'),g=n._('Edit Feed', 'pullMenu.goTuner', 'Pull down on grid to edit your feed');return(0,m.jsx)(h.xu,{children:e&&(0,m.jsxs)(h.xu,{display:"flex",alignItems:"center",direction:"column",height:l*d,justifyContent:"center",marginBottom:c?4:0,children:[(0,m.jsx)(O,{text:g,isSelected:a(l),icon:"edit",animationType:"move",position:l,hasStartPulling:c,isExecuted:u}),(0,m.jsx)(O,{text:_,isSelected:s(l),icon:"refresh",position:l,hasStartPulling:c,isExecuted:u})]})})}function F({enabled:e,onPull:t,refreshing:i}){const n=(0,p.ZP)(),{logContextEvent:o}=(0,M.v)(),{position:r,startYRefCurrent:a,pullDistance:s}=L({enabled:e,onSelect:e=>{const{pullDistance:i,resetState:n}=e;i>=120&&(o({view_type:1,event_type:158,view_parameter:92}),t()),n()},refreshing:i}),l=Math.min(r,1),c=n._('Pull to refresh', 'Pull down on grid to refresh items', 'Pull down on grid to refresh items');return(0,m.jsx)(h.xu,{children:e&&(0,m.jsx)(h.xu,{display:"flex",alignItems:"center",justifyContent:"center",height:120*r,dangerouslySetInlineStyle:{__style:{opacity:l,transition:null===a?"all .3s ease-out":void 0}},children:(0,m.jsx)(h.JO,{size:40,icon:a&&s<120?"arrow-circle-down":"arrow-circle-up",accessibilityLabel:c})})})}var Z=i(773285);function B({enabled:e,onPull:t,refreshing:i}){const{checkExperiment:o}=(0,Z.F)(),{anyEnabled:r}=o("hfp_drive_traffic_to_homefeed_tuner_mweb");return(0,m.jsx)(n.Fragment,{children:r?(0,m.jsx)(z,{enabled:e,onPull:t,refreshing:i}):(0,m.jsx)(F,{enabled:e,onPull:t,refreshing:i})})}var U,H=i(995228),V=i(740990),W=i(182476),$=i(585112),G=i(829407),K=i(784590),q=i(19121),Y=i(844887),X=i(116485),J=i(273712),Q=i(957161),ee=i(305324),te=i(398625),ie=i(780280),ne=i(562034),oe=i(167912);const re=["#E2780D","#0074e8","#0FA573","#FAB904","#133A5E","#FF8A8A"],ae=[140,220,265],se=e=>({position:"absolute",width:"100%",height:"100vh",top:"0px",left:"0px",zIndex:"1",pointerEvents:"none",...e?{WebkitAnimationDuration:".4s",WebkitAnimationDelay:"1.15s",WebkitAnimationFillMode:"forwards",WebkitAnimationName:"NuxHomefeedLoader_FadeOut",animationDuration:".5s",animationDelay:"1.2s",animationFillMode:"forwards",animationName:"NuxHomefeedLoader_FadeOut"}:{}}),le=e=>e?{WebkitAnimationDuration:".4s",WebkitAnimationDelay:".5s",WebkitAnimationFillMode:"forwards",WebkitAnimationName:"NuxHomefeedLoader_FadeOut",animationDuration:".4s",animationDelay:".5s",animationFillMode:"forwards",animationName:"NuxHomefeedLoader_FadeOut"}:{},ce=["NuxHomefeedLoader_FadeOut {\n    from { opacity: 1 }\n    to { opacity: 0 }\n  }","NuxHomefeedLoader_SlideUp {\n    from {\n      -webkit-transform: translateY(100vh);\n      transform: translateY(100vh);\n    }\n    to {\n      -webkit-transform: translateY(0);\n      transform: translateY(0);\n    }\n  }"],de=e=>e._('Personalizing your feed with...', 'Loading homefeed details', 'Loading homefeed details');function ue({gridContainerRef:e,homefeedLoading:t,selectedTopics:i}){const _=(0,p.ZP)(),[g,v]=(0,n.useState)(!1),[f,y]=(0,n.useState)(!1),x=(0,o.useDispatch)(),b=(0,ne.Z)();let w,P;(0,n.useEffect)((()=>(window.scrollTo(0,0),w=setTimeout((()=>{v(!0)}),3e3),()=>{clearTimeout(w),clearTimeout(P)})),[]),(0,n.useEffect)((()=>{t||!g||f||(0,s.Z)((()=>{y(!0),P=setTimeout((()=>{b({event_type:8900,view_type:24,view_parameter:261}),x((0,d.gH)(!1))}),2550)}))}),[t,g,f]);const S=()=>Math.max(Math.floor(window.innerWidth/200),2);return(0,m.jsx)(u.Z,{log:{view_type:24,view_parameter:261},children:(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)(a.Z,{unsafeCSS:(0,c.Ll)(ce)}),(0,m.jsx)(h.xu,{color:"default",dangerouslySetInlineStyle:{__style:se(f)},children:(0,m.jsxs)(h.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[(0,m.jsx)(r.Z,{color:"dark",duration:5550,finalProgress:100}),(0,m.jsx)(h.xu,{dangerouslySetInlineStyle:{__style:{WebkitAnimationDuration:".5s",WebkitAnimationDelay:"2.8s",WebkitAnimationFillMode:"forwards",WebkitAnimationName:"NuxHomefeedLoader_FadeOut",animationDuration:".5s",animationDelay:"2.5s",animationFillMode:"forwards",animationName:"NuxHomefeedLoader_FadeOut"}},paddingX:4,paddingY:6,children:(0,m.jsx)(h.X6,{size:"500",children:de(_)})}),(()=>{const t=S(),n=Array(t).fill(l.DEFAULT_HEIGHT),o=(()=>{const t=S();if(!e.current)return null;const i=e.current.querySelectorAll(".PinCard__imageWrapper"),n=Array.from({length:t},(e=>[]));for(let e=0;e<i.length;e+=1){const o=i[e].getBoundingClientRect();n[Math.round(o.left/(window.innerWidth/t))].push(o)}return n})(),r=i.map(((e,i)=>{const r=i%t,a=Math.floor(i/t),s=re[i%re.length],l=((e,t,i)=>{const n=S(),o=n+1,r=(window&&window.innerWidth-8*o)/n;return{left:e*r+8*(e+1),top:i,width:r,height:ae[(e+t)%ae.length]}})(r,a,n[r]),c=(({color:e,startAnimation:t,originDimension:i,destinationDimension:n={}})=>{const o=n&&n.height>0?{top:n.top,left:n.left,width:n.width,height:n.height}:{opacity:0};return{position:"absolute",WebkitTransitionDuration:".5s",WebkitTransitionDelay:".6s",WebkitTransitionProperty:"all",WebkitTransitionTimingFunction:"ease-in-out",transitionDuration:".5s",transitionDelay:".6s",transitionProperty:"all",transitionTimingFunction:"ease-in-out",height:i.height,width:i.width,left:i.left,top:i.top,backgroundColor:e,borderRadius:"8px",...t?o:{}}})({color:s,startAnimation:f,originDimension:l,destinationDimension:o&&o[r][a]});return n[r]+=8+l.height,(0,m.jsx)(h.xu,{dangerouslySetInlineStyle:{__style:c},children:(0,m.jsx)(h.xu,{margin:4,dangerouslySetInlineStyle:{__style:le(f)},children:(0,m.jsx)(h.X6,{color:"light",size:"400",children:e.name})})},i)}));return(0,m.jsx)(h.xu,{dangerouslySetInlineStyle:{__style:{position:"absolute",height:"100vh",width:"100%",left:0,top:0,WebkitTransform:"translateY(100vh)",WebkitAnimationDuration:".8s",WebkitAnimationDelay:"2.4s",WebkitAnimationFillMode:"forwards",WebkitAnimationName:"NuxHomefeedLoader_SlideUp",transform:"translateY(100vh)",animationDuration:".8s",animationDelay:"2.4s",animationFillMode:"forwards",animationName:"NuxHomefeedLoader_SlideUp"}},children:r})})()]})})]})})}const pe=void 0!==U?U:U=i(248639);function he(){const e=(0,p.ZP)();return(0,m.jsx)(h.xu,{height:"100vh",width:"100vw",children:(0,m.jsx)(h.xu,{dangerouslySetInlineStyle:{__style:{WebkitAnimationDuration:".5s",WebkitAnimationDelay:"2.8s",WebkitAnimationFillMode:"forwards",WebkitAnimationName:"NuxHomefeedLoader_FadeOut",animationDuration:".5s",animationDelay:"2.5s",animationFillMode:"forwards",animationName:"NuxHomefeedLoader_FadeOut"}},paddingX:4,paddingY:6,children:(0,m.jsx)(h.X6,{size:"500",children:de(e)})})})}function me({gridContainerRef:e,homefeedLoading:t}){var i,n,o;const{v3OrientationTopicsQuery:r}=(0,oe.useLazyLoadQuery)(pe,{}),a=(null!==(i=null==r||null===(n=r.data)||void 0===n||null===(o=n.connection)||void 0===o?void 0:o.edges)&&void 0!==i?i:[]).filter(Boolean).reduce(((e,t)=>{var i;return t.node&&t.node.isFollowed?[...e,{name:null!==(i=t.node.name)&&void 0!==i?i:""}]:e}),[]);return(0,m.jsx)(ue,{gridContainerRef:e,homefeedLoading:t,selectedTopics:a})}var _e=i(902462),ge=i(50286),ve=i(112690),fe=i(444445),ye=i(591042);const xe=e=>`BREAK_IN_${e}`,be=new Map,we=e=>{const t=be.get(e);if(t)return t;const i=Object.freeze({type:"FEED_BREAK_IN",id:xe(e)});return be.set(e,i),i};function Pe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Se=({isDesktop:e})=>{const t=(0,_e.pinRepPaddingInBoint)({isDesktop:e});return t?-t:0},Te=-2,Ie={},ke=e=>{Ie[e]&&Ie[e].handlePullToRefresh()},Ee=(e,t)=>e.slice(0,t).map((e=>e.id)),Ae=()=>{const e="desktop"===(0,ge.ZP)(),t=(0,_e.pinRepPaddingInBoint)({isDesktop:e}),i=t?-t:0;return(0,m.jsx)(h.xu,{marginTop:i,marginBottom:i,paddingY:t})},Ce=({children:e,feedRef:t,viewParameter:i,viewType:n})=>(0,q.Z)().isAuth?e:(0,m.jsx)(ee.g,{feedRef:t,viewParameter:i,viewType:n,children:e});class je extends n.PureComponent{constructor(...e){super(...e),Pe(this,"state",{refreshing:!1,plpIds:(0,Y.HW)().extraPlpIds,plpFeed:[]}),Pe(this,"backonlineAutoFetchResource",(()=>{this.props.feedResource.fetchMore()})),Pe(this,"onPinTouch",(e=>{if(e.target instanceof HTMLElement&&"IMG"===e.target.tagName){const t=e.target.getBoundingClientRect().top+window.scrollY-70;window.scrollTo(window.scrollX,t)}})),Pe(this,"handlePullToRefresh",(()=>{this.props.feedResource.refresh(),this.setState({refreshing:!0})})),Pe(this,"gridContainerRef",(0,n.createRef)()),Pe(this,"renderPinterestTVPin",(e=>{const{creator_class:t,creator_class_instance:i,id:o}=e,{creator:r}=t,{title:a,starts_at:s}=i,l=i.live_status===J.Ct.POST_LIVE,c=i.live_status===J.Ct.PRE_LIVE;return(0,m.jsx)(h.xu,{width:"100%",padding:1,children:c?(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)($.Z,{creatorClass:t,creatorClassInstance:i,pinId:o,variant:"grid"}),(0,m.jsx)(T.Z,{isEpisodeReplay:l,isEpisodeUpcoming:c,pinId:o,startsAt:s,title:a,user:r})]}):(0,m.jsx)(I.Z,{feedItem:e},t.id)},o)})),Pe(this,"renderFeedPin",((e,t)=>{const{feedItemProps:i,hidePinMetadata:n=!1,lazyLoadBelowFoldIndex:o,location:r,pins:a,priorityFetchAboveFoldIndex:s,renderSquarePins:l,showSeoMetadata:c,squarePins:d,topLevelTrafficSource:u,topLevelTrafficSourceDepth:p,trafficSource:h,duploUnauthRelatedPinsAutoplayExpGroup:_}=this.props,{auxData:g,componentType:v,feedback:f,imageOnly:y,impressionData:x,objectIdStr:b,oneTapSave:w,onFeedItemClick:P,onPinLinkClick:S,shouldAllowProductPriceIndicator:T,showSeoMetadata:I,viewData:k,viewParameter:E,viewType:A}=i||{},C=(r.search||"").includes("force_seo"),j=a[e.id];let R=!1,D=!1;return o&&(R=t>o),s&&(D=t<=s),j.creator_class&&j.creator_class_instance?this.renderPinterestTVPin(j):(0,m.jsx)(_e.default,{auxData:g,componentType:v||0,duploFeedItemProps:{hidePinMetadata:n,onPinClick:P,onPinLinkClick:S,showSeoMetadata:c||C||I},duploIsSquarePin:l||d,duploLazyLoadImage:R,duploOneTapSave:w,duploPriorityFetchImage:D,duploShouldAllowProductPriceIndicator:T,feedback:f,imageOnlyOption:y?"image-only":"default",impressionData:x,objectIdStr:b,pinId:e.id,slotIndex:t,topLevelTrafficSource:u,topLevelTrafficSourceDepth:p,trackingParams:e.trackingParams,trafficSource:h,viewData:k,viewParameter:E,duploUnauthRelatedPinsAutoplayExpGroup:_,viewType:A||1})})),Pe(this,"renderFeedItem",(({data:e,itemIdx:t})=>{const{breakIns:i,feedItems:n,feedItemProps:o,renderFeedItem:r,trafficSource:a}=this.props;if(r)return r(e,t);const{viewParameter:s,viewType:l}=o||{};switch(e.type){case"pin":return(0,m.jsx)(E.Z,{onTouch:this.onPinTouch,pressState:"none",children:this.renderFeedPin(e,t)});case"user":return(0,m.jsx)(k.Z,{truncateName:!0,userId:e.id,userSearchRepStyle:"user_search"===a,viewParameter:s,viewType:l});case"board":return(0,m.jsx)(S.Z,{boardId:e.id,type:"grid",viewParameter:s,viewType:l});case"topic":return(0,m.jsx)(W.Z,{id:e.id,shouldClickthrough:!0,showFollowButton:!0,showFollowerCount:!0,viewParameter:s,viewType:l});case"story":return"number"==typeof s?(0,m.jsx)(D.Z,{slotIndex:t,storyId:e.id,viewParameter:s,viewType:l||1}):null;case"FEED_BREAK_IN":return i?(({breakIns:e,id:t,items:i})=>{const n=e.find((({index:e})=>xe(e)===t));return null!=n&&n.render?n.render(i||[]):null!=n&&n.content?n.content:null})({breakIns:i,id:e.id,items:n||[]}):null;default:return null}}))}componentDidMount(){window.addEventListener("online",this.backonlineAutoFetchResource);const{logFeed:e,feedKey:t,feedItemProps:i}=this.props;if(e){const{viewParameter:e,viewType:t,auxData:n,componentType:o}=i||{},r={event_type:13};e&&(r.view_parameter=e),t&&(r.view_type=t),n&&(r.aux_data=n),o&&(r.component=o),this.props.logContextEvent(r)}((e,t)=>{Ie[e]=t})(t,this)}setPlpFeedData(e){const{feedItems:t,pins:i}=this.props,{plpIds:n}=this.state;if(e)return(0,Q.L_)(X.zR),void this.setState({plpIds:[],plpFeed:[]});if(n.length>0&&t&&t.length>0){const e=n[0],o=i[e],r=t.slice(0,5).map((e=>e.id)).includes(e);o&&!r&&this.setState({plpFeed:[{id:n[0],type:"pin",trackingParams:t[0].trackingParams}].concat(t)})}}logHomefeedRefreshStats(e,t,i,n){const{locale:o}=this.props,{refreshing:r}=this.state;if(r&&t.isFetching&&!e.isFetching&&i&&i.length>0&&n&&n.length>0){const e=Ee(n,5),t=Ee(i,5),r={appType:"mweb",language:(o?o.slice(0,2):void 0)||"unknown",locale:o||"unknown"};A.Z.increment("home_product.homefeed.refresh",1,r),a=e,s=t,JSON.stringify(a)===JSON.stringify(s)&&A.Z.increment("home_product.homefeed.refresh.no_change",1,r)}var a,s}componentDidUpdate(e){const{feedItems:t}=e,{feedKey:i,feedItems:n}=this.props,{plpFeed:o,plpIds:r,refreshing:a}=this.state,s="homefeed"===i;a&&e.feedResource.isFetching&&!this.props.feedResource.isFetching&&this.setState({refreshing:!1}),s&&this.logHomefeedRefreshStats(this.props.feedResource,e.feedResource,n,t);const l=r.length>0;if(s&&l){const e=!!t&&t.length>0,i=!!n&&n.length>0,r=!e&&i,a=!!n&&n.length>0&&!!t&&t.length>0&&t[0]!==n[0],s=!!n&&n.length>0&&!!t&&t.length>0&&t[0]===n[0]&&t.length!==n.length,l=i&&!a&&0===o.length;(r||a||s||l)&&this.setPlpFeedData(a)}}componentWillUnmount(){var e;window.removeEventListener("online",this.backonlineAutoFetchResource),e=this.props.feedKey,delete Ie[e]}renderFeedItems(e){const{hidePinMetadata:t,fullWidthBreakIn:i,deviceType:o,emptyState:r,feedKey:a,feedResource:s,gridConfig:l,pullToRefresh:c,serverRender:d,showBizNuxHomefeedLoader:u,showNuxHomefeedLoader:p,trafficSource:_,feedItemProps:g}=this.props,{viewParameter:v,viewType:f}=g||{},{key:y}=l||{},x=a+(y?`|${y}`:""),b="user_search"===_,w=b?window.innerWidth-16:200,S={columnWidth:"desktop"===o?fe.yF:w,Item:this.renderFeedItem,gutterWidth:"desktop"===o?4*fe.jC:void 0,loadItems:s.fetchMore,minCols:b?1:2,...l},T=!p&&!u&&s.isFetching&&0===e.length&&!this.state.refreshing,I=i?e.slice(0,i.index):e,k=i?e.slice(i.index):[];let E,A,D;(a.includes("homefeed")||a.includes("search"))&&(E=!0,A=!0,D=Object.values(this.props.pins).length?Object.values(this.props.pins):void 0);const O="desktop"===o&&"flashlight"===_,L=O?0:fe.qG;return(0,m.jsxs)(h.xu,{"data-test-id":"MobileFeed",children:[(0,m.jsx)(B,{enabled:!!c,onPull:this.handlePullToRefresh,refreshing:this.state.refreshing}),(0,m.jsxs)(h.xu,{marginStart:L,marginEnd:L,"data-test-id":"grid",ref:this.gridContainerRef,opacity:this.state.refreshing?.5:1,children:[(0,m.jsx)(C.Z,{isAtEndOfFeed:s.isAtEnd,pinData:D,includeVideos:A,includeBackgroundImages:E,itemCount:e.length,children:e.length?(0,m.jsx)(h.xu,{"data-test-id":"feed",marginTop:Se({isDesktop:"desktop"===o}),children:(0,m.jsx)(V.Z.Consumer,{children:e=>(0,m.jsx)(n.Fragment,{children:(0,m.jsxs)(Ce,{feedRef:this.gridContainerRef,viewParameter:v,viewType:f||1,children:[(0,m.jsx)(j.Z,{cacheKey:x,id:d?a:void 0,items:I,scrollContainerRef:e,serverRender:d,resetPositions:t,...S}),null==i?void 0:i.content,k.length>0&&(0,m.jsx)(j.Z,{cacheKey:`${x}_afterBreak`,items:k,scrollContainerRef:e,...S})]})})})}):s.isFetching?(0,m.jsx)(Ae,{}):null!=r?r:null}),T&&(0,m.jsx)(h.xu,{column:12,paddingY:2,children:(0,m.jsx)(R.Z,{partialViewportWidth:O})}),p&&(0,m.jsx)(H.Z,{fallback:(0,m.jsx)(he,{}),children:(0,m.jsx)(me,{homefeedLoading:s.isFetching,gridContainerRef:this.gridContainerRef})}),u&&(0,m.jsx)(P,{homefeedLoading:s.isFetching,gridContainerRef:this.gridContainerRef})]})]})}render(){const{feedItems:e,feedKey:t,isAuthenticated:i}=this.props,{plpFeed:n}=this.state,o=e||[];return"homefeed"!==t?this.renderFeedItems(o):i&&n.length>0?this.renderFeedItems(n):this.renderFeedItems(o)}}function Re({feedOffset:e,itemShouldBeExcluded:t,resource:{error:i,...r},...a}){const{breakIns:s,feedKey:l}=a,c=(0,N.useLocation)(),u=(0,ge.ZP)(),p=(0,o.useDispatch)(),h=(0,ve.Z)(),{isAuthenticated:_,isBot:g,locale:v}=(0,ie.B)(),{isBizNuxHomefeedLoadShown:f,isNuxHomefeedLoadShown:y}=(0,o.useSelector)((({session:e})=>e)),x=(0,o.useSelector)((({feeds:e})=>e[l])),b=(0,o.useSelector)((({pins:e})=>e)),w=(0,o.useSelector)((({session:e})=>e.firstHomeFeedRequestAfterNux));(0,n.useEffect)((()=>{"homefeed"===l&&x&&x.length>0&&w&&p((0,d.H5)(!1))}),[p,x,l,w]);const P=Object.values(null!=b?b:{}),S=P.some((e=>!!e.creator_class&&!!e.creator_class_instance)),{getSubscription:T,setSubscription:I}=(0,ye.xs)({});(0,G.Z)((()=>{S&&P.filter((e=>!!e.creator_class&&!!e.creator_class_instance&&e.creator_class_instance.live_status===J.Ct.PRE_LIVE)).forEach((e=>{var t,i;return I(e.id,null!==(t=null===(i=e.creator_class)||void 0===i?void 0:i.is_viewing_user_subscribed)&&void 0!==t&&t)}))}));const k=(0,n.useMemo)((()=>({getSubscription:T,referrer:41,setSubscription:I})),[T,I]);let E=x;E&&(s&&(E=(({breakIns:e,items:t})=>e.map((e=>e.index)).sort().reduce(((e,t)=>e.length<t?e:[...e.slice(0,t),we(t),...e.slice(t)]),t))({items:E,breakIns:s})),t&&(E=E.filter((e=>!t(e)))),e&&(E=E.slice(e)));const A=(0,te.T)();if(A){const{setFirstRelatedPinId:e}=A;E&&E.length>0&&e(E[0].id)}return S?(0,m.jsx)(ye.J1,{value:k,children:(0,m.jsx)(je,{...a,deviceType:u,feedItems:E,feedResource:r,isAuthenticated:_,locale:v,location:c,logContextEvent:h,pins:b,showBizNuxHomefeedLoader:!!f,showNuxHomefeedLoader:!!y,showSeoMetadata:g||!_})}):(0,m.jsx)(je,{...a,deviceType:u,feedItems:E,feedResource:r,isAuthenticated:_,locale:v,location:c,logContextEvent:h,pins:b,showBizNuxHomefeedLoader:!!f,showNuxHomefeedLoader:!!y,showSeoMetadata:g||!_})}function De({resourceConfig:e,...t}){const i=(0,K.Z)(e);return(0,m.jsx)(Re,{...t,resource:i})}},815613:(e,t,i)=>{i.d(t,{Z:()=>P});var n=i(829407),o=i(898781),r=i(112690),a=i(927383),s=i(201155),l=i(667679),c=i(52022),d=i(19121),u=i(945698),p=i(62409),h=i(773285),m=i(350118),_=i(698330),g=i(50286),v=i(343341),f=i(640064),y=i(867820),x=i(883119),b=i(785893);const w=({children:e,pulsar:t,testId:i})=>t.show?(0,b.jsx)(x.xu,{position:"relative","data-test-id":i,children:(0,b.jsxs)(x.iP,{tapStyle:"none",onTap:t.onClick,children:[(0,b.jsx)(x.xu,{position:"absolute",marginTop:-5,dangerouslySetInlineStyle:{__style:{marginLeft:"-75px"}},children:e}),(0,b.jsx)(x.xu,{position:"absolute",marginTop:-12,dangerouslySetInlineStyle:{__style:{marginLeft:"-83px"}},children:(0,b.jsx)(x.o3,{})})]})}):(0,b.jsx)(x.xu,{"data-test-id":i,children:e});function P({auxData:e,disabled:t,disableLog:i,followEventType:P,id:S,inline:T,invertColors:I,isFollowed:k,isIdeaPin:E,isLegoEnabled:A,isSecondaryButton:C,isUserFollowButton:j,isUserMe:R,onFollow:D,onUnfollow:O,pinId:L,shouldUseLegoColors:M,showPulsar:N,size:z,textType:F="FollowFollowing",unfollowEventType:Z,viewParameter:B,viewType:U}){const H=(0,o.ZP)(),V=(0,g.HG)(),{showToast:W}=(0,v.F9)(),$=(0,c.Z)(),G=(0,r.Z)(),K=(0,l.Z)(),{checkExperiment:q}=(0,h.F)(),Y=(0,a.Z)(),X=(0,d.Z)(),J=X&&X.isAuth,{unauthFollowUserId:Q,setUnauthFollowUserId:ee}=(0,f.f)(),te=(0,_.mN)()(S),ie=(0,m.S6)()(null!=L?L:""),ne=(0,p.wS)(ie),oe=null!=te?te:ne;(0,n.Z)((()=>{!V&&J&&Q&&S&&Q===S&&D(S)}));const re=Y({fn:()=>{J?k?(O(S),i||G({event_type:Z,view_type:U,view_parameter:B,object_id_str:S,aux_data:e})):(D(S),j&&W((({hideToast:e})=>{if(!oe)return null;const t=oe.username?`/${oe.username}/`:"";return(0,b.jsx)(s.Z,{handleHide:e,text:(0,b.jsx)(x.xv,{children:H._('Following! Their created Pins will show up in your home feed!', 'followButton.follow.informationalToastText', 'Text explaining that a creator\'s Pins will show up in home feed after follow')}),userId:S,href:t,imageUrl:oe.image_medium_url})})),i||G({event_type:P,view_type:U,view_parameter:B,object_id_str:S,aux_data:e})):((0,y.My)(`mweb_unauth_follow_button.tap.${String(U)}`),5===U&&26===P&&(0,y.My)("mweb_unauth_board_page_follow_button.tap"),(0,y.NC)(k?"press_profile_unfollow":"press_profile_follow"),$({action:"click",item:"board-follow-button"}),K({reason:"ACTION_REQUIRES_LOGIN_OR_SIGNUP",attributionLabel:E?"tap.unauth_idea_pin.follow_button":"tap.unauth.follow_button",desktopOptions:{modalType:"signup",modalOptions:V&&q("pcons_dweb_contextual_follow_modal").anyEnabled?{source:"followButton",container:"follow"}:void 0},mobileOptions:!V&&q("pcons_mweb_contextual_follow_modal").anyEnabled?{headingType:"follow"}:void 0}),V||ee(null!=S?S:""),(0,y.NC)("clickthrough"))},modalHeader:(0,u.N4)({i18n:H,toFollow:!k})}),ae=!k&&!!N,se=()=>{if(R)return H._('That\'s you!', 'Follow button is disabled because this is you', 'Follow button is disabled because this is you');if("AddRemove"===F)return k?H._('Remove', 'unfollowButton.removeText', 'Follow button label - followed state, so user can click to "remove" the follow'):H._('Add', 'followButton.addText', 'Follow button label - unfollowed state, so user can click to "add" the follow');const e="FollowUnfollow"===F?H._('Unfollow', 'unfollowButton.unfollowText', 'Follow button label - followed state, so user can click to "unfollow" the follow'):H._('Following', 'Follow button label - followed state', 'Follow button label - followed state');return k?e:H._('Follow', 'Follow button label - unfollowed state', 'Follow button label - unfollowed state')};return(0,b.jsx)(w,{pulsar:ae?{show:!0,onClick:re}:{show:!1},testId:R||k?"board-unfollow-button":"board-follow-button",children:(0,b.jsx)(x.zx,{color:M||"AddRemove"===F||!A&&C||k?"gray":"red",disabled:R||t,fullWidth:T,onClick:ae?void 0:({event:t})=>{t.preventDefault(),t.stopPropagation(),i||G({event_type:101,component:13672,element:11951,object_id_str:S,view_type:U,view_parameter:B,aux_data:e}),re()},selected:I?!k:M&&k||!!k&&C,size:z,text:se(),accessibilityLabel:se()})})}},635974:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(702664),o=i(815613),r=i(698330),a=i(461773),s=i(785893);function l({user:e,invertColors:t,isSecondaryButton:i,onTap:l,size:c,viewParameter:d,viewType:u}){const p=(0,n.useDispatch)(),{id:h}=null!=e?e:{},m=(0,r.kW)(),_=m[h]?m[h].explicitly_followed_by_me:null==e?void 0:e.explicitly_followed_by_me;return(0,s.jsx)(o.Z,{id:h,onFollow:()=>{p((0,a.ZN)(h)),l&&l()},onUnfollow:()=>{p((0,a.fv)(h)),l&&l()},size:c,invertColors:t,isSecondaryButton:i,isFollowed:_,isUserFollowButton:!0,followEventType:45,unfollowEventType:46,viewParameter:d,viewType:u})}},427806:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(883119),o=i(785893);function r({text:e}){return(0,o.jsx)(n.xu,{display:"visuallyHidden",children:(0,o.jsx)(n.X6,{accessibilityLevel:1,children:e})})}},697335:(e,t,i)=>{i.d(t,{c:()=>o,t:()=>r});var n=i(883521);function o({children:e}){const{height:t}=(0,n.J)();return e(t)}function r(){const{height:e}=(0,n.J)();return e}},883521:(e,t,i)=>{i.d(t,{J:()=>c,Z:()=>h});var n=i(667294),o=i(522679),r=i(425288),a=i(977558),s=i(785893);const{Provider:l,useHook:c}=(0,r.Z)("Header"),d={childList:!0,attributes:!0,subtree:!0},u={height:a.cI,isInBiznuxFullscreen:!1,repinPinId:null,repinStartAnimation:!1,showAccountMenuFlyout:!1};function p(e,t){switch(t.type){case"showAccountMenuFlyout":return{...e,showAccountMenuFlyout:!0};case"hideAccountMenuFlyout":return{...e,showAccountMenuFlyout:!1};case"showRepinAnimation":return{...e,repinStartAnimation:!0,repinPinId:t.payload};case"hideRepinAnimation":return{...e,repinStartAnimation:!1,repinPinId:null};case"updateHeight":return{...e,height:t.payload};case"updateIsInBiznuxFullscreen":return{...e,isInBiznuxFullscreen:t.payload};default:throw new Error("action type not supported")}}function h({children:e}){const t=(0,n.useRef)(null),[{height:i,isInBiznuxFullscreen:r,repinPinId:c,repinStartAnimation:h,showAccountMenuFlyout:m},_]=(0,n.useReducer)(p,u);(0,n.useEffect)((()=>{const e=document.getElementById(a.WZ),i=()=>{e&&_({type:"updateHeight",payload:e.clientHeight})};return e&&"undefined"!=typeof MutationObserver&&(t.current=new MutationObserver(i),t.current.observe(e,d)),()=>{var e;null===(e=t.current)||void 0===e||e.disconnect()}}));const g=(0,n.useMemo)((()=>({height:i,isInBiznuxFullscreen:r,repinPinId:c,repinStartAnimation:h,showAccountMenuFlyout:m,updateHeaderState:_})),[_,i,r,c,h,m]);return(0,s.jsx)(l,{value:g,children:(0,s.jsx)(o.t,{children:e})})}},977558:(e,t,i)=>{i.d(t,{L1:()=>r,Rz:()=>l,WZ:()=>a,cI:()=>o,fe:()=>s,hu:()=>n});const n=64,o=80,r=22,a="HeaderContent",s=671,l={boxShadow:"0px 8px 8px -8px rgba(0, 0, 0, 0.1)",transition:"box-shadow 300ms ease-in-out"}},49028:(e,t,i)=>{i.d(t,{Hv:()=>c,WQ:()=>l});var n=i(667294),o=i(766935),r=i(425288),a=i(785893);const{Provider:s,useHook:l}=(0,r.Z)("HeaderShadow");function c({children:e}){const[t,i]=(0,n.useState)(!1),[r,l]=(0,n.useState)(0),[c,d]=(0,n.useState)(null);return(0,n.useEffect)((()=>{const e=(0,o.Z)((()=>{i(window.scrollY>0),l(window.scrollY)}),50);return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}}),[]),(0,a.jsx)(s,{value:{currentScrollPosition:r,isScrolled:t,setSubheaderShadow:d,subheaderShadow:c},children:e})}},999594:(e,t,i)=>{i.d(t,{C:()=>o,e:()=>n});const n=0,o=new Set(["/","/today"])},861411:(e,t,i)=>{i.d(t,{fv:()=>g,GR:()=>p,Hs:()=>f,Mv:()=>m,uc:()=>_,dL:()=>h,qS:()=>v,Y4:()=>b,HE:()=>x,Cy:()=>y});var n=i(667294),o=i(973935),r=i(124580),a=i(407043),s=i(785893);function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class c extends n.Component{constructor(...e){super(...e),l(this,"observe",(()=>{try{if(this.node=(0,o.findDOMNode)(this),this.node instanceof HTMLElement){const{pinIdStr:e,newsIdStr:t}=this.props.eventData;r.Z.start(this.node).onExitViewport(this.logImpression).setDebugId(e||t||"unknown")}}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}})),l(this,"logImpression",(e=>{this.props.logImpression({viewData:this.props.viewData||{},viewType:this.props.viewType,viewParameter:this.props.viewParameter,eventType:this.props.eventType,impressionType:this.props.impressionType,auxData:this.props.auxData,component:this.props.component,objectIdStr:this.props.objectIdStr,eventData:{endTime:e.endTime,time:e.startTime,...this.props.eventData}}),this.props.onTracked&&this.props.onTracked(this.props.eventData)}))}componentDidMount(){this.props.isPaused||this.observe()}componentDidUpdate(e){e.isPaused&&!this.props.isPaused&&this.observe()}componentWillUnmount(){this.node instanceof HTMLElement&&r.Z.stop(this.node)}render(){return n.Children.only(this.props.children)}}function d(e){const{logImpression:t}=(0,a.v)();return(0,s.jsx)(c,{...e,logImpression:t})}function u({auxData:e,component:t,eventData:i,eventType:o,impressionType:s,isPaused:l,objectIdStr:c,onTracked:d,viewData:u,viewType:p,viewParameter:h}){const m=(0,n.useRef)(null),{logImpression:_}=(0,a.v)(),g=(0,n.useCallback)((()=>{const n=n=>{_({viewData:u||{},viewType:p,viewParameter:h,eventType:o,impressionType:s,auxData:e,component:t,objectIdStr:c,eventData:{endTime:n.endTime,time:n.startTime,...i}}),d&&d(i)};try{if(m.current instanceof HTMLElement){const{pinIdStr:e,newsIdStr:t}=i;r.Z.start(m.current).onExitViewport(n).setDebugId(e||t||"unknown")}}catch(a){window.console.error('Can only track impressions for type "HTMLElement"')}}),[m.current]);return(0,n.useEffect)((()=>{l||g();const e=m.current;return()=>{e instanceof HTMLElement&&r.Z.stop(e)}}),[l,g]),m}const p=e=>(0,s.jsx)(d,{eventData:{...e.impressionData||{},pinIdStr:e.loggingId,clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex},auxData:e.auxData||{},component:e.component,eventType:18,impressionType:"pinImpressions",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,onTracked:e.onTracked,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter,children:e.children}),h=e=>{const t=u({eventData:{...e.impressionData||{},pinIdStr:e.loggingId,clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex},auxData:e.auxData||{},component:e.component,eventType:18,impressionType:"pinImpressions",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,onTracked:e.onTracked,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},m=e=>{const t=u({eventData:{newsIdStr:e.notificationId,newsType:e.newsType,displayMode:e.displayMode,newsIndex:e.newsIndex||0,tapItemIdStr:e.tapItemIdStr},auxData:e.auxData||{},eventType:4111,impressionType:"notificationDetailImpressions",loggingId:e.notificationId,viewType:107,viewParameter:3082});return e.children({impressionTrackerRef:t})},_=e=>{const t=u({eventData:{newsIdStr:e.notificationId,newsType:e.newsType},auxData:e.auxData||{},eventType:4110,impressionType:"notificationFeedImpressions",loggingId:e.notificationId,viewType:107,viewParameter:3081});return e.children({impressionTrackerRef:t})},g=e=>(0,s.jsx)(d,{eventData:{...e.impressionData||{},articleIdStr:e.loggingId,clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex},auxData:e.auxData||{},component:e.component,eventType:3829,impressionType:"articleImpressions",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,onTracked:e.onTracked,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter,children:e.children}),v=e=>{const t=u({eventData:{...e.impressionData||{},storyIdStr:e.loggingId,clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex},auxData:e.auxData||{},component:e.component,eventType:170,impressionType:"storyImpression",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,onTracked:e.onTracked,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},f=e=>(0,s.jsx)(d,{eventData:{...e.impressionData||{},storyIdStr:e.loggingId,clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex},auxData:e.auxData||{},component:e.component,eventType:170,impressionType:"storyImpression",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,onTracked:e.onTracked,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter,children:e.children}),y=e=>{const t=u({eventData:{...e.impressionData||{},userIdStr:e.loggingId,clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex||0},auxData:e.auxData||{},component:e.component,eventType:3704,impressionType:"userImpressions",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,onTracked:e.onTracked,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},x=e=>{const t=u({eventData:{...e.impressionData||{},topicIdStr:e.loggingId,clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex||0},auxData:e.auxData||{},component:e.component,eventType:3703,impressionType:"topicImpressions",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,onTracked:e.onTracked,viewData:e.viewData,viewType:e.viewType,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},b=e=>{const t=u({eventData:{...e.impressionData||{},clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex},auxData:e.auxData||{},component:e.component,eventType:8569,impressionType:"todayArticleImpressions",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,onTracked:e.onTracked,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})}},63552:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(883119),o=i(785893);function r({children:e,onMouseEnter:t,onMouseLeave:i,onTouch:r,rounding:a,fullWidth:s=!1,pressState:l="none",accessibilityLabel:c,role:d}){const u=(Array.isArray(l)?l:[l]).includes("compress");return(0,o.jsx)(n.iP,{fullWidth:s,onMouseEnter:t&&(({event:e})=>t(e)),onMouseLeave:i&&(({event:e})=>i(e)),onTap:r&&(({event:e})=>r(e)),rounding:a,tapStyle:u?"compress":"none",accessibilityLabel:c,role:d,children:e})}},807532:(e,t,i)=>{i.d(t,{C:()=>l,f:()=>s});var n=i(667294),o=i(425288),r=i(785893);const{Provider:a,useHook:s}=(0,o.Z)("MostRecentPin");function l({children:e}){const[t,i]=(0,n.useState)(),[o,s]=(0,n.useState)(),l=(0,n.useCallback)((e=>{const t=o?o.slice(0,10):[],i=[e].concat(t.filter((t=>t!==e)));s(i)}),[o]),c=(0,n.useMemo)((()=>({id:t,plpImageSignatures:o,setMostRecentPinId:i,setMostRecentPinImage:l})),[t,o,l]);return(0,r.jsx)(a,{value:c,children:e})}},44846:(e,t,i)=>{i.d(t,{Zk:()=>Y,Z7:()=>J,wt:()=>X,ZP:()=>re});var n=i(667294),o=i(702664);const r=e=>{const t=e.split("/");return 4===t.length?"pin"===t[1]&&""===t[3]:3===t.length&&("pin"===t[1]&&""!==t[2])};var a=i(954571),s=i(375574),l=i(898781),c=i(883119),d=i(785893);const u=({color:e="subtle",showLabel:t=!1,viewType:i})=>{const n=(0,l.ZP)();return(0,d.jsx)(c.xu,{rounding:3,flex:"grow",children:(0,d.jsxs)(c.xu,{display:"flex",justifyContent:"center",position:"relative",direction:"column",children:[(0,d.jsx)(c.xu,{display:"flex",justifyContent:"center",padding:1,children:(0,d.jsx)(s.Z,{elementType:249,iconButtonColor:"gray",iconButtonSize:"xl",viewType:i})}),t&&(0,d.jsx)(c.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{WebkitUserSelect:"none"}},children:(0,d.jsx)(c.xv,{align:"center",size:"100",lineClamp:1,color:e,children:n._('Create', 'nav.navFooterAdd.createPinButton', 'Create pin button on the Nav bar')})})]})})};var p=i(116303);const h=({height:e,width:t})=>(0,d.jsx)(c.xu,{alignItems:"center",color:"primary",dangerouslySetInlineStyle:{__style:{padding:"0 3px 0 2px"}},display:"flex",height:e,justifyContent:"center",width:t,position:"absolute",rounding:"pill",children:(0,d.jsx)(c.xv,{align:"center",color:"inverse",size:"100",weight:"bold",children:(0,d.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{padding:"0 0 1px 1px"}},children:" "})})}),m={zIndex:1,position:"relative"},_=(0,n.forwardRef)((({accessibilityLabel:e,avatarSrc:t,badge:i,badgeMargins:o,color:r,flyoutText:a,icon:s,onTouch:u,showFlyout:_,showFlyoutButton:g,showLabel:v,svgPath:f,title:y,to:x},b)=>{const w=(0,l.ZP)(),[P,S]=(0,n.useState)(!1),T=(0,n.useRef)(),I="nav-bar-"+String(s);return(0,d.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:P?m:{}},flex:"grow",children:(0,d.jsx)(c.iP,{onBlur:()=>S(!1),onFocus:()=>S(!0),onTap:({event:e})=>u(e),tapStyle:"compress",rounding:v?4:6,role:"link",href:x,children:(0,d.jsxs)(c.xu,{display:"flex",justifyContent:"center",position:"relative",color:"transparent",direction:"column",rounding:3,"data-test-id":I,children:[(0,d.jsxs)(c.xu,{position:"relative",display:"flex",justifyContent:"center",ref:b,children:[(0,d.jsx)(c.xu,{padding:2,ref:T,children:t?(0,d.jsx)(c.xu,{rounding:"circle",dangerouslySetInlineStyle:{__style:{boxShadow:"default"===r?"0 0 0 2px black":"0 0 0 2px transparent"}},children:(0,d.jsx)(p.Z,{name:e,src:t,size:"xs"})}):(0,d.jsx)(c.JO,{accessibilityLabel:e,icon:s,color:r,size:24,inline:!0,dangerouslySetSvgPath:f?{__path:f}:void 0})}),i&&(0,d.jsx)(c.xu,{marginStart:null==o?void 0:o.marginLeft,marginEnd:null==o?void 0:o.marginRight,marginTop:null==o?void 0:o.marginTop,marginBottom:null==o?void 0:o.marginBottom,position:"absolute",children:i.text?(0,d.jsx)(c.Ct,{position:"middle",type:"error",text:i.text.toString()||""}):(0,d.jsx)(h,{height:i.height,width:i.width})}),_&&(0,d.jsx)(c.J2,{anchor:T.current,color:"blue",onDismiss:()=>{},showCaret:!0,size:"flexible",children:(0,d.jsxs)(c.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",minHeight:70,paddingX:g?4:0,paddingY:g?4:1,width:g?200:132,children:[(0,d.jsx)(c.xv,{align:"center",color:"inverse",children:a||w._('Explore something new', 'Flyout message prompting user to click on the explore icon.', 'unauthNavBar.explore.flyout')}),g?(0,d.jsx)(c.xu,{marginTop:4,children:(0,d.jsx)(c.zx,{role:"link",accessibilityLabel:w._('Explore', 'navFooter.flyout.button', 'Button on flyout to upsell home icon'),color:"white",href:x,onClick:({event:e})=>u(e),text:w._('Explore', 'navFooter.flyout.button', 'Button on flyout to upsell home icon')})}):null]})})]}),v&&(0,d.jsx)(c.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{WebkitUserSelect:"none"}},children:(0,d.jsx)(c.xv,{align:"center",color:r,size:"100",lineClamp:1,children:y})})]})})})})),g=({accessibilityLabel:e,homeFlyoutText:t,isAuthenticated:i,onTouch:o,showHomeBadge:r,shouldUpsellHomePage:a,showHomeFlyoutWithButton:s,selectedItem:l,showLabel:u,title:p})=>{const h={badge:{width:8,height:8},badgeMargins:{marginLeft:6,marginTop:1}},m=(0,n.useRef)(null);return(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(_,{accessibilityLabel:e,badge:r?h.badge:void 0,badgeMargins:r?h.badgeMargins:void 0,color:"home"===l?"default":"subtle",flyoutText:t,onTouch:()=>{o()},showFlyout:s,showFlyoutButton:s,showLabel:u,svgPath:"M12 0L1 10v14h8v-7a3 3 0 116 0v7h8V10z",title:p,to:i?"/":"/ideas/",ref:m}),a&&(0,d.jsx)(c.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{pointerEvents:"none"}},children:(0,d.jsx)(c.o3,{size:90})})]})};var v=i(121093),f=i(461355),y=i(332611),x=i(378518),b=i(780280);const w=[501227],P={badge:{width:8,height:8,text:" "},badgeMargins:{marginLeft:6,marginTop:1}},S=(0,n.memo)((({avatarSrc:e,completeExperience:t,experience:i,isActive:o,locationPath:r,onTouch:a,showLabel:s,username:c})=>{const u=(0,l.ZP)(),{isAuthenticated:p}=(0,b.B)(),h=r.startsWith(`/${c}`),m=i&&w.includes(i.experience_id);(0,n.useEffect)((()=>{if(m&&h){const{experience_id:e,placement_id:n}=i||{};t(n,e)}}));const g=t=>(0,d.jsx)(_,{accessibilityLabel:u._('My profile', 'Nav bar icon', 'Nav bar icon'),avatarSrc:e,color:o?"default":"subtle",icon:"person",onTouch:a,showLabel:s,title:u._('Saved', 'Saved button on the Nav bar', 'Saved button on the Nav bar'),to:c?`/${c}/`:p?"/":"/unauth-profile/",...t});return m&&!h?(0,d.jsx)(v.Z,{eligibleIds:w,experience:i,children:g(P)}):g({})})),T=(0,o.connect)(null,(e=>({completeExperience:(t,i)=>e((0,y.CK)(t,i))})))((e=>{const t=(0,x._)({id:1000181});return(0,d.jsx)(f.Z,{children:(0,d.jsx)(S,{experience:t,...e})})})),I=({accessibilityLabel:e,onTouch:t,selectedItem:i,showLabel:o,title:r})=>{const a=(0,n.useRef)(null);return(0,d.jsx)(n.Fragment,{children:(0,d.jsx)(_,{accessibilityLabel:e,color:"videos"===i?"default":"subtle",onTouch:()=>{t()},showLabel:o,svgPath:"M10.53 15.85A1 1 0 019 15V9a1 1 0 011.53-.85l4.98 3a1 1 0 010 1.7zM0 8a8 8 0 018-8h8a8 8 0 018 8v8a8 8 0 01-8 8H8a8 8 0 01-8-8zm4 0v8a4 4 0 004 4h8a4 4 0 004-4V8a4 4 0 00-4-4H8a4 4 0 00-4 4z",title:r,to:"/videos/",ref:a})})};var k=i(379764),E=i(6637);function A(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class C extends n.PureComponent{constructor(...e){super(...e),A(this,"state",{newsBadgeCount:0,unreadMessageCount:0,showBadge:!1}),A(this,"clearNotificationBadge",(()=>{const{isAuthenticated:e,onTouch:t}=this.props;e&&(E.Z.create("NewsHubBadgeResource",{}).callDelete({showError:!1}),this.setState({newsBadgeCount:0,showBadge:!1})),t&&t()})),A(this,"getBadging",(()=>{E.Z.create("NewsHubBadgeResource",{}).callGet().then((({resource_response:{data:e}})=>{const t=e.news_hub_count+e.conversations_unseen_count;this.setState({newsBadgeCount:e.news_hub_count,unreadMessageCount:e.conversations_unseen_count,showBadge:t>0})}))}))}componentDidMount(){this.props.isAuthenticated&&this.getBadging()}render(){const{isActive:e,showLabel:t,icon:i="speech-ellipsis",onTouch:n}=this.props,{newsBadgeCount:o,unreadMessageCount:r,showBadge:a}=this.state,s=o+r,l=s>0&&s<100?s:"99+",c=l.toString().length,u={width:1===c?16:2===c?24:30,height:16,text:l},p=r>0?"/inbox/":"/notifications/";return(0,d.jsx)(_,{accessibilityLabel:this.props.i18n._('News notifications and messages', 'mweb.navbar.notifs_button.a11y', 'accessibility label for notifs icon button'),badge:a&&u||void 0,badgeMargins:{marginLeft:4},icon:i,to:p,color:e?"default":"subtle",onTouch:"/notifications/"===p?this.clearNotificationBadge:n,title:this.props.i18n._('Notifications', 'Notifications button on the Nav bar', 'Notifications button on the Nav bar'),showLabel:t})}}function j(e){const t=(0,l.ZP)(),{isAuthenticated:i}=(0,b.B)();return(0,d.jsx)(C,{...e,i18n:t,isAuthenticated:i})}var R=i(629337),D=i(385740),O=i(276775);class L extends n.PureComponent{constructor(...e){var t,i,n;super(...e),n=null,(i="leftHomeTimeOut")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}componentDidUpdate(e){const{location:t}=this.props;this.shouldRefreshHomefeed(t.pathname)?this.refreshHomefeed():this.shouldSetLeftHomeTimeout(t.pathname,e)?this.setLeftHomeTimeout():this.shouldClearLeftHomeTimeout(t.pathname)&&this.clearLeftHomeTimeout()}componentWillUnmount(){this.clearLeftHomeTimeout()}setLeftHomeTimeout(){this.leftHomeTimeOut=setTimeout((()=>{this.leftHomeTimeOut&&(this.clearLeftHomeTimeout(),this.leftHomeTimeOut=void 0)}),5e3)}clearLeftHomeTimeout(){this.leftHomeTimeOut&&(clearTimeout(this.leftHomeTimeOut),this.leftHomeTimeOut=null)}refreshHomefeed(){(0,R.cV)("homefeed"),this.leftHomeTimeOut=null}shouldClearLeftHomeTimeout(e){return this.leftHomeTimeOut&&"/"===e}shouldRefreshHomefeed(e){return"/"===e&&92===this.props.viewParameter&&void 0===this.leftHomeTimeOut}shouldSetLeftHomeTimeout(e,t){return null===this.leftHomeTimeOut&&"/"!==e&&"/"===t.location.pathname&&!e.startsWith("/pin/")}render(){return null}}function M(e){const t=(0,O.useLocation)(),{viewParameter:i,viewData:n}=(0,D.SU)();return(0,d.jsx)(L,{...e,location:t,viewParameter:i,viewData:n})}var N=i(941646),z=i(313047),F=i(995081),Z=i(29857),B=i(867820),U=i(773285),H=i(50286),V=i(118405),W=i(112690),$=i(52022),G=i(999594),K=i(534427);function q(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Y=52,X=160,J=60,Q={},ee=e=>{const t=e>100?e-100:5,i=Math.max(e-t,0);window.scrollTo(0,i),i>0&&window.requestAnimationFrame((()=>ee(i)))},te=e=>"/"===e||r(e)||e.startsWith("/search/")||"/inbox/"===e||"/inbox/compose/"===e||"/notifications/"===e||e.includes("/report/"),ie=e=>{switch(e){case"home":return 146;case"notifications":return 139;case"profile":return 40;case"today":return 11674;case"videos":return 11924;case"search":return 43;default:return}},ne=(e,t,i)=>{const n=Q[e.key];if(n)return n;const o=e.pathname;return"/"===o||!i&&"/ideas/"===o?"home":o.startsWith("/inbox")?"inbox":o.startsWith("/notifications")?"notifications":o.startsWith("/videos")?"videos":o.startsWith("/today")?"today":o.startsWith("/search")?"search":(0,O.matchPath)(o,{path:`/${t}/(|pins|boards|tried)?`,exact:!0})||!i&&o.startsWith("/unauth-profile")?"profile":null};class oe extends n.PureComponent{constructor(...e){super(...e),q(this,"state",{bottom:0,hasScrolled:!1,isNavFooterHidden:!1,prevLocation:this.props.location,selectedItem:ne(this.props.location,this.props.username,this.props.isAuthenticated),showUnauthNavExplorePrompt:!1}),q(this,"handleScrollForIphoneX",(()=>{window.innerHeight!==this.currInnerHeight&&(this.currInnerHeight=window.innerHeight,this.forceUpdate())})),q(this,"selectItem",(e=>{const{logContextEvent:t,viewData:i,viewParameter:n,viewType:o}=this.props;this.setState({selectedItem:e}),t({component:8,element:ie(e),event_type:102,view_data:i,view_type:o,view_parameter:n})})),q(this,"handleHomeTouch",(()=>{const{activeHomefeedTabIndex:e,isAuthenticated:t,location:i,setHomeFlyoutText:n,setHomefeedAsActiveHomefeedTab:o,setShowHomeBadge:r,setShowHomeFlyoutWithButton:a,trackInteraction:s}=this.props;this.selectItem("home"),(0,K.E)(!1),n(),r(!1),a(!1),s({action:"click",item:"nav-bar-home"}),t?(0,B.My)("mweb.auth.bottom-nav.home-tap"):(0,B.My)("mweb.unauth.bottom-nav.home-tap"),G.C.has(i.pathname)&&e!==G.e&&0===window.scrollY?o():0===window.scrollY&&"/"===i.pathname?(0,R.cV)("homefeed"):"/"===window.location.pathname&&window.scrollY>0&&ee(window.scrollY)})),q(this,"handleVideoIconTouch",(()=>{const{trackInteraction:e}=this.props;this.selectItem("videos"),e({action:"click",item:"nav-bar-videos"}),(0,B.My)("mweb.unauth.bottom-nav.videos-icon-tap")})),q(this,"handleInboxTouch",(()=>this.selectItem("inbox"))),q(this,"handleProfileTouch",(()=>{const{isAuthenticated:e,trackInteraction:t}=this.props;this.selectItem("profile"),t({action:"click",item:"nav-bar-profile"}),e?(0,B.My)("mweb.auth.bottom-nav.profile-tap"):(0,B.My)("mweb.unauth.bottom-nav.profile-tap")})),q(this,"handleSearchTouch",(()=>{const{isAuthenticated:e,trackInteraction:t}=this.props;this.selectItem("search"),t({action:"click",item:"nav-bar-search"}),e?(0,B.My)("mweb.auth.bottom-nav.search-tap"):(0,B.My)("mweb.unauth.bottom-nav.search-tap")})),q(this,"handleNavFooterScroll",(e=>{const{experience:t,dismissExperience:i,setIsNavFooterHiddenAfterScroll:n}=this.props,{hasScrolled:o}=this.state;t&&502511===t.experience_id&&i&&!o&&i(1000151,502511),this.setState({isNavFooterHidden:e,hasScrolled:!0}),n(e)})),q(this,"currInnerHeight",0)}componentDidMount(){const{devicePlatform:e}=this.props;this.currInnerHeight=window.innerHeight,(0,F.Rq)(e)&&window.addEventListener("scroll",this.handleScrollForIphoneX)}static getDerivedStateFromProps(e,t){return e.location===t.prevLocation?null:{...t,prevLocation:e.location,selectedItem:ne(e.location,e.username,e.isAuthenticated)}}componentDidUpdate({location:e},{selectedItem:t}){const{location:i,history:{action:n}}=this.props,{selectedItem:o}=this.state;e!==i&&("REPLACE"===n||"PUSH"===n&&t!==o)&&(Q[e.key]=t,Q[i.key]=o)}componentWillUnmount(){const{devicePlatform:e,location:t}=this.props;Q[t.key]=this.state.selectedItem,(0,F.Rq)(e)&&window.removeEventListener("scroll",this.handleScrollForIphoneX)}render(){var e;const{forceShowNavFooter:t,isAuthenticated:i,isTablet:o,showDockedNavBar:r,dockNavBarForAuthTablet:s,inUnauthVideosNavExp:l,homeFlyoutText:p,location:h,shouldUpsellHomePage:m,showHomeBadge:v,showHomeFlyoutWithButton:y,username:x,viewingUser:b,viewType:w}=this.props,{isNavFooterHidden:P,selectedItem:S}=this.state,E=(0,a.Z)(null==b?void 0:b.created_at),A=i&&E,C=((e,t,i,n)=>t||n&&!i?n?"100%":e?320:264:200)(A,i,o,r);return(0,d.jsxs)(z.FixedFooter,{forceShow:t,height:J,location:h,showDockedNavBar:r,dockNavBarForAuthTablet:s,isTablet:o,isModal:(R=h.pathname,R.includes("/report/")),footerWidth:C,noPadding:!0,hideOnScroll:!r&&!s&&(!i||i&&te(h.pathname)),onScroll:this.handleNavFooterScroll,footerInLego:!0,zIndex:k.Z,children:[(0,d.jsx)(M,{}),(0,d.jsxs)(c.xu,{alignItems:"center",display:"flex",justifyContent:"around",marginEnd:"auto",marginStart:"auto",maxWidth:C,paddingX:2,width:C,children:[(0,d.jsx)(c.xu,{alignItems:"center",display:"flex",justifyContent:"center",position:"relative",flex:"grow","data-test-id":"nav-bar-home",children:(0,d.jsx)(g,{accessibilityLabel:this.props.i18n._('Home', 'Nav bar icon', 'Nav bar icon'),homeFlyoutText:p,isAuthenticated:i,onTouch:this.handleHomeTouch,selectedItem:S,shouldUpsellHomePage:m&&!P,showHomeBadge:v,showHomeFlyoutWithButton:y,showLabel:A,title:this.props.i18n._('Home', 'Home button on the Nav bar', 'Home button on the Nav bar')})}),!i&&(0,d.jsx)(c.xu,{flex:"grow","data-test-id":"nav-bar-search",children:(0,d.jsx)(N.Z,{id:"nav-bar-search",children:(0,d.jsx)(_,{accessibilityLabel:this.props.i18n._('Search', 'bottomNavBar.searchButton', 'Search button on the nav bar'),color:"search"===S?"default":"subtle",icon:"search",onTouch:this.handleSearchTouch,showLabel:A,title:this.props.i18n._('Search', 'bottomNavBar.searchButton', 'Search button on the nav bar'),to:"/search/"})})}),i&&(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(_,{icon:"search",to:"/search/",color:"search"===S?"default":"subtle",accessibilityLabel:this.props.i18n._('Search', 'Nav bar icon', 'Nav bar icon'),onTouch:this.handleSearchTouch,title:this.props.i18n._('Search', 'Nav bar icon', 'Nav bar icon'),showLabel:A}),(null==b?void 0:b.is_partner)&&(0,d.jsx)(u,{showLabel:A,viewType:w}),(0,d.jsx)(j,{isActive:"inbox"===S||"notifications"===S,onTouch:this.handleInboxTouch,showLabel:A,icon:"speech-ellipsis"})]}),l&&(0,d.jsx)(c.xu,{alignItems:"center",display:"flex",justifyContent:"center",position:"relative",flex:"grow","data-test-id":"nav-bar-videos",children:(0,d.jsx)(I,{accessibilityLabel:this.props.i18n._('Videos', 'bottomNavBar.VideosButton', 'Videos button on the Nav bar'),onTouch:this.handleVideoIconTouch,selectedItem:S,showLabel:A,title:this.props.i18n._('Videos', 'bottomNavBar.VideosButton', 'Videos button on the Nav bar')})}),(0,d.jsx)(f.Z,{children:(0,d.jsx)(c.xu,{flex:"grow","data-test-id":"nav-bar-profile",children:(0,d.jsx)(T,{avatarSrc:!b||null!==(e=b.image_small_url)&&void 0!==e&&e.includes("default")||"string"!=typeof b.image_small_url?"":b.image_small_url,isActive:"profile"===S,locationPath:h.pathname,onTouch:this.handleProfileTouch,showLabel:A,username:x})})})]})]});var R}}const re=(0,o.connect)((function({homefeedTabUI:e,session:t,users:i}){return{activeHomefeedTabIndex:e.activeTabIndex,devicePlatform:t.userAgentPlatform,isAuthenticated:t.isAuthenticated,username:t.isAuthenticated&&i[t.userId]?i[t.userId].username:"",viewingUser:t.isAuthenticated?i[t.userId]:void 0}}),(function(e){return{dismissExperience:(t,i)=>e((0,y.Qu)(t,i)),setHomefeedAsActiveHomefeedTab:()=>e((0,Z.r)(null,G.e))}}))((e=>{const t=(0,K.S)(),i=(0,O.useHistory)(),n=(0,O.useLocation)(),o=(0,l.ZP)(),{forceShowNavFooter:r,homeFlyoutText:a,setHomeFlyoutText:s,setIsNavFooterHiddenAfterScroll:c,setShowHomeBadge:u,setShowHomeFlyoutWithButton:p,showHomeBadge:h,showHomeFlyoutWithButton:m}=(0,V.U)(),_=(0,x._)({id:1000151}),{viewParameter:g,viewType:v,viewData:f}=(0,D.SU)(),y=(0,W.Z)(),b=(0,$.Z)(),{checkExperiment:w}=(0,U.F)(),P=(0,H.Wb)();return w("social_growth_holdout_2022_h2"),w("social_growth_holdout_2023_h1"),(0,d.jsx)(oe,{...e,experience:_,forceShowNavFooter:r,history:i,location:n,logContextEvent:y,homeFlyoutText:a,isTablet:P,setHomeFlyoutText:s,setIsNavFooterHiddenAfterScroll:c,setShowHomeBadge:u,setShowHomeFlyoutWithButton:p,showHomeBadge:h,showHomeFlyoutWithButton:m,shouldUpsellHomePage:t,trackInteraction:b,i18n:o,viewData:f,viewParameter:g,viewType:v})}))},118405:(e,t,i)=>{i.d(t,{U:()=>s,m:()=>l});var n=i(667294),o=i(425288),r=i(785893);const{Provider:a,useHook:s}=(0,o.Z)("NavFooterContext");function l({children:e}){const[t,i]=(0,n.useState)(),[o,s]=(0,n.useState)(!1),[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),[p,h]=(0,n.useState)(!1);return(0,r.jsx)(a,{value:{forceShowNavFooter:p,homeFlyoutText:t,isNavFooterHiddenAfterScroll:o,setForceShowNavFooter:h,setHomeFlyoutText:i,setIsNavFooterHiddenAfterScroll:s,setShowHomeBadge:c,setShowHomeFlyoutWithButton:u,showHomeBadge:l,showHomeFlyoutWithButton:d},children:e})}},379764:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(183007);const o=new(i(883119).H3)([n.N])},872482:(e,t,i)=>{i.d(t,{D:()=>o,a:()=>r});var n=i(425288);const{Provider:o,useMaybeHook:r}=(0,n.Z)("unauthPageWrapperContext")},902462:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Re,pinRepPaddingInBoint:()=>Pe});var n=i(667294),o=i(702664),r=i(319915),a=i(680046),s=i(886076),l=i(248975),c=i(830157),d=i(958007),u=i(954571),p=i(63552),h=i(81226),m=i(116303),_=i(561195),g=i(883119),v=i(785893);function f({maxRating:e,rating:t,text:i}){return(0,v.jsxs)(g.xu,{alignItems:"center",display:"flex",marginBottom:0,children:[(0,v.jsx)(_.Z,{max_rating:e||"",rating:t||"",width:10}),i&&(0,v.jsx)(n.Fragment,{children:(0,v.jsx)(g.xu,{marginStart:1,overflow:"hidden",children:(0,v.jsx)(g.xv,{size:"100",lineClamp:1,children:i})})})]})}var y=i(898781),x=i(62409),b=i(643010);const w=({pinId:e})=>{var t;const i=(0,y.ZP)(),r=(0,o.useSelector)((({pins:e})=>e))[e],a=(0,b.Yc)();if(!r)return null;const s=(0,x.kb)(r);if(!s||!s.price)return null;const l=s.standard_price||s.price,c=s.min_price||"",d=s.max_price||"",u=s.in_stock||!1,p=null===(t=r.rich_summary)||void 0===t?void 0:t.site_name,{textColor:h,inStockColor:m}=(({isDarkMode:e,inStock:t})=>e?{textColor:"light",inStockColor:"light"}:{textColor:"dark",inStockColor:t?"dark":"subtle"})({isDarkMode:a,inStock:u});return(0,v.jsxs)(n.Fragment,{children:[p&&(0,v.jsx)(g.xv,{color:h,size:"100",children:p}),(0,v.jsxs)(g.xu,{display:"flex",alignItems:"center","data-test-id":"priceLego_price",children:[c&&d?(0,v.jsxs)(g.xv,{size:"100",color:m,weight:"bold",children:[c," - ",d]}):(0,v.jsx)(g.xv,{size:"100",color:m,weight:"bold",children:l}),!u&&(0,v.jsxs)(n.Fragment,{children:[(0,v.jsx)(g.xu,{paddingX:1,children:(0,v.jsx)(g.xv,{size:"100",color:m,weight:"bold",children:"·"})}),(0,v.jsx)(g.xv,{size:"100",color:m,weight:"bold",children:i._('Out of stock', 'pinCard.priceLego.outOfStock', 'display if a product is out of stock')})]})]})]})};var P=i(947599),S=i(914142),T=i(941646),I=i(50286),k=i(865673),E=i(52022),A=i(350948),C=i(923297),j=i(867820),R=i(773285),D=i(130460),O=i(276775),L=i(53987);const M=(0,n.lazy)((()=>i.e(94950).then(i.bind(i,494950)))),N=({title:e})=>{const t=(0,I.ZP)(),i=(0,E.Z)();return(0,v.jsx)(T.Z,{id:"related-pins-title",children:(0,v.jsx)(g.iP,{onTap:()=>{i({action:"click",item:"related-pins-title"})},children:(0,v.jsx)(g.xv,{size:"desktop"===t?"300":"100",weight:"bold",children:e})})})},z=({allowPriceIndicator:e,contextMenu:t,credits:i,hidePinMetadata:a,hasAffiliatedProducts:s,isPromotedPin:l,isSponsoredPin:c,isSquarePin:d,marginTop:u,marginStart:h,marginEnd:_,onCreditsClick:x,pinDescription:b,pinId:z,pinnedToBoardId:F,pinReactionCounts:Z,recipeCookTime:B,recipeMaxRating:U,recipeRating:H,recipeReviewCount:V,shouldShowReactions:W,style:$="default",title:G,type:K,duploConversationPin:q})=>{var Y,X,J,Q,ee,te,ie,ne,oe;const re=(0,y.ZP)(),{checkExperiment:ae}=(0,R.F)(),se=(0,O.useLocation)(),le=(0,E.Z)(),ce=(0,o.useSelector)((({session:e})=>e.isAuthenticated)),de=(0,I.ZP)(),ue=G||b||"oneTap"===K,pe=(0,o.useSelector)((({pins:e})=>e[z])),he=(0,D.gC)()(F||pe&&String(null===(Y=pe.board)||void 0===Y?void 0:Y.id)),me=pe.pinner,_e=l&&(null===(X=pe.promoter)||void 0===X?void 0:X.id)===(null===(J=pe.native_creator)||void 0===J?void 0:J.id),ge=pe.sponsorship?(0,v.jsx)(g.xv,{inline:!0,size:"100",weight:"bold",children:null==i?void 0:i.subtitle}):void 0,ve="overlay"===$,fe=W&&Z&&Object.keys(Z).length>0&&(0,v.jsx)(g.xu,{height:18,display:ve?"flex":void 0,justifyContent:"center",children:(0,v.jsx)(r.Z,{name:"SafeSuspense_PinCardDetails_GridAggregation",children:(0,v.jsx)(P.Z,{children:(0,v.jsx)(M,{pinReactionCounts:Z})})})}),ye=a?0:u||1,xe=(0,v.jsx)(m.Z,{accessibilityLabel:(null==i?void 0:i.title)||"string"==typeof(null==i?void 0:i.subtitle)&&i.subtitle||re._('Creator\'s avatar', 'pinCardDetails.tapArea.avatar', 'The avatar of the creator of this pin.'),name:(null==i?void 0:i.title)||"",outline:ve,size:ve?"lg":"sm",src:ve&&(null==i?void 0:i.largeAvatar)||(null==i?void 0:i.mediumAvatar)||(null==i?void 0:i.avatar)||void 0}),be=(0,v.jsxs)(n.Fragment,{children:[(null==i?void 0:i.title)&&(0,v.jsx)(g.xv,{lineClamp:1,size:"100",weight:c&&!_e||s?"normal":"bold",children:i.title===(null==me?void 0:me.full_name)&&(null!=me&&me.is_verified_merchant||null!=me&&null!==(Q=me.verified_identity)&&void 0!==Q&&Q.verified)?(0,v.jsx)(k.Z,{badgeSize:"sm",badgeSpacing:2,fullName:i.title,verifiedType:me.is_verified_merchant?"verifiedMerchant":"verifiedIdentity"}):i.title}),null!=i&&i.subtitle?(!c&&!a||_e)&&(0,v.jsx)(g.xv,{lineClamp:c||s?void 0:1,size:"desktop"===de?"200":"100",weight:"desktop"===de?"bold":"normal",children:i.subtitle}):!ce&&he&&"protected"!==he.privacy?(0,v.jsx)(T.Z,{id:"related-pin-text-below-name",children:(0,v.jsx)(g.rU,{underline:"hover",href:null!==(ee=he.url)&&void 0!==ee?ee:"",onClick:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),e.stopPropagation(),(0,j.NC)("click_board_pin_attribution_profile"),le({action:"click",item:"related-pin-text-below-name"})},children:(0,v.jsx)(g.xv,{size:"200",children:he.name})})}):null]});return(0,v.jsx)(n.Fragment,{children:(0,v.jsxs)(g.xu,{display:"flex",height:d?e?104:72:void 0,marginEnd:_||1,marginStart:h||1,position:"relative",children:[(0,v.jsxs)(g.xu,{flex:"grow",children:[(0,v.jsx)(g.xu,{display:"flex",marginTop:ye,children:(0,v.jsx)(g.xu,{flex:"grow",children:(0,v.jsxs)(n.Fragment,{children:[(0,v.jsxs)(n.Fragment,{children:[(c||s)&&!_e&&(0,v.jsx)(g.xu,{marginBottom:1,children:(0,v.jsx)(g.xu,{flex:"grow",overflow:"hidden",children:(0,v.jsx)(S.Z,{hasAffiliatedProducts:s,isPromoted:l,sponsorName:ge,sponsorshipStatus:null===(te=pe.sponsorship)||void 0===te?void 0:te.status})})}),G&&(0,v.jsx)(g.xu,{marginTop:1,overflow:"hidden",dangerouslySetInlineStyle:{__style:{display:"-webkit-box",textOverflow:"ellipsis",WebkitBoxOrient:"vertical",WebkitLineClamp:"2"}},children:ce&&!a&&(0,v.jsx)(N,{title:G})}),"desktop"===de&&!ce&&b&&!(0,L.$Y)(se)&&!(0,L.E0)(se)&&(0,v.jsx)(g.xu,{marginTop:1,overflow:"hidden",dangerouslySetInlineStyle:{__style:{display:"-webkit-box",textOverflow:"ellipsis",WebkitBoxOrient:"vertical",WebkitLineClamp:"2"}},"data-test-id":"desc",children:(0,v.jsx)(g.iP,{onTap:()=>{le({action:"click",item:"related-pins-description"})},children:(0,v.jsx)(g.xv,{size:"100",inline:!0,children:b})})})]}),e&&(0,v.jsx)(w,{credits:i,pinId:z}),"recipe"===K&&!!V&&(0,v.jsx)(n.Fragment,{children:(0,v.jsxs)(g.xu,{alignItems:"center",display:"flex",marginTop:1,children:[!!V&&(0,v.jsx)(f,{maxRating:U||"",rating:H||"",text:""}),!!B&&(0,v.jsxs)(n.Fragment,{children:[(0,v.jsx)(g.xu,{paddingX:1,children:(0,v.jsx)(g.xv,{size:"100",children:"·"})}),(0,v.jsx)(g.xv,{size:"100",children:(0,A.IS)({...(0,C.u)(B),i18n:re})})]})]})})]})})}),!ve&&fe,i&&(0,v.jsx)(p.Z,{onTouch:e=>x&&x(e),pressState:"none",children:(0,v.jsx)(g.xu,{children:(!a||c||_e)&&(0,v.jsxs)(g.xu,{display:"flex",marginTop:ve?-9:u||(ue&&!a?1:0),marginBottom:a?2:0,position:"relative",direction:ve?"column":"row",children:[(0,v.jsx)(g.xu,{flex:"none",display:ve?"flex":void 0,justifyContent:"center","data-test-id":"related-pins-avatar-image",children:ae(ce?"mweb_auth_feed_a11y_fix":"mweb_unauth_feed_a11y_fix").anyEnabled?xe:(0,v.jsx)(g.iP,{onTap:()=>{le({action:"click",item:"related-pins-avatar-image"})},children:xe})}),(0,v.jsx)(g.xu,{direction:"column",display:"flex",flex:"grow",justifyContent:"center",alignItems:ve?"center":void 0,marginStart:1,"data-test-id":"related-pins-name",children:ae(ce?"mweb_auth_feed_a11y_fix":"mweb_unauth_feed_a11y_fix").anyEnabled?be:(0,v.jsx)(g.iP,{onTap:()=>{le({action:"click",item:"related-pins-name"})},children:be})})]})})}),!i&&"desktop"===de&&!!me&&((0,L.L6)(se)||(0,L.cD)(se)||(0,L.$Y)(se))&&(0,v.jsxs)(g.xu,{display:"flex",marginTop:ue?2:0,children:[(0,v.jsx)(g.xu,{flex:"none","data-test-id":"related-pins-avatar-image",children:(0,v.jsx)(g.iP,{onTap:()=>{le({action:"click",item:"related-pins-avatar-image"})},children:(0,v.jsx)(m.Z,{name:me.username||"",size:"sm",src:null!==(ie=me.image_small_url)&&void 0!==ie?ie:void 0})})}),(0,v.jsxs)(g.xu,{direction:"column",display:"flex",flex:"grow",justifyContent:"center",marginStart:1,"data-test-id":"related-pins-name",children:[(0,v.jsx)(g.rU,{underline:"hover",href:`/${me.username}/`,onClick:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),e.stopPropagation(),(0,j.NC)("click_board_pin_attribution_board"),le({action:"click",item:"related-pins-name"})},children:(0,v.jsx)(g.xv,{size:"200",weight:"bold",children:me.full_name||me.username})}),he&&"protected"!==he.privacy?(0,v.jsx)(T.Z,{id:"related-pin-text-below-name",children:(0,v.jsx)(g.rU,{underline:"hover",href:null!==(ne=he.url)&&void 0!==ne?ne:"",onClick:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),e.stopPropagation(),(0,j.NC)("click_board_pin_attribution_profile"),le({action:"click",item:"related-pin-text-below-name"})},children:(0,v.jsx)(g.xv,{size:"200",children:null!==(oe=he.name)&&void 0!==oe?oe:""})})}):null]})]}),ve&&fe]}),(0,v.jsx)(g.xu,{position:ve?"absolute":void 0,right:!0,children:!q&&t})]})})};var F,Z=i(857079),B=i(349700),U=i(296011),H=i(167912);const V=void 0!==F?F:F=i(7745),W=(e,t)=>{const{checkExperiment:i}=(0,R.F)();return i("graphql_migration_sharelink_sgrowth_web").anyEnabled?((e,t)=>{const i=(0,H.useRelayEnvironment)();return(0,v.jsx)(U.t,{invite_code:e,relayEnvironment:i,inviteQuery:V,children:e=>{const i=null!=e&&e.data?e.data.sender:null,n=i&&i.first_name?i.first_name.substring(0,30):"";if(!n)return null;const o=i&&!i.is_default_image?i.image_medium_url:"",r=(0,B.nk)(t._('{{ name }} shared this idea with you', 'homefeed.pinSenderAvatar.heading', 'header notifying users that a sender ({{ name }}) shared a Pin to them'),{name:n});return(0,v.jsxs)(g.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[(0,v.jsx)(g.zd,{height:32,width:32,children:(0,v.jsx)(m.Z,{name:n,src:o})}),(0,v.jsx)(g.xu,{width:"80%",paddingY:2,children:(0,v.jsx)(g.xv,{align:"center",size:"200",weight:"bold",children:r})})]})}})})(e,t):((e,t)=>(0,v.jsx)(U.Z,{invite_code:e,children:e=>{const i=e?e.sender:null,n=i&&i.first_name?i.first_name.substring(0,30):"";if(!n)return null;const o=i&&!i.is_default_image?i.image_medium_url:"",r=(0,B.nk)(t._('{{ name }} shared this idea with you', 'homefeed.pinSenderAvatar.heading', 'header notifying users that a sender ({{ name }}) shared a Pin to them'),{name:n});return(0,v.jsxs)(g.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[(0,v.jsx)(g.zd,{height:32,width:32,children:(0,v.jsx)(m.Z,{name:n,src:o})}),(0,v.jsx)(g.xu,{width:"80%",paddingY:2,children:(0,v.jsx)(g.xv,{align:"center",size:"200",weight:"bold",children:r})})]})}}))(e,t)},$=({inviteCode:e})=>{const t=(0,y.ZP)();return(0,v.jsx)(g.xu,{minHeight:82,children:(0,v.jsx)(r.Z,{name:"SafeSuspense_PinCardSharedHeader_LoadingSpinner",children:(0,v.jsx)(P.Z,{fallback:(0,v.jsx)(Z.Z,{accessibilityLabel:t._('Loading Invitation component', 'Loading InviteFetch component', 'loading InviteFetch component')}),children:W(e,t)})})})};var G=i(948945),K=i(55275);const q={initial:{opacity:0,transition:"opacity 0.25s ease-in"},fadeIn:{opacity:.8,transition:"opacity 1s ease"}},Y=(e,t,i)=>(0,v.jsx)(g.xv,{color:"inverse",inline:!0,size:"200",weight:"bold",children:(0,v.jsx)(g.rU,{display:"inlineBlock",href:t,tapStyle:"none",underline:"hover",children:i})},e);function X({color:e,getFeedbackText:t,onUnfollow:i,showing:o,unfollowed:r}){const a=(0,y.ZP)(),[s,l]=(0,n.useState)(o?"fadeIn":"initial"),c=(0,n.useRef)(null);(0,n.useEffect)((()=>("initial"===s&&o&&(c.current=window.requestAnimationFrame((()=>l("fadeIn")))),()=>{c.current&&window.cancelAnimationFrame(c.current)})),[s,l,o]);const{subTitle:d,title:u,unfollow:p}=t(Y);let h=u,m=d;p&&r&&(h=p.title,m=p.subTitle);const _=()=>p?(0,K.t)(p.action,p.actionOptions,i):void 0;return o&&(0,v.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:e,...q[s]}},margin:1,rounding:4,position:"absolute",top:!0,bottom:!0,left:!0,right:!0,children:(0,v.jsxs)(g.xu,{width:"100%",height:"100%",color:"dark",rounding:4,overflow:"auto",children:[(0,v.jsxs)(g.xu,{padding:3,rounding:2,display:"flex",direction:"column",height:"100%",justifyContent:"between",children:[(0,v.jsxs)(g.xu,{children:[(0,v.jsx)(g.X6,{size:"400",color:"light",children:h}),m&&(0,v.jsxs)(g.xu,{marginTop:1,children:[(0,v.jsx)(g.xv,{color:"light",size:"200",inline:!0,children:m}),(0,v.jsx)(g.xv,{color:"light",inline:!0,size:"200",weight:"bold",children:(0,v.jsx)(g.rU,{href:"/edit",display:"inlineBlock",rounding:2,tapStyle:"none",underline:"hover",children:a._('Tune your home feed', 'Text on the button to navigate to homefeed control', 'Text on the button to navigate to homefeed control')})})]})]}),!r&&p&&(0,v.jsx)(g.xu,{paddingY:1,children:(0,v.jsx)(g.zx,{fullWidth:!0,color:"white",text:a._('Unfollow', 'Text on the button to unfollow a specific board / user', 'Text on the button to unfollow a specific board / user'),onClick:_})})]}),!r&&p&&(0,v.jsx)(g.xu,{paddingY:1,children:(0,v.jsx)(g.zx,{fullWidth:!0,color:"white",text:a._('Unfollow', 'Text on the button to unfollow a specific board / user', 'Text on the button to unfollow a specific board / user'),onClick:_})})]})})}var J=i(21384),Q=i(992750);function ee({description:e,gridTitle:t,pinId:i,placeSummaryName:n,richMetadataTitle:o,richSummaryDisplayName:r,storyPinDataId:a,storyPinDataMetadataPinTitle:s,title:l}){return(0,v.jsxs)(g.xu,{paddingX:2,marginBottom:-1,display:"flex",children:[(0,v.jsx)(g.xu,{flex:"grow",maxHeight:32,minHeight:12,overflow:"hidden",width:142,children:(0,v.jsx)(g.xv,{lineClamp:2,size:"100",weight:"bold",children:(0,Q.fs)({pinTitle:l,gridTitle:t,richSummaryDisplayName:r,richMetadataTitle:o,storyPinDataId:a,storyPinDataMetadataPinTitle:s,placeSummaryName:n})||e})}),(0,v.jsx)(g.xu,{children:(0,v.jsx)(J.Z,{pinId:i,size:"sm",graphqlRef:null})})]})}var te=i(807592),ie=i(57791);const ne=({attribute:e,deviceType:t,location:i})=>{const n=(0,E.S)(i);(0,j.My)("unuath.product_attribution.click",{item:e,page:n,device:t})};function oe({description:e,domain:t,gridTitle:i,pinId:n,pinProduct:o,placeSummaryName:r,richMetadataTitle:a,richSummaryDisplayName:s,storyPinDataId:l,storyPinDataMetadataPinTitle:c,title:d}){const u=(0,I.ZP)(),p=(0,O.useLocation)();if(!n)return null;const h=o&&(o.price||o.standard_price||(0,te.Z)(o)),m=(0,Q.fs)({pinTitle:d,gridTitle:i,richSummaryDisplayName:s,richMetadataTitle:a,storyPinDataId:l,storyPinDataMetadataPinTitle:c,placeSummaryName:r})||e,_=`/pin/${n}/`;return(0,v.jsx)(g.xu,{paddingX:2,marginBottom:-1,marginTop:1,display:"flex",direction:"column",children:(0,v.jsxs)(g.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",children:[(0,v.jsx)(g.xu,{flex:"grow",minHeight:12,overflow:"hidden",width:142,children:(0,v.jsxs)(ie.MZ,{to:_,accessibilityLabel:m,deeplinkUri:_,children:[h&&(0,v.jsx)(g.iP,{onTap:()=>ne({deviceType:u,attribute:"price",location:p}),children:(0,v.jsx)(g.xv,{size:"100",weight:"bold",children:h})}),(0,v.jsx)(g.xu,{marginTop:1,children:(0,v.jsx)(g.iP,{onTap:()=>ne({deviceType:u,attribute:"title",location:p}),children:(0,v.jsx)(g.xv,{size:"100",weight:"bold",lineClamp:h?3:2,children:m})})}),t&&h&&(0,v.jsx)(g.xu,{marginTop:1,children:(0,v.jsx)(g.iP,{onTap:()=>ne({deviceType:u,attribute:"merchant",location:p}),children:(0,v.jsx)(g.xv,{size:"100",lineClamp:1,children:t})})})]})}),(0,v.jsx)(g.xu,{children:(0,v.jsx)(J.Z,{pinId:n,size:"sm",graphqlRef:null})})]})})}var re=i(248299),ae=i(394332),se=i(529195);const le=[],ce=e=>(t,i)=>{const{pinId:n}=e,o=i().pins[n];o&&!o.impressed&&(le.push(e),(e=>{e({type:"PIN_IMPRESSIONS",payload:le.slice()}),le.length=0})(t))};var de=i(477802),ue=i(255607),pe=i(874317),he=i(861411),me=i(639952),_e=i(772486),ge=i(447948),ve=i(378518),fe=i(813401),ye=i(112690),xe=i(305324),be=i(780679);function we(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Pe=({isDesktop:e})=>e?0:1,Se=e=>Boolean(e.is_eligible_for_web_closeup),Te=e=>Boolean(e.promoter&&!e.is_downstream_promotion),Ie={width:1,height:1,url:""},ke=e=>{const{attribution:t,embed:i,is_eligible_for_web_closeup:n,rich_summary:o,videos:r,story_pin_data_id:a}=e,s=i||t&&t.embed;return n?"oneTap":r||s&&"video"===s.type?"video":s&&"gif"===s.type?"gif":o&&"product"===o.type_name?"product":o&&"recipe"===o.type_name?"recipe":a?"storyPin":"image"},Ee=e=>{if(("video"===ke(e)||Te)&&e.videos&&e.videos.video_list){const{duration:t=0}=e.videos.video_list[Object.keys(e.videos.video_list)[0]]||{};return(0,h.Z)(t)}return""},Ae=e=>{var t;if("product"!==ke(e))return null;const[i]=(null===(t=e.rich_summary)||void 0===t?void 0:t.products)||[];if(!i)return null;const n=i.offer_summary;return n&&(n.price||n.max_price)},Ce=(0,n.lazy)((()=>i.e(15825).then(i.bind(i,15825))));class je extends n.Component{constructor(...e){super(...e),we(this,"state",{startImpressionTimer:!1,openContextMenuByLongPress:!1,isShowingCustomContextMenu:!1}),we(this,"getPinImage",(()=>{const{pin:e,duploIsSquarePin:t}=this.props;if(!e||!e.images)return Ie;var i;if(t)return{height:136,url:null===(i=e.images["236x"])||void 0===i?void 0:i.url,width:136};const n=["236x","170x","136x136","736x","474x","orig"];for(const o of n)if(e.images[o]&&e.images[o].url)return e.images[o];return Ie})),we(this,"getImpressionData",(()=>{var e,t;const{pin:i}=this.props,n=null===(e=i.videos)||void 0===e||null===(t=e.video_list)||void 0===t?void 0:t.V_720P,o=n?{isNativeVideoAndWatchable:!!(n&&n.url&&n.height&&n.width)||void 0,videoIdStr:n&&i.videos?i.videos.id:void 0}:{},r=this.getPinImage();return{richTypes:i.shopping_flags||[],imageURL:r.url||"",...o,...this.props.impressionData}})),we(this,"getAuxData",(()=>{const{auxData:e={},pin:t,pwaType:i}=this.props;return{commerce_data:(0,s.Z)({isEligibleForPdp:t.is_eligible_for_pdp,isOosProduct:t.is_oos_product,isStaleProduct:t.is_stale_product,pinShoppingFlags:t.shopping_flags}),pwa_type:i,...e}})),we(this,"getFeedbackType",(()=>{const{board:e,feedback:t,viewParameter:i,pin:n}=this.props;return this.feedbackHelpers.getFeedbackType({board:e,feedback:t,viewParameter:i,pin:n,pinner:n.pinner})})),we(this,"getRecommendationDescription",(e=>{const{board:t,pin:i}=this.props;return this.feedbackHelpers.getRecommendationDescription({ad_match_reason:i.ad_match_reason,board:t,feedbackType:this.getFeedbackType(),makeNavigateLink:e,pinner:i.pinner,promoter:i.promoter,recommendationReason:i.recommendation_reason,sourceInterest:i.source_interest})})),we(this,"getPinHiddenFeedbackText",(e=>{const{board:t,pin:i}=this.props,n=i.promoter,o=this.feedbackHelpers.getUnfollowAction({board:t,feedbackType:this.getFeedbackType(),makeNavigateLink:e,pinner:i.pinner,sourceInterest:i.source_interest});return Te(i)&&null!=n&&n.full_name?{title:"",subTitle:(0,B.nk)(this.props.i18n._('{{ promoter }} has paid to have this pin show up where you\'d be more likely to notice it.', 'pinRep.promotedPinfeedbackText.subtitle', 'message displayed after hiding a promoted pin'),{promoter:n.full_name})}:o?{title:this.props.i18n._('Pin hidden', 'message displayed after hiding a pin', 'message displayed after hiding a pin'),subTitle:this.getRecommendationDescription(e),unfollow:o}:{title:this.props.i18n._('Pin hidden', 'message displayed after hiding a pin', 'message displayed after hiding a pin'),subTitle:this.props.i18n._('Got it! We\'ll try to show you more relevant Pins in the future.', 'message displayed after hiding a pin', 'message displayed after hiding a pin')}})),we(this,"feedbackHelpers",(0,a.ZP)({i18n:this.props.i18n,interpolateNamedTemplate:B.nk})),we(this,"logOneTap",(()=>{const{logContextEvent:e,pin:t,trackingParams:i,viewType:n,viewParameter:o,auxData:r}=this.props,a=(0,c.Z)(i,t.tracking_params),l={view_type:this.props.viewType,view_parameter:this.props.viewParameter,element:t.story_pin_data_id?12372:35,component:this.props.componentType,object_id_str:t.id,aux_data:{commerce_data:(0,s.Z)({isEligibleForPdp:t.is_eligible_for_pdp,isOosProduct:t.is_oos_product,isStaleProduct:t.is_stale_product,pinShoppingFlags:t.shopping_flags}),grid_index:this.props.slotIndex,image_signature:t.image_signature,...this.props.auxData},clientTrackingParams:a};e({event_type:8948,view_type:n,view_parameter:o,object_id_str:t.id,clientTrackingParams:a,aux_data:{image_signature:t.image_signature,closeup_navigation_type:"click",click_type:"clickthrough",cosmic_ray_count:"2",...r}}),(0,_e.jC)(l),e({component:this.props.componentType,event_type:13,view_type:3,clientTrackingParams:a,aux_data:{closeup_navigation_type:"web_closeup",image_signature:t.image_signature},object_id_str:t.id})})),we(this,"markPinAsSeen",(()=>this.props.markPinAsSeen(this.props.pinId))),we(this,"handleLoad",(()=>{this.setState({startImpressionTimer:!0})})),we(this,"handleError",(()=>{this.setState({startImpressionTimer:!1})})),we(this,"handleClick",(e=>{const{auxData:t,componentType:i,deviceType:n,logContextEvent:o,pin:r,slotIndex:a,trackingParams:l,viewParameter:d,viewType:u,duploFeedItemProps:p,isAuth:h,trackInteraction:m,unauthDesktopSignupModalPageContext:_}=this.props,{onPinClick:g}=null!=p?p:{},v=e=>(0,j.My)(`unauth_pin_rep.${e}.${String(d)}`);if(v("click"),o({view_type:u,view_parameter:d,element:r.story_pin_data_id?12372:35,event_type:101,component:i,object_id_str:r.id,clientTrackingParams:(0,c.Z)(l,r.tracking_params),aux_data:{commerce_data:(0,s.Z)({isEligibleForPdp:r.is_eligible_for_pdp,isOosProduct:r.is_oos_product,isStaleProduct:r.is_stale_product,pinShoppingFlags:r.shopping_flags}),grid_index:a,image_signature:r.image_signature,...t}}),Se(r)||o({event_type:8948,view_type:u,view_parameter:d,object_id_str:r.id,clientTrackingParams:(0,c.Z)(l,r.tracking_params),aux_data:{image_signature:r.image_signature,commerce_data:(0,s.Z)({isEligibleForPdp:r.is_eligible_for_pdp,isOosProduct:r.is_oos_product,isStaleProduct:r.is_stale_product,pinShoppingFlags:r.shopping_flags}),closeup_navigation_type:"click",grid_index:a,cosmic_ray_count:"3",...t}}),!h)switch(m({action:"click",item:"pin"}),u){case 3:(0,j.NC)("click_pin_related_image");break;case 5:(0,j.NC)("click_board_pin_image");break;case 210:(0,j.NC)("click_topic_pin_image")}if(Se(r)&&this.logOneTap(),g&&g(),"desktop"===n){if(e.metaKey){v("click.cmd_button_pressed"),e.preventDefault();window.open(`/pin/${r.id}/`,"_blank").focus()}else if(!h&&_){const{pinImageClickHandler:t}=_;t({event:e,pin:r,linkTarget:"duploClientNav"})}}})),we(this,"handleCreditsClick",(e=>{var t;const{history:i,logContextEvent:n,pin:o}=this.props,{id:r,sponsorship:a,story_pin_data_id:s}=o,{creator:l,sponsor:c}=a||{},{id:d}=l||{},{id:u}=c||{},p=!!s;e.stopPropagation(),e.preventDefault();const h=null===(t=this.getCredits())||void 0===t?void 0:t.link;h&&i.push(h),n({view_type:3,element:27,event_type:102,object_id_str:r,component:p?230:void 0,aux_data:{pin_id:r,...d&&u?{creator_id:d,sponsor_id:u}:{}}})})),we(this,"handleUnfollowPin",(()=>this.props.markPinUnfollowed(this.props.pin.id))),we(this,"handlePinSend",(e=>{e&&e.stopPropagation&&e.stopPropagation();const{pin:t,board:i,setSharingOnBoardPage:n}=this.props;i&&t&&n&&i.isSocialSeasonalBoard&&n(!0,"pin",t.id)})),we(this,"isOverrideImageOnly",(()=>{const{pin:{rich_summary:e},viewer:t,viewParameter:i}=this.props,n=3375===i;return e&&43===i&&!(0,u.Z)(t.created_at)||n})),we(this,"convertToGif",(e=>{const t=Math.max(e.embed&&e.embed.width||0,236),i=Math.max(e.embed&&e.embed.height||0,236);return{url:e.embed?e.embed.src:"",width:t,height:i}}))}componentDidMount(){const{isAuth:e,slotIndex:t,pin:i,viewParameter:n,location:o}=this.props;if(!e&&0===t&&3070===n){const e=o.pathname;(0,se.H$)(e,i)}}getIsClaimedContent(){var e,t;const{pin:i,viewParameter:n}=this.props;return 3375===n&&!(null===(e=i.link_domain)||void 0===e||null===(t=e.official_user)||void 0===t||!t.is_primary_website_verified)}getCredits(){const{board:e,pin:t,viewParameter:i}=this.props,n=t.story_pin_data,o=t.pinner,r=t.promoter,a=null==n?void 0:n.has_product_pins,s=0===i,l=3173===i,c=3375===i,d=this.getIsClaimedContent(),u=t.native_creator,p=!!t.native_creator,h=Te(t),{sponsorship:m}=t,{creator:_,sponsor:g}=m||{},v=h&&!!m&&(null==r?void 0:r.id)!==(null==u?void 0:u.id),f=!!m&&_;if(!(h||f||s||l||p||d))return;switch(v?"PROMOTED_SPONSORED":h?"PROMOTED":f?"SPONSORED":p?"AFFILIATED_PRODUCTS":a?"NATIVE_CONTENT":d?"CLAIMED_CONTENT":e&&"protected"===e.privacy?"SAVED_BY":"DEFAULT"){case"PROMOTED_SPONSORED":return{title:null==u?void 0:u.full_name,subtitle:null==r?void 0:r.full_name,avatar:this.getPinnerImage(null==u?void 0:u.image_small_url),mediumAvatar:this.getPinnerImage(null==u?void 0:u.image_medium_url),largeAvatar:this.getPinnerImage(null==u?void 0:u.image_large_url),link:null!=u&&u.username?`/${u.username}/`:""};case"PROMOTED":return{title:this.props.i18n._('Promoted by', 'Grid pin annotation', 'Grid pin annotation'),subtitle:null==r?void 0:r.full_name,avatar:this.getPinnerImage(null==r?void 0:r.image_small_url),mediumAvatar:this.getPinnerImage(null==r?void 0:r.image_medium_url),largeAvatar:this.getPinnerImage(null==r?void 0:r.image_large_url),link:null!=r&&r.username?`/${r.username}/`:""};case"SPONSORED":if(!m)throw new Error("sponsorship doesn't exist when expected");return{title:null==u?void 0:u.full_name,subtitle:null==g?void 0:g.full_name,avatar:this.getPinnerImage(null==u?void 0:u.image_small_url),mediumAvatar:this.getPinnerImage(null==u?void 0:u.image_medium_url),largeAvatar:this.getPinnerImage(null==u?void 0:u.image_large_url),link:null!=u&&u.username?`/${u.username}/`:""};case"AFFILIATED_PRODUCTS":return{title:null==u?void 0:u.full_name,subtitle:"",avatar:this.getPinnerImage(null==u?void 0:u.image_small_url),mediumAvatar:this.getPinnerImage(null==u?void 0:u.image_medium_url),largeAvatar:this.getPinnerImage(null==u?void 0:u.image_large_url),link:null!=u&&u.username?`/${u.username}/`:""};case"NATIVE_CONTENT":let i=(null==e?void 0:e.url)||`/pin/${t.id}/`;return c&&(i=null!=u&&u.username?`/${u.username}/`:""),{title:"",subtitle:null==u?void 0:u.full_name,avatar:this.getPinnerImage(null==u?void 0:u.image_small_url),mediumAvatar:this.getPinnerImage(null==u?void 0:u.image_medium_url),largeAvatar:this.getPinnerImage(null==u?void 0:u.image_large_url),link:i};case"CLAIMED_CONTENT":const{link_domain:n}=t,{official_user:a}=n||{};return a?{subtitle:a.full_name,avatar:this.getPinnerImage(a.image_small_url),mediumAvatar:this.getPinnerImage(a.image_medium_url),largeAvatar:this.getPinnerImage(a.image_large_url),link:a.username?`/${a.username}/`:""}:void 0;case"SAVED_BY":return{title:this.props.i18n._('Saved by', 'Grid pin annotation', 'Grid pin annotation'),subtitle:"",avatar:this.getPinnerImage(null==o?void 0:o.image_small_url),mediumAvatar:this.getPinnerImage(null==o?void 0:o.image_medium_url),largeAvatar:this.getPinnerImage(null==o?void 0:o.image_large_url),link:(null==e?void 0:e.url)||`/pin/${t.id}/`};default:return{title:(null==o?void 0:o.full_name)||"",subtitle:"",avatar:this.getPinnerImage(null==o?void 0:o.image_small_url),mediumAvatar:this.getPinnerImage(null==o?void 0:o.image_medium_url),largeAvatar:this.getPinnerImage(null==o?void 0:o.image_large_url),link:(null==e?void 0:e.url)||`/pin/${t.id}/`}}}getSharedHeaderInviteCode(){var e;const{viewParameter:t,viewedSharedPins:i,pinId:n}=this.props;return 92===t?null===(e=i&&i[n])||void 0===e?void 0:e.inviteCode:void 0}getPinnerImage(e){return e&&e.includes("/user/default")?void 0:e}getPinText(){const{grid_title:e,rich_summary:t,description:i}=this.props.pin;return"string"==typeof e?{title:e,description:""}:{title:null==t?void 0:t.display_name,description:i}}renderPinCard(){var e,t,i,n,o,a,s,u,h,m,_,f,y,b,w,S,I,k,E,A,C,j,R,D,O,L,M,N,F,Z,B,U,H,V;const{board:W,checkExperiment:K,country:q,disableAppUpsell:Y,duploDisablePinCardPadding:J,disableRounding:te,disableReaction:ne,deviceType:se,experience:le,feedback:ce,imageOnlyOption:he,i18n:me,isAuth:_e,isBot:ge,duploIsSquarePin:ve,isImageOnlyExp:fe,location:ye,duploFeedItemProps:xe,duploLazyLoadImage:be,duploOneTapSave:we,duploPinCardDetailsMargin:Ie,duploPriorityFetchImage:je,pin:Re,slotIndex:De,viewParameter:Oe,viewType:Le,duploShouldAllowProductPriceIndicator:Me,topLevelTrafficSource:Ne,topLevelTrafficSourceDepth:ze,trafficSource:Fe,duploUnauthRelatedPinsAutoplayExpGroup:Ze,trackingParams:Be,trackInteraction:Ue,vaseDisplayMode:He,createUnauthContextMenuHandler:Ve,duploConversationPin:We}=this.props,{hidePinMetadata:$e=!1,onPinLinkClick:Ge,showSeoMetadata:Ke}=null!=xe?xe:{},{aggregated_pin_data:qe,category:Ye,image_signature:Xe,promoter:Je,rich_summary:Qe,title:et,sponsorship:tt,story_pin_data:it}=Re,{description:nt,title:ot}=this.getPinText(),rt="desktop"===se,at=ke(Re),st=0===Oe,lt=3475===Oe,ct=43===Oe,dt=Te(Re),ut=!!tt,pt=null==it?void 0:it.has_product_pins,ht=null==it?void 0:it.is_deleted,mt=(0,c.Z)((ye&&ye.state||{}).trackingParams||Be,Re.tracking_params),_t="product"===ke(Re)&&!_e&&!ge&&(!K("unauth_gate_product_pins_by_country_and_trustworthiness").anyEnabled||Re.is_eligible_for_pdp),gt=fe&&!this.isOverrideImageOnly(),vt=W&&W.isSocialSeasonalBoard,ft=this.getPinImage(),yt=vt&&"gif"===at?this.convertToGif(Re):ft,xt=null===(e=Re.videos)||void 0===e||null===(t=e.video_list)||void 0===t?void 0:t.V_720P,bt=(null==xt?void 0:xt.url)||(null===(i=Re.videos)||void 0===i||null===(n=i.video_list)||void 0===n||null===(o=n.V_HLSV4)||void 0===o?void 0:o.url),wt=(0,Q.hP)(null!==(a=Re.description)&&void 0!==a?a:"",Re.description_html||"",null===(s=Re.pin_join)||void 0===s?void 0:s.visual_annotation,Re.alt_text||""),Pt=_e?nt:(0,d.Z)({storyPinDataId:Re.story_pin_data_id,pinDescription:Re.description,richMetadataDescription:null!==(u=null===(h=Re.rich_metadata)||void 0===h?void 0:h.description)&&void 0!==u?u:"",richSummaryDisplayName:null!==(m=null===(_=Re.rich_summary)||void 0===_?void 0:_.display_name)&&void 0!==m?m:"",placeSummaryName:null!==(f=Re.place_summary)&&void 0!==f?f:"",closeupDescription:null!==(y=Re.closeup_description)&&void 0!==y?y:"",closeupUnifiedDescription:null!==(b=Re.closeup_unified_description)&&void 0!==b?b:""}),St=le&&le.display_data.hideReactions||!1,Tt=le&&le.display_data.hideDesc||!1,It=!ne&&(0,ue.J6)({boardIsCollaborative:null==W?void 0:W.is_collaborative,isDownstreamPromotion:Re.is_downstream_promotion,isPromoted:Re.is_promoted,storyPinDataId:Re.story_pin_data_id,videosId:null===(w=Re.videos)||void 0===w?void 0:w.id})&&!lt&&!St,kt=!_e;let Et;Et=Se(Re)?Re.tracked_link||Re.link:kt?(0,Q.bN)({pinId:Re.id,seoUrl:Re.seo_url}):(0,Q.BY)(Re.id);const At=!nt||gt&&!st?void 0:nt.trim(),Ct=this.getSharedHeaderInviteCode(),jt={accessibilityLabel:wt||ot||nt||"",country:q,deeplinkUri:Et,external:Se(Re),externalQueryParams:{pin:Re.id,client_tracking_params:Be},isAppUpsellDisabled:Y,onTouch:this.handleClick,pinCategory:Re.category,pressState:"none",rounding:4,title:this.props.i18n._('See this Pin', 'App Upsell Text after clicking on Pin in feed', 'App Upsell Text after clicking on Pin in feed'),to:{pathname:Et,state:{trackingParams:Be,trafficSource:Fe,topLevelTrafficSource:Ne,topLevelTrafficSourceDepth:ze}},upsellType:"direct",viewParameter:Oe,viewType:Le,clientTrackingParams:mt},Rt=Pe({isDesktop:rt}),Dt=Re.native_creator||Re.pinner,Ot="search"===Fe&&"storyPin"===at&&K("mweb_search_ideapin_module").anyEnabled;return(0,v.jsxs)(g.xu,{"data-test-id":"pin","data-test-pin-id":Re.id,marginBottom:rt||$e?0:2,children:[(0,v.jsxs)(g.xu,{"data-test-id":wt||ot||nt?"pin-with-alt-text":"pin-missing-alt-text",paddingY:$e||J?0:Rt,paddingX:J?0:Rt,marginBottom:0,onContextMenu:Dt?Ve({pinId:Re.id,deviceOptions:{isDesktop:!0}}):void 0,dangerouslySetInlineStyle:{__style:this.state.isShowingCustomContextMenu?pe.Yw:{}},children:[(0,v.jsxs)(ie.MZ,{...jt,children:[!!Ct&&(0,v.jsx)($,{inviteCode:Ct}),ht?(0,v.jsx)(re.Z,{isPinRep:!0}):(0,v.jsx)(G.Z,{clientTrackingParams:mt,color:null!==(S=Re.dominant_color)&&void 0!==S?S:"",description:At,domainLinkData:Re.domain&&Re.link?{clickLoggingOptions:{auxData:{objectId:Re.id,grid_index:De,sanitized_url:Re.link}},domain:Re.domain,link:Re.link,onClick:Ge}:void 0,disableRounding:te,hideBottomCardText:vt,image:yt,imageAltText:wt,imageCrop:Re.image_crop,isMessenger:vt,isPromoted:dt,isSquarePin:ve,lazyLoadImage:be,onError:this.handleError,oneTapSave:we,onLoad:this.handleLoad,openCustomContextMenu:()=>this.setState({openContextMenuByLongPress:!0}),priorityFetchImage:je,disableDefaultContextMenu:()=>this.setState({isShowingCustomContextMenu:!0}),createUnauthContextMenuHandler:Ve,pinId:Re.id,pinnedToBoardId:(null===(I=Re.pinned_to_board)||void 0===I?void 0:I.id)||"",pinVideo:(vt||dt)&&xt||void 0,videoUrl:bt,productPrice:Me&&!_t?Ae(Re):null,slotIndex:De,storyData:it,title:!gt||st?ot:void 0,type:at,videoDuration:Ee(Re),unauthRelatedPinsAutoplayExpGroup:Ze,viewType:Le,viewParameter:Oe})]}),!("image-only"===he)&&(_e||"desktop"===se)&&(0,v.jsxs)(g.xu,{children:[!lt&&!ct&&"desktopParity"===He&&(0,v.jsx)(ae.Z,{pinId:Re.id,mode:"inlineWithScrollArrows",graphqlRef:null}),!_t&&(0,v.jsx)(ie.MZ,{...jt,children:(0,v.jsx)(z,{duploConversationPin:We,allowPriceIndicator:!Me&&!_t&&["shop_feed"].includes(Fe),marginTop:Ie,hidePinMetadata:$e||Tt,contextMenu:_e&&!ht?(0,v.jsx)(g.xu,{marginStart:1,marginTop:Ie,children:(0,v.jsx)(g.xu,{height:26,width:24,children:(0,v.jsx)(r.Z,{name:"SafeSuspense_Pin_ContextualMenu",children:(0,v.jsx)(P.Z,{children:(0,v.jsx)(Ce,{adMatchReason:Re.ad_match_reason,bestPinImgSrc:(0,l.Z)({images:Re.images,embedSrc:null===(k=Re.embed)||void 0===k?void 0:k.src,embedType:null===(E=Re.embed)||void 0===E?void 0:E.type}),feedback:ce,feedbackType:this.getFeedbackType(),getRecommendationDescription:this.getRecommendationDescription,graphqlRef:null,imageSignature:Xe,pinCategory:Ye,pinDescription:Pt,pinId:Re.id,pinTitle:et,sourceType:dt?"ad":st?"following":void 0,viewParameter:Oe,viewType:Le,openByLongPress:this.state.openContextMenuByLongPress,trackingParams:Be,toggleLongPress:()=>{this.setState({openContextMenuByLongPress:!1})}})})})})}):null,credits:this.getCredits(),hasAffiliatedProducts:pt,isPromotedPin:dt,isSponsoredPin:ut,isSquarePin:ve,marginStart:Ie,marginEnd:Ie,onCreditsClick:this.handleCreditsClick,pinDescription:Pt,pinId:Re.id,pinnedToBoardId:(null===(A=Re.pinned_to_board)||void 0===A?void 0:A.id)||"",pinReactionCounts:Re.reaction_counts,pinTagsChips:(qe||{}).pin_tags_chips,promoterName:null==Je?void 0:Je.full_name,recipeCookTime:gt?void 0:Re.rich_summary&&Re.rich_summary.display_cook_time,recipeMaxRating:gt||null==Qe||null===(C=Qe.aggregate_rating)||void 0===C?void 0:C.best_rating,recipeRating:gt||null==Qe||null===(j=Qe.aggregate_rating)||void 0===j?void 0:j.rating_value,recipeReviewCount:gt||null==Qe||null===(R=Qe.aggregate_rating)||void 0===R?void 0:R.review_count,shouldShowReactions:It,style:Ot?"overlay":"default",title:Ot?void 0:ot,type:at})})]}),!_e&&_t&&(0,v.jsx)(oe,{description:Re.description,domain:null===(D=Re.rich_summary)||void 0===D?void 0:D.site_name,gridTitle:Re.grid_title,pinId:Re.id,pinProduct:(0,x.kb)(Re),placeSummaryName:Re.place_summary,richMetadataTitle:null===(O=Re.rich_metadata)||void 0===O?void 0:O.title,richSummaryDisplayName:null===(L=Re.rich_summary)||void 0===L?void 0:L.display_name,storyPinDataId:Re.story_pin_data_id,storyPinDataMetadataPinTitle:null===(M=Re.story_pin_data)||void 0===M||null===(N=M.metadata)||void 0===N?void 0:N.pin_title,title:Re.title})]}),(null==W?void 0:W.isSocialSeasonalBoard)&&_e&&(0,v.jsx)(g.xu,{color:"secondary",marginBottom:6,marginEnd:"auto",marginStart:"auto",marginTop:-2,position:"relative",rounding:2,width:"90%",children:(0,v.jsx)(p.Z,{onTouch:this.handlePinSend,pressState:"none",rounding:2,children:(0,v.jsx)(g.xu,{padding:3,children:(0,v.jsx)(g.xv,{align:"center",weight:"bold",children:me._('Send', ' - ', ' -- ')})})})}),"reported"===Re.feedback_status?(0,v.jsx)(X,{color:null!==(F=Re.dominant_color)&&void 0!==F?F:"",getFeedbackText:()=>({title:this.props.i18n._('Reported', 'message displayed after reporting a pin', 'message displayed after reporting a pin'),subTitle:this.props.i18n._('Thanks! Your feedback helps us keep the Pinterest community safe.', 'message displayed after reporting a pin', 'message displayed after reporting a pin')}),pinId:Re.id,showing:!!Re.feedback_status}):(0,v.jsx)(X,{color:null!==(Z=Re.dominant_color)&&void 0!==Z?Z:"",getFeedbackText:this.getPinHiddenFeedbackText,onUnfollow:this.handleUnfollowPin,pinId:Re.id,showing:!!Re.feedback_status,unfollowed:"unfollowed"===Re.feedback_status,viewParameter:Oe,viewType:Le}),Ke&&"inlineHidden"===He&&!_t&&(0,v.jsx)(T.Z,{id:"related-pins-title",children:(0,v.jsx)(g.iP,{onTap:()=>{Ue({action:"click",item:"related-pins-title"})},fullWidth:!1,children:(0,v.jsx)(ee,{description:Re.description,gridTitle:Re.grid_title,pinId:Re.id,placeSummaryName:Re.place_summary,richMetadataTitle:null===(B=Re.rich_metadata)||void 0===B?void 0:B.title,richSummaryDisplayName:null===(U=Re.rich_summary)||void 0===U?void 0:U.display_name,storyPinDataId:Re.story_pin_data_id,storyPinDataMetadataPinTitle:null===(H=Re.story_pin_data)||void 0===H||null===(V=H.metadata)||void 0===V?void 0:V.pin_title,title:Re.title})})}),Re.debug&&(0,v.jsx)(de.W,{data:Re.debug})]})}render(){const{componentType:e,pin:t,trackingParams:i,viewParameter:n,viewType:o,slotIndex:r,objectIdStr:a,viewData:s}=this.props,{startImpressionTimer:l}=this.state;return t?(0,v.jsx)(he.dL,{auxData:this.getAuxData(),component:e,impressionData:this.getImpressionData(),isPaused:!l,loggingId:t.id,objectIdStr:a,onTracked:this.markPinAsSeen,slotIndex:r,trackingParams:i,viewData:s,viewParameter:n,viewType:o,children:({impressionTrackerRef:e})=>(0,v.jsx)(g.xu,{ref:e,children:this.renderPinCard()})}):null}}const Re=(0,o.connect)((({experiences:e,pins:t,session:i,users:n},o)=>{const r=t[o.pinId]||null,a=e[1000107];return{board:null==r?void 0:r.board,country:i.country,hasPoorConnection:i.hasPoorConnection,isAuth:i.isAuthenticated,isBot:i.isBot,isImageOnlyExp:a&&500678===a.experience_id,pin:r,viewer:n[i.userId],viewedSharedPins:i.viewedSharedPins}}),((e,{viewParameter:t,viewType:i})=>({markPinAsSeen:n=>e(ce({pinId:n,viewParameter:t,viewType:i})),markPinUnfollowed:t=>e((0,ge.fH)(t,"unfollowed")),setSharingOnBoardPage:(t,i,n)=>e((0,me.Mj)(t,i,n))})))((function(e){const t=(0,y.ZP)(),i=(0,be.g)(),{checkExperiment:n}=(0,R.F)(),o=(0,O.useHistory)(),r=(0,O.useLocation)(),a=(0,I.ZP)(),s=(0,xe.M)(),l=(0,fe.yz)(),c=(0,ve._)({id:1000107}),d=(0,ye.Z)(),u=(0,E.Z)();return(0,v.jsx)(je,{...e,createUnauthContextMenuHandler:s,deviceType:a,experience:c,pwaType:l,unauthDesktopSignupModalPageContext:i,vaseDisplayMode:"desktop"===a?"desktopParity":"inlineHidden",i18n:t,checkExperiment:n,history:o,location:r,logContextEvent:d,trackInteraction:u})}))},948945:(e,t,i)=>{i.d(t,{Z:()=>ce});var n=i(667294),o=i(702664),r=i(81226),a=i(8320),s=i(499128),l=i(898781),c=i(112690),d=i(927383),u=i(662089),p=i(52022),h=i(332611),m=i(639952),_=i(57791),g=i(479739),v=i(881802),f=i(749147),y=i(883119),x=i(276775),b=i(785893);const w=new y.Ry(1);function P({buttonText:e,clientTrackingParams:t,color:i="primary",deeplinkUri:r,experience:P,inline:S=!0,minWidth:T,onTouch:I,onUnsave:k,pinId:E,pinnedToBoardId:A,shape:C,shouldShowSavedButton:j,viewType:R,viewParameter:D,showSaveHandoffExperience:O}){var L;const M=(0,l.ZP)(),N=(0,o.useDispatch)(),z=(0,x.useHistory)(),F=(0,x.useLocation)().pathname.startsWith("/pin"),Z=(0,o.useSelector)((({session:e})=>e.hasSavedUnauthPin)),B=(0,o.useSelector)((({session:e})=>e.unauthSavePinId)),U=null===(L=(0,o.useSelector)((e=>(0,g.ts)(e))))||void 0===L?void 0:L.pin_count,H=(0,c.Z)(),V=(0,p.Z)(),{showToast:W,showRepinConfirmation:$}=(0,u.Z)(),G=()=>{N((0,f.Bp)({history:z,i18n:M,logContextEvent:H,onSuccess:()=>{P&&N((0,h.CK)(P.placement_id,P.experience_id))},originalPinId:E,pinId:E,trackingParams:{clientTrackingParams:t,pinnedToBoardId:A},showRepinConfirmation:O&&!F?()=>{}:$,disableRepinAnimation:B===E,pinCount:U})).catch((e=>W((({hideToast:t})=>(0,b.jsx)(s.ZP,{variant:"error",text:e.message||M._('Sorry! Something went wrong on our end.', 'quickSave.toast.error.message', 'error during repin'),onHide:t})))))},K=(0,n.useRef)(null),q=O&&!Z,Y=(0,d.Z)()({fn:e=>{e.stopPropagation(),e.preventDefault(),I&&I(e),j?j&&k&&k():G()},modalHeader:(0,v.Bx)(M)});(0,n.useEffect)((()=>{q&&!K.current&&(V({action:"trigger",item:"unauth-save-button-quicksave"}),G(),N((0,m.e2)())),K.current=q}));const X=()=>M._('Pin', 'quickSave.quickSaveButton.icon.accessibilityLabel', 'Pin accessibility label'),J=()=>e||M._('Save', 'quickSave.quickSaveButton.buttonText', 'Auth mobile web save button for pin closeup');return Z&&!F?null:(0,b.jsx)(y.xu,{"data-test-id":"save-button-mobile",zIndex:w,children:r?(0,b.jsx)(_.di,{accessibilityLabel:X(),color:i,customStyles:{padding:"14px 16px"},deeplinkUri:r,inline:S,minHeight:48,minWidth:T,onTouch:Y,pressState:["compress","background"],shape:C,size:"lg",text:J(),to:z.location.pathname,upsellType:"save",viewType:R,viewParameter:D}):(0,b.jsx)(a.Z,{accessibilityLabel:X(),color:i,customStyles:{padding:"14px 16px"},inline:S,minHeight:48,minWidth:T,onTouch:Y,pressState:"compress",shape:C,size:"300",text:J()})})}var S=i(364034),T=i(139574),I=i(850431),k=i(867820),E=i(780280),A=i(177891),C=i(343341);function j(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class R extends n.PureComponent{constructor(...e){var t;super(...e),t=this,j(this,"state",{saveState:void 0}),j(this,"legoFixedZIndex",new y.Ry(2)),j(this,"onAddPin",(async function(){const{clientTrackingParams:e,dispatch:i,i18n:n,oneTapSave:o,pinId:r,pinnedToBoardId:a,showToast:l,viewType:c,historyPush:d}=t.props;try{const n=await i((0,I.w)({i18n:t.props.i18n,logContextEvent:t.props.logContextEvent,originalPinId:r,pinId:r,boardId:null==o?void 0:o.boardId,isOneTapSave:!0,onUndo:()=>{t.onDeletePin()},section:null==o?void 0:o.section,showToast:l,trackingParams:{clientTrackingParams:e,pinnedToBoardId:a},viewType:c,historyPush:d}));t.setState({saveState:"saved"}),i((0,A.a)({boardId:null==o?void 0:o.boardId,localPinId:n.id,pinId:r}))}catch(u){l((({hideToast:e})=>(0,b.jsx)(s.ZP,{variant:"error",text:u.message||n._('Sorry! Something went wrong on our end.', 'error during repin', 'error during repin'),onHide:e}))),t.setState({saveState:void 0})}})),j(this,"onDeletePin",(async function(){const{dispatch:e,clientTrackingParams:i,i18n:n,pinId:o,savedInfo:r,showToast:a}=t.props;if(r){e((0,A.k)({boardId:r.boardId,localPinId:r.localPinId,pinId:o}));try{await e((0,T.q)({pinId:r.localPinId,boardId:r.boardId,clientTrackingParams:i})),a((({hideToast:e})=>(0,b.jsx)(s.ZP,{text:n._('Pin deleted!', 'User deleted their pin', 'User deleted their pin'),onHide:e}))),t.setState({saveState:void 0})}catch(l){a((({hideToast:e})=>(0,b.jsx)(s.ZP,{variant:"error",text:n._('Sorry! There was an error deleting your Pin.', 'Error when user tried to delete pin', 'Error when user tried to delete pin'),onHide:e}))),t.setState({saveState:"saved"})}}})),j(this,"handlePinAction",this.props.requireAuthForLimitedLogin({fn:({event:e})=>{e.stopPropagation(),e.preventDefault();const{saveState:t}=this.state,{history:i,pinId:n,isOneTapExploreLocalTab:o,pinnedToBoard:r}=this.props;["saving","deleting"].includes(t)||o&&r||(t||this.props.savedInfo?this.props.isOneTapExploreLocalTab||(this.setState({saveState:"deleting"}),this.onDeletePin()):(this.setState({saveState:"saving"}),o?i.push({pathname:`/pin/${n}/repin`,state:{isOneTapSave:!0}}):this.onAddPin()))},modalHeader:(0,v.Bx)(this.props.i18n)})),j(this,"shouldDisplayAsSaved",(({isOneTapExploreLocalTab:e,pinnedToBoard:t,savedInfo:i})=>e?!!t:!!i))}render(){const{children:e,clientTrackingParams:t,homepageExperience:i,i18n:o,isOneTapExploreLocalTab:r,isRTL:a,oneTapSave:s,pinId:l,pinnedToBoard:c,pinnedToBoardId:d,savedInfo:u,shouldShowSaveHandoffExp:p}=this.props;if(!s&&!r&&!p)return e;const h=this.shouldDisplayAsSaved({isOneTapExploreLocalTab:r,pinnedToBoard:c,savedInfo:u}),m="#000",_="rgba(255, 255, 255, 0.8)",g="light",v="dark";return(0,b.jsxs)(n.Fragment,{children:[e,(0,b.jsx)(y.xu,{bottom:!0,left:a,padding:2,position:"absolute",right:!a,zIndex:this.legoFixedZIndex,children:p?(0,b.jsx)(P,{buttonText:c?o._('Saved', 'OneTapSave.QuickSaveButton.Saved', 'Message on saved pin'):"",clientTrackingParams:t,color:c?"default":"primary",deeplinkUri:"deeplinkUri",experience:i,inline:!0,pinnedToBoardId:d,minWidth:54,pinId:l,shape:"pill",shouldShowSavedButton:!!c,showSaveHandoffExperience:p}):(0,b.jsx)(y.iP,{onTap:this.handlePinAction,rounding:"circle",children:(0,b.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:h?m:_}},padding:2,rounding:"circle",children:(0,b.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{opacity:100}},children:(0,b.jsx)(y.JO,{accessibilityLabel:h?o._('saved', 'checkmark icon to show pin has been saved', 'checkmark icon to show pin has been saved'):o._('save', 'button for saving quickly with one click', 'button for saving quickly with one click'),icon:h?"check":"add",color:h?g:v,size:"24"})})})})})]})}}const D=(0,o.connect)(((e,{pinId:t})=>({savedInfo:e.pins[t]&&e.pins[t].savedInfo,pinnedToBoard:e.pins[t]&&e.pins[t].pinned_to_board,homepageExperience:e.experiences[40001]})))((function(e){const{showToast:t}=(0,C.F9)(),i=(0,l.ZP)(),r=(0,c.Z)(),a=(0,d.Z)(),s=(0,o.useDispatch)(),u=(0,x.useHistory)(),{isRTL:p,isAuthenticated:h}=(0,E.B)(),m=(0,o.useSelector)((({session:e})=>e.unauthSavePinId)),_=(0,o.useSelector)((e=>{var t;return null===(t=(0,g.ts)(e))||void 0===t?void 0:t.pin_count})),v=h&&!!m&&m===e.pinId,{pins:y,clear:w}=(0,S.Z)(),P=(0,n.useRef)(!1);return(0,n.useEffect)((()=>{h&&!P.current&&y.length>0&&(P.current=!0,y.forEach((({id:e})=>{s((0,f.Bp)({history:u,i18n:i,logContextEvent:r,onSuccess:()=>{},originalPinId:e,pinId:e,trackingParams:{clientTrackingParams:"",pinnedToBoardId:""},showRepinConfirmation:()=>{},disableRepinAnimation:!0,pinCount:_})).catch((e=>{(0,k.My)(`error.unauth_profile_pin_merge.${e}`)}))})),w())})),(0,b.jsx)(R,{...e,i18n:i,requireAuthForLimitedLogin:a,history:u,logContextEvent:r,showToast:t,shouldShowSaveHandoffExp:v,isRTL:p,historyPush:e=>u.push(e)})}));D.displayName="OneTapSave";const O=D;var L=i(883561),M=i(349700);function N({boardUrl:e,boardName:t,isQuicksave:i,sectionName:n,sectionSlug:o}){const r=(0,l.ZP)(),a=(0,x.useHistory)(),s=new y.Ry(1),c=!!o&&`${e}${o}/`;return(0,b.jsx)(y.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,zIndex:s,dangerouslySetInlineStyle:{__style:{background:"rgb(0 0 0 / .4)"}},children:(0,b.jsx)(y.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,display:"flex",justifyContent:"center",alignItems:"start",padding:4,children:(0,b.jsx)(y.iP,{onTap:t=>{t.event.preventDefault(),a.push(i?"/me/":c||e)},children:(0,b.jsx)(y.xv,{color:"light",children:n?(0,M.nk)(r._('Saved to {{sectionName}}', 'PinCard.SavedToSection.Overlay', 'Saved to section overlay'),{sectionName:(0,b.jsx)(y.xv,{color:"light",weight:"bold",inline:!0,children:(0,L.ZP)(n,22)},`pincard-${n}`)}):(0,M.nk)(r._('Saved to {{boardName}}', 'PinCard.SavedToBoard.Overlay', 'Saved to board overlay'),{boardName:(0,b.jsx)(y.xv,{color:"light",weight:"bold",inline:!0,children:i?r._('Profile', 'PinCard.SavedToProfile.Overlay', 'Part of string saying "Saved to Profile" after saving a Pin'):(0,L.ZP)(t,22)},`pincard-${t}`)})})})})})}var z=i(167525),F=i(964082),Z=i(36971),B=i(463045);function U({isSquarePin:e,color:t,description:i,imageUrl:n,imageHeight:o,imageWidth:r,onError:a,onLoad:s}){const l=(0,b.jsx)(y.Ee,{alt:i||"",color:t,naturalHeight:null!=o?o:1,naturalWidth:null!=r?r:1,onError:a,onLoad:s,src:null!=n?n:"",fit:e?"cover":void 0});return e?(0,b.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{paddingTop:"calc(100%)"}},children:(0,b.jsx)(y.xu,{top:!0,right:!0,bottom:!0,left:!0,position:"absolute",dangerouslySetInlineStyle:{__style:{WebkitMaskImage:"-webkit-radial-gradient(white, black)"}},children:l})}):l}var H=i(350445),V=i(46584),W=i(926749),$=i(623568),G=i(965900),K=i(50286);function q({inAdsVideoExperiment:e,unauthRelatedPinsAutoplayExpGroup:t,isAutoplay:i,cropHeight:o,currentTime:r,onLoad:a,onError:s,onTimeChange:c,pin:d,playing:u,rootMargin:p,viewType:h,viewParameter:m,onVisibilityChanged:_,trackFullVisible:g,videoDuration:v,imageHeightModifier:f,image:x,isSquarePin:w}){var P,S,T,I;const k=(0,l.ZP)(),[E,A]=(0,n.useState)(!1),[C,j]=(0,n.useState)(!0),R=(0,$.jL)(d),D=R&&!d.is_eligible_for_web_closeup,O=3372===m||42===h,L=R&&d.is_eligible_for_web_closeup&&!O,{setCurrentVideo:M,pauseAutoplay:N}=(0,G.I)(),F=D||!R,Z=(0,V.Z)({onVisibilityChanged:_,inAdsDesktopVideoExperiment:e,trackFullVisible:g,rootMargin:p});let B=!u;(e||null!=t&&t.startsWith("enabled"))&&(B=C,i&&u&&C&&j(!1));const{url:q}=(null===(P=d.images)||void 0===P?void 0:P["236x"])||{},{id:Y}=d,X=(0,K.HG)()&&d.videos?null===(S=d.videos.video_list)||void 0===S?void 0:S.V_HLSV4:null===(T=d.videos)||void 0===T||null===(I=T.video_list)||void 0===I?void 0:I.V_720P,J=(0,K.HG)()&&d.videos?"video/m3u8":"video/mp4",Q=(0,n.useCallback)((({event:e})=>{e.preventDefault(),e.stopPropagation(),M({pinId:Y,isPromoted:Boolean(R),currentTime:0}),A(!1)}),[R,Y,M]),ee=(0,n.useCallback)((()=>{R&&A(L),N({pinId:Y,isPromoted:Boolean(R),currentTime:0})}),[L,R,Y,N]);if(!d.videos||!X)return null;const{height:te,thumbnail:ie,width:ne,url:oe}=X||{},re=d.videos.id,ae=[{type:J,src:oe}];let se,le=(null!=ne?ne:1)/(null!=te?te:1);return e&&w&&(le=1,se="transparent",f&&(le-=f-1)),E&&R?(0,b.jsx)(y.xu,{"data-test-id":"pin-video-mobile-end-card",ref:Z,children:(0,b.jsx)(H.Z,{backgroundImage:null!=q?q:"",naturalHeight:null!=te?te:1,naturalWidth:null!=ne?ne:1,pin:d,onRestartVideo:Q})}):B?(0,b.jsxs)(y.xu,{"data-test-id":"pin-video-mobile-image",ref:Z,children:[v&&(0,b.jsx)(z.Z,{text:v}),(0,b.jsx)(U,{imageHeight:null!==(ce=null==x?void 0:x.height)&&void 0!==ce?ce:1,imageWidth:null!==(de=null==x?void 0:x.width)&&void 0!==de?de:1,onError:s,onLoad:a,imageUrl:null!==(ue=null==x?void 0:x.url)&&void 0!==ue?ue:"",isSquarePin:w})]}):(0,b.jsx)(y.xu,{"data-test-id":"pin-video-mobile-video",ref:Z,children:(0,b.jsx)(W.ZP,{isAutoPlay:!!i,cropHeight:o,rootMargin:p,inAdsDesktopVideoExperiment:e,contextLogData:{viewParameter:m,component:0,objectId:d.id,video_id:re,view:h},accessibilityMaximizeLabel:k._('Maximize', 'pinLayouts.PinVideo.accessibilityMaxVideoBtn', 'Maximize button on video'),accessibilityMinimizeLabel:k._('Minimize', 'pinLayouts.PinVideo.accessibilityMinVideoBtn', 'Minimize button on video'),accessibilityMuteLabel:k._('Mute', 'pinLayouts.PinVideo.accessibilityMuteVideoBtn', 'Mute button on video'),accessibilityPauseLabel:k._('Pause', 'pinLayouts.PinVideo.accessibilityPauseVideoBtn', 'Pause button on video'),accessibilityPlayLabel:k._('Play', 'pinLayouts.PinVideo.accessibilityPlayVideoBtn', 'Play button on video'),accessibilityProgressBarLabel:k._('Progress bar', 'pinLayouts.PinVideo.accessibilityProgressBarLabel', 'Video progress bar accessibility label'),accessibilityUnmuteLabel:k._('Unmute', 'pinLayouts.PinVideo.accessibilityUnmuteVideoBtn', 'Unmute button on video'),aspectRatio:le,backgroundColor:se,captions:"",hlsConfig:{capLevelToPlayerSize:!0,startPosition:r||-1},loop:F,onTimeChange:c,playing:u,onPlay:()=>{},onPlayError:()=>{},poster:q||ie,src:null!=ae?ae:[],videoStartTime:r,volume:0,onEnded:ee})});var ce,de,ue}function Y(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class X extends n.Component{constructor(...e){super(...e),Y(this,"calculateCurrentVideoTime",(()=>{const{currentTimeFromPinRep:e,pin:t,videosAutoplaying:i}=this.props,{id:n}=t,o=(0,Z.Z)(n,i);return this.currentVideoCurrentTime||o||e})),Y(this,"handleVisibilityChanged",(e=>{const{currentTimeFromPinRep:t,pin:i,setCurrentVideo:n,pauseAutoplay:o,videosAutoplaying:r}=this.props,{id:a}=i,s=(0,$.jL)(i),l=(0,B.Z)(a,r),c=(0,F.Z)(a,r);e?s?n({pinId:a,isPromoted:s,currentTime:this.calculateCurrentVideoTime()}):c&&n({pinId:a,isPromoted:Boolean(s),currentTime:this.calculateCurrentVideoTime()}):!e&&l&&o({pinId:a,isPromoted:Boolean(s),currentTime:t||this.currentVideoCurrentTime})})),Y(this,"handleVideoTimeChange",(e=>{const{pin:t,onTimeChange:i,videosAutoplaying:n}=this.props,{id:o}=t;(0,B.Z)(o,n)&&(this.currentVideoCurrentTime=e.time),i&&i(e)}))}componentDidUpdate(e){const{appInFocus:t}=e,{appInFocus:i,currentTimeFromPinRep:n,pauseAutoplay:o,pin:r,setCurrentVideo:a,videosAutoplaying:s}=this.props,{id:l}=r,c=(0,$.jL)(r),d=(0,B.Z)(l,s);i!==t&&!i&&d?(this.pausedDueToBrowserOutOfFocus=!0,o({pinId:l,isPromoted:Boolean(c),currentTime:n||this.currentVideoCurrentTime})):this.pausedDueToBrowserOutOfFocus&&i&&(this.pausedDueToBrowserOutOfFocus=!1,a({pinId:l,isPromoted:Boolean(c),currentTime:this.calculateCurrentVideoTime()}))}componentWillUnmount(){const{currentTimeFromPinRep:e,pauseAutoplay:t,pin:i,videosAutoplaying:n}=this.props,{id:o}=i,r=(0,$.jL)(i);(0,B.Z)(o,n)&&t({pinId:o,isPromoted:Boolean(r),currentTime:e||this.currentVideoCurrentTime})}render(){const{cropHeight:e,isAutoplay:t,pin:i,videosAutoplaying:n,videoDuration:o,viewParameter:r,viewType:a,onError:s,onLoad:l,inAdsVideoExperiment:c,unauthRelatedPinsAutoplayExpGroup:d,isSquarePin:u,rootMargin:p,imageHeightModifier:h,image:m,isHovering:_}=this.props,{id:g}=i,v=(0,Z.Z)(g,n),f="enabled_hover"===d,y=(0,B.Z)(g,n),x=_&&f||y&&t;return(0,b.jsx)(q,{cropHeight:e,rootMargin:p,currentTime:v,inAdsVideoExperiment:c,unauthRelatedPinsAutoplayExpGroup:d,isAutoplay:t,isSquarePin:u,image:m,viewParameter:r,viewType:a,onTimeChange:this.handleVideoTimeChange,onVisibilityChanged:this.handleVisibilityChanged,pin:i,playing:x,trackFullVisible:!1,onError:s,onLoad:l,imageHeightModifier:h,videoDuration:o})}}function J(e){const{appUI:{appInFocus:t,isAutoplay:i,videosAutoplaying:n},pauseAutoplay:o,setCurrentVideo:r}=(0,G.I)();return(0,b.jsx)(X,{...e,appInFocus:t,isAutoplay:i,pauseAutoplay:o,setCurrentVideo:r,videosAutoplaying:n})}var Q=i(690035),ee=i(310227),te=i(773285),ie=i(130460),ne=i(780679),oe=i(627995);const re=({domainLinkData:e})=>{const t=(0,l.ZP)(),i=(0,ne.g)();return(0,b.jsxs)(y.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(51, 51, 51, 0.8)"}},children:[(0,b.jsx)(y.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,display:"flex",justifyContent:"center",alignItems:"center",paddingX:2,children:(0,b.jsx)(y.X6,{size:"400",align:"center",color:"light",children:t._('Open', 'Text on hover of a pin leading to opening this pin in the same tab. This is for users who don\'t have an account on Pinterest.', 'Text on hover of a pin leading to opening this pin in the same tab. This is for users who don\'t have an account on Pinterest.')})}),!!e&&(0,b.jsx)(y.xu,{position:"absolute",bottom:!0,left:!0,width:"100%",minWidth:"100%",children:(0,b.jsx)(oe.Z,{clickLoggingOptions:e.clickLoggingOptions,domain:e.domain,link:e.link,onClick:e.onClick||(null==i?void 0:i.pinLinkClickHandler)||(()=>{})})})]})};var ae=i(53987);const se=({width:e,height:t,minY:i,maxY:n})=>{const o=t=>e<=0||!t?"0%":Math.round(t/e*100)+"%";return{top:i<=0?"0%":o(-1*i*t),bottom:n>=1?"0%":o(-1*(1-n)*t)}},le=({children:e,margin:t,disableRounding:i})=>(0,b.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:t?{marginTop:t.top,marginBottom:t.bottom}:{}},position:"relative","data-test-id":"pin-visual-wrapper",children:(0,b.jsx)(y.zd,{wash:!0,rounding:i?0:ee.mv,children:e})}),ce=({clientTrackingParams:e,color:t,description:i,domainLinkData:a,hideBottomCardText:s,image:c,imageAltText:d,imageCrop:u,isPromoted:p,isMessenger:h,isOneTapExploreLocalTab:m,isSquarePin:_,lazyLoadImage:g,onError:v,oneTapSave:f,onLoad:w,openCustomContextMenu:P,pinId:S,priorityFetchImage:T,disableDefaultContextMenu:I,pinnedToBoardId:E,pinVideo:A,videoUrl:C,productPrice:j,disableRounding:R,storyData:D,title:L,type:M,videoDuration:F,viewType:Z,viewParameter:B,unauthRelatedPinsAutoplayExpGroup:U})=>{var H,V,W,$,G,q,Y,X,ee,ne,oe;const ce=(0,l.ZP)(),de=(0,Q.Z)(),{checkExperiment:ue}=(0,te.F)(),[pe,he]=(0,n.useState)(!1),me=(0,o.useSelector)((({session:e})=>e.isAuthenticated)),_e=(0,K.ZP)(),ge=(0,o.useSelector)((({pins:e})=>e[S])),ve=(0,ie.gC)()(E||ge&&String(null===(H=ge.board)||void 0===H?void 0:H.id)),fe=E&&ge.savedThisSession,ye=a&&a.link?"with-link":"without-link",xe=!me&&"desktop"!==_e,be=(0,n.useRef)(Date.now()),we=(0,n.useRef)(null),Pe=ue("mweb_video_ads_autoplay").anyEnabled,Se="video"===M&&(U&&"enabled_hover"===U),Te=(0,b.jsx)(y.Ee,{alt:d||L||i||"",color:t,naturalHeight:null!==(V=c.height)&&void 0!==V?V:1,naturalWidth:null!==(W=c.width)&&void 0!==W?W:1,onError:v,onLoad:w,src:null!==($=c.url)&&void 0!==$?$:"",fit:_?"cover":void 0,loading:g?"lazy":"auto",fetchPriority:T?"high":"auto"}),Ie=_?(0,b.jsx)(y.xu,{dangerouslySetInlineStyle:{__style:{paddingTop:"calc(100%)"}},children:(0,b.jsx)(y.xu,{top:!0,right:!0,bottom:!0,left:!0,position:"absolute",dangerouslySetInlineStyle:{__style:{WebkitMaskImage:"-webkit-radial-gradient(white, black)"}},children:Te})}):Te,ke=(0,x.useLocation)(),Ee=()=>(0,ae.C$)(ke)?"homefeed":(0,ae.L6)(ke)?"related_pins":(0,ae.En)(ke)?"search":"unknown";return(0,b.jsx)("div",{className:"PinCard__imageWrapper",style:{position:"relative"},children:(0,b.jsxs)(y.xu,{onContextMenu:e=>{if("desktop"!==_e){const t=Ee();(0,k.My)((me?"auth":"unauth")+".mweb_pin_feed.pin_image.long_press",{page:t}),me&&"unknown"!==t&&(ue("mweb_custom_context_menu_on_longpress").anyEnabled||ue("mweb_pin_card_custom_context_menu_on_longpress").anyEnabled)?(e.preventDefault(),e.stopPropagation(),P()):"related_pins"!==t||me||(e.preventDefault(),e.stopPropagation())}},onTouchStart:e=>{if("desktop"!==_e){const t=Ee();if((0,k.My)("unauth.mweb.related_pin.image.touch.start"),"related_pins"===t&&!me&&(null==I||I(),be.current=Date.now(),e.changedTouches&&e.changedTouches.length>0)){const t=e.changedTouches.item(0);t&&(we.current={x:t.pageX,y:t.pageY})}}},onTouchEnd:e=>{if("desktop"!==_e){const t=Ee();if((0,k.My)("unauth.mweb.related_pin.image.touch.end"),Date.now()-be.current>500&&!me&&"related_pins"===t){const t=we.current;if(e.changedTouches&&e.changedTouches.length>0&&t){const i=e.changedTouches.item(0);if(i&&Math.pow(i.pageX-t.x,2)+Math.pow(i.pageY-t.y,2)>100)return;null==I||I(),de({pinId:S,location:"related-pins-long-press"}),e.stopPropagation()}}}},"data-test-id":`pincard-${M}-${ye}`,dangerouslySetInlineStyle:{__style:{willChange:"transform",textDecoration:"none"}},overflow:"hidden",onMouseOver:xe?void 0:()=>he(!0),onMouseLeave:xe?void 0:()=>he(!1),position:"relative",rounding:R?0:4,children:[(0,b.jsxs)(O,{clientTrackingParams:e||"",oneTapSave:f,isOneTapExploreLocalTab:m,pinId:S,pinnedToBoardId:E,viewType:Z,children:[(()=>{if("gif"===M&&!s&&!fe)return(0,b.jsx)(z.Z,{text:ce._('GIF', 'pin.pinCard.gifIconIdentifier', 'pin type identifier for gifs')});if("video"===M&&F&&!s&&!fe)return(0,b.jsx)(z.Z,{text:F});if("storyPin"===M&&D&&!fe){const{page_count:e=0,total_video_duration:t=0}=ge.story_pin_data||{};if(t>0)return(0,b.jsx)(z.Z,{text:(0,r.Z)(t)});if("number"==typeof e&&e>0)return(0,b.jsx)(z.Z,{icon:"idea-pin",text:e.toString()})}return"product"===M&&j?(0,b.jsx)(z.Z,{text:j}):null})(),(0,b.jsx)(le,{disableRounding:R,margin:u?se({width:null!==(G=c.width)&&void 0!==G?G:1,height:null!==(q=c.height)&&void 0!==q?q:1,minY:u.min_y,maxY:u.max_y}):void 0,children:"video"===M&&h&&A?(0,b.jsx)(y.nk,{autoplay:!0,accessibilityMaximizeLabel:"",accessibilityMinimizeLabel:"",accessibilityMuteLabel:"",accessibilityPauseLabel:"",accessibilityPlayLabel:"",accessibilityProgressBarLabel:ce._('Progress bar', 'PinCardVisual.accessibilityProgressBarLabel', 'Video progress bar accessibility label'),accessibilityUnmuteLabel:"",aspectRatio:A.width/A.height,captions:"",loop:!0,onPlay:()=>{},onPlayError:()=>{},playsInline:!0,poster:null!==(Y=c.url)&&void 0!==Y?Y:"",src:A.url,volume:0}):A&&p&&Pe||null!=U&&U.startsWith("enabled")&&C?(0,b.jsx)(J,{image:c,inAdsVideoExperiment:Pe,unauthRelatedPinsAutoplayExpGroup:U,isHovering:pe,isSquarePin:_,onError:v,onLoad:w,pin:ge,videoDuration:F,viewParameter:B,viewType:Z}):Ie})]}),!Se&&pe&&!me&&(0,b.jsx)(re,{domainLinkData:a}),me&&fe&&(0,b.jsx)(N,{boardName:null!==(X=null==ve?void 0:ve.name)&&void 0!==X?X:"",boardUrl:null!==(ee=null==ve?void 0:ve.url)&&void 0!==ee?ee:"",sectionName:null==f||null===(ne=f.section)||void 0===ne?void 0:ne.title,sectionSlug:null==f||null===(oe=f.section)||void 0===oe?void 0:oe.slug,isQuicksave:"quick_saves"===(null==ve?void 0:ve.layout)})]})})}},167525:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(898781),o=i(643010),r=i(883119),a=i(785893);function s({text:e,icon:t,largeIdentifier:i,largeMargin:s}){const l=(0,n.ZP)();return(0,a.jsxs)(r.xu,{zIndex:new r.Ry(1),alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:(0,o.Yc)()?"rgba(0, 0, 0, 0.7)":"rgba(255, 255, 255, 0.8)"}},display:"flex",margin:s?4:2,overflow:"hidden",position:"absolute",rounding:"pill",padding:2,paddingX:i?4:void 0,height:i?36:24,top:!0,children:[t&&(0,a.jsx)(r.xu,{marginEnd:i?2:1,children:(0,a.jsx)(r.JO,{accessibilityLabel:l._('identifier that shows the pin type', 'pin.pincard.iconAccessibilityLabel', 'shows an icon with the pin type'),color:"default",icon:t,inline:!0,size:i?18:12})}),(0,a.jsx)(r.xv,{inline:!0,size:i?"200":"100",weight:"bold",children:e})]})}},831539:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(474236),o=i(941646),r=i(898781),a=i(892819),s=i(349700),l=i(780280),c=i(561195),d=i(883119),u=i(785893);const p=({rating:e,textSize:t,type:i})=>{if("single"===i){const i=parseFloat(e);return Number.isNaN(i)?null:(0,u.jsxs)(d.kC,{alignItems:"center",children:[(0,u.jsx)(c.A,{fill:"full",width:12}),(0,u.jsx)(d.xv,{size:t,children:i.toFixed(1)})]})}return(0,u.jsx)(c.Z,{rating:e,width:12})},h=({bracket:e,count:t,countFormat:i,countType:n,marginStart:c,textSize:p,underline:h})=>{const{locale:m}=(0,l.B)(),_=(0,r.ZP)(),g=(0,a.Z)();if(null==t)return null;let v=g(m,t,{shortform:!0,shortform_maximum_fraction_digits:1});if("text"===i){const e="review"===n?_.ngettext('{{ count }} review', '{{ count }} reviews', t, 'webapp.app.www-unified.productStarRatings.RatingCountText', 'count: total reviews count'):_.ngettext('{{ count }} rating', '{{ count }} ratings', t, 'webapp.app.www-unified.productStarRatings.RatingCountText', 'count: total ratings count');v=(0,s.nk)(e,{count:t}).join("")}return e&&(v=`(${v})`),(0,u.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{borderBottom:h?"1px solid gray":"none"}},marginStart:c,children:(0,u.jsx)(d.xv,{color:h?"subtle":"default",size:p,underline:h,children:(0,u.jsx)(o.Z,{id:"ratings-count-text",display:"inlineBlock",children:v})})})};function m({count:e,countFormat:t,countType:i,rating:o,textSize:r,underline:a}){return(0,n.Z)({count:e,rating:o})?(0,u.jsxs)(d.kC,{alignItems:"center",justifyContent:"start",children:[(0,u.jsx)(p,{rating:o,textSize:r,type:"multiple"}),(0,u.jsx)(h,{count:e,countFormat:t,countType:i,textSize:r,underline:a})]}):null}},474236:(e,t,i)=>{function n({count:e,rating:t}){return Boolean(t&&"None"!==t&&Number.isFinite(e))}i.d(t,{Z:()=>n})},99137:(e,t,i)=>{i.d(t,{x:()=>s,y:()=>l});var n=i(667294),o=i(425288),r=i(785893);const{Provider:a,useMaybeHook:s}=(0,o.Z)("ProfileViewContext");function l({children:e}){const[t,i]=(0,n.useState)(),[o,s]=(0,n.useState)(new Map),[l,c]=(0,n.useState)(),[d,u]=(0,n.useState)(),p=(0,n.useCallback)(((e,t)=>{s(new Map(o.set(e,t)))}),[o]),h=(0,n.useMemo)((()=>({boardPinDensity:t,boardSortOrder:o,profileBoardView:l,profilePinDensity:d,setBoardPinDensity:i,updateBoardSortOrder:p,setProfileBoardView:c,setProfilePinDensity:u})),[t,o,l,d,p]);return(0,r.jsx)(a,{value:h,children:e})}},255607:(e,t,i)=>{function n(e){const t=Object.keys(e);if(t.length>0){return t.sort(((t,i)=>e[i]-e[t])).slice(0,3)}return null}function o(e){const t=Object.values(e);if(t.length>0){return t.reduce(((e,t)=>e+t),0)}return 0}function r({boardIsCollaborative:e,isDownstreamPromotion:t,isPromoted:i,storyPinDataId:n,videosId:o}){return!(i||t||!o&&!n||null!=e&&e)}i.d(t,{At:()=>n,J6:()=>r,Ud:()=>o})},130460:(e,t,i)=>{i.d(t,{bn:()=>s,fJ:()=>c,gC:()=>l});var n=i(702664),o=i(425288),r=i(785893);const{Provider:a,useHook:s}=(0,o.Z)("Boards");function l(){const e=s();return t=>e[t]}function c({children:e}){const t=(0,n.useSelector)((({boards:e})=>e),n.shallowEqual);return(0,r.jsx)(a,{value:t,children:e})}},350118:(e,t,i)=>{i.d(t,{AF:()=>s,H0:()=>l,S6:()=>c,_S:()=>d});var n=i(702664),o=i(425288),r=i(785893);const{Provider:a,useHook:s,useMaybeHook:l}=(0,o.Z)("Pins");function c(){const e=s();return t=>e[t]}function d({children:e}){const t=(0,n.useSelector)((({pins:e})=>e),n.shallowEqual);return(0,r.jsx)(a,{value:t,children:e})}},698330:(e,t,i)=>{i.d(t,{Tt:()=>d,kW:()=>l,kY:()=>u,mN:()=>c});var n=i(702664),o=i(19121),r=i(425288),a=i(785893);const{Provider:s,useHook:l}=(0,r.Z)("Users");function c(){const e=l();return t=>e[t]}function d(){const{id:e}=(0,o.Z)();return l()[null!=e?e:""]}function u({children:e}){const t=(0,n.useSelector)((({users:e})=>e),n.shallowEqual);return(0,a.jsx)(s,{value:t,children:e})}},349741:(e,t,i)=>{i.d(t,{Z:()=>b});var n=i(667294),o=i(327212),r=i(830157),a=i(499128),s=i(898781),l=i(349700),c=i(883119),d=i(785893);function u({hideToast:e,newPin:t,originalPinId:i}){var n,o;const r=(0,s.ZP)();return(0,d.jsx)(a.ZP,{primaryAction:{accessibilityLabel:r._('Change saved Pin button', 'RepinRequest.a11yChangeButton', 'Change saved Pin button'),href:`/pin/${t.id}/repin/?isEditingPin=true&pinBoardId=${null!==(n=null===(o=t.board)||void 0===o?void 0:o.id)&&void 0!==n?n:""}&&isFromToast=true&&originalPinId=${null!=i?i:""}`,label:r._('Change', 'RepinRequest.ChangeButton', 'Change saved Pin button'),size:"lg",onClick:e},duration:5e3,onHide:e,text:(0,d.jsx)(c.xv,{children:(0,l.nk)(r._('Saved to {{ profile }}', 'RepinRequest.ProfileSaveToastText', 'Toast for successfully saving to profile'),{profile:(0,d.jsx)(c.xv,{inline:!0,weight:"bold",children:r._('Profile', 'RepinRequest.ProfileSaveToastText.Profile', 'referring to pinner profile where pin was saved')})})}),iconThumbnail:(0,d.jsx)(c.xu,{color:"secondary",display:"flex",justifyContent:"center",alignItems:"center",height:48,width:48,children:(0,d.jsx)(c.JO,{accessibilityLabel:r._('Profile', 'RepinRequest.ProfileIcon', 'Icon signifying Pin was saved to profile without a board'),icon:"history",size:22})})})}var p=i(6637),h=i(483025),m=i(414327),_=i(332611),g=i(675752),v=i(56632),f=i(12918),y=i(782677);const x=({board:e,section:t})=>{const i=(0,s.ZP)();return t?(0,l.nk)(i._('Saved to {{sectionName}} in {{boardName}}', 'Toast for successfully saving to a section within a board', 'Toast for successfully saving to a section within a board'),{sectionName:t&&t.title,boardName:e.name}).join(""):(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(c.xv,{color:"default",children:i._('Saved to', 'Saved to {{ boardName }}', 'Saved to {{ boardName }}')}),(0,d.jsx)(c.xv,{color:"default",weight:"bold",children:e.name})]})};class b{constructor({boardId:e,dispatch:t,history:i,isOneTapSave:n=!1,isQuickSave:o=!1,onSuccess:a,onUndo:s,originalPinId:l,pin:c,resourceName:d,saveToProfileToastExpGroup:u="",section:p,showRepinToasts:m,trackingParams:_,userId:g,viewType:v=3,historyPush:f=(()=>{})}){var x,b,w,P,S;S=e=>(0,y.Fv)(e.resource_response.data,h.Z[this.resourceName]),(P="_getNormalizedResponse")in(w=this)?Object.defineProperty(w,P,{value:S,enumerable:!0,configurable:!0,writable:!0}):w[P]=S,this.boardId=e,this.trackingParams=_,this.clientTrackingParams=(0,r.Z)(_.clientTrackingParams||"",c.tracking_params),this.dispatch=t,this.history=i,this.onSuccess=a,this.onUndo=s,this.originalPinId=l,this.pin=c,this.pinnedToBoardId=_.pinnedToBoardId||(null!==(x=null===(b=c.pinned_to_board)||void 0===b?void 0:b.id)&&void 0!==x?x:""),this.resourceName=d,this.saveToProfileToastExpGroup=u,this.showRepinToasts=m,this.section=p,this.isOneTapSave=n,this.isQuickSave=o,this.userId=g,this.viewType=v,this.historyPush=f}get resourceOptions(){const{link:e,title:t,promoted_is_removable:i,id:n}=this.pin,o=i?{is_removable:!0}:{};return{pin_id:n,board_id:this.boardId,section:this.section&&this.section.id,clientTrackingParams:this.clientTrackingParams,link:null!=e?e:"",title:null!=t?t:"",user_id:this.userId,is_removable:o}}get trackingData(){return{event_type:5,element:this.isOneTapSave?10599:void 0,view_type:this.viewType,component:this.isOneTapSave?0:7,view_parameter:this.isOneTapSave?3173:(0,g.A)(this.pin),object_id_str:this.pin.id,clientTrackingParams:this.clientTrackingParams,aux_data:{board_id:this.pinnedToBoardId,destination_board_id:this.boardId}}}_createRepin(){return p.Z.create(this.resourceName,{...this.resourceOptions,disable_event_log_info:!0}).callCreate()}processRepin(e){return this._createRepin().then((t=>{this.onSuccess&&this.onSuccess();const i=t.resource_response.data,{board:n}=i,{isQuickSave:r,originalPinId:a}=this,l=!this.saveToProfileToastExpGroup.includes("holdout"),p=({hideToast:e})=>{var t;if(r&&!l)return(0,d.jsx)(u,{hideToast:e,newPin:i,originalPinId:a});const{thumbnail:p}=(0,v.L)(n.id);return(0,d.jsx)(o.Z,{button:l?(0,d.jsx)(s.oz,{children:e=>(0,d.jsx)(c.zx,{fullWidth:!0,onClick:({event:t})=>{t.preventDefault(),t.stopPropagation();const o=this.onUndo;var r;o&&!l?o(this.pin.id,i.id,n.id,null===(r=this.section)||void 0===r?void 0:r.id,e):l&&this.historyPush(`/pin/${i.id}/repin/?isEditingPin=true&pinBoardId=${n.id}&&isFromToast=true&&originalPinId=${null!=a?a:""}`)},text:l?e._('Organize', 'RepinRequest.OrganizeButton', 'Button to allow users to organize saved pins'):e._('Undo', 'RepinRequest.UndoButton', 'Undo saved pin button')})}):void 0,href:this.section?`${n.url}${null!==(t=this.section.slug)&&void 0!==t?t:""}`:n.url,isRepinToExistingBoard:!0,onHide:e,text:(0,d.jsx)(x,{board:n,section:this.section}),thumbnail:p})},h=this._getNormalizedResponse(t);if(this.dispatch((0,m.XM)(this.resourceName,this.resourceOptions,t,h)),this.originalPinId&&this.originalPinId!==this.resourceOptions.pin_id){const e={...this.resourceOptions,pin_id:this.originalPinId};this.dispatch((0,m.XM)(this.resourceName,e,t,h))}this.dispatch((0,f.M)(i.id,n.id,this.section?this.section.id:void 0,this.userId));const g=this.showRepinToasts;return g&&g(p),this.dispatch((0,_.fO)({event_type:5})),e(this.trackingData),i}))}}},21384:(e,t,i)=>{i.d(t,{Z:()=>C});var n=i(667294),o=i(702664),r=i(373420),a=i(430322),s=i(121151),l=i(898781),c=i(643010),d=i(883119),u=i(50286),p=i(785893);function h({showFullScreenInfo:e,isOpen:t,interstitialUpsellDismissed:i,children:n}){const o=(0,l.ZP)(),r=(0,u.HG)(),h=(0,u.Wb)();return h||r?(0,p.jsx)(s.ZP,{accessibilityModalLabel:"",mobileHideCloseIcon:!0,mobileIsFullscreen:!0,isOpen:e&&!h,closeOnOutsideClick:!1,onDismiss:()=>{},children:(0,p.jsx)(d.xu,{color:(0,c.Yc)()?"dark":"default",dangerouslySetInlineStyle:{__style:{border:(0,c.Yc)()?void 0:"1px solid #efefef",transition:"transform 0.3s ease-out",WebkitOverflowScrolling:"touch"}},height:"100%",left:!0,maxHeight:"100%",overflow:"auto",position:"fixed",top:!0,width:r?"100vw":"100%",zIndex:new d.Ry(1),children:(0,p.jsx)(d.xu,{bottom:!0,left:!0,right:!0,top:!0,position:"fixed",padding:5,overflow:"scroll",marginTop:i?0:12,children:n})})}):(0,p.jsx)(a.default,{accessibilityModalLabel:o._('Close', 'Close modal window', 'Close modal window'),isOpen:t,onDismiss:()=>{},mobileAccessibilityCloseIconLabel:o._('Close', 'Close modal window', 'Close modal window'),children:n})}var m,_=i(784590),g=i(690035),v=i(52022),f=i(385801),y=i(623568),x=i(867820),b=i(350118),w=i(780280),P=i(992750),S=i(167912);const T=void 0!==m?m:m=i(276667);function I({iconColor:e,size:t,isMainPin:i,isAuth:a,pinCreditPrefix:s,onClickTitleOrDomain:c,richMetadataDescription:m,richMetadataTitle:_,richSummaryDisplayName:b,placeSummaryName:S,closeupUnifiedDescription:T,gridTitle:I,storyPinDataId:k,storyPinDataMetadataPinTitle:E,pinDescription:A,pinDomain:C,pinTitle:j,boardId:R,boardUrl:D,boardName:O,boardPrivacy:L,pinnerFullName:M,pinnerImageSmallUrl:N,pinnerImageLargeUrl:z,pinId:F,graphqlRef:Z}){const B=(0,l.ZP)(),U=(0,v.Z)(),{isBot:H}=(0,w.B)(),{unauthInterstitialDismissed:V}=(0,o.useSelector)((({session:e})=>e)),[W,$]=(0,n.useState)(!1),G=(0,u.HG)(),K=(0,u.Wb)(),q=(0,g.Z)(),Y=(0,y._S)(C)?C:"",X=!K&&!a,{description:J}=(0,P.eK)({richMetadataDescription:m,richSummaryDisplayName:b,placeSummaryName:S,closeupUnifiedDescription:T}),Q=(0,P.fs)({pinTitle:j,gridTitle:I,richSummaryDisplayName:b,richMetadataTitle:_,storyPinDataId:k,storyPinDataMetadataPinTitle:E,placeSummaryName:S})||A,ee=!G,te=(0,p.jsxs)(d.xu,{padding:5,dangerouslySetInlineStyle:X?{__style:{paddingTop:0,paddingBottom:30}}:void 0,children:[(0,p.jsx)(d.xu,{left:!0,position:"absolute",top:!0,color:"default",padding:4,"data-test-id":"close-seo-vase-see-more-button",children:(0,p.jsx)(d.hU,{accessibilityLabel:B._('Cancel', 'close modal icon', 'close modal icon'),icon:"cancel",size:"sm",onClick:()=>{(0,x.My)("mweb.unauth.see_more.dismissed"),U({action:"click",item:"close-seo-vase-see-more-button"}),$(!1),i&&(0,x.My)("mweb.unauth.see_more.main_pin.dismissed")},iconColor:"gray"})}),(0,p.jsx)(d.xu,{marginBottom:X?0:8,children:(0,p.jsx)(d.xv,{align:X?"start":"center",weight:X?void 0:"bold",children:(0,p.jsx)("span",{className:"deprecatedTextSizeXL",children:X?null:B._('More information', 'more information label', 'more information label')})})}),(0,p.jsx)(f.Z,{description:J,title:Q,pinCreditPrefix:s,onClickTitleOrDomain:c,pinDomain:Y,boardId:R,boardUrl:D,boardName:O,boardPrivacy:L,pinnerFullName:M,pinnerImageSmallUrl:N,pinnerImageLargeUrl:z,pinId:F,graphqlRef:Z})]});return(0,p.jsxs)(d.xu,{right:!0,"data-test-id":"SeoVaseSeeMoreButton",dangerouslySetInlineStyle:{__style:{float:"right"}},children:[(0,p.jsx)(d.hU,{accessibilityLabel:B._('See more', 'more information icon', 'more information icon'),icon:"ellipsis",iconColor:null!=e?e:"gray",size:t||"md",onClick:({event:e})=>{e.stopPropagation(),(0,x.My)("mweb.unauth.see_more.shown"),U({action:"click",item:"seo-vase-see-more-button"}),K||a?($(!0),i&&(0,x.My)("mweb.unauth.see_more.main_pin.shown")):q({pinId:F||"",location:i?"main-pin-more-information":"non-main-pin-more-information",seoPlacementConfig:{description:J,titleText:Q,pinCreditPrefix:s,onClickTitleOrDomain:c,cleanPinDomain:Y,boardId:R,boardUrl:D,boardName:O,boardPrivacy:L,pinnerFullName:M,pinnerImageSmallUrl:N,pinnerImageLargeUrl:z,pinId:F,graphqlRef:Z}})}}),H&&ee?(0,p.jsx)(d.xu,{display:W?"flex":"none",children:te}):(0,p.jsx)(h,{showFullScreenInfo:W,isOpen:W&&!K,interstitialUpsellDismissed:!!V,children:te}),K&&W&&(0,p.jsx)(r.default,{accessibilityModalLabel:"test",onDismiss:()=>{},children:te})]})}function k(e){var t,i,n,o,r,a,s,l,c,d,u,h,m,_,g,v;const f=(0,S.useFragment)(T,e.graphqlRef);return(0,p.jsx)(I,{iconColor:e.iconColor,size:e.size,isAuth:e.isAuth,isMainPin:e.isMainPin,pinCreditPrefix:e.pinCreditPrefix,onClickTitleOrDomain:e.onClickTitleOrDomain,richMetadataDescription:null!==(t=null==f||null===(i=f.richMetadata)||void 0===i?void 0:i.description)&&void 0!==t?t:"",richMetadataTitle:null!==(n=null==f||null===(o=f.richMetadata)||void 0===o?void 0:o.title)&&void 0!==n?n:"",richSummaryDisplayName:null!==(r=null==f||null===(a=f.richSummary)||void 0===a?void 0:a.displayName)&&void 0!==r?r:"",closeupUnifiedDescription:null!==(s=null==f?void 0:f.closeupUnifiedDescription)&&void 0!==s?s:"",gridTitle:null==f?void 0:f.gridTitle,storyPinDataId:null==f?void 0:f.storyPinDataId,storyPinDataMetadataPinTitle:null==f||null===(l=f.storyPinData)||void 0===l||null===(c=l.metadata)||void 0===c?void 0:c.pinTitle,pinDescription:null==f?void 0:f.description,pinDomain:(null==f?void 0:f.domain)||void 0,pinTitle:null==f?void 0:f.title,boardId:null==f||null===(d=f.board)||void 0===d?void 0:d.entityId,boardUrl:(null==f||null===(u=f.board)||void 0===u?void 0:u.url)||void 0,boardName:(null==f||null===(h=f.board)||void 0===h?void 0:h.name)||void 0,boardPrivacy:(null==f||null===(m=f.board)||void 0===m?void 0:m.privacy)||void 0,pinnerFullName:(null==f||null===(_=f.pinner)||void 0===_?void 0:_.fullName)||void 0,pinnerImageSmallUrl:null==f||null===(g=f.pinner)||void 0===g?void 0:g.imageSmallUrl,pinnerImageLargeUrl:null==f||null===(v=f.pinner)||void 0===v?void 0:v.imageLargeUrl,pinId:null==f?void 0:f.entityId,graphqlRef:f})}function E(e){var t,i,n,o,r,a,s,l,c,d,u;const h=(0,b.S6)()(null!==(t=e.pinId)&&void 0!==t?t:""),m=null==h?void 0:h.board,_=null==h?void 0:h.pinner;return(0,p.jsx)(I,{iconColor:e.iconColor,size:e.size,isAuth:e.isAuth,isMainPin:e.isMainPin,pinCreditPrefix:e.pinCreditPrefix,onClickTitleOrDomain:e.onClickTitleOrDomain,richMetadataDescription:null!==(i=null==h||null===(n=h.rich_metadata)||void 0===n?void 0:n.description)&&void 0!==i?i:"",richMetadataTitle:null!==(o=null==h||null===(r=h.rich_metadata)||void 0===r?void 0:r.title)&&void 0!==o?o:"",richSummaryDisplayName:null!==(a=null==h||null===(s=h.rich_summary)||void 0===s?void 0:s.display_name)&&void 0!==a?a:"",placeSummaryName:null!==(l=null==h?void 0:h.place_summary)&&void 0!==l?l:"",closeupUnifiedDescription:null!==(c=null==h?void 0:h.closeup_unified_description)&&void 0!==c?c:"",gridTitle:null==h?void 0:h.grid_title,storyPinDataId:null==h?void 0:h.story_pin_data_id,storyPinDataMetadataPinTitle:null==h||null===(d=h.story_pin_data)||void 0===d||null===(u=d.metadata)||void 0===u?void 0:u.pin_title,pinDescription:null==h?void 0:h.description,pinDomain:null==h?void 0:h.domain,pinTitle:null==h?void 0:h.title,boardId:null==m?void 0:m.id,boardUrl:null==m?void 0:m.url,boardName:null==m?void 0:m.name,boardPrivacy:null==m?void 0:m.privacy,pinnerFullName:null==_?void 0:_.full_name,pinnerImageSmallUrl:null==_?void 0:_.image_small_url,pinnerImageLargeUrl:null==_?void 0:_.image_large_url,pinId:null==h?void 0:h.id})}function A(e){var t,i,n,o,r,a,s,l,c,d,u;const h=(0,b.S6)()(null!==(t=e.pinId)&&void 0!==t?t:""),m=null==h?void 0:h.board,g=null==h?void 0:h.pinner;return(0,_.Z)({name:"PinResource",options:{id:e.pinId,field_set_key:"unauth_ssr_lazy_load"}}),(0,p.jsx)(I,{iconColor:e.iconColor,size:e.size,isAuth:e.isAuth,isMainPin:e.isMainPin,pinCreditPrefix:e.pinCreditPrefix,onClickTitleOrDomain:e.onClickTitleOrDomain,richMetadataDescription:null!==(i=null==h||null===(n=h.rich_metadata)||void 0===n?void 0:n.description)&&void 0!==i?i:"",richMetadataTitle:null!==(o=null==h||null===(r=h.rich_metadata)||void 0===r?void 0:r.title)&&void 0!==o?o:"",richSummaryDisplayName:null!==(a=null==h||null===(s=h.rich_summary)||void 0===s?void 0:s.display_name)&&void 0!==a?a:"",placeSummaryName:null!==(l=null==h?void 0:h.place_summary)&&void 0!==l?l:"",closeupUnifiedDescription:null!==(c=null==h?void 0:h.closeup_unified_description)&&void 0!==c?c:"",gridTitle:null==h?void 0:h.grid_title,storyPinDataId:null==h?void 0:h.story_pin_data_id,storyPinDataMetadataPinTitle:null==h||null===(d=h.story_pin_data)||void 0===d||null===(u=d.metadata)||void 0===u?void 0:u.pin_title,pinDescription:null==h?void 0:h.description,pinDomain:null==h?void 0:h.domain,pinTitle:null==h?void 0:h.title,boardId:null==m?void 0:m.id,boardUrl:null==m?void 0:m.url,boardName:null==m?void 0:m.name,boardPrivacy:null==m?void 0:m.privacy,pinnerFullName:null==g?void 0:g.full_name,pinnerImageSmallUrl:null==g?void 0:g.image_small_url,pinnerImageLargeUrl:null==g?void 0:g.image_large_url,pinId:null==h?void 0:h.id})}function C(e){return e.graphqlRef?(0,p.jsx)(k,{...e}):e.lazyLoadAnnotations?(0,p.jsx)(A,{...e}):(0,p.jsx)(E,{...e})}},2396:(e,t,i)=>{i.d(t,{Z:()=>g});var n=i(667294),o=i(482981),r=i(827021),a=i(121151),s=i(750869),l=i(946984),c=i(883119),d=i(785893);function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const p=new c.Ry(1),h=({children:e})=>e((0,l.Z)());class m extends n.Component{constructor(...e){super(...e),u(this,"handleDismiss",(()=>{const{onFlyoutDismiss:e}=this.props;e()})),u(this,"onHide",(()=>{this.props.onClick(),this.handleDismiss()})),u(this,"flyoutProps",(()=>{var e;const{gridDescription:t,idealDirection:i,imageSrc:n,pinId:a,userId:l,board:c,sendType:u,fullName:p,profileUrl:h,element:m,viewParameter:_,viewType:g,onExternalSend:v,showCaret:f,todayArticle:y,ownerId:x}=this.props;let b={description:t,id:a,imageUrl:n,name:"",type:s.d.PIN,url:`/pin/${a}/`,ownerId:x},w=s.d.PIN;switch(u){case"user":b={description:t,id:l,imageUrl:n,name:p,type:s.d.PINNER,url:h},w=s.d.USER;break;case"board":b=c&&{description:c.description,id:c.id,imageUrl:c.imageUrl,name:c.name,type:s.d.BOARD,url:c.url,ownerId:null===(e=c.owner)||void 0===e?void 0:e.id},w=s.d.BOARD;break;case"today_article":b=y&&{description:y.subtitle||"",id:y.id,imageUrl:n,name:y.title,type:s.d.TODAY_ARTICLE,url:(0,o.Z)(y)},w=s.d.TODAY_ARTICLE}const P={element:m,onHide:this.onHide,onExternalSend:v,sendType:w,sharedObject:b,viewParameter:_,viewType:g};return{anchor:this.flyoutAnchor,idealDirection:i,onDismiss:this.handleDismiss,showCaret:f,children:(0,d.jsx)(r.default,{...P})}}))}toggle(){const{isOwnProfile:e,onToggleFlyout:t,sendType:i,userId:n,logContextEvent:o}=this.props;"user"===i&&o({event_type:101,component:13675,element:1079,object_id_str:n,view_type:4,view_parameter:e?3106:3107}),t()}render(){const{Subject:e,inModal:t,isFlyoutOpen:i,shownWithinMasonry:n,shownWithinProfileHeader:o}=this.props,{anchor:r,idealDirection:s,showCaret:l,children:u}=this.flyoutProps(),m=(0,d.jsx)(c.xu,{children:(0,d.jsx)(h,{children:t=>(0,d.jsx)(e,{handleSendShareFlyoutButtonClick:e=>{t?t():(null!=e&&e.stopPropagation&&e.stopPropagation(),this.toggle())},...this.props})})}),_=i&&(n||o?(0,d.jsx)(c.mh,{zIndex:o?p:void 0,children:(0,d.jsx)(c.xu,{zIndex:t?a.b7:void 0,position:t?"absolute":void 0,top:!!t||void 0,children:(0,d.jsx)(c.J2,{anchor:r,idealDirection:s,onDismiss:()=>{this.handleDismiss()},showCaret:l,size:"flexible",positionRelativeToAnchor:!1,children:u})})}):(0,d.jsx)(c.J2,{anchor:r,idealDirection:s,onDismiss:()=>{this.handleDismiss()},showCaret:l,size:"flexible",children:u}));return(0,d.jsxs)(c.xu,{ref:e=>{e&&(this.flyoutAnchor=e)},dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},children:[m," ",_]})}}u(m,"defaultProps",{idealDirection:"down",onClick:()=>{}});var _=i(112690);function g(e){return t=>{const i=(0,_.Z)();return(0,d.jsx)(m,{Subject:e,logContextEvent:i,...t})}}},17676:(e,t,i)=>{i.d(t,{l:()=>d,E:()=>c});var n=i(667294),o=i(425288);function r(e={},t){if("SUGGESTIONS_FETCH_COMPLETE"===t.type){const{payload:o}=t;if("ShareSuggestionsResource"===o.resource){var i;const n=t.payload.response.resource_response.data||[],{term:r=""}=null!==(i=o.options)&&void 0!==i?i:{};return{...e,[r]:n}}if("ShareSuggestionsTypeaheadResource"===o.resource){var n;const i=(t.payload.response.resource_response.data||{}).items||[],{term:r=""}=null!==(n=o.options)&&void 0!==n?n:{};return{...e,[r]:i}}}return e}var a=i(505920),s=i(785893);const{Provider:l,useHook:c}=(0,o.Z)("ShareSuggestions");function d({children:e}){const[t,i]=(0,n.useReducer)(r,{}),o=e=>{i({type:"SUGGESTIONS_FETCH_COMPLETE",payload:e})};(0,a.Z8)("ShareSuggestionsResource",o),(0,a.Z8)("ShareSuggestionsTypeaheadResource",o);const c=(0,n.useMemo)((()=>({shareSuggestions:t})),[t]);return(0,s.jsx)(l,{value:c,children:e})}},108234:(e,t,i)=>{i.d(t,{Z:()=>g,s:()=>_});var n=i(667294),o=i(121151),r=i(608575),a=i(898781),s=i(349700),l=i(883119),c=i(785893);const d=()=>{var e;const t=(0,a.ZP)(),{dismissWarning:i}=null!==(e=_())&&void 0!==e?e:{};return(0,c.jsx)(l.xu,{paddingX:3,children:(0,c.jsx)(l.zx,{fullWidth:!0,color:"red",onClick:i,text:t._('Okay', 'Dismiss a modal stating that clicking through to a link has been blocked', 'Dismiss a modal stating that clicking through to a link has been blocked')})})},u=()=>{const e=(0,a.ZP)();return(0,c.jsx)(l.xv,{inline:!0,weight:"bold",children:(0,c.jsx)(l.rU,{target:"blank",href:"https://policy.pinterest.com/community-guidelines#section-spam",display:"inlineBlock",underline:"hover",children:e._('Learn more', 'Link text leading to policy website', 'Link text leading to policy website')})})},p=({message:e,sanitized_url:t})=>{var i;const n=(0,a.ZP)(),{dismissWarning:p}=null!==(i=_())&&void 0!==i?i:{};return(0,c.jsx)(o.ZP,{accessibilityModalLabel:n._('We have blocked this link', 'Modal label when clicking a spammy link', 'Modal label when clicking a spammy link'),onDismiss:p,heading:n._('Heads up!', 'Modal heading when clicking through to a link has been blocked', 'Modal heading when clicking through to a link has been blocked'),footer:(0,c.jsx)(d,{}),children:(0,c.jsxs)(l.xu,{padding:6,children:[(0,c.jsx)(l.xv,{children:(0,s.nk)("{{ message }} {{ learnMore }}",{message:e,learnMore:(0,c.jsx)(u,{},"learnMoreLink")})}),(0,c.jsxs)(l.xu,{alignItems:"center",display:"flex",marginTop:4,children:[(0,c.jsx)(l.xu,{marginEnd:3,children:(0,c.jsx)(l.JO,{accessibilityLabel:n._('Blocked link address', 'Icon label preceding a block url', 'Icon label preceding a block url'),color:"error",icon:"report",inline:!0,size:24})}),(0,c.jsx)(l.xv,{inline:!0,lineClamp:1,weight:"bold",children:r.parse(t).hostname})]})]})})};var h=i(425288);const{Provider:m,useMaybeHook:_}=(0,h.Z)("SpammyClickthrough");function g({children:e}){const[t,i]=(0,n.useState)(null),o=(0,n.useCallback)((()=>{i(null)}),[i]),r=(0,n.useCallback)((e=>{i(e)}),[i]),a=(0,n.useMemo)((()=>({dismissWarning:o,showWarning:r})),[o,r]);return(0,c.jsxs)(m,{value:a,children:[t&&(0,c.jsx)(p,{...t}),e]})}},914142:(e,t,i)=>{i.d(t,{Z:()=>c,j:()=>l});var n=i(898781),o=i(883119),r=i(773285),a=i(349700),s=i(785893);const l=[0,2,3];function c({hasAffiliatedProducts:e,isPromoted:t,sponsorName:i,sponsorshipStatus:c,textColor:d}){const u=(0,n.ZP)(),p=(0,r.F)().checkExperiment("mweb_web_android_ios_clbc_eu_ad_string").anyEnabled;let h;t?h=(0,a.nk)(u._('Promoted by {{ name }}', 'sponsorship.sponsorshipText.promotedByBrand', 'indicating the username of the person who promoted the pin'),{name:i}):c||0===c?i&&!l.includes(c)?h=(0,a.nk)(u._('Paid partnership with {{ name }}', 'closeup.creator.sponsoredPinTitle', 'Subtext of closeup creator card when sponsored by a brand'),{name:i}):2!==c&&(h=u._('Paid partnership', 'closeup.creator.sponsoredPinTitle', 'Subtext of closeup creator card when the pin is sponsored but the sponsorship status is rejected/requested/unaffiliated')):e&&(h=u._('Includes sponsored products', 'sponsorship.sponsorshipText.affiliatedProducts', 'Subtext of pincard attribution for a pin with affiliated products'));const m=p&&!t?"Ad • ":"";return(0,s.jsxs)(o.xv,{color:d,size:"100",children:[m,h]})}},202870:(e,t,i)=>{i.d(t,{Z:()=>c,j:()=>l});var n=i(898781),o=i(349700),r=i(773285),a=i(883119),s=i(785893);const l=[0,2,3];function c({hasAffiliateProducts:e,href:t,isPromoted:i,onNavigateSponsorClick:c,sponsorName:d,sponsorUsername:u,sponsorshipStatus:p,textWeight:h="bold"}){const m=(0,n.ZP)(),_=(0,r.F)().checkExperiment("mweb_web_android_ios_clbc_eu_ad_string").anyEnabled,g=(0,r.F)().checkExperiment("web_remove_paid_partnership_in_rejected_state").anyEnabled,v=t||(u?`/${u}/`:null),f=v&&d?(0,s.jsx)(a.rU,{href:v,onClick:c,children:(0,s.jsx)(a.xv,{weight:h,size:"200",children:d})},d):void 0;let y;i?y=(0,o.nk)(m._('Promoted by {{ name }}', 'sponsorship.sponsorshipText.promotedByBrand', 'indicating the username of the person who promoted the pin'),{name:f}):p||0===p?d&&!l.includes(p)?y=(0,o.nk)(m._('Paid partnership with {{ name }}', 'closeup.creator.sponsoredPinTitle', 'Subtext of closeup creator card when sponsored by a brand'),{name:f}):g&&2===p||(y=m._('Paid partnership', 'closeup.creator.sponsoredPinTitle', 'Subtext of closeup creator card when the pin is sponsored but the sponsorship status is rejected/requested/unaffiliated')):e&&(y=m._('Includes sponsored products', 'sponsorship.sponsorshipText.affiliatedProducts', 'Subtext of pincard attribution for a pin with affiliated products'));const x=_&&!i?"Ad • ":"";return(0,s.jsxs)(a.xv,{inline:!0,size:"200",lineClamp:2,children:[x,y]})}},629377:(e,t,i)=>{i.d(t,{k:()=>d,b:()=>c});var n=i(667294),o=i(425288);const r={selectedStelaItem:null};function a(e=r,t){switch(t.type){case"STELA_SELECT":return{...e,selectedStelaItem:t.payload.selectedStelaItem};default:return e}}var s=i(785893);const{Provider:l,useHook:c}=(0,o.Z)("Stela");function d({children:e}){const[t,i]=(0,n.useReducer)(a,r),o=(0,n.useCallback)((({selectedStelaItem:e})=>{i({type:"STELA_SELECT",payload:{selectedStelaItem:e}})}),[]),c=(0,n.useMemo)((()=>({stela:t,selectStela:o})),[t,o]);return(0,s.jsx)(l,{value:c,children:e})}},982828:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(667294),o=i(700380),r=i(883119),a=i(313047),s=i(785893);function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class c extends n.PureComponent{constructor(...e){super(...e),l(this,"onScroll",(0,o.Z)((e=>{if(this.anchorElement){const e=this.anchorElement.offsetTop+this.anchorElement.offsetHeight;window.scrollY>e&&!this.hasExited?(this.hasExited=!0,this.props.onExit()):window.scrollY<=e&&this.hasExited&&(this.hasExited=!1,this.props.onEnter());const{isOnView:n}=this;var t,i;if(n())null===(t=(i=this.props).onView)||void 0===t||t.call(i)}}),this.props.throttleTime||100)),l(this,"wasViewed",(()=>{var e;const t=null===(e=this.anchorElement)||void 0===e?void 0:e.getBoundingClientRect();return!!t&&t.top<=a.DEFAULT_HEIGHT})),l(this,"isOnView",(()=>{var e;const t=null===(e=this.anchorElement)||void 0===e?void 0:e.getBoundingClientRect();return!!t&&(t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||window.height)-150&&t.right<=(window.innerWidth||window.width))})),l(this,"hasExited",!1)}componentDidMount(){window.addEventListener("scroll",this.onScroll)}componentWillUnmount(){window.removeEventListener("scroll",this.onScroll)}render(){const{children:e}=this.props;return(0,s.jsx)(r.xu,{ref:e=>{var t,i;(this.anchorElement=e,this.anchorElement&&this.wasViewed())&&(null===(t=(i=this.props).onView)||void 0===t||t.call(i))},children:e})}}const d=c},640064:(e,t,i)=>{i.d(t,{f:()=>s,w:()=>l});var n=i(667294),o=i(425288),r=i(785893);const{Provider:a,useHook:s}=(0,o.Z)("Session");function l({children:e}){const[t,i]=(0,n.useState)(void 0),o=(0,n.useCallback)((()=>i(void 0)),[]),s=(0,n.useMemo)((()=>({unauthFollowUserId:t,setUnauthFollowUserId:i,removeUnauthFollowUserId:o})),[t,o]);return(0,r.jsx)(a,{value:s,children:e})}},394332:(e,t,i)=>{i.d(t,{Z:()=>b});var n,o=i(667294),r=i(391254),a=i(941646),s=i(862193),l=i(898781),c=i(52022),d=i(992750),u=i(350118),p=i(883119),h=i(167912),m=i(785893);const _=void 0!==n?n:n=i(85934);function g({direction:e,handleClick:t,testId:i}){const n=(0,l.ZP)(),o=(0,c.Z)();return(0,m.jsx)("div",{style:{alignItems:"center",background:`linear-gradient(to ${"left"===e?"right":"left"}, rgba(255,255,255,1) 25%,rgba(255,255,255,0) 100%)`,border:"none",cursor:"pointer",display:"flex",height:30,lineHeight:25,outline:"none",paddingBottom:4,paddingTop:4,position:"absolute",top:0,width:45,..."right"===e?{right:0,justifyContent:"flex-end",textAlign:"right"}:{left:0}},onClick:e=>{o({action:"click",item:"board-pills-arrow"}),t(e)},role:"button","aria-label":"arrow",tabIndex:-1,"aria-hidden":"true","data-test-id":i,children:(0,m.jsx)(a.Z,{id:"board-pills-arrow",children:(0,m.jsx)(p.JO,{accessibilityLabel:n._('Scroll', 'annotations.scrollArrow', 'Accessibility label for scroll arrow button'),icon:"right"===e?"arrow-forward":"arrow-back",size:8,color:"subtle"})})})}function v({name:e,url:t}){const[i,n]=(0,o.useState)(!1),r=(0,c.Z)();return(0,m.jsx)(p.xu,{"data-test-id":"vase-tag",display:"inlineBlock",marginTop:1,marginEnd:1,paddingX:2,paddingY:1,height:26,color:"secondary",rounding:8,dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:(0,m.jsx)(p.xv,{color:i?"subtle":"default",inline:!0,overflow:"breakWord",size:"100",weight:"bold",children:t?(0,m.jsx)(p.rU,{display:"inlineBlock",tapStyle:"compress",href:t,rounding:8,onClick:()=>{r({action:"click",item:"vase-tag"})},underline:"hover",children:e}):e})})}function f({pinJoinVisualAnnotation:e,pinJoinAnnotationsWithLinks:t,mode:i}){const[n,s]=(0,o.useState)(!1),[l,u]=(0,o.useState)(!1),h=(0,c.Z)(),_=(0,o.useRef)(null);(0,o.useEffect)((()=>{const e=_.current,t=()=>{if("inlineWithScrollArrows"===i&&_.current){const e=_.current,t=Math.max(0,e.scrollLeft),i=t+e.clientWidth;s(0!==t),u(i<e.scrollWidth)}else s(!1),u(!1)};return t(),null==e||e.addEventListener("scroll",t),()=>{null==e||e.removeEventListener("scroll",t)}}),[i]);const f=e=>t=>{t.preventDefault(),t.stopPropagation(),"right"===e&&h({action:"click",item:"board-pills-arrow-button-right"});const i=_.current;if(!i)return;const n=("left"===e?-1:1)*i.clientWidth*.5;i.scrollLeft=Math.min(Math.max(i.scrollLeft+n,0),i.scrollWidth)},{annotationsWithLinks:y}=(0,d.eK)({pinJoinVisualAnnotation:e,pinJoinAnnotationsWithLinks:t});return(0,m.jsx)(p.kC,{alignItems:"center",justifyContent:"end",children:(0,m.jsxs)(p.xu,{display:"flex",overflow:"auto",width:"100%",position:"relative","data-test-id":"vase-carousel",children:[(0,m.jsx)(r.Z,{unsafeCSS:"\n::-webkit-scrollbar {\n  display: none;\n}\n"}),n&&(0,m.jsx)(g,{direction:"left",handleClick:f("left"),testId:"left-scroll-arrow"}),(0,m.jsx)(p.xu,{overflow:"auto",padding:0,dangerouslySetInlineStyle:{__style:{scrollBehavior:"smooth",scrollbarWidth:"none",whiteSpace:"nowrap"}},ref:_,children:y.map((({name:e,url:t})=>(0,m.jsx)(v,{name:e,url:t},t||e)))}),l&&(0,m.jsx)(a.Z,{id:"board-pills-arrow-button-right",children:(0,m.jsx)(g,{direction:"right",handleClick:f("right"),testId:"right-scroll-arrow"})})]})})}function y(e){var t;const i=(0,h.useFragment)(_,e.graphqlRef),n=(0,s.Z)(i),o=(null==i||null===(t=i.pinJoin)||void 0===t?void 0:t.visualAnnotation)||[];return o.length<1?null:(0,m.jsx)(f,{mode:e.mode,pinJoinVisualAnnotation:o,pinJoinAnnotationsWithLinks:n||void 0})}function x(e){var t,i,n;const o=(0,u.S6)()(e.pinId||"");return((null==o||null===(t=o.pin_join)||void 0===t?void 0:t.visual_annotation)||[]).length<1?null:(0,m.jsx)(f,{mode:e.mode,pinJoinVisualAnnotation:null==o||null===(i=o.pin_join)||void 0===i?void 0:i.visual_annotation,pinJoinAnnotationsWithLinks:null==o||null===(n=o.pin_join)||void 0===n?void 0:n.annotations_with_links})}function b(e){return e.graphqlRef?(0,m.jsx)(y,{...e}):(0,m.jsx)(x,{...e})}},385801:(e,t,i)=>{i.d(t,{Z:()=>x});var n=i(667294),o=i(927104),r=i(941646),a=i(52022),s=i(867820),l=i(50286),c=i(883119),d=i(785893);function u({boardUrl:e,boardName:t,boardPrivacy:i,pinnerFullName:n,pinnerImageSmallUrl:o,pinnerImageLargeUrl:u}){const p=(0,l.HG)(),h=(0,a.Z)();if(!e||!t)return null;const m=e.split("/")[1],_=n||m,g=o||u;return(0,d.jsxs)(c.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",children:[g?(0,d.jsx)(c.iP,{role:"link",href:`/${m}/`,fullWidth:!1,tapStyle:"compress",onTap:()=>{(0,s.My)(`pcons.${p?"desktop":"mobile"}.see-more-button-creator`),h({action:"click",item:"see-more-button-creator"})},children:(0,d.jsx)(c.xu,{rounding:"circle",width:32,height:32,overflow:"hidden",marginEnd:2,"data-test-id":"see-more-button-creator",children:(0,d.jsx)(c.Ee,{naturalHeight:32,naturalWidth:32,alt:_,fit:"cover",color:"rgb(231, 186, 176)",src:g})})},"profile-link"):null,(0,d.jsxs)(c.kC,{alignItems:"stretch",direction:"column",justifyContent:"center",children:[(0,d.jsx)(r.Z,{id:"see-more-button-creator-full-name",children:(0,d.jsx)(c.iP,{onTap:()=>{(0,s.My)(`pcons.${p?"desktop":"mobile"}.see-more-button-creator-full-name`),h({action:"click",item:"see-more-button-creator-full-name"})},children:(0,d.jsx)(c.xv,{color:"default",inline:!0,size:"100",weight:"bold",children:(0,d.jsx)(c.rU,{href:`/${m}/`,display:"inlineBlock",tapStyle:"compress",underline:"hover",children:_},"profile-link")},"profileLink")})}),"protected"===i?null:(0,d.jsx)(c.xv,{color:"default",inline:!0,size:"100",children:(0,d.jsx)(c.rU,{href:null!=e?e:"",display:"inlineBlock",tapStyle:"compress",underline:"hover",children:null!=t?t:""},"board-link")},"boardLink")]})]})}var p,h=i(898781),m=i(394332),_=i(349700),g=i(780280),v=i(298024),f=i(167912);const y=void 0!==p?p:p=i(877821);function x({onClickTitleOrDomain:e,title:t,description:i,pinId:r,graphqlRef:p,pinCreditPrefix:x,pinDomain:b,boardId:w,boardUrl:P,boardName:S,boardPrivacy:T,pinnerFullName:I,pinnerImageSmallUrl:k,pinnerImageLargeUrl:E}){const A=(0,h.ZP)(),C=(0,l.ml)(),j=(0,l.Wb)(),{isAuthenticated:R,isBot:D}=(0,g.B)(),O=(0,a.Z)(),L=(0,f.useFragment)(y,p),M=!R&&!D&&C,N=e||null,[z,F]=(0,n.useState)(!1),Z=(0,v.si)(),B=(0,v.Re)(),U=(t||"").length>B,H=i.length>Z,[V,W]=(0,n.useState)(!H&&!U);return(0,d.jsxs)(c.xu,{children:[(0,d.jsxs)(c.xu,{children:[(0,d.jsxs)(c.xu,{as:"figcaption",paddingX:j?11:0,children:[(0,d.jsx)(c.X6,{color:"default",size:"300",accessibilityLevel:3,children:z||D?t:(0,o.Z)(t||"",B)}),!!t&&(0,d.jsx)(c.xu,{height:i?8:0}),i&&(H||U)?(0,d.jsxs)(c.iP,{onTap:()=>{z||R||((0,s.NC)("click_open_description_in_sheet"),O({action:"click",item:"more-description-in-sheet"})),W(!V),F(!z)},fullWidth:!1,children:[(0,d.jsx)(c.xv,{color:"default",size:"200",inline:!0,children:z||D?i:(0,o.Z)(i,Z)}),(0,d.jsx)(c.xu,{display:"inlineBlock",paddingX:1,children:(0,d.jsx)(c.xv,{weight:"bold",size:"200",inline:!0,children:z||D?A._('Less', 'Toggle less description button', 'Toggle less description button'):A._('More', 'Toggle more description button', 'Toggle more description button')})})]}):(0,d.jsx)(c.xv,{color:"default",size:"200",inline:!0,children:i})]}),M&&(V||D)&&!!b&&(0,d.jsx)(c.xu,{marginTop:2,children:(0,d.jsx)(c.kC,{alignItems:"center",direction:"row",width:"100%",children:(0,_.nk)(A._('{{ pinCreditPrefix }} {{ pinCredit }}', 'tells the user where the pin is from in the form of Saved from website', 'tells the user where the pin is from in the form of Saved from website'),{pinCreditPrefix:(0,d.jsx)(c.xu,{display:"inlineBlock",children:(0,d.jsx)(c.xv,{inline:!0,size:"200",children:x})},"pinCreditsPrefix"),pinCredit:(0,d.jsx)(c.xu,{display:"inlineBlock",marginStart:1,maxWidth:"60vw","data-test-id":"pin-domain-link",children:(0,d.jsx)(c.iP,{onTap:({event:e})=>{e.preventDefault(),e.stopPropagation(),O({action:"click",item:"pin-domain-link"}),(0,s.My)("mweb_pin_page.pin_link.clickthrouh"),R||(0,s.NC)("click_pin_closeup_link_clickthrough"),N&&N()},tapStyle:"compress",children:(0,d.jsx)(c.xv,{size:"200",lineClamp:1,children:(0,d.jsx)("span",{style:{textDecoration:"underline"},children:b})},"pinLinkDomain")})},"pinCredits")})})})]}),!!w&&(V||D)&&(0,d.jsx)(c.xu,{marginTop:4,children:(0,d.jsx)(u,{boardUrl:P,boardName:S,boardPrivacy:T,pinnerFullName:I,pinnerImageSmallUrl:k,pinnerImageLargeUrl:E})}),(0,d.jsx)(c.xu,{marginTop:4,children:(0,d.jsx)(m.Z,{pinId:r,mode:"expanded",graphqlRef:L})})]})}},156637:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(667294),o=i(618446),r=i.n(o),a=i(999023),s=i(385740),l=i(785893);class c extends n.Component{componentDidMount(){const{setCurrentPageData:e,viewData:t,viewParameter:i,viewType:n}=this.props;e({viewData:t,viewParameter:i,viewType:n})}componentDidUpdate(e){const{setCurrentPageData:t,viewData:i,viewParameter:n,viewType:o}=this.props;n===e.viewParameter&&o===e.viewType&&r()(i,e.viewData)||t({viewData:i,viewParameter:n,viewType:o})}componentWillUnmount(){this.props.clearCurrentPageData()}render(){const{auxData:e,children:t,component:i,objectIdStr:n,viewData:o,viewParameter:r,viewType:s,clientTrackingParams:c}=this.props;return(0,l.jsx)(a.Z,{auxData:e,component:i,objectIdStr:n,clientTrackingParams:c,viewData:o,viewParameter:r,viewType:s,children:t})}}function d(e){const{setViewContextData:t,clearViewContextData:i}=(0,s.sV)();return(0,l.jsx)(c,{...e,clearCurrentPageData:i,setCurrentPageData:t})}},598615:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(667294),o=i(329900),r=i(938917),a=i(53987),s=i(407043),l=i(385740),c=i(52022),d=i(867820),u=i(276775),p=i(785893);function h({children:e,componentType:t,within:i}){const h=(0,u.useLocation)(),{flushContextEvents:m,logContextEvent:_}=(0,s.v)(),{viewType:g,viewParameter:v}=(0,l.SU)(),f=(0,c.Z)();(0,n.useEffect)((()=>{f({action:"view",item:"download-button",within:i})}),[h,i,f]);const y=(0,n.useRef)(!1);(0,n.useEffect)((()=>{g&&(_({component:t||13106,element:10308,event_type:9976,view_type:g||32,view_parameter:v,aux_data:{app_upsell_type:i,app_upsell_is_dupe:y.current}}),y.current=!0)}),[t,_,v,g,i]);const x=(0,r.Z)();return(0,n.useEffect)((()=>{x||(0,d.My)(`mweb.app_upsell.forbidden_upsell.${i}`)}),[x,i]),(0,p.jsx)(o.Z,{children:n=>e({handleOpenApp:e=>{var o;(f({action:"click",item:"download-button",within:i}),(0,d.NC)("press_open_app",!0),_({component:t||13106,element:10308,event_type:102,view_type:g||32,view_parameter:v,aux_data:{app_upsell_type:i}}),_({component:t||13106,element:10308,event_type:9977,view_type:g||32,view_parameter:v,aux_data:{app_upsell_type:i}}),m(!0),n)&&(_({component:t||13106,element:10308,event_type:1701,view_type:g||32,view_parameter:v,aux_data:{app_upsell_type:i}}),n(null!==(o=null==e?void 0:e.deepLinkUri)&&void 0!==o?o:(e=>"/"===e.pathname?"/":(0,a.am)(e)?`board/${e.pathname.substr(1)}`:e.pathname.substr(1))(h)))}})})}},296679:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(821997),o=i(430322),r=i(898781),a=i(287072),s=i(948376),l=i(50286),c=i(780280),d=i(664166),u=i(883119),p=i(785893);const h=({isOpen:e,onDismiss:t,onOpenInApp:i,to:d})=>{const h=(0,r.ZP)(),m=(0,l.Wb)(),{userAgent:{platform:_,raw:g}}=(0,c.B)(),v=(0,s.Rp)({platform:_,userAgent:g}),f=(0,a.Z)({href:null!=d?d:""}),y=m?60:40;return(0,p.jsx)(o.default,{accessibilityModalLabel:"",isOpen:e,mobileHideCloseIcon:!0,type:"app_upsell_v1",overrideZDepth:101,closeOnOutsideClick:!1,onDismiss:()=>{},children:(0,p.jsxs)(u.xu,{padding:3,"data-test-id":"appUpsell-iframe",children:[(0,p.jsx)(u.xu,{display:"inlineBlock",position:"absolute",children:(0,p.jsx)(u.xu,{"data-test-id":"appUpsell-continue",children:(0,p.jsx)(u.hU,{accessibilityLabel:h._('close icon background', 'accesibility label for close icon on a overlay', 'accesibility label for close icon on a overlay'),icon:"cancel",onClick:({event:e,dangerouslyDisableOnNavigation:i})=>{t({event:e}),f&&!e.defaultPrevented&&(i(),f({event:e}))},size:"lg",iconColor:"gray"})})}),(0,p.jsxs)(u.xu,{paddingX:2,paddingY:6,children:[(0,p.jsx)(u.xu,{paddingY:2,justifyContent:"center",display:"flex",children:v?(0,p.jsx)(n.Z,{size:y}):(0,p.jsx)(u.JO,{color:"brandPrimary",icon:"pinterest",accessibilityLabel:"Pinterest App",size:y})}),(0,p.jsxs)(u.kC,{alignItems:"stretch",direction:"column",justifyContent:"center",children:[(0,p.jsx)(u.xu,{paddingY:2,children:(0,p.jsx)(u.X6,{align:"center",size:"400",children:v?h._('Try Pinterest Lite', 'mweb.app_upsell.lite_app_upsell_title', 'Mobile Web App Upsell title informing the value of downloading the lite app'):h._('The best experience is on the app', 'mweb.unauth.app_upsell.app_value_prop', 'Mobile Web App Upsell title on Pin click informing the value of downloading an pp')})}),(0,p.jsx)(u.xv,{align:"center",size:"300",children:v?h._('A space-saving way to discover new ideas', 'mweb.app_upsell.lite_app_value_prop', 'Mobile Web App Upsell subheading informing the user the value of downloading the lite app'):h._('Free, unlimited access to ideas', 'mweb.app_upsell.lite_app_value_prop', 'Value proposition on mobile web home page')}),(0,p.jsx)(u.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{display:"grid"}},justifyContent:"center",marginTop:8,children:(0,p.jsx)(u.zx,{fullWidth:!0,size:"lg",color:"red",onClick:i,text:h._('Get the app', 'mweb.app_upsell.app_upsell_button_text', 'Button to get the Pinterest Lite app')})})]})]})]})})};function m({clientTrackingParams:e,isOpen:t,onDismiss:i,onOpenInApp:n,shouldTrackDismiss:o,to:r,viewParameter:a,viewType:s}){return(0,p.jsx)(d.Z,{clientTrackingParams:e,viewType:s,viewParameter:a,children:(0,p.jsx)(h,{isOpen:t,onDismiss:e=>{o&&(0,d.y)(),i(e)},onOpenInApp:()=>{(0,d.y)(),n()},to:r})})}},664166:(e,t,i)=>{i.d(t,{Z:()=>u,y:()=>d});var n=i(667294),o=i(807609),r=i(999023),a=i(30287),s=i(622096),l=i(957161),c=i(785893);const d=()=>{(0,l.Nh)("appUpsell",Date.now()),(0,l.qn)("firstUpsellTime")||(0,l.Nh)("firstUpsellTime",Date.now()),(0,s.Nh)("showedAppUpsellCurrentSession",!0)};function u({children:e,clientTrackingParams:t,viewParameter:i,viewType:s}){return(0,o.Z)()||(0,a.FP)(window)?null:(0,c.jsx)(r.Z,{viewType:s,viewParameter:i,component:13106,clientTrackingParams:t,children:(0,c.jsx)(n.Fragment,{children:e})})}},236617:(e,t,i)=>{i.d(t,{G:()=>l,L:()=>s});var n=i(667294),o=i(425288),r=i(785893);const{Provider:a,useHook:s}=(0,o.Z)("AppUpsell");function l({children:e}){const[t,i]=(0,n.useState)(""),[o,s]=(0,n.useState)(!1),[l,c]=(0,n.useState)(!1),d=(0,n.useCallback)((e=>{i(e)}),[]),u=(0,n.useCallback)((e=>{s(e)}),[]),p=(0,n.useCallback)((e=>{c(e)}),[]),h=(0,n.useMemo)((()=>({type:t,setTypeVal:d,appUpsellFooterScrollDismissed:o,setAppUpsellFooterScrollDismissedVal:u,showLearningRelatedPinAppUpsell:l,setShowLearningRelatedPinAppUpsellVal:p})),[t,d,o,u,l,p]);return(0,r.jsx)(a,{value:h,children:e})}},938917:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(702664);const o=()=>(0,n.useSelector)((({session:{canUseNativeApp:e}})=>e))},80811:(e,t,i)=>{i.d(t,{Z:()=>w});var n=i(667294),o=i(948618),r=i(815613),a=i(298361),s=i(112690),l=i(892819),c=i(19121),d=i(349700),u=i(867820),p=i(773285),h=i(50286),m=i(758127),_=i(722556),g=i(898781),v=i(883119),f=i(526760),y=i(785893);function x(e,t){const{full_name:i,username:n}=e,o=(0,y.jsx)(v.rU,{href:`/${n}`,display:"inlineBlock",underline:"hover",children:i});return(0,d.nk)(t._('{{ linkToUser }} invited you to join this board', 'boardRep.invite.invitationText', 'Indicating that another user invited the viewer to this board'),{linkToUser:o})}const b=({children:e})=>{const t=(0,c.Z)(),i=(0,h.HG)(),n=t&&t.isAuth;return i&&n?(0,y.jsx)(v.X6,{accessibilityLevel:2,size:"400",lineClamp:1,children:e}):(0,y.jsx)(v.xv,{lineClamp:1,weight:"bold",children:e})};function w({archivedDate:e,boardUrl:t,canEdit:i,collaborators:c,collaboratorsCount:w=0,containerBackgroundColor:P,coverPhoto:S,followedByMe:T,fullSizeDrawer:I,sensitivityScreen:k,handleInviteResponse:E,hideMeta:A,id:C,invite:j,imagesLego:R=[],isBoardInviteAccepted:D,isActive:O,isAuthenticated:L,isCollaborative:M,isCollaborator:N,isOwner:z,isSecret:F,lastModifiedDate:Z,layout:B,locale:U,name:H,numCols:V,onEditClick:W,onFollow:$,onUnfollow:G,owner:K,pinCount:q=0,sectionCount:Y,showFollowButton:X,viewParameter:J,viewType:Q,viewerId:ee}){const te=(0,g.ZP)(),ie=(0,a.Z)(),ne=(0,l.Z)(),oe=(0,s.Z)(),re=(0,h.HG)(),ae=re&&L,se="square"===B?f.M0:f.z9,le=R.map((e=>({url:e.url,name:H}))),ce=!!K&&!i&&X,{checkExperiment:de}=(0,p.F)(),ue=!z&&!N&&de("mweb_board_sensitivity_screen").anyEnabled,pe=!(null==k||!k.show_warning)&&ue,he={board_id:C,reason:null==k?void 0:k.reason};(0,n.useEffect)((()=>{pe&&oe({event_type:13,component:13861,view_type:215,aux_data:he})}),[]);const me=K?K.id:void 0,_e=[...c.filter((({id:e})=>e===me)),...c.filter((({id:e})=>e===ee&&e!==me)),...c.filter((({id:e})=>![me,ee].includes(e)))].map((e=>{var t,i;return{name:null!==(t=ae?e.full_name:e.username)&&void 0!==t?t:"",src:"https://s.pinimg.com/images/user/default_75.png"===e.image_medium_url?"":null!==(i=e.image_medium_url)&&void 0!==i?i:""}}));let ge=w>=_e.length?w-_e.length:0;ge=ge>99?100:ge;const ve=[..._e,...Array(ge).fill({name:"",src:""})],fe=ae?24:16,ye=fe/3*(2*(_e.length>2?3:_e.length)+1);return(0,y.jsxs)(v.xu,{"data-test-id":`boardCard-${H}`,position:"relative",height:ce?"max(calc(25vh + 10px), 220px)":"100%",width:ae?se:"100%",children:[(0,y.jsx)(_.Z,{canEdit:i,containerBackgroundColor:P,coverPhoto:S,images:le,isSecret:F,fullSize:I,showSensitivityScreen:pe,isActive:O,onEditClick:W,layout:B}),!A&&(0,y.jsx)(n.Fragment,{children:j?(0,y.jsxs)(n.Fragment,{children:[(0,y.jsxs)(v.xu,{padding:2,alignItems:"start","data-test-id":"board-card-title",display:"flex",flex:"grow",justifyContent:"between",children:[(0,y.jsxs)(v.xu,{width:"100%",children:[(0,y.jsx)(v.rU,{href:null!=t?t:"",children:(0,y.jsx)(v.xu,{marginTop:0,marginBottom:1,children:(0,y.jsx)(b,{children:H})})}),D?(0,y.jsx)(v.xv,{size:"200",lineClamp:1,children:te._('You\u2019ve joined', 'boardRep.invite.invitationAcceptedText', 'Text shown after accepting collaborator board invitations')}):(0,y.jsx)(v.xv,{size:"200",children:x(j.invited_by_user,te)})]}),(0,y.jsx)(v.xu,{dangerouslySetInlineStyle:{__style:{marginTop:-1}},marginStart:2,width:ye,minWidth:ye,height:fe,children:(0,y.jsx)(v.HE,{accessibilityLabel:m.U+(te._('Board has collaborators', 'BoardCard.AvatarGroup.Collaborators', 'Board description: title, number of pins, date, and it has collaborators or not.')),collaborators:ve})})]}),D?(0,y.jsx)(v.xu,{direction:"row",display:"flex",paddingX:2,children:(0,y.jsx)(v.xu,{flex:"grow",marginBottom:3,paddingX:1,children:(0,y.jsx)(v.zx,{role:"link",href:null!=t?t:"",fullWidth:!0,size:"lg",text:te._('See board', 'boardRep.invite.seeBoardButton', 'Button text to see board after accepting collaborator invite')})})}):(0,y.jsxs)(v.kC,{direction:"row",flex:"grow",justifyContent:"start",wrap:!0,children:[(0,y.jsx)(v.xu,{marginBottom:3,paddingX:1,flex:"grow",children:(0,y.jsx)(v.zx,{fullWidth:!0,onClick:()=>{null==E||E(!1)},size:"lg",text:te._('Decline', 'boardRep.invite.declineButton', 'Button text to decline board collaborator invite or request')})}),(0,y.jsx)(v.xu,{marginBottom:3,paddingX:1,flex:"grow",children:(0,y.jsx)(v.zx,{fullWidth:!0,color:"red",onClick:()=>{null==E||E(!0)},size:"lg",text:te._('Accept', 'boardRep.invite.acceptButton', 'Button text to accept board collaborator invite or request')})})]})]}):(0,y.jsxs)(v.xu,{height:ae?void 0:f.s0,marginTop:ae?0:1,paddingX:2,paddingY:ae?2:0,children:[(0,y.jsxs)(v.xu,{alignItems:"center","data-test-id":"board-card-title",display:"flex",flex:"grow",justifyContent:"between",children:[(0,y.jsx)(b,{children:H}),M&&(0,y.jsx)(v.xu,{dangerouslySetInlineStyle:{__style:{marginTop:-1}},marginStart:2,width:ye,minWidth:ye,height:fe,children:(0,y.jsx)(v.HE,{accessibilityLabel:m.U+(te._('Board has collaborators', 'BoardCard.AvatarGroup.Collaborators', 'Board description: title, number of pins, date, and it has collaborators or not.')),collaborators:ve})})]}),(0,y.jsxs)(v.xu,{alignItems:re?"center":"start",direction:re?"row":"column",display:"flex",marginTop:1,children:[(0,y.jsxs)(v.xv,{size:"100",lineClamp:1,children:[(0,y.jsx)(m.Z,{}),(0,d.nk)(te.ngettext('{{ count }} Pin', '{{ count }} Pins', q, 'profile.ProfilePage.board.BoardCard.PinsCount', 'label for n amount of pins'),{count:ne(U,q,{})}),!!Y&&(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(o.Z,{ariaHidden:!0}),(0,y.jsx)(m.Z,{}),(0,d.nk)(te.ngettext('{{ count }} section', '{{ count }} sections', Y, 'profile.ProfilePage.board.BoardCard.SectionsCount', 'label for n amount of sections'),{count:Y})]})]}),!e&&(0,y.jsx)(v.xu,{dangerouslySetInlineStyle:{__style:{display:ae?"inline-flex":"inline",paddingLeft:re?7:0}},children:(0,y.jsxs)(v.xv,{color:"subtle",inline:!0,size:"100",lineClamp:1,children:[(0,y.jsx)(m.Z,{}),ie(Z,!0)]})})]}),!!e&&(0,y.jsxs)(v.xu,{marginTop:1,children:[(0,y.jsx)(m.Z,{}),(0,y.jsx)(v.xv,{color:"subtle",size:"100",lineClamp:1,children:te._('Archived', 'profile.ProfilePage.board.BoardCard.ArchivedBoardText', 'subtitle for archived boards on profile page')})]}),ce&&(0,y.jsx)(v.xu,{marginTop:2===V?3:void 0,column:2===V?12:void 0,flex:"none",children:(0,y.jsx)(r.Z,{disabled:null==K?void 0:K.blocked_by_me,followEventType:26,id:C,isFollowed:T,onFollow:e=>{L||(0,u.NC)("press_follow_board"),$&&$(e)},onUnfollow:e=>{L||(0,u.NC)("press_unfollow_board"),G&&G(e)},shouldUseLegoColors:!0,size:"md",unfollowEventType:27,viewParameter:J,viewType:Q})})]})})]})}},223019:(e,t,i)=>{i.d(t,{Z:()=>g});var n=i(702664),o=i(80811),r=i(340494),a=i(52022),s=i(19121),l=i(867820),c=i(130460),d=i(780280),u=i(883119),p=i(712055),h=i(853492),m=i(785893);const _=["thumbnail","imageOnly"];function g({boardId:e,containerBackgroundColor:t,forwardedRef:i,fullSize:g,showFollowButton:v=!0,showPinCount:f=!0,type:y,viewParameter:x,viewType:b}){var w,P,S;const T=(0,s.Z)(),I=T&&T.isAuth,k=(0,n.useDispatch)(),{locale:E}=(0,d.B)(),A=(0,a.Z)(),C=(0,c.gC)()(e),j=(0,r.Z)(),R=T.isAuth?T.id:"";if(!C)return null;const D=C.owner,O=[D,...C.collaborating_users||[]].filter(Boolean).map((({id:e,image_medium_url:t,username:i})=>({id:e,image_medium_url:t,username:i}))),L=(null==D?void 0:D.id)===R,M=O.filter((({id:e})=>e===R)).length>0;if("secret"===C.privacy&&!M)return null;const N="grid"===y||"thumbnail"===y?2:4,z=j(C,N),F={isCustom:C.has_custom_cover,url:z,position:(0,h.Bw)(C.cover_pin)},Z=(0,h.Jx)(C,z).map((({url:e})=>({name:(0,h.po)(e),url:e}))),B=(0,m.jsx)(o.Z,{archivedDate:null!==(w=C.archived_by_me_at)&&void 0!==w?w:void 0,canEdit:!!C.access&&C.access.includes("write"),collaborators:O,collaboratorsCount:C.collaborator_count,containerBackgroundColor:t,coverPhoto:z?F:null,followedByMe:C.followed_by_me,fullSizeDrawer:g,hideMeta:_.includes(y),id:C.id,imagesLego:Z,isAuthenticated:I,isCollaborative:C.is_collaborative,isCollaborator:M,isOwner:L,isSecret:"secret"===C.privacy,lastModifiedDate:"full"===y?C.board_order_modified_at:"",locale:E,name:null!==(P=C.name)&&void 0!==P?P:"",numCols:N,onFollow:e=>k((0,p.Z)(e)),onUnfollow:e=>k((0,p.f)(e)),owner:D,pinCount:f&&C.pin_count?C.pin_count:void 0,sectionCount:null!==(S=C.section_count)&&void 0!==S?S:0,sensitivityScreen:C.sensitivity_screen,showFollowButton:v,viewParameter:x,viewType:b,viewerId:R});return!_.includes(y)&&C.url?(0,m.jsx)(u.iP,{role:"link",href:C.url,rounding:2,tapStyle:"compress",onTap:()=>{I||((0,l.NC)("click_go_to_board"),A({action:"click",item:"board-card"}))},children:(0,m.jsx)(u.xu,{ref:i,paddingY:3,children:B})}):B}},686844:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(883119),o=i(785893);function r({customCover:e,height:t,imgUrl:i,imgPos:r,width:a}){const s=t/a;let l="center center";if(e&&r){let e=1;e=r.height/r.width>s?a/r.width:t/r.height;l=`-${r.x*e}px -${r.y*e}px`}const c={backgroundImage:`url(${i})`,backgroundPosition:l,backgroundRepeat:"no-repeat",backgroundSize:"cover",minHeight:"100%",backgroundColor:"#EFEFEF",position:"relative"};return(0,o.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{height:t,width:a}},children:(0,o.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:c},children:(0,o.jsx)("div",{className:"imageWash",style:{position:"absolute"}})})})}},722556:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(686844),o=i(522843),r=i(898781),a=i(50286),s=i(780280),l=i(883119),c=i(526760),d=i(785893);const u="100%";function p(e){var t,i,p,h;const m=(0,r.ZP)(),{containerBackgroundColor:_="white",coverPhoto:g,fullSize:v,images:f,isSecret:y,showSensitivityScreen:x,isActive:b,canEdit:w,onEditClick:P,layout:S}=e,T=(0,a.HG)(),{isRTL:I,isAuthenticated:k}=(0,s.B)(),E=T&&k,A=f[0],C=!g&&(null===(t=f[0])||void 0===t?void 0:t.name)||m._('Cover image', 'DrawerImageGroup', 'Alt text for the main image of a board'),j=Array(2).fill(),R=new l.Ry(1),D="square"===S?c.M0:c.z9,O="square"===S?c.FP:c.FC,L=x?{filter:"blur(20px)"}:{};return(0,d.jsx)(l.zd,{height:v?"100%":void 0,rounding:4,width:"100%",wash:b,children:(0,d.jsxs)(l.xu,{"aria-hidden":!0,display:"flex",height:E?O:"100%",direction:"row",children:[(0,d.jsx)(l.sg,{span:8,children:(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:L},position:"relative",height:v?"100%":void 0,children:(0,d.jsx)(l.xu,{color:"secondary",dangerouslySetInlineStyle:{__style:{paddingBottom:u}},overflow:"hidden",width:"100%",children:(0,d.jsxs)(l.xu,{"data-test-id":"drawer-image-group-first-image-container",dangerouslySetInlineStyle:{__style:{borderColor:_,borderStyle:"solid",borderWidth:"1px 0 1px 1px"}},overflow:"hidden",position:"absolute",top:!0,bottom:!0,right:!0,left:!0,children:[y&&(0,d.jsx)(l.xu,{left:!I,right:I,margin:2,position:"absolute",top:!0,zIndex:R,children:(0,d.jsx)(o.Z,{backgroundColor:"default",iconColor:"default",size:E?32:24})}),E&&null!=g&&g.url?(0,d.jsx)(n.Z,{customCover:g.isCustom,imgPos:g.position||{width:0,height:0,x:0,y:0},imgUrl:null!==(i=g.url)&&void 0!==i?i:"",width:Math.floor(D/3*2),height:O}):(0,d.jsx)(l.Ee,{alt:C,color:"#efefef",fit:"cover",naturalHeight:133,naturalWidth:133,src:null!==(p=null!==(h=null==g?void 0:g.url)&&void 0!==h?h:null==A?void 0:A.url)&&void 0!==p?p:""})]})})})}),(0,d.jsx)(l.sg,{span:4,children:(0,d.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:L},height:"100%",children:[w&&b&&(0,d.jsx)(l.xu,{left:I,right:!I,margin:2,position:"absolute",bottom:!0,zIndex:R,children:(0,d.jsx)(l.hU,{accessibilityLabel:m._('Edit', 'DrawerImageGroup.edit', 'Icon indicating that a board is editable'),bgColor:"white",icon:"edit",iconColor:"darkGray",onClick:({event:e})=>null==P?void 0:P(e),size:"sm"})}),j.map(((e,t)=>{var i,n;const o=f[E?t:t+1];return(0,d.jsx)(l.xu,{position:"relative",height:v?"50%":void 0,children:(0,d.jsx)(l.xu,{color:"secondary",dangerouslySetInlineStyle:{__style:{paddingBottom:u}},overflow:"hidden",width:"100%",children:(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{borderColor:_,borderStyle:"solid",borderWidth:0===t?1:"0 1px 1px 1px"}},overflow:"hidden",position:"absolute",top:!0,bottom:!0,right:!0,left:!0,children:(0,d.jsx)(l.Ee,{alt:null!==(i=null==o?void 0:o.name)&&void 0!==i?i:"placeholder",color:"#efefef",fit:"cover",naturalHeight:133,naturalWidth:133,src:null!==(n=null==o?void 0:o.url)&&void 0!==n?n:""})})})},t)}))]})}),x&&(0,d.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{background:"rgba(0,0,0,0.5)"}},display:"flex",height:"100%",justifyContent:"center",position:"absolute",top:!0,width:"100%",children:(0,d.jsx)(l.X6,{align:"center",color:"light",size:"400",children:m._('This board may contain sensitive content', 'drawerImageGroup.sensitivityScreen.heading', 'Warning text for a board that may have sensitive content')})})]})})}},526760:(e,t,i)=>{i.d(t,{FC:()=>s,FP:()=>r,M0:()=>o,s0:()=>n,z9:()=>a});const n=40,o=236,r=157,a=320,s=213},522843:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(898781),o=i(883119),r=i(785893);function a({backgroundColor:e="darkGray",iconColor:t="inverse",iconSize:i,size:a=20}){const s=(0,n.ZP)();return(0,r.jsx)(o.xu,{display:"flex",direction:"column",alignItems:"center",color:e,width:a,height:a,rounding:"circle",justifyContent:"center",children:(0,r.jsx)(o.JO,{accessibilityLabel:s._('Secret board icon', 'Icon indicating that a board is secret', 'Icon indicating that a board is secret'),color:t,icon:"lock",size:null!=i?i:a/2})})}},340494:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(19121),o=i(50286);function r(){const e=(0,o.HG)(),t=(0,n.Z)(),i=t&&t.isAuth;if(e&&i){return e=>{var t,i;const n=e.cover_images&&e.cover_images["222x"]?e.cover_images["222x"].url:void 0,o=null!==(t=null===(i=e.cover_pin)||void 0===i?void 0:i.image_url)&&void 0!==t?t:n,r=e.images&&e.images["170x"]&&e.images["170x"].length?e.images["170x"][0].url:"";return o||r}}return(e,t)=>{var i,n;const o=e.has_custom_cover?e.image_cover_hd_url||e.image_cover_url:"";if(!o)return"";const r=e.cover_images&&e.cover_images["400x300"]?e.cover_images["400x300"].url:void 0,a=e.cover_images&&e.cover_images["222x"]?e.cover_images["222x"].url:void 0,s=e.cover_images&&e.cover_images["216x146"]?e.cover_images["216x146"].url:void 0,l=null!==(i=null!==(n=null!=r?r:a)&&void 0!==n?n:s)&&void 0!==i?i:"",c=e.image_cover_url||"";return o||(t&&t>2&&l?l:"")||c}}},853492:(e,t,i)=>{i.d(t,{Bw:()=>s,Jx:()=>a,po:()=>n});const n=(e="")=>(null!=e?e:"").substring((null!=e?e:"").lastIndexOf("/")+1),o=e=>({dominant_color:"#FFFFFF",height:1,url:e,width:1}),r=e=>{if(!e)return()=>!0;const t=n(e);return e=>{var i;return"string"==typeof e?n(e)!==t:n(null!==(i=e.url)&&void 0!==i?i:"")!==t}},a=(e,t)=>e.images&&e.images["170x"]?e.images["170x"].filter(r(t)):e.pin_thumbnail_urls?e.pin_thumbnail_urls.filter(r(t)).map(o):[],s=e=>{var t;return null!==(t=e&&e.crop&&e.size&&{x:e.crop[0],y:e.crop[1],width:e.size[0],height:e.size[1]})&&void 0!==t?t:{x:0,y:0,width:0,height:0}}},966676:(e,t,i)=>{i.d(t,{Nb:()=>s,Of:()=>l,YO:()=>a,ZP:()=>u,x4:()=>d});var n=i(667294),o=i(620707),r=i(92261);const a=({showProductDetailPage:e,isLargerPane:t,showCloseupContentRight:i})=>e&&t?i?r.Uj:r.zT:1,s=(0,o.qe)((({paneWidth:e,pdpCarouselSlotToPaneRatio:t,showCloseupContentRight:i,showProductDetailPage:n,updateCloseupBodyContainerHeight:o,viewportSize:r,maxWidth:a})=>({paneWidth:e,pdpCarouselSlotToPaneRatio:t,showCloseupContentRight:i,showProductDetailPage:n,updateCloseupBodyContainerHeight:o,viewportSize:r,maxWidth:a}))),l={showCloseupContentRight:!0,showProductDetailPage:!1,updateCloseupBodyContainerHeight:()=>{},viewportSize:"lg",paneWidth:{pdp:r.CI,regular:r.Gg},pdpCarouselSlotToPaneRatio:1,maxWidth:{pdp:r.Kn,regular:r.u6}},c=(0,n.createContext)(l);function d(){const e=(0,n.useContext)(c);if(!e)throw new Error("useCloseupContext must be used within CloseupContextProvider");return e}const u=c},92261:(e,t,i)=>{i.d(t,{CI:()=>r,Ch:()=>s,Gb:()=>l,Gg:()=>n,Ie:()=>p,JV:()=>m,KP:()=>h,Kn:()=>a,Uj:()=>c,bx:()=>_,d2:()=>u,g9:()=>g,iB:()=>v,u6:()=>o,zT:()=>d});const n=508,o=2*n,r=488,a=992,s=672,l=1176,c=.6,d=.84,u=40,p=72,h=740,m=60,_=912,g=32,v={ARTICLE:"https://schema.org/Article",BRAND:"https://schema.org/Brand",PRODUCT:"https://schema.org/Product",RECIPE:"https://schema.org/Recipe",OFFER:"https://schema.org/Offer",OUT_OF_STOCK:"https://schema.org/OutOfStock",PERSON:"https://schema.org/Person"}},814197:(e,t,i)=>{i.d(t,{Cq:()=>h,Dk:()=>_,Fk:()=>r,bI:()=>o,fS:()=>p,gw:()=>d,j1:()=>u,km:()=>m,lI:()=>s,lJ:()=>a,mS:()=>c,qW:()=>l,t5:()=>g});var n=i(883119);const o=new n.Ry(0),r=new n.Ry(1),a=3,s=new n.Ry(a),l=2,c=new n.Ry(l),d=new n.Ry(3),u=new n.Ry(3),p=3,h=4,m=new n.Ry(5),_=new n.Ry(100),g=new n.Ry(l)},398061:(e,t,i)=>{i.d(t,{Z:()=>s,e:()=>a});var n=i(780280),o=i(883119),r=i(785893);const a=new o.Ry(1);function s({children:e,isImagePinForUnauthOnTablet:t}){const{isAuthenticated:i}=(0,n.B)();return(0,r.jsxs)(o.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{cursor:"pointer",width:t?"40vw":void 0}},zIndex:i?void 0:a,display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!t||void 0,top:!0,children:[(0,r.jsx)(o.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"#000",borderRadius:"6px 6px 0 0",WebkitTransition:"opacity .04s linear",transition:"opacity .04s linear"}},left:!0,opacity:.4,position:"absolute",right:!0,top:!0}),e]})}},398789:(e,t,i)=>{i.d(t,{Z:()=>j});var n=i(667294),o=i(702664),r=i(398061),a=i(523657),s=i(954571),l=i(63552),c=i(50286),d=i(898781),u=i(667679),p=i(52022),h=i(867820),m=i(883119),_=i(785893);function g({setShowClickthroughOverlay:e}){const t=(0,d.ZP)(),i=(0,p.Z)(),o=(0,u.Z)(),r=(0,n.useRef)(),a="desktop"===(0,c.ZP)();return(0,_.jsx)(m.iP,{onTap:({event:e})=>{a&&(e.preventDefault(),i({action:"click",item:"pin-image"}),o({reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"clickthrough",desktopOptions:{modalType:"signup",modalOptions:{source:"defaultSource",container:"pinWash"}}}))},children:(0,_.jsxs)(m.xu,{zIndex:new m.Ry(2),children:[(0,_.jsx)(m.xu,{top:!0,bottom:!0,left:!0,right:!0,width:"100%",height:"100%",display:"flex",alignItems:"center",direction:"column",position:"absolute",ref:r,"data-test-id":"main-pin-hover-overlay",children:(0,_.jsx)(m.xu,{paddingY:10,display:"flex",alignItems:"center",maxWidth:240,direction:"column",children:(0,_.jsx)(m.xu,{marginTop:8,children:(0,_.jsx)(m.X6,{size:"400",align:"center",color:"light",children:a?t._('Click to make the most out of this idea with a free account', 'web.unauth.plp.clickable_wash.header', 'Copy shown on hover to sign up for an account'):t._('Tap to make the most out of this idea with a free account', 'mweb.unauth.plp.clickable_wash.header', 'Pin clickable wash header text')})})})}),!a&&(0,_.jsx)(m.xu,{position:"absolute",top:!0,right:!0,marginTop:4,marginEnd:4,children:(0,_.jsx)(m.hU,{icon:"cancel",iconColor:"white",onClick:({event:t})=>{t.stopPropagation(),e&&(e(!1),(0,h.My)("main.pin.wash.cancel"))},accessibilityLabel:t._('Close pin clickable wash', 'mweb.unauth.plp.clickable_wash.close_button', 'Close button'),size:"md"})})]})})}var v=i(248041),f=i(411465),y=i(81072),x=i(44846),b=i(479739),w=i(744856),P=i(332215),S=i(407043),T=i(773285),I=i(780280),k=i(872482),E=i(691720),A=i(276775);const C=({setMwebTapToZoomExpEnabled:e,isEligibleForTapToZoom:t,children:i})=>{var n;const{isAuthenticated:o}=(0,I.B)(),{checkExperiment:r}=(0,T.F)(),a=(0,d.ZP)(),s=(0,A.useHistory)(),c=(0,A.useRouteMatch)(),u=null===(n=(0,A.useLocation)().state)||void 0===n?void 0:n.trackingParams;return o||t?(0,_.jsx)(l.Z,{onTouch:i=>{if(i.preventDefault(),t||i.stopPropagation(),t&&e){const t=r("unauth_mweb_tap_to_zoom").anyEnabled;if(!t)return;e(t)}s&&c&&c.params&&c.params.id&&s.push(`/pin/${c.params.id}#${w.v}`,{trackingParams:u})},pressState:"compress",fullWidth:!0,accessibilityLabel:a._('Tap on the image to focus visual search', 'Flashlight.CloseupImage.TapArea.a11yLabel', 'tap area for the entire pin image in visual search'),children:i}):i},j=e=>{const t=(0,d.ZP)(),{alt:i,clickthroughOverlayOptions:u,color:w,isFlashlightPage:j,naturalHeight:R,naturalWidth:D,placeholder:O,pwtElementTimingId:L,pwtSurfaceContext:M,setShowClickthroughOverlay:N,showFlashlightIcon:z,showSpinner:F,src:Z,viewParameter:B,setMwebTapToZoomExpEnabled:U,isEligibleForTapToZoom:H}=e,V=(0,f.Z)(),W=(0,A.useHistory)(),$=(0,A.useRouteMatch)(),G=(0,p.Z)(),{logContextEvent:K}=(0,S.v)(),{checkExperiment:q}=(0,T.F)(),Y=!V,{isAuthenticated:X}=(0,I.B)(),J=(0,y.Z)(),Q=(0,c.ZP)(),{hasScrolledPastMainContent:ee,setHasScrolledPastMainContent:te}=(0,k.a)()||{},ie=(0,v.Z)(),ne=X&&"desktop"!==Q&&q("auth_mweb_inline_action_bar").anyEnabled,oe=(0,n.useRef)(),re=(0,n.useRef)(),[ae,se]=(0,n.useState)(!1),le=(0,o.useSelector)((e=>(0,b.ts)(e))),[ce,de]=(0,n.useState)(!Y||!!Z&&!!O&&O===Z),ue=()=>{M&&M.markConstraintComplete("PinPageMainImageRendered")};(0,n.useEffect)((()=>{const e=new Image;e.onload=()=>de(!0),e.src=Z}),[]),(0,n.useEffect)((()=>{ee&&!ae&&se(!0)}),[ee,ae]),(0,n.useEffect)((()=>{te&&oe.current&&te(J>oe.current.offsetTop+oe.current.offsetHeight)}),[J,te]);const pe=!j&&"tablet"===Q,he=j?40:44,me=Y?(0,_.jsx)(a.Z,{alt:i,color:w,elementTiming:L,naturalHeight:R,naturalWidth:D,src:O,onLoad:ue}):null,_e=!!z&&(X&&!((0,s.Z)(null==le?void 0:le.created_at)&&!(0,P.V0)(le))||!X&&ae),ge=(0,k.a)(),ve=!X&&"phone"===Q;return(0,_.jsx)(C,{setMwebTapToZoomExpEnabled:U,isEligibleForTapToZoom:H,children:(0,_.jsxs)(m.xu,{"data-test-id":"pin-closeup-image",maxHeight:"100%",maxWidth:"tablet"===Q?E.g6:void 0,overflow:z?void 0:"hidden",position:"relative",width:j||"phone"===Q?"100%":"desktop"===Q?508:E.Hg,rounding:j||"phone"===Q?0:6,ref:oe,marginTop:"tablet"===Q&&ne?12:0,children:[!X&&u&&(0,_.jsx)(r.Z,{isImagePinForUnauthOnTablet:!1,children:(0,_.jsx)(g,{setShowClickthroughOverlay:N})}),me&&(pe?(0,_.jsx)(m.xu,{rounding:6,overflow:"hidden",children:me}):me),(0,_.jsx)(m.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:ce?1:0,transition:ce&&"desktop"!==Q?"opacity .5s ease-in-out":void 0,backgroundColor:w}},left:!0,position:Y?"absolute":"relative",right:!0,rounding:pe?6:5,overflow:pe?"hidden":void 0,top:!0,children:Y?(0,_.jsx)(m.Ee,{alt:i,naturalHeight:R,naturalWidth:D,src:Z}):(0,_.jsx)(a.Z,{alt:i,color:w,elementTiming:L,naturalHeight:R,naturalWidth:D,src:Z,onLoad:ue})}),F&&(0,_.jsx)(m.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:ce?0:1,transition:ce?"opacity .5s ease-in-out":void 0}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:!ce&&(0,_.jsx)(m.kC,{alignItems:"center",justifyContent:"start",children:(0,_.jsx)(m.$j,{accessibilityLabel:t._('Loading image', 'Loading higher resolution image', 'Loading higher resolution image'),show:!0})})}),(_e||!X&&!ae)&&(0,_.jsx)(m.Le,{bottom:X&&j?x.Zk:0,zIndex:new m.Ry(0),children:(0,_.jsxs)(m.xu,{dangerouslySetInlineStyle:{__style:{marginTop:j?-64:-76}},display:"flex",flex:"none",justifyContent:"end",padding:j?3:4,position:"relative",children:[!X&&"desktop"!==Q&&!ae&&(0,_.jsx)(m.xu,{children:(0,_.jsx)(m.iP,{onTap:({event:e})=>{e.stopPropagation(),e.preventDefault(),(0,h.My)("remove_drawer_exp.more_like_this.scroll_to_pins"),ie.scrollToPins(!0)},children:(0,_.jsx)(m.kC,{alignItems:"stretch",justifyContent:"end",children:(0,_.jsxs)(m.xu,{alignContent:"between",alignItems:"center",color:"default",display:"flex",padding:4,rounding:"pill",ref:re,children:[(0,_.jsx)(m.xu,{marginEnd:3,rounding:"pill",color:"default",children:(0,_.jsx)(m.xv,{inline:!0,weight:"bold",children:t._('More like this', 'mobilePinPage.relatedPins.title', 'On mobile web pin page, title for related pins beneath pin closeup')})}),(0,_.jsx)(m.JO,{accessibilityLabel:t._('Scroll to related pins button', 'mobilePinPage.relatedPins.scroll', 'Button to auto scroll to the related pins section'),color:"dark",icon:"arrow-down",inline:!0})]})})})}),_e&&(0,_.jsx)(m.xu,{display:"inlineBlock",children:(0,_.jsx)(l.Z,{onTouch:e=>{X||((0,h.My)("mweb_pin_page.flashlight_icon_click"),G({action:"click",item:"visual-search-icon",within:"pin-image"})),e.preventDefault(),e.stopPropagation(),K({component:128,element:234,event_type:102,view_parameter:B,view_type:3}),ve&&ge?ge.setShouldShowVisualSearchAppUpsell(!0):W&&$&&$.params&&$.params.id&&W.push(`/pin/${$.params.id}/visual-search/`)},pressState:"compress",children:(0,_.jsx)(m.xu,{"data-test-id":"visual-search-icon",alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, 0.8)"}},display:"flex",height:he,justifyContent:"center",padding:1,rounding:"pill",width:he,children:(0,_.jsx)(m.JO,{accessibilityLabel:t._('Visual search', 'Button to search for visually similar Pins', 'Button to search for visually similar Pins'),color:"dark",icon:"flashlight",size:24})})})})]})})]})})}},538232:(e,t,i)=>{i.d(t,{R:()=>r,q:()=>o});var n=i(425288);const{Provider:o,useHook:r}=(0,n.Z)("CloseupPageContext")},995389:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(10216),o=i(883119),r=i(785893);function a({title:{format:e,args:{query:t}}}){return(0,r.jsxs)(o.xu,{alignItems:"center",direction:"column",display:"flex",marginTop:12,children:[(0,r.jsx)(o.xu,{marginBottom:2,paddingX:4,children:(0,r.jsx)(o.xv,{align:"center",color:"default",overflow:"normal",weight:"bold",children:e})}),(0,r.jsx)(n.Z,{query:t,showHeaderText:!1})]})}},183007:(e,t,i)=>{i.d(t,{N:()=>x,Z:()=>b});var n=i(667294),o=i(223815),r=i(248041),a=i(898781),s=i(52022),l=i(867820),c=i(883119),d=i(785893);function u({icon:e}){const{hide:t}=(0,r.Z)(),i=(0,a.ZP)(),n=(0,s.Z)();return(0,d.jsx)(o.Z,{children:(0,d.jsx)(c.xu,{"data-test-id":"expandButton",children:(0,d.jsx)(c.hU,{icon:e||"maximize",size:e?"md":"lg",iconColor:"darkGray",bgColor:"white",padding:3,accessibilityLabel:i._('Expand Image', 'mweb.closeup.image.expand.a11y', 'Accessibility label for the expand icon'),onClick:({event:e})=>{e.stopPropagation(),(0,l.My)("mweb_pin_page.pin_image.enlarge_image"),(0,l.NC)("click_expand_image"),n({action:"click",item:"expand-button",within:"pin-image"}),t()}})})})}var p=i(700380),h=i(50286),m=i(792182),_=i(398061),g=i(444445),v=i(773285);const f=.3,y=.75,x=new c.H3([_.e]),b=({children:e,closableDrawer:t})=>{var i;const{hide:o}=(0,r.Z)(),a=(0,n.useRef)(null),s=(0,n.useRef)(null),[l,_]=(0,n.useState)(null),[b,w]=(0,n.useState)(0),[P,S]=(0,n.useState)(!1),T=(null===(i=(0,m.Z)())||void 0===i?void 0:i.height)||0,[I,k]=(0,n.useState)(!1),E=(0,h.ZP)(),{checkExperiment:A}=(0,v.F)(),C=null!=l?l:.75*T,j=()=>{var e;const t=(null===(e=a.current)||void 0===e?void 0:e.offsetTop)||0;return t>0&&T>0?t-T*f+60:0};return(0,n.useEffect)((()=>{const e=()=>{var e;const t=(null===(e=a.current)||void 0===e?void 0:e.offsetTop)||0;window.scrollY+C>t&&o()};e();const t=(0,p.Z)(e,10);return window.addEventListener("scroll",t),()=>window.removeEventListener("scroll",t)}),[o,C]),(0,d.jsxs)(n.Fragment,{children:[(0,d.jsxs)(c.xu,{position:"fixed",bottom:!0,left:!0,right:!0,color:"default",zIndex:x,height:null===l?"25vh":`calc(100vh - ${l}px)`,dangerouslySetInlineStyle:{__style:{...P?{transitionDuration:"500ms",transitionProperty:"maxHeight, borderRadius"}:{},borderRadius:0===l&&P?0:"32px 32px 0 0",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.3)",overscrollBehavior:"none",touchAction:"none"}},"data-test-id":"related-pins-drawer","data-layout-shift-boundary-id":"Drawer",ref:s,onTouchStart:e=>{const{clientY:t}=e.touches[0];w(t),S(!1)},onTouchMove:e=>{e.preventDefault();const{clientY:t}=e.touches[0],i=null!=l?l:.75*window.innerHeight,n=t-b;if(null!==i&&n){const e=T*f,t=T*y,r=Math.floor(Math.min(t,Math.max(e,i+n)));_(r);const a=j();if(T>0&&a>0){const e=a*(o=r/T,1-(Math.max(f,Math.min(y,o))-f)/.45);window.pageYOffset<e&&window.scrollTo({top:e})}r<.525*T&&k(!0)}var o;w(t)},onTouchEnd:()=>{if(I){S(!0);_(T*f);const e=j();e&&window.scrollTo({top:e,behavior:"smooth"}),k(!1)}},children:["desktop"!==E&&(t?(0,d.jsx)(c.xu,{position:"absolute",top:!0,left:!0,margin:1,marginTop:t?0:4,paddingY:1,children:(0,d.jsx)(u,{icon:"cancel"})}):!A("pcons_remove_expand_button").anyEnabled&&(0,d.jsx)(c.xu,{position:"absolute",top:!0,right:!0,children:(0,d.jsx)(c.xu,{position:"absolute",bottom:!0,right:!0,children:(0,d.jsx)(c.xu,{padding:3,children:(0,d.jsx)(u,{})})})})),(0,d.jsx)(c.xu,{paddingX:g.D6,children:e})]}),(0,d.jsx)(c.xu,{ref:a,height:"100vh"})]})}},350948:(e,t,i)=>{i.d(t,{IS:()=>g,Ys:()=>_,ZP:()=>S,j$:()=>y});var n,o=i(134185),r=i(50286),a=i(349700),s=i(578661),l=i(923297),c=i(350118),d=i(898781),u=i(883119),p=i(167912),h=i(785893);const m=void 0!==n?n:n=i(906587),_=({m:e,h:t,rm:i,rh:n},o)=>e&&(!t||n<=0)?(0,a.nk)(o.ngettext('{{mins}} minute', '{{mins}} minutes', i, 'number showing the minutes to complete a recipe', 'number showing the minutes to complete a recipe'),{mins:i.toString()}):t?(0,a.nk)(o.ngettext('{{hrs}} hour', '{{hrs}} hours', n, 'number showing the hours to complete a recipe', 'number showing the hours to complete a recipe'),{hrs:n.toString()}):null,g=({m:e,h:t,rm:i,rh:n,i18n:o})=>e&&(!t||n<=0)?(0,a.nk)(o._('{{mins}}m', 'number showing minutes to complete a recipe', 'number showing mnutes to complete a recipe'),{mins:i.toString()}):t?(0,a.nk)(o._('{{hrs}}h {{mins}}m', 'number showing hours to complete a recipe', 'number showing hours to complete a recipe'),{hrs:t.toString(),mins:e.toString()}):null,v=(e,t)=>{const i=e&&e.length>0&&e.join(", "),n=t&&t.summary;return i&&n?`${i} • ${n}`:i||n},f=e=>e?e.reduce(((e,t)=>{var i,n;return e+(null!==(i=null===(n=t.ingredients)||void 0===n?void 0:n.length)&&void 0!==i?i:0)}),0):0,y=({cookTimesCookM:e,cookTimesCookH:t,cookTimesTotalM:i,cookTimesTotalH:n,hasCookTimesTotal:o,i18n:r})=>{let a;return a=o?(0,l.X)({m:i||0,h:n||0}):(0,l.X)({m:e||0,h:t||0}),_(a,r)};function x({category:e,ingredients:t,textSize:i="300"}){return(0,h.jsxs)(u.xu,{marginBottom:4,children:[e&&(0,h.jsx)(u.xu,{children:(0,h.jsx)(u.xv,{weight:"bold",size:i,children:e})}),(null!=t?t:[]).map((e=>{var t,n;return(0,h.jsx)(u.xu,{"data-test-id":"recipe-ingredient",itemProp:"recipeIngredient",marginTop:1,children:(0,h.jsxs)(u.xv,{size:i,children:[e.amt||null," ",e.name]})},`${null!==(t=e.name)&&void 0!==t?t:""}-${null!==(n=e.name)&&void 0!==n?n:""}`)}))]})}const b=({categorizedIngredients:e,cookTimes:t,image:i,ingredientCount:n,ingredientsDescription:a,name:l,pinLink:c})=>{var p,m,_,g;const v=(0,d.ZP)(),f=(0,r.ZP)();return y({cookTimesCookM:null==t||null===(p=t.cook)||void 0===p?void 0:p.m,cookTimesCookH:null==t||null===(m=t.cook)||void 0===m?void 0:m.h,cookTimesTotalM:null==t||null===(_=t.total)||void 0===_?void 0:_.m,cookTimesTotalH:null==t||null===(g=t.total)||void 0===g?void 0:g.h,hasCookTimesTotal:!(!t||!t.total),i18n:v})||n||a?(0,h.jsxs)(u.xu,{"data-test-id":"pin-recipe-container",display:"flex",direction:"column",marginTop:8,children:[(0,h.jsxs)(u.xu,{direction:"column",display:"flex",marginTop:4,marginBottom:4,marginEnd:6,overflow:"hidden",children:[(0,h.jsx)(u.xu,{marginBottom:4,children:(0,h.jsx)(u.xv,{weight:"bold",align:"desktop"===f?"start":"center",children:v._('Ingredients', 'Ingredients category heading for recipes', 'Ingredients category heading for recipes')})}),(0,h.jsxs)(o.Z,{itemScope:!0,itemType:s.G,children:[(0,h.jsx)("meta",{content:l,itemProp:"name"}),i&&(0,h.jsx)("meta",{content:i,itemProp:"image"}),Array.isArray(e)&&e.length>0&&(0,h.jsx)(u.xu,{column:12,"data-test-id":"single-column-ingredients",children:e.map((({category:e,ingredients:t},i)=>(0,h.jsx)(u.xu,{marginBottom:2,children:(0,h.jsx)(x,{category:e,ingredients:t,textSize:"300"})},i)))})]})]}),(0,h.jsx)(u.xu,{marginBottom:4,display:"flex",justifyContent:"phone"===f?"center":void 0,children:c&&(0,h.jsx)(u.zx,{text:v._('Make it', 'closeup.recipe.make_it_button', 'label for button go to recipe link'),role:"link",href:c,target:"blank"})})]}):null},w=({graphqlRef:e})=>{const t=(0,p.useFragment)(m,e),{imageSpec_474x:i,link:n,richMetadata:o}=t,r=null==o?void 0:o.recipe,a=null==r?void 0:r.categorizedIngredients,s=f(a),l=(null==r?void 0:r.categorizedIngredients)&&v(r.diets,r.servingsSummary);return(0,h.jsx)(b,{categorizedIngredients:a,cookTimes:null==r?void 0:r.cookTimes,image:null==i?void 0:i.url,ingredientCount:s,ingredientsDescription:l,name:null==r?void 0:r.name,pinLink:n})},P=({pinId:e})=>{var t,i;const n=(0,c.S6)()(e),o=(null==n||null===(t=n.rich_metadata)||void 0===t?void 0:t.recipe)||{},{cook_times:r,name:a,categorized_ingredients:s,diets:l,servings_summary:d}=o,u=f(s),p=s&&v(l,d);return(0,h.jsx)(b,{categorizedIngredients:s,cookTimes:r,image:(null===(i=((null==n?void 0:n.images)||{})["474x"])||void 0===i?void 0:i.url)||"",ingredientCount:u,ingredientsDescription:p,name:a,pinLink:(null==n?void 0:n.link)||""})};function S({graphqlRef:e,pinId:t}){return e?(0,h.jsx)(w,{graphqlRef:e}):(0,h.jsx)(P,{pinId:t})}},95551:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(898781),o=i(883119),r=i(780280),a=i(785893);const s=({onSendButtonClick:e,trackShareTap:t,color:i,size:s,bgColor:l})=>{const c=(0,n.ZP)(),{userAgent:{platform:d}}=(0,r.B)(),u="android"===d;return(0,a.jsx)(o.hU,{accessibilityLabel:c._('Send', 'Board.Pin.SendButton', 'Accessible label for button to send a pin or a board'),onClick:({event:i})=>{e(i),t()},size:s||"lg",bgColor:l||"transparent",iconColor:i||"darkGray",icon:u?"android-share":"share"})}},744856:(e,t,i)=>{i.d(t,{v:()=>n});const n="imgViewer"},725214:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>{switch(e.action){case"PUSH":case"REPLACE":return"click";case"POP":return e.location.key?"click":"deeplink";default:return null}}},298024:(e,t,i)=>{i.d(t,{Ph:()=>o,Re:()=>a,si:()=>r});var n=i(50286);const o=e=>e&&e.promoter&&!e.is_downstream_promotion?e.promoter:null,r=()=>"phone"!==(0,n.ZP)()?180:130,a=()=>"phone"!==(0,n.ZP)()?180:80},248041:(e,t,i)=>{i.d(t,{Z:()=>c,t:()=>l});var n=i(667294),o=i(867820),r=i(276775),a=i(785893);const s=(0,n.createContext)({hide:()=>{},isHidden:!0,isScrolledToPins:!1,scrollToPins:()=>{}});function l({children:e,isEligible:t}){const[i,l]=(0,n.useState)(!t),[c,d]=(0,n.useState)(!1),{pathname:u}=(0,r.useLocation)();(0,n.useEffect)((()=>{l(!t)}),[u,t]);const p=(0,n.useCallback)((()=>{(0,o.My)("web_unification.expand_click.hide_drawer"),l(!0)}),[]),h=(0,n.useCallback)((e=>{d(!!e)}),[]),m=(0,n.useMemo)((()=>({isHidden:i,hide:p,isScrolledToPins:c,scrollToPins:h})),[i,p,c,h]);return(0,a.jsx)(s.Provider,{value:m,children:e})}const c=()=>(0,n.useContext)(s)},759177:(e,t,i)=>{i.d(t,{Z:()=>a});var n,o=i(167912);const r=void 0!==n?n:n=i(96795);const a=e=>function(e){var t,i,n,o,r,a,s,l,c,d,u,p,h,m,_,g,v,f,y,x,b,w,P,S,T,I,k;return{"60x60":{height:(null==e||null===(t=e.imageSpec_60x60)||void 0===t?void 0:t.height)||void 0,url:(null==e||null===(i=e.imageSpec_60x60)||void 0===i?void 0:i.url)||void 0,width:(null==e||null===(n=e.imageSpec_60x60)||void 0===n?void 0:n.width)||void 0},"136x136":{height:(null==e||null===(o=e.imageSpec_136x136)||void 0===o?void 0:o.height)||void 0,url:(null==e||null===(r=e.imageSpec_136x136)||void 0===r?void 0:r.url)||void 0,width:(null==e||null===(a=e.imageSpec_136x136)||void 0===a?void 0:a.width)||void 0},"170x":{height:(null==e||null===(s=e.imageSpec_170x)||void 0===s?void 0:s.height)||void 0,url:(null==e||null===(l=e.imageSpec_170x)||void 0===l?void 0:l.url)||void 0,width:(null==e||null===(c=e.imageSpec_170x)||void 0===c?void 0:c.width)||void 0},"236x":{height:(null==e||null===(d=e.imageSpec_236x)||void 0===d?void 0:d.height)||void 0,url:(null==e||null===(u=e.imageSpec_236x)||void 0===u?void 0:u.url)||void 0,width:(null==e||null===(p=e.imageSpec_236x)||void 0===p?void 0:p.width)||void 0},"474x":{height:(null==e||null===(h=e.imageSpec_474x)||void 0===h?void 0:h.height)||void 0,url:(null==e||null===(m=e.imageSpec_474x)||void 0===m?void 0:m.url)||void 0,width:(null==e||null===(_=e.imageSpec_474x)||void 0===_?void 0:_.width)||void 0},"564x":{height:(null==e||null===(g=e.imageSpec_564x)||void 0===g?void 0:g.height)||void 0,url:(null==e||null===(v=e.imageSpec_564x)||void 0===v?void 0:v.url)||void 0,width:(null==e||null===(f=e.imageSpec_564x)||void 0===f?void 0:f.width)||void 0},"736x":{height:(null==e||null===(y=e.imageSpec_736x)||void 0===y?void 0:y.height)||void 0,url:(null==e||null===(x=e.imageSpec_736x)||void 0===x?void 0:x.url)||void 0,width:(null==e||null===(b=e.imageSpec_736x)||void 0===b?void 0:b.width)||void 0},"600x315":{height:(null==e||null===(w=e.imageSpec_600x315)||void 0===w?void 0:w.height)||void 0,url:(null==e||null===(P=e.imageSpec_600x315)||void 0===P?void 0:P.url)||void 0,width:(null==e||null===(S=e.imageSpec_600x315)||void 0===S?void 0:S.width)||void 0},orig:{height:(null==e||null===(T=e.imageSpec_orig)||void 0===T?void 0:T.height)||void 0,url:(null==e||null===(I=e.imageSpec_orig)||void 0===I?void 0:I.url)||void 0,width:(null==e||null===(k=e.imageSpec_orig)||void 0===k?void 0:k.width)||void 0}}}((0,o.useFragment)(r,e))},356725:(e,t,i)=>{i.r(t),i.d(t,{default:()=>p});var n=i(702664),o=i(834911),r=i(447948),a=i(35495),s=i(407043),l=i(350118),c=i(966676),d=i(883119),u=i(785893);function p({carouselData:e,carouselIndex:t,componentType:i,contextLogData:p,handleCarouselSwipe:h,isCloseup:m,isEditMode:_,pinId:g,viewParameter:v,viewType:f,variant:y}){const{logContextEvent:x}=(0,s.v)(),b=(0,l.S6)()(g),w=e||(0,o.Z)({carouselData:null==b?void 0:b.carousel_data,images:null==b?void 0:b.images,richMetadata:null==b?void 0:b.rich_metadata,richSummary:null==b?void 0:b.rich_summary}),P=(0,n.useDispatch)();if(!w)return null;const S=(e,t,n)=>{_||void 0===r.yR||(e.preventDefault(),e.stopPropagation(),P((0,r.yR)(String(g),n))),void 0!==h&&h(n),((e,t,i,n=0,o,r,s,l,c,d,u)=>{if(!u){const{carousel_slots:u,id:p}=r;e({event_type:108,object_id_str:i,component:c,view_type:l,view_parameter:s,event_data:{pinCarouselSlotEventData:{carouselSlotId:(null==u?void 0:u[n])&&Number(u[n].id),carouselDataId:Number(p),carouselSlotIndex:n,toCarouselSlotIndex:o}},aux_data:{...d,...(0,a.Kl)(t)||{}}})}})(x,b,g,t,n,w,v,f,i,p,_)},{carousel_slots:T=[],index:I}=w,k=void 0!==t?t:I,E="default"===y,A=E?"white":"#555",C=E?"rgba(255, 255, 255, 0.5)":"lightGray";return(0,u.jsx)(c.ZP.Consumer,{children:({viewportSize:e})=>"sm"===e?null:(0,u.jsx)(d.xu,{alignItems:"center","data-test-id":"carousel-ellipsis",display:"flex",justifyContent:m?"end":"center",paddingY:_?1:0,children:[...Array(T.length).keys()].map((e=>{var t;return(0,u.jsx)(d.xu,{paddingX:1,children:(0,u.jsx)(d.iP,{accessibilityLabel:null!==(t=T[e].title)&&void 0!==t?t:"",fullWidth:!1,onTap:({event:t})=>S(t,k,e),rounding:"circle",children:(0,u.jsx)(d.xu,{"data-test-id":"ellipsis-size",height:8,width:8,dangerouslySetInlineStyle:{__style:{backgroundColor:e===k?A:C}},rounding:"circle"})})},g+e)}))})})}},876371:(e,t,i)=>{i.d(t,{Z:()=>g});var n=i(667294),o=i(564194),r=i(834911),a=i(737022),s=i(310227),l=i(350118),c=i(898781),d=i(883119),u=i(455024),p=i(444445),h=i(785893);function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class _ extends n.Component{constructor(...e){super(...e),m(this,"state",{showBadge:!0}),m(this,"renderBadge",(()=>{const{carouselData:e,isCloseup:t,showCarouselBadge:i}=this.props;if(!e)return null;const{showBadge:n}=this.state,{carousel_slots:o,index:r}=e,a=n?.8:0;return!t&&i?(0,h.jsx)(d.xu,{alignItems:"center",color:"selected",display:"flex",height:35,justifyContent:"center",marginEnd:5,marginTop:5,position:"absolute",right:!0,rounding:2,width:35,zIndex:new d.Ry(1),dangerouslySetInlineStyle:{__style:{opacity:a,transition:"opacity .3s"}},children:(0,h.jsx)(d.xv,{color:"inverse",children:`${(null!=r?r:0)+1}/${(null!=o?o:[]).length}`})}):null}))}componentDidMount(){this.hideBadgeTimeout=setTimeout((()=>this.setState({showBadge:!1})),3e3)}componentDidUpdate(e){const{showBadge:t}=this.state,{carouselData:i}=e,{carouselData:n}=this.props;if(!i||!n)return;const{index:o}=i,{index:r}=n;t&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.hideBadgeTimeout=setTimeout((()=>this.setState({showBadge:!1})),3e3)),o!==r&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.setState({showBadge:!0}))}componentWillUnmount(){this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout)}render(){const{isCloseup:e,carouselIndex:t,closeupHeight:i,closeupWidth:n=0,widthRatio:r=1,cropHeight:l,cropWidth:c,carouselData:m,disableTransition:_,highResOnly:g,lowResOnly:v,onError:f,onLoad:y,pinId:x,isEditMode:b,isDenseView:w,pin:P}=this.props;if(!m)return null;if(r>1||r<0)throw new Error("widthRatio should be between 0 and 1 inclusive");const{carousel_slots:S=[],index:T=0}=m,I=void 0!==t?t:T,k=!e&&c,{images:E}=S[I];let A;A=e?n:k||(g?474:w?p.Lo:p.yF);const C=Math.floor(A*r),j=(null==E?void 0:E["236x"])||{},R=l||j.height||0,D=c||j.width||236,O=i||R/D*C,L=(e=>{const t=e.reduce(((e,t)=>{var i;const{images:n}=t,{height:o=1,width:r=1}=(null==n?void 0:n["736x"])||(null==n?void 0:n["236x"])||{},a=`${r}x${o}`,s=(null===(i=e[a])||void 0===i?void 0:i.times)||0;return{...e,[a]:{imageHeight:o,imageWidth:r,times:s+1}}}),{}),i=Object.keys(t).reduce(((e,i)=>t[i].times>e.times?t[i]:e),{times:-1,imageHeight:-1,imageWidth:-1});return Object.keys(t).length>1?{imageHeight:i.imageHeight,imageWidth:i.imageWidth}:null})(S);return(0,h.jsxs)(d.xu,{height:O,display:"flex",alignItems:"center",overflow:"hidden","data-test-id":"carousel-pin",minHeight:s.Ml,"data-test-image-signature":null==P?void 0:P.image_signature,children:[!b&&this.renderBadge(),(0,h.jsx)(o.Z,{trackCarousel:!0,impressionType:"Pin",loggingId:x,slotIndex:T,viewParameter:72,viewType:1,children:(0,h.jsx)(d.xu,{position:"absolute",height:O,width:C,overflow:"hidden"})},`carousel-impression-key-${I}`),(0,h.jsx)(d.xu,{width:C*S.length,dangerouslySetInlineStyle:{__style:{transition:_?"":"left .3s",left:(0,u.vF)(S.length,C,A,I)}},left:!0,height:"100%",display:"flex",direction:"row",position:"relative",children:S.map(((t,i)=>{if(e){const e=i===S.length-1;return(({pinId:e,slot:t,slotIndex:i,onError:n,onLoad:o,widthToUse:r,gap:s},l)=>{const{url:c,width:p,height:m}=(0,a.Z)(t.images)||{},{details:_=""}=t,g=(0,u.GH)(_,l,i);return(0,h.jsx)(d.xu,{"data-test-id":"carousel-slot-container",width:r,height:"100%",marginEnd:s,children:(0,h.jsx)(d.zd,{height:"100%",wash:!0,children:(0,h.jsx)(d.Ee,{alt:g,fit:"contain",naturalHeight:null!=m?m:1,naturalWidth:null!=p?p:1,onError:n,onLoad:o,src:null!=c?c:""})})},`carousel-slot-${e}-${i}`)})({pinId:x,slot:t,slotIndex:i,onError:f,onLoad:y,widthToUse:C,gap:C<A&&!e?1:0},this.props.i18n)}return((e,t,i,n,o,r,a,s,l,c,p,m,_,g,v)=>{var f,y,x;const{images:b,details:w=""}=t;let P,S=236,T=236,I="";var k,E,A,C,j,R,D,O;if(o?(S=474,T=b&&Math.min(S/.8,S/((null!==(k=null===(E=b["564x"])||void 0===E?void 0:E.width)&&void 0!==k?k:1)/(null!==(A=null===(C=b["564x"])||void 0===C?void 0:C.height)&&void 0!==A?A:1))),I=b&&(null===(j=b["564x"])||void 0===j?void 0:j.url)):b&&b["736x"]?(T=b&&b["736x"]&&b["736x"].height,S=b&&b["736x"]&&b["736x"].width,I=b&&b["736x"]&&b["736x"].url):b&&b["236x"]&&(T=b&&b["236x"]&&b["236x"].height,S=b&&b["236x"]&&b["236x"].width,I=b&&b["236x"]&&b["236x"].url),_&&g&&(T=Math.min(_*g,null!==(R=T)&&void 0!==R?R:1)),r)P=`${null!==(D=null==b||null===(O=b["236x"])||void 0===O?void 0:O.url)&&void 0!==D?D:""} 1x`;else if(o){var L,M;P=`${null!==(L=null==b||null===(M=b["564x"])||void 0===M?void 0:M.url)&&void 0!==L?L:""} 1x`}else{var N,z,F;P=[(null==b?void 0:b["474x"])&&`${null!==(N=b["474x"].url)&&void 0!==N?N:""} 2x`,(null==b?void 0:b["736x"])&&`${null!==(z=b["736x"].url)&&void 0!==z?z:""} 3x`,(null==b?void 0:b.orig)&&`${null!==(F=b.orig.url)&&void 0!==F?F:""} 4x`].filter(Boolean).join(", ")}const Z=(0,u.GH)(w,e,n),B=m?void 0:T,U=m?void 0:S,H=!!v,{boxHeight:V,boxWidth:W}=H?{boxHeight:null==v?void 0:v.imageHeight,boxWidth:null==v?void 0:v.imageWidth}:{boxHeight:B,boxWidth:U};return(0,h.jsx)(d.xu,{"data-test-id":"carousel-slot-container",height:V,width:W,children:(0,h.jsx)(d.xu,{height:m?p:void 0,width:m||void 0,"data-test-id":`carousel-img-${n}`,children:(0,h.jsx)(d.Ee,{alt:Z,fit:m?"cover":"none",naturalHeight:null!==(f=T)&&void 0!==f?f:1,naturalWidth:null!==(y=S)&&void 0!==y?y:1,onError:a,onLoad:s,src:null!==(x=I)&&void 0!==x?x:"",srcSet:P})})},`carousel-slot-${i}-${n}`)})(this.props.i18n,t,x,i,g,v,f,y,0,0,l,c,O,C,L)}))})]})}}function g(e){const t=(0,c.ZP)(),i=(0,l.S6)()(e.pinId)||e.pin,n=(0,r.Z)({carouselData:null==i?void 0:i.carousel_data,images:null==i?void 0:i.images,richMetadata:null==i?void 0:i.rich_metadata,richSummary:null==i?void 0:i.rich_summary,shouldUnifyImageSizes:!0});return(0,h.jsx)(_,{...e,carouselData:n,i18n:t})}m(_,"defaultProps",{showCarouselBadge:!0})},455024:(e,t,i)=>{i.d(t,{CU:()=>r,GH:()=>l,Iw:()=>s,gA:()=>c,tD:()=>a,vF:()=>d});const n=({containerWidth:e,contentWidth:t,index:i,slotAndGapWidth:o})=>{const r=i-1,a=r*o;return t-a>=e?a:n({index:r,slotAndGapWidth:o,containerWidth:e,contentWidth:t})},o=({containerWidth:e,contentWidth:t,gap:i,index:o,slidesShownPerPosition:r,slotAndGapWidth:a})=>n({containerWidth:e,contentWidth:t,index:o,slotAndGapWidth:a})+(({slidesShownPerPosition:e,slotAndGapWidth:t})=>t-(e-parseInt(e,10))*t)({slidesShownPerPosition:r,slotAndGapWidth:a})-i,r=({containerWidth:e,gap:t,index:i,numberOfSlides:n,slotWidth:r})=>{const a=r+t,s=a*n;if(s<=e)return 0;const l=e/a,c=(({index:e,numberOfSlides:t,slidesShownPerPosition:i})=>t-e-Math.floor(i)<1)({index:i,numberOfSlides:n,slidesShownPerPosition:l})?o({containerWidth:e,contentWidth:s,gap:t,index:i,slidesShownPerPosition:l,slotAndGapWidth:a}):i*a;return c?Math.round(-c):0},a=({containerWidth:e,gap:t,index:i,numberOfSlides:n,slotWidth:o})=>{const a=(o+t)*n;if(a<=e||0===e)return!0;const s=r({containerWidth:e,gap:t,index:i,numberOfSlides:n,slotWidth:o}),l=a-e;return Math.abs(s)+t>=l},s=({containerWidth:e,currentIndex:t,gap:i,index:n,numberOfSlides:o,slotWidth:a})=>{const s=a+i;if(s*o<=e||0===e)return!0;return r({containerWidth:e,gap:i,index:t,numberOfSlides:o,slotWidth:a})+s*n<e+s},l=(e,t,i)=>e||`${t._('carousel image', 'Alternate text for a carousel image that indicates it is a carousel pin, with carousel index followed', 'Alternate text for a carousel image that indicates it is a carousel pin, with carousel index followed')} ${i}`,c=({highResOnly:e,lowResOnly:t,slot:i})=>{var n,o,r;const{images:a}=i;var s,l,c,d;return t?`${null!==(s=null==a||null===(l=a["236x"])||void 0===l?void 0:l.url)&&void 0!==s?s:""} 1x`:e?`${null!==(c=null==a||null===(d=a["564x"])||void 0===d?void 0:d.url)&&void 0!==c?c:""} 1x`:[(null==a?void 0:a["474x"])&&`${null!==(n=a["474x"].url)&&void 0!==n?n:""} 2x`,(null==a?void 0:a["736x"])&&`${null!==(o=a["736x"].url)&&void 0!==o?o:""} 3x`,(null==a?void 0:a.orig)&&`${null!==(r=a.orig.url)&&void 0!==r?r:""} 4x`].filter(Boolean).join(", ")},d=(e,t,i,n,o=0)=>{if(i===t)return n*t*-1;const r=Math.floor(i-t),a=t+o;return n===e-1?-1*n*a+r:-1*n*a}},865607:(e,t,i)=>{i.d(t,{O:()=>c,Z:()=>d});var n=i(667294),o=i(898781),r=i(966113),a=i(883119),s=i(785893);const l={xs:12,sm:16,md:20,lg:24};function c({children:e}){const t=(0,o.ZP)();return(0,s.jsx)(a.u,{link:(0,s.jsx)(a.rU,{href:r.vB,target:"blank",children:(0,s.jsx)(a.xv,{color:"inverse",size:"100",weight:"bold",children:t._('Learn more', 'verifiedBadge.tooltip.link', 'Learn more about Pinterest\'s Merchant Guidelines')})}),text:t._('This retailer meets Pinterest\'s Merchant Guidelines', 'merchantVerification.badge.tooltip', 'Badge indicating that a merchant or user is verified'),children:e})}function d({hasVerifiedIdentity:e,iconOnly:t,isVerifiedMerchant:i,showText:r,size:d}){const u=(0,o.ZP)(),p=(0,s.jsxs)(a.kC,{alignItems:"center",justifyContent:"start",children:[(0,s.jsx)(a.JO,{accessibilityLabel:u._('Merchant verification badge icon', 'merchantVerification.badge.icon', 'Badge indicating that a merchant or user is verified'),color:"shopping",icon:"workflow-status-ok",inline:!0,size:l[d]}),r&&(0,s.jsx)(a.xu,{marginStart:2,children:(0,s.jsx)(a.xv,{color:"shopping",inline:!0,weight:"bold",children:u._('Verified merchant', 'creator.header.verifiedMerchant', 'this merchant is a verified merchant')})})]});return(0,s.jsxs)(n.Fragment,{children:[i&&!t&&(0,s.jsx)(c,{children:p}),i&&t&&p,e&&!i&&(0,s.jsx)(a.JO,{accessibilityLabel:u._('Domain verification icon', 'domainVerification.badge.icon', 'Badge indicating that a merchant or user is verified'),color:"error",icon:"check-circle",size:l[d]})]})}},401412:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(629337),o=i(276775),r=i(785893);function a({emptyState:e,feedItemProps:t=(()=>({})),feedKey:i,feedOffset:a=(()=>0),gridConfig:s=(()=>({})),noCache:l,pullToRefresh:c=!1,renderFeedItem:d,resourceName:u,resourceOptions:p,resourceSchema:h,trafficSource:m,serverRender:_}){return function(g){const v=(0,o.useLocation)(),f=(0,o.useHistory)(),y=(0,o.useRouteMatch)(),x={...g,location:v,history:f,match:y};return(0,r.jsx)(n.ZP,{resourceConfig:{name:u,options:"function"==typeof p?p(x):p,schema:h,noCache:"function"==typeof l?l(x):l},feedItemProps:t&&t(x),feedKey:"function"==typeof i?i(x):i,feedOffset:a(x),gridConfig:s&&s(x),pullToRefresh:c,renderFeedItem:d&&((e,t)=>d(e,t,g)),trafficSource:"function"==typeof m?m(x):m,emptyState:e&&e(x),serverRender:_})}}},998651:(e,t,i)=>{i.d(t,{GY:()=>a,LM:()=>l,h9:()=>c,r$:()=>s});var n=i(385740),o=i(909499);const r=["search_articles_story","shop_tab_upsell","story_pins_search_upsell","structured_search_bubble","user_style_story_v2","search_for_you_upsell"];function a({query:e,scope:t}){return`${e}-${t}`}function s({query:e,rs:t,scope:i},r){const a=(0,n.BE)(),s=!(null!=a&&a.viewType||null!=a&&a.viewParameter),l=(0,o.wF)(i);if(!s&&l){const{viewType:i,viewParameter:n}=null!=a?a:{};r({event_type:l,view_type:i,view_parameter:n,aux_data:{query:e,rs:t||"Unknown"}})}"hashtag_closeup"===t?r({event_type:101,component:13065,element:10273,view_type:142}):"hashtag_pinrep"===t&&r({event_type:101,component:0,element:10349,view_type:142})}const l=(e=[])=>{let t=!0;return e.reduce(((e,i)=>{var n;return t&&i.story_type&&r.includes(i.story_type)&&0===(null===(n=i.display_options)||void 0===n?void 0:n.num_columns_requested)?e.searchFullWidthStories.push(i):(t=!1,e.filteredResults.push(i)),e}),{searchFullWidthStories:[],filteredResults:[]})};function c(e){const{results:t=[]}=e||{};return!!t.find((e=>!(null==e||!e.is_eligible_for_filters)))}},245376:(e,t,i)=>{function n(e){return e&&5!==e?4===e?"stela":null:"related_products"}i.d(t,{Z:()=>n})},445345:(e,t,i)=>{i.d(t,{Z:()=>xe});var n=i(934348),o=i.n(n),r=i(422908),a=i.n(r),s=i(832637),l=i.n(s),c=i(986021),d=i.n(c),u=i(252881),p=i.n(u),h=i(216462),m=i.n(h),_=i(435574),g=i.n(_),v=i(890398),f=i.n(v),y=i(597437),x=i.n(y),b=i(358787),w=i.n(b),P=i(403529),S=i.n(P),T=i(687096),I=i.n(T),k=i(720069),E=i.n(k),A=i(154047),C=i.n(A),j=i(899338),R=i.n(j),D=i(532492),O=i.n(D),L=i(361316),M=i.n(L),N=i(671307),z=i.n(N),F=i(450914),Z=i.n(F),B=i(888784),U=i.n(B),H=i(979730),V=i.n(H),W=i(267569),$=i.n(W),G=i(554154),K=i.n(G),q=i(234540),Y=i.n(q),X=i(209153),J=i.n(X),Q=i(271648),ee=i.n(Q),te=i(108806),ie=i.n(te),ne=i(505944),oe=i.n(ne),re=i(373750),ae=i.n(re),se=i(354593),le=i.n(se),ce=i(523673),de=i.n(ce),ue=i(70098),pe=i.n(ue),he=i(692169),me=i.n(he),_e=i(898781),ge=i(948376),ve=i(883119),fe=i(785893);const ye={"AR-SA":o(),"ZH-CN":pe(),"ZH-TW":me(),CS:a(),DA:l(),DE:d(),EL:p(),EN:m(),ES:g(),FI:f(),FR:x(),HI:w(),HU:S(),ID:I(),IT:E(),JA:C(),KO:R(),ML:O(),MS:M(),NB:U(),NL:z(),NN:Z(),NO:U(),PL:V(),PT:$(),RO:K(),RU:Y(),SK:J(),SV:ee(),TH:ie(),TL:oe(),TR:ae(),UK:le(),VI:de()};function xe({locale:e}){const t=(0,_e.ZP)(),i=(0,ge.G3)(e),n=ye[i]||ye.EN,o=t._('Install the Pinterest app on Android', ' - ', ' -- ');return(0,fe.jsx)(ve.Ee,{naturalHeight:80,naturalWidth:270,src:n,alt:o})}},819764:(e,t,i)=>{i.d(t,{Z:()=>xe});var n=i(993235),o=i.n(n),r=i(908601),a=i.n(r),s=i(198667),l=i.n(s),c=i(324637),d=i.n(c),u=i(669639),p=i.n(u),h=i(882786),m=i.n(h),_=i(598188),g=i.n(_),v=i(143832),f=i.n(v),y=i(484974),x=i.n(y),b=i(629958),w=i.n(b),P=i(7747),S=i.n(P),T=i(939492),I=i.n(T),k=i(800202),E=i.n(k),A=i(799486),C=i.n(A),j=i(511036),R=i.n(j),D=i(83365),O=i.n(D),L=i(309285),M=i.n(L),N=i(186665),z=i.n(N),F=i(452833),Z=i.n(F),B=i(759050),U=i.n(B),H=i(9046),V=i.n(H),W=i(27322),$=i.n(W),G=i(501796),K=i.n(G),q=i(791841),Y=i.n(q),X=i(50486),J=i.n(X),Q=i(417658),ee=i.n(Q),te=i(461619),ie=i.n(te),ne=i(350421),oe=i.n(ne),re=i(97776),ae=i.n(re),se=i(394445),le=i.n(se),ce=i(948992),de=i.n(ce),ue=i(137404),pe=i.n(ue),he=i(697072),me=i.n(he),_e=i(898781),ge=i(948376),ve=i(883119),fe=i(785893);const ye={"AR-SA":o(),"ZH-CN":pe(),"ZH-TW":me(),CS:a(),DA:l(),DE:d(),EL:p(),EN:m(),ES:g(),FI:f(),FR:x(),HI:w(),HU:S(),ID:I(),IT:E(),JA:C(),KO:R(),ML:O(),MS:M(),NB:U(),NL:z(),NN:Z(),NO:U(),PL:V(),PT:$(),RO:K(),RU:Y(),SK:J(),SV:ee(),TH:ie(),TL:oe(),TR:ae(),UK:le(),VI:de()};function xe({locale:e}){const t=(0,_e.ZP)(),i=(0,ge.G3)(e),n=ye[i]||ye.EN,o=t._('Install the Pinterest app on iOS', ' - ', ' -- ');return(0,fe.jsx)(ve.Ee,{naturalHeight:80,naturalWidth:270,src:n,alt:o})}},821997:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(785893);function o({size:e,noCircle:t}){return(0,n.jsxs)("svg",{height:e,style:{display:"block"},viewBox:t?"3 3 70 70":"-3 -3 82 82",width:e,children:[t?null:(0,n.jsx)("circle",{cx:"38",cy:"38",fill:"white",r:"40"}),(0,n.jsx)("path",{d:"M27.5 71c3.3 1 6.7 1.6 10.3 1.6C57 72.6 72.6 57 72.6 37.8 72.6 18.6 57 3 37.8 3 18.6 3 3 18.6 3 37.8c0 14.8 9.3 27.5 22.4 32.5-.3-2.7-.6-7.2 0-10.3l4-17.2s-1-2-1-5.2c0-4.8 3-8.4 6.4-8.4 3 0 4.4 2.2 4.4 5 0 3-2 7.3-3 11.4C35.6 49 38 52 41.5 52c6.2 0 11-6.6 11-16 0-8.3-6-14-14.6-14-9.8 0-15.6 7.3-15.6 15 0 3 1 6 2.6 8 .3.2.3.5.2 1l-1 3.8c0 .6-.4.8-1 .4-4.4-2-7-8.3-7-13.4 0-11 7.8-21 22.8-21 12 0 21.3 8.6 21.3 20 0 12-7.4 21.6-18 21.6-3.4 0-6.7-1.8-7.8-4L32 61.7c-.8 3-3 7-4.5 9.4z",fill:"#fb7072",fillRule:"evenodd"})]})}},10216:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(883119),o=i(785893);function r({skinToneOvalHeight:e,skinToneOvalWidth:t,swatchColors:i}){return(0,o.jsx)(n.xu,{alignItems:"center","data-test-id":"skinToneFilterSwatch",display:"flex",overflow:"hidden",rounding:"pill",width:t,wrap:!0,children:i.map(((i,r)=>(0,o.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:i}},height:e/2,width:t/2},`${i}-${r}`)))})}var a=i(898781),s=i(112690);const l={filter_name:"Skin tone range",filter_term:"skin_face_color_l",multi_select:!1,options:[{display:"Range 1",swatch_hex_colors:["#F0E3DC","#F8D7D8","#F2D7BE","#F7C3AF"],term:"skin_color_bucket_id:1"},{display:"Range 2",swatch_hex_colors:["#DEBAB0","#E0999A","#DDA67C","#D98A64"],term:"skin_color_bucket_id:2"},{display:"Range 3",swatch_hex_colors:["#9A6B52","#A25847","#B37143","#BF6951"],term:"skin_color_bucket_id:3"},{display:"Range 4",swatch_hex_colors:["#683929","#34261F","#64281B","#4F2221"],term:"skin_color_bucket_id:4"}],vertical:"skin_tone"};function c({onClickApplyFilter:e,query:t,selectedSkinToneTerm:i,showHeaderText:c=!0,skinToneFilters:d=l}){const u=(0,a.ZP)(),p=(0,s.Z)(),h=d.options,m=`/search/pins/?rs=rs&q=${t}`,_=i?u._('Some ideas in this skin tone range', 'SkinToneFilters.copy.termSelected', 'Skin tone filters text'):u._('Pick a skin tone range', 'SkinToneFilters.copy.noTermSelected', 'Skin tone filters text'),{filtersContainerHeight:g,filtersContainerWidth:v,skinToneOvalHeight:f,skinToneOvalWidth:y}=function(){const e="undefined"!=typeof window?Math.min((window.innerWidth-40)/4-4,96):0;return{filtersContainerHeight:52,filtersContainerWidth:e,skinToneOvalHeight:44,skinToneOvalWidth:e-8}}();return(0,o.jsxs)(n.kC,{alignItems:"center",direction:"column",height:c?88:52,children:[c&&(0,o.jsx)(n.xu,{marginBottom:2,children:(0,o.jsx)(n.xv,{color:"default",overflow:"normal",weight:"bold",children:_})}),(0,o.jsx)(n.kC,{alignItems:"stretch",flex:"none",justifyContent:"around",children:h.map((({swatch_hex_colors:a,term:s},l)=>(0,o.jsx)(n.iP,{role:"link",onTap:()=>{!function(e,t){const{index:i,query:n,onClickApplyFilter:o}=e;t({aux_data:{entered_query:n,filter_type:"skin_tone",filter_value:i},element:1341,event_type:102,view_parameter:43,view_type:2}),null==o||o()}({index:l,query:t,onClickApplyFilter:e},p)},tapStyle:"none",href:`${m}${i!==s?`&filters=${encodeURIComponent(s)}`:""}`,children:(0,o.jsx)(n.xu,{alignItems:"center","data-test-id":"skin-tone-option",color:i===s?"selected":"default",display:"flex",height:g,justifyContent:"around",rounding:"pill",width:v,children:(0,o.jsx)(n.xu,{alignItems:"center",color:"default",display:"flex",height:g-4,justifyContent:"around",rounding:"pill",width:v-4,children:(0,o.jsx)(r,{skinToneOvalHeight:f,skinToneOvalWidth:y,swatchColors:a})})})},s)))})]})}},962832:(e,t,i)=>{i.d(t,{$J:()=>T,AP:()=>L,Dm:()=>I,Fv:()=>P,H$:()=>R,In:()=>O,Ng:()=>S,RH:()=>x,Wj:()=>D,_P:()=>k,go:()=>w});var n=i(126098),o=i(6637),r=i(524309),a=i(30287),s=i(53987),l=i(867820),c=i(957161);const d="home",u="closeup",p="news_hub",h="board",m="profile",_="topic",g="today",v="business",f="search";let y;const x="_push",b=e=>{e.onupdatefound=()=>{(0,l.My)("mweb_service_worker.update_found")}},w=()=>Boolean("undefined"!=typeof navigator&&navigator.serviceWorker&&navigator.serviceWorker.controller),P=()=>new Promise(((e,t)=>{const i=navigator.serviceWorker,{pwaType:n,twaType:o}=y.getState().session,r=new URLSearchParams({source_url:window.location.pathname});n&&o&&(0,a.Rx)(o)&&(r.append("pwa_type",n),r.append("twa_type",o)),Boolean("undefined"!=typeof document&&document.referrer&&!document.referrer.startsWith(window.location.origin))&&r.append("referrer",document.referrer),i&&i.register?((0,l.My)("mweb_service_worker.install_attempt"),i.register(`/sw.js?${r.toString()}`).then((t=>{(0,l.My)("mweb_service_worker.install_success"),b(t),e(t)})).catch((e=>{(0,l.tj)("mweb_service_worker.install_fail",{error:e.message}),t(e)}))):e()})),S=()=>new Promise(((e,t)=>{const i=navigator.serviceWorker;i&&i.getRegistration?((0,l.My)("mweb_service_worker.update_attempt"),i.getRegistration().then((i=>{i?i.update().then((()=>{(0,l.My)("mweb_service_worker.update_success"),b(i),e(i)})).catch((e=>{(0,l.tj)("mweb_service_worker.update_fail",{error:e.message}),t(e)})):P().then(e)}))):e()})),T=()=>{const e=y.getState().session.isAuthenticated;(0,l.My)(`mweb.${e?"auth":"unauth"}.register_service_worker`),P()},I=()=>{const e=navigator.serviceWorker;return e&&e.getRegistration?((0,l.My)("mweb_service_worker.unregister_attempt"),(0,r.Qi)(),e.getRegistration().then((e=>{if(e)return e.unregister().then((()=>((0,l.My)("mweb_service_worker.unregister_success"),navigator.serviceWorker&&window.caches?window.caches.keys().then((e=>{const t=e.find((e=>e.startsWith("workbox-precaching")));return t?window.caches.delete(t):null})).then((()=>(0,l.My)("mweb_service_worker.clear_app_shell"))):Promise.resolve()))).catch((e=>{(0,l.tj)("mweb_service_worker.unregister_fail",{error:e.message})}))}))):Promise.resolve()},k=()=>!(!w()||!("SyncManager"in window)),E=e=>(0,s.C$)(e)?d:(0,s.L6)(e)?u:(0,s.l4)(e)?p:(0,s.am)(e)?h:(0,s.cD)(e)?m:(0,s.En)(e)?f:(0,s.$V)(e)?_:(0,s.Zz)(e)?g:(0,s.Ni)(e)?v:"undefined",A=e=>{switch(E(e)){case d:return{viewType:1,viewParameter:92};case u:return{viewType:3,viewParameter:void 0};case p:return{viewType:107,viewParameter:3081};case h:return{viewType:5,viewParameter:void 0};case f:return{viewType:2,viewParameter:43};case _:return{viewType:210,viewParameter:void 0};case m:return{viewType:4,viewParameter:void 0};case v:return{viewType:409,viewParameter:3397};case g:return{viewType:1,viewParameter:3372};default:return{viewType:void 0,viewParameter:void 0}}},C=(e,t)=>(0,l.tj)(e,{browser:y.getState().session.browser,version:Math.floor(parseInt(y.getState().session.browserVersion,10)),...t}),j=(0,n.Z)(),R="default"===j||"granted"===j,D=(e,t,i,n)=>{const r=navigator.serviceWorker,a=Boolean((0,c.qn)(x)),s={experimentName:i||"noExperiment",experimentGroup:n||"noGroup"};return r&&r.ready&&R&&!a?(t({event_type:13,view_type:170,component:13125,aux_data:{experiment_name:i,experiment_group:n}}),C(`mweb.notifications_upsell.${E(e)}.viewed`,s),r.ready.then((e=>e.pushManager.subscribe({userVisibleOnly:!0}))).then((i=>((e,t,i,n)=>{o.Z.create("WebPushDeviceResource",{}).callGet().then((t=>{const i=(({subscriptionId:e,endpoint:t})=>{return e||(i=t.split("/"))[i.length-1];var i})(e);if(t.resource_response.data[i])return;const n={registration_id:i,subscription_endpoint:e.endpoint};o.Z.create("WebPushDeviceResource",n).callCreate()})),(0,c.Nh)(x,"subscribed"),C(`mweb.notifications_upsell.${E(t)}.subscribed`,i);const r=A(t);n({component:13125,element:10357,event_type:102,view_type:r.viewType,view_parameter:r.viewParameter,aux_data:{experiment_name:i.experimentName,experiment_group:i.experimentGroup}})})(i,e,s,t)),(()=>((e,t,i)=>{(0,c.Nh)(x,"denied"),C(`mweb.notifications_upsell.${E(e)}.denied`,t);const n=A(e);i({component:13125,element:10358,event_type:102,view_type:n.viewType,view_parameter:n.viewParameter,aux_data:{experiment_name:t.experimentName,experiment_group:t.experimentGroup}})})(e,s,t)))):Promise.reject()},O=e=>{y=e},L=({isAuthenticated:e,isAppShell:t})=>{let i=!1;const n=n=>{if(i)return;i=!0;const o=`${t?"warm":"cold"}.${e?"auth":"unauth"}`;(0,l.My)(`mweb_service_worker.appshell_status.${o}.${n}`)},o=navigator.serviceWorker,r=null==o?void 0:o.controller;o&&r?setTimeout((()=>n("timeout")),1e3):n("no_worker")}},886076:(e,t,i)=>{function n({isEligibleForPdp:e,isOosProduct:t,isStaleProduct:i,pinShoppingFlags:n}){if(n){const o=n,r={pin_is_shop_the_look:o.includes(2),pin_show_pdp:e||t||i,is_available:o.includes(1),is_product_pin_v2:o.includes(5),is_rich_product_pin:o.includes(6)};return JSON.stringify(r)}}i.d(t,{Z:()=>n})},830157:(e,t,i)=>{function n(e,t){return e||(t?`${t}~0`:"~0")}i.d(t,{Z:()=>n})},948376:(e,t,i)=>{i.d(t,{G3:()=>d,Rp:()=>c,kp:()=>l});var n=i(622096),o=i(202139),r=i(957161);const a=14*o.F4;function s(e,t,i){return e-t>i}const l=e=>{const t=function(){const e=Date.now(),t=Number((0,r.qn)("appUpsell"));return{currentTime:e,firstUpsellTime:Number((0,r.qn)("firstUpsellTime")),lastUpsellTime:t,showedAppUpsellCurrentSession:Boolean((0,n.qn)("showedAppUpsellCurrentSession"))}}();return e?function(e,t,i){const{currentTime:n,firstUpsellTime:o,lastUpsellTime:l,showedAppUpsellCurrentSession:c}=e;return i=i||a,!o||function(e,t,i){return e<t+i}(n,o,t)?!c:!!s(n,l,i)&&((0,r.L_)("firstUpsellTime"),!0)}(t,o.F4):function(e,t){const{currentTime:i,lastUpsellTime:n}=e;return t=t||a,!n||s(i,n,t)}(t)},c=({platform:e,userAgent:t})=>{try{return"android"===e&&parseFloat((e=>{const t=(e=e.toLowerCase()).match(/android\s([0-9\.]*)/i);return t?t[1]:void 0})(t))<7}catch(i){return!1}},d=e=>(e.startsWith("zh")||e.startsWith("ar")?e:e.slice(0,2)).toUpperCase()},805410:(e,t,i)=>{i.d(t,{I:()=>n,y:()=>o});const n="uploaded",o="pinbuilder"},562034:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(172071),o=i(407043);const r={13:e=>!!e.view_parameter,9105:e=>!!e.view_parameter,9104:e=>!!e.view_parameter,10357:e=>!!e.view_parameter,10358:e=>!!e.view_parameter,10359:e=>!!e.view_parameter,10360:e=>!!e.view_parameter,102:e=>!!e.element&&!!e.view_parameter,101:e=>!!e.element&&!!e.view_parameter,4104:e=>!!e.view_parameter&&!e.element,4105:e=>!!e.view_parameter&&!e.element,8900:e=>!!e.view_parameter&&!e.element,9626:e=>!!e.view_parameter&&!e.element,9625:e=>!!e.view_parameter&&!e.element,46:e=>!!e.view_parameter&&!e.element,45:e=>!!e.view_parameter&&!e.element},a=[96,34,241,1030,1151,1150,136,11906,124,240,12772,30,13],s=[259,3120,3139,172,3596,3542,261,171,260],l=()=>{const{logContextEvent:e}=(0,o.v)();return t=>{const{event_type:i,element:o,view_parameter:l,component:c,view_type:d,aux_data:u}=t,p=(e=>{const{event_type:t,element:i,view_parameter:n}=e;return!Object.keys(r).includes(`${t}`)||i&&!a.includes(i)||n&&!s.includes(n)?{code:"invalid_param_types",message:"Please provide valid parameter types for Nux events. Refer to NuxParams type."}:r[t](e)?-1===[213,24,260].indexOf(e.view_type)?{code:"missing_view_type",message:"Please provide a valid ViewType for Nux Events."}:null:{code:"invalid_param_combinations",message:"Please provide valid param combinations for Nux events. Refer to NuxParams type."}})(t);if(p)return console.error(p.message),void n.Z.increment("webapp.track_nux_invalid_parameters",1,{code:p.code,component:c,event_type:i,element:o,view_type:d,view_parameter:l});e({component:c,event_type:i,element:o,view_parameter:l,view_type:d,aux_data:u})}}},844887:(e,t,i)=>{i.d(t,{DZ:()=>u,Dv:()=>h,Es:()=>c,HW:()=>l,mv:()=>d,nb:()=>p});var n=i(957161),o=i(773285),r=i(116485);const a=e=>e>=Date.now()-72e5,s=(e,t)=>{const i=[];if(e)for(const n of e)t&&!n.is_shared||a(n.ts)&&i.push(n);return i},l=()=>{const e=(0,n.qn)(r.zR),t=e?JSON.parse(e):[],i=s(t,!1),o=s(t,!0),l=i.map((e=>e.first_pin_image_signature)),c=i.map((e=>e.pin_id)),d=o.map((e=>e.first_pin_image_signature)),u=(e=>{const t={};if(e)for(const i of e)i.is_shared&&a(i.ts)&&i.pin_id&&(t[i.pin_id]={inviteCode:i.pin_invite_code});return t})(t),p=(0,n.qn)(r.dy),h=p?JSON.parse(p):[];return{extraPlpImages:l,plpImageRenderData:i,extraPlpIds:c,extraBlpImages:s(h,!0).map((e=>e.first_pin_image_signature)),extraSharedImages:d,sharedPinData:u}},c=(e,t)=>{if(e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1){if(e[i].id!==t[i].id)return!1}return!0},d=(e,t)=>(e.nuxTopics?e.nuxTopics.map((({id:e})=>t[e])):[]).filter((e=>e.is_followed)),u=(e,t)=>e.nuxTopics?e.nuxTopics.map((({id:e})=>t[e])):null;function p(){const{checkExperiment:e}=(0,o.F)(),{group:t}=e("activation_new_user_holdout_2022_h2");return t.includes("holdout")}const h=()=>{const{checkExperiment:e}=(0,o.F)(),{anyEnabled:t,group:i}=e("mweb_mini_renux");return{inMiniRenuxEnabledGroup:t,interestsLimit:t?Number(i.slice(-1)):NaN}}},62409:(e,t,i)=>{i.d(t,{AH:()=>l,Bk:()=>r,CK:()=>s,Xe:()=>o,kb:()=>a,wS:()=>n});const n=e=>{if(!e)return Object.freeze({});let t;return e.native_creator?(t=e.native_creator,t):e.link_domain?(t=e.link_domain.official_user,t):(t=e.origin_pinner||e.pinner,t)};function o({hasLinkDomain:e,hasNativeCreator:t,hasOriginPinner:i,pinDomain:n,sourceUserUsername:o,sourceUserFullName:r}){return!t&&(e||i)&&o?{pinCreditLink:`/${o}/`,pinCredit:r}:{pinCreditLink:void 0,pinCredit:!t&&e?n:""}}const r=({i18n:e,isLego:t,hasLinkDomain:i,hasRichMetadataArticle:n,hasRichMetadataTutorial:o,hasRichMetadataRecipeCategorizedIngredients:r,hasRichMetadataProductOfferSummary:a,hasRichSummaryProductOfferSummary:s,richMetadataRecipeFromAggregatedData:l,richMetadataProductName:c,richSummaryProductName:d})=>{const u=r;let p;c&&a&&(p=!0);const h=n,m=o;let _=t?e._('From ', 'Closeup pin annotation', 'Closeup pin annotation'):e._('Saved from ', 'Closeup pin annotation', 'Closeup pin annotation');return!i||l?_=e._('Saved by ', 'Closeup pin annotation', 'Closeup pin annotation'):p?_=e._('Product sold by ', 'pin annotation', 'pin annotation'):m?(t&&(_=e._('From ', 'pin annotation', 'pin annotation')),_=e._('Saved from ', 'pin annotation', 'pin annotation')):u?_=e._('Recipe from ', 'pin annotation', 'pin annotation'):h&&(_=e._('Article from ', 'pin annotation', 'pin annotation')),!a&&d&&s&&(_=e._('Product sold by ', 'pin annotation', 'pin annotation')),_},a=e=>{const t=e.link_domain,i=e.rich_metadata,n=e.rich_summary;let o;if(t&&!(i&&i.recipe&&i.recipe.from_aggregated_data)){let e;var r;if(i&&i.products&&i.products[0]&&(e=!!(i&&i.products[0].name&&i.products[0].offer_summary)),e)o=null==i||null===(r=i.products)||void 0===r?void 0:r[0].offer_summary}if(!o&&n){let e;n&&n.products&&n.products[0]&&(e=!!(n&&n.products[0].name&&n.products[0].offer_summary),e&&(o=n.products[0].offer_summary))}return o},s=({hasRichMetadata:e,hasRichMetadataProducts:t,hasRichMetadataArticle:i,hasRichMetadataRecipe:n})=>e?t?144:i?141:n?145:139:140,l=e=>!!e&&!e.startsWith("https://i.pinimg.com")},772486:(e,t,i)=>{i.d(t,{XK:()=>s,jC:()=>a,yd:()=>l});var n=i(745760);let o=null,r=null;const a=((e,t)=>{let i=null;return a=>{var s;if(a&&!i)return i={...a,event_type:e,time:(0,n.h1)()},null===(s=r)||void 0===s||s.logContextEvent(i),o&&i&&o.storeClickthroughProperties(i),e;if(!a&&i){var l;const e={...i,event_type:t,duration_ns:(0,n.h1)()-i.time};return null===(l=r)||void 0===l||l.logContextEvent(e),i=null,t}return null}})(12,4100),s=e=>{o=e},l=e=>{r=e}},534427:(e,t,i)=>{i.d(t,{E:()=>a,S:()=>s});var n=i(667294),o=i(957161);const r="_loggingInNotHome",a=e=>{e?(0,o.Nh)(r,1):(0,o.L_)(r)},s=()=>{const[e,t]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{t(!0)}),[]),e&&(0,o.qn)(r)}},305324:(e,t,i)=>{i.d(t,{M:()=>v,g:()=>f});var n,o=i(667294),r=i(590674),a=(i(883119),i(867820)),s=i(447409),l=i(50286),c=i(430235),d=i(874317),u=i(167912),p=i(785893);const h=void 0!==n?n:n=i(110767);const m=({queryReference:e,...t})=>{var i;const n=(0,u.usePreloadedQuery)(h,e),o=null==n||null===(i=n.v3GetPinQuery)||void 0===i?void 0:i.data;return o?(0,p.jsx)(c.Z,{...t,graphqlRef:o}):null},_=({queryReference:e,...t})=>{var i;const n=(0,u.usePreloadedQuery)(h,e),o=null==n||null===(i=n.v3GetPinQuery)||void 0===i?void 0:i.data;return o?(0,p.jsx)(d.ZP,{...t,graphqlRef:o}):null},g=(0,o.createContext)((()=>()=>{})),v=()=>(0,o.useContext)(g),f=({children:e,feedRef:t,viewType:i,viewParameter:n,useGraphql:v})=>{const[f,y]=(0,o.useState)(null),[x,b]=(0,o.useState)(null),[w,P]=(0,o.useState)(!1),[S,T]=(0,o.useState)(null),[I,k]=(0,o.useState)(!1),E=(0,l.HG)(),[A,C]=(0,u.useQueryLoader)(h);if(v&&!A&&S){C(function({pinId:e}){return{query:h,variables:{pinId:e}}}({pinId:S}).variables)}const j=()=>{document&&document.body&&document.body.style&&(document.body.style.overflow="unset")};(0,o.useEffect)((()=>j),[]);const R=(0,o.useCallback)((e=>i=>{const{pinId:n,deviceOptions:o}=e;if(i.stopPropagation(),i.preventDefault(),T(n),o.isDesktop)k(o.isMainPinImage),(0,a.My)("dweb.unauth.context_menu.open_menu"),y({xPosition:i.clientX,yPosition:i.clientY}),document&&document.body&&document.body.style&&(document.body.style.overflow="hidden");else{(0,a.My)("mweb.unauth.related_pin.context_menu.open");const e=i.changedTouches.item(0);if(t&&t.current){const i=t.current.getBoundingClientRect(),n=Math.min(e.pageX-i.left,i.width-d.nt),r=e.pageY-s.n;b({xPosition:n,yPosition:r,context:o.context})}}}),[t]),D=!!f;(0,o.useEffect)((()=>{const e=()=>{y(null),j(),(0,a.My)("dweb.unauth.context_menu.click_away")};return D&&document.addEventListener("click",e),()=>{D&&document.removeEventListener("click",e)}}),[D]);const O=f&&S?v?A&&(0,p.jsx)(m,{desktopContextMenuState:f,pinId:S,isMainPinImage:!!I,queryReference:A}):(0,p.jsx)(c.Z,{desktopContextMenuState:f,pinId:S,isMainPinImage:!!I,graphqlRef:null}):null,L=x&&S?v?A&&(0,p.jsx)(_,{mwebContextMenuState:x,pinId:S,openShareModal:P,setMwebContextMenuState:b,queryReference:A}):(0,p.jsx)(d.ZP,{graphqlRef:null,mwebContextMenuState:x,pinId:S,openShareModal:P,setMwebContextMenuState:b}):null;return(0,p.jsx)(g.Provider,{value:R,children:(0,p.jsxs)(o.Fragment,{children:[e,E&&O,!E&&L,!E&&w&&S&&(0,p.jsx)(r.default,{objectType:1,isOpen:w,onDismiss:()=>P(!1),objectId:S,hideContactsSuggestions:!0,element:12016,viewType:i,viewParameter:n})]})})}},364034:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(667294),o=i(807609),r=i(957161);const a=e=>{const t=(0,r.qn)(e);if(!t)return null;try{return JSON.parse(t)}catch(i){return null}};var s=i(773285);const l=()=>{const[e,t]=function(e){const t=(0,o.Z)(),[i,s]=(0,n.useState)(t?null:a(e));return(0,n.useEffect)((()=>{s(a(e))}),[e]),[i,(0,n.useCallback)((t=>{s(t),null===t?(0,r.L_)(e):(0,r.Nh)(e,JSON.stringify(t))}),[e])]}("unauthSavedPins"),i=null!==(c=null==(l=e)?void 0:l.pins)&&void 0!==c?c:[];var l,c;const d=e=>t((e=>e.length?{pins:e}:null)(e)),{checkExperiment:u}=(0,s.F)(),p=()=>{const{anyEnabled:e,group:t}=u("pcons_mweb_save_v3");let n=0;if(e){const e=t.split("_")[1];n=e?parseInt(e,10):0}return i.length<n};return{pins:i,save:e=>{p()&&d(i.filter((({id:t})=>t!==e.id)).concat([e]))},unsave:e=>d(i.filter((({id:t})=>t!==e))),isSaved:e=>i.some((({id:t})=>t===e)),clear:()=>d([]),canSaveMore:p}}},691720:(e,t,i)=>{i.d(t,{Hg:()=>o,T_:()=>a,g6:()=>r,w6:()=>n});const n=(e,t)=>Array.from({length:t-e},((t,i)=>i+e)),o=508,r=600;function a(e,t){if(!t.startsWith("en"))return e;return e.split(" ").map((e=>e===e.toUpperCase()?e:e.toLowerCase())).join(" ")}},698629:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(667294),o=i(391254),r=i(619623),a=i(50286),s=i(444445),l=i(883119),c=i(785893);const d="PinGridSkeletonLoader__tall",u="PinGridSkeletonLoader__short",p=({size:e})=>(0,c.jsx)(l.xu,{padding:1,children:(0,c.jsx)("div",{className:"tall"===e?d:u})}),h=({children:e})=>(0,c.jsx)(l.kC,{direction:"column",gap:{row:0,column:2},children:e}),m=({partialViewportWidth:e})=>{const t="desktop"===(0,a.ZP)(),i=t?s.yF:s.tG;return(0,c.jsxs)(n.Fragment,{children:[(0,c.jsx)(o.Z,{unsafeCSS:[{name:d,height:250},{name:u,height:150}].map((({name:e,height:t})=>(0,r.Z)({name:e,width:i,height:t}))).join("")}),(0,c.jsx)(l.xu,{marginStart:s.qG,marginEnd:s.qG,children:t?(0,c.jsxs)(l.kC,{direction:"row",gap:{row:s.jC,column:0},children:[(0,c.jsx)(h,{children:(0,c.jsx)(p,{size:"tall"})}),(0,c.jsx)(h,{children:(0,c.jsx)(p,{size:"short"})}),(0,c.jsx)(h,{children:(0,c.jsx)(p,{size:"tall"})}),!e&&(0,c.jsx)(h,{children:(0,c.jsx)(p,{size:"short"})})]}):(0,c.jsxs)(l.kC,{direction:"row",overflow:"hidden",justifyContent:"center",children:[(0,c.jsxs)(h,{children:[(0,c.jsx)(p,{size:"tall"}),(0,c.jsx)(p,{size:"short"}),(0,c.jsx)(p,{size:"tall"})]}),(0,c.jsxs)(h,{children:[(0,c.jsx)(p,{size:"short"}),(0,c.jsx)(p,{size:"tall"}),(0,c.jsx)(p,{size:"short"}),(0,c.jsx)(p,{size:"tall"})]})]})})]})}},619623:(e,t,i)=>{i.d(t,{Z:()=>n});const n=({name:e,width:t,height:i})=>{const n=`${i}${"number"==typeof i?"px":""}`,o="number"==typeof t?t:236;return`\n.${e} {\n  -webkit-animation-duration: 1s;\n  -webkit-animation-fill-mode: forwards;\n  -webkit-animation-iteration-count: infinite;\n  -webkit-animation-name: ${e}_placeHolderShimmer;\n  -webkit-animation-timing-function: linear;\n  border-radius: 16px;\n  background: #f6f7f9;\n  background-image: linear-gradient(to right, #f6f7f9 0%, #e9ebee 20%, #f6f7f9 40%, #f6f7f9 100%);\n  background-repeat: no-repeat;\n  background-size: ${o} ${n};\n  width: ${`${t}${"number"==typeof t?"px":""}`};\n  height: ${n};\n}\n\n@keyframes ${e}_placeHolderShimmer{\n  0% {\n      background-position: -${o}px 0;\n  }\n  100% {\n      background-position: ${o}px 0;\n  }\n}\n`}},987318:(e,t,i)=>{i.d(t,{H:()=>r,o:()=>o});var n=i(425288);const{Provider:o,useHook:r}=(0,n.Z)("LimitedLogin")},945698:(e,t,i)=>{i.d(t,{N4:()=>r,Wh:()=>n,hr:()=>o});const n=e=>e._('Log in to continue', 'limitedLogin.modalHeader.default', 'Default title on mobile web limited login modal'),o=e=>e._('You\'re almost there! Log in to access all of Pinterest', 'loginModal.limitedLogin.subheader', 'Subheader text on personalized login modal/flyout to remind users to log in'),r=({i18n:e,toFollow:t})=>t?e._('Log in to follow', 'limitedLogin.modalHeader.follow', 'Title on mobile web limited login modal to prompt users to login to follow a user or board.'):e._('Log in to unfollow', 'limitedLogin.modalHeader.unfollow', 'Title on mobile web limited login modal to prompt users to login to unfollow a user or board.')},927383:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(898781),o=i(50286),r=i(987318),a=i(945698);const s=()=>{const e=(0,n.ZP)(),t=(0,o.HG)(),{viewer:i,loginForMore:s,limitedLoginModalSubheader:l,limitedLoginModalNextLocation:c}=(0,r.H)();return"LIMITED_LOGIN"===i.type?({modalHeader:i,nextLocation:n})=>o=>{let r=null;o&&(o.nativeEvent&&o.nativeEvent instanceof Event?r=o:o.event&&(r=o.event)),r&&(r.preventDefault&&r.preventDefault(),r.stopPropagation&&r.stopPropagation()),i||(i=t?(0,a.hr)(e):(0,a.Wh)(e)),null==s||s.setVisible(!0),null==l||l.setText(i),n&&(null==c||c.setRoute(n))}:({fn:e})=>e}},398625:(e,t,i)=>{i.d(t,{L:()=>l,T:()=>s});var n=i(667294),o=i(425288),r=i(785893);const{Provider:a,useMaybeHook:s}=(0,o.Z)("MainPinSwipeContextType");function l({children:e}){const[t,i]=(0,n.useState)(!1),[o,s]=(0,n.useState)(""),[l,c]=(0,n.useState)(""),[d,u]=(0,n.useState)(0),[p,h]=(0,n.useState)(!1),m=(0,n.useMemo)((()=>({showMainPinSwipeOverlay:t,setShowMainPinSwipeOverlay:i,lastMainPinSwipeDirection:o,setLastMainPinSwipeDirection:s,firstRelatedPinId:l,setFirstRelatedPinId:c,numOfMainPinSwipes:d,setNumOfMainPinSwipes:u,shouldShowMainPinSwipeAppUpsell:p,setShouldShowMainPinSwipeAppUpsell:h})),[t,i,o,s,l,c,d,u,p,h]);return(0,r.jsx)(a,{value:m,children:e})}},56390:(e,t,i)=>{i.d(t,{C:()=>l,P:()=>s});var n=i(172071),o=i(53987),r=i(622096);const a="msmrsfda",s=()=>!!(0,r.qn)(a),l=e=>{(0,o.LM)(e)&&!s()&&((0,r.Nh)(a,"1"),n.Z.incrementNow("mobile_signup_modal.rules.suppress_for_discover_article",1))}},633083:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(643010),o=i(773285),r=i(883119),a=i(785893);function s({color:e,image:t,isSelected:i,title:s}){var l,c,d;const{checkExperiment:u}=(0,o.F)();return(0,a.jsxs)(r.xu,{alignItems:"center","aria-selected":i,dangerouslySetInlineStyle:{__style:{backgroundColor:(0,n.Yc)()&&u("mweb_pill_rep_dark_mode").anyEnabled?i?"#fff":"#767676":i?"#111":"#efefef"}},display:"flex",padding:1,rounding:"pill",children:[(0,a.jsx)(r.zd,{height:48,rounding:"circle",width:48,children:(0,a.jsx)(r.Ee,{alt:"",color:e,fit:"cover",naturalHeight:null!==(l=t.height)&&void 0!==l?l:1,naturalWidth:null!==(c=t.width)&&void 0!==c?c:1,src:null!==(d=t.url)&&void 0!==d?d:""})}),(0,a.jsx)(r.xu,{marginStart:2,marginEnd:3,children:(0,a.jsx)(r.xv,{color:i?"inverse":(0,n.Yc)()?"light":"dark",weight:"bold",children:s})})]})}},461355:(e,t,i)=>{i.d(t,{Z:()=>m,z:()=>c});var n=i(667294),o=i(702664),r=i(391254),a=i(698330),s=i(883119),l=i(785893);const c=2500,d={__style:{right:"-105px"}},u={__style:{animationName:"SavePin_AnimateIn, SavePin_CircleAnimateOut",animationDuration:"0.3s, 0.25s",animationDelay:"0.5s, 1.3s",animationFillMode:"forwards",animatitionTimingFunction:"ease-out",backgroundColor:"rgba(255, 255, 255, 0.6)"}},p={__style:{animationName:"SavePin_AnimateIn, SavePin_AnimateOut",animationDuration:"0.3s, 0.35s",animationDelay:"0.5s, 1.55s",animationFillMode:"forwards",animatitionTimingFunction:"ease-out",border:"4px solid white"}},h={__style:{animationName:"SavePin_NavButtonAnimation",animationDuration:"0.8s",animationDelay:"1.65s",animationFillMode:"forwards",animatitionTimingFunction:"ease-out"}},m=(0,n.memo)((({children:e})=>{const t=(0,a.Tt)(),i=(0,o.useSelector)((({pins:e})=>{const i=null==t?void 0:t.last_repin_id;return i?e[i]:null})),n=(0,o.useSelector)((({session:e})=>e.isShowingRepinAnimation));if(!i||!n)return e;const{images:c}=i,{height:m,width:_,url:g}=(null==c?void 0:c["136x136"])||(null==c?void 0:c["236x"])||{};return(0,l.jsxs)(s.kC,{alignItems:"stretch",flex:"grow",justifyContent:"center",children:[(0,l.jsx)(r.Z,{unsafeCSS:"\n@keyframes SavePin_AnimateIn {\n  from {\n    transform: scale(0.0);\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n    transform: scale(1.0);\n  }\n}\n@keyframes SavePin_CircleAnimateOut {\n  from {\n    transform: scale(1.0);\n    opacity: 1;\n  }\n  to {\n    transform: scale(0.8);\n    opacity: 0;\n  }\n}\n@keyframes SavePin_AnimateOut {\n  from {\n    transform: translateY(0);\n    opacity: 1;\n  }\n  to {\n    transform: translateY(100px);\n    width: 0px;\n    height: 0px;\n    opacity: 0;\n  }\n}\n@keyframes SavePin_NavButtonAnimation {\n  0% {\n    transform: scale(1.0);\n  }\n  50% {\n    transform: scale(1.3);\n  }\n  100% {\n    transform: scale(1.0);\n  }\n}\n"}),(0,l.jsxs)(s.xu,{position:"relative",children:[(0,l.jsxs)(s.xu,{width:250,height:250,position:"absolute",right:!0,bottom:!0,dangerouslySetInlineStyle:d,children:[(0,l.jsx)(s.xu,{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",opacity:0,rounding:"circle",dangerouslySetInlineStyle:u}),(0,l.jsx)(s.xu,{width:100,height:100,position:"absolute",margin:"auto",left:!0,right:!0,top:!0,bottom:!0,opacity:0,rounding:3,dangerouslySetInlineStyle:p,children:(0,l.jsx)(s.zd,{rounding:2,height:"100%",width:"100%",wash:!0,children:(0,l.jsx)(s.Ee,{alt:"pin-image",fit:"cover",naturalWidth:null!=_?_:1,naturalHeight:null!=m?m:1,src:null!=g?g:""})})})]}),(0,l.jsx)(s.xu,{dangerouslySetInlineStyle:h,children:e})]})]})}))},327212:(e,t,i)=>{i.d(t,{Z:()=>C});var n=i(667294),o=i(376030),r=i(391254),a=i(883119),s=i(785893);function l({addedStyles:e,button:t,headerText:i,icon:o,iconOverride:l,minHeight:c,subHeaderText:d}){return(0,s.jsx)(a.xu,{display:"flex",justifyContent:"center",width:"100vw",paddingX:2,children:(0,s.jsxs)(a.xu,{alignContent:"center",alignItems:"center",bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{boxShadow:"0 3px 6px rgba(0,0,0,0.18)",transform:"translateY(-20px)",...e}},display:"flex",minHeight:c||75,padding:6,position:"relative",rounding:4,width:"100%",children:[(()=>{const e=l||(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(r.Z,{unsafeCSS:"\n@keyframes baseEduToastIconScale {\n  0% {\n    transform: scale(0)\n  }\n  30% {\n    transform: scale(1.2);\n  }\n  50% {\n    transform: scale(1);\n  }\n}\n"}),(0,s.jsx)(a.xu,{alignItems:"center",color:"education","data-test-id":"pin-save-toast",direction:"column",dangerouslySetInlineStyle:{__style:{animation:"baseEduToastIconScale 3s"}},display:"flex",height:60,justifyContent:"center",minHeight:60,minWidth:60,rounding:"circle",width:60,children:(0,s.jsx)(a.JO,{accessibilityLabel:o.accessibilityLabel,color:o.color,dangerouslySetSvgPath:o.dangerouslySetSvgPath,icon:o.icon,inline:o.inline,size:o.size})})]});return(0,s.jsx)(a.xu,{marginEnd:4,children:e})})(),(0,s.jsxs)(a.xu,{marginEnd:"auto",children:[(0,s.jsx)(a.xv,{color:"default",weight:"bold",children:i}),d&&(0,s.jsx)(a.xu,{paddingY:1,children:(0,s.jsx)(a.xv,{size:"300",color:"default",children:d})})]}),(0,s.jsx)(a.xu,{display:"flex",flex:"shrink",marginStart:2,children:t})]})})}i(223019);var c=i(223815),d=i(829407),u=i(898781),p=i(759929);function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const m=(e,t)=>(e-t)/2,_=68,g=m(_,68),v=m(_,66),f=m(_,60),y="cubicBezier(0.25, 0.1, 0.25, 1)",x="encourageToastIconContainer",b="encourageToastIconRadiateBg",w="encourageToastIconRadiateRing",P={targets:`#${x}`,duration:300,scale:1.4,easing:y},S={targets:`#${x}`,duration:300,scale:1,easing:y,endDelay:1e3},T={targets:`#${x}`,duration:300,scale:.42,easing:y},I={targets:`#${b}`,duration:400,opacity:0,scale:1.6,easing:y},k={targets:`#${w}`,duration:650,opacity:0,scale:2,easing:y};function E({hiding:e,visible:t}){return t?e?{opacity:0,transform:"scale(1.0)",transition:"opacity transform .2s"}:{opacity:1,transition:"all 0.7s cubic-bezier(.19, 1.15, .48, 1)"}:Object.freeze({})}class A extends n.PureComponent{constructor(...e){super(...e),h(this,"delayTimer",null),h(this,"requestAnimationFrameId",null),h(this,"playAnimation",(()=>{this.requestAnimationFrameId=window.requestAnimationFrame((()=>{(0,o.Z)(I),(0,o.Z)(k),(0,o.Z)(P).finished.then((()=>{(0,o.Z)(S).finished.then((()=>{o.Z.set(`#${x}`,{transformOrigin:"top right"}),(0,o.Z)(T)}))}))}))})),h(this,"getHeaderText",(()=>{const{text:e}=this.props;return"string"==typeof e?e:e[0]?e[0]:e})),h(this,"getIconProps",(()=>({accessibilityLabel:this.props.i18n._('Check icon', 'Label for check icon on toast shown after board create', 'Label for check icon on toast shown after board create'),color:"inverse",icon:"check",size:30}))),h(this,"getSubHeaderText",(()=>{const{text:e}=this.props;return e instanceof Array&&e.length>1&&e[1]?e[1]:""})),h(this,"renderAnimatedIcon",(()=>(0,s.jsxs)(a.xu,{height:_,position:"relative",width:_,children:[(0,s.jsx)(a.xu,{"data-test-id":"pin-save-toast",width:60,height:60,overflow:"hidden",position:"absolute",rounding:4,dangerouslySetInlineStyle:{__style:{left:`${f}px`,top:`${f}px`}},children:this.props.thumbnail}),(0,s.jsxs)(a.xu,{id:x,height:_,width:_,dangerouslySetInlineStyle:{__style:{transform:"scale(0)"}},position:"absolute",children:[(0,s.jsx)(a.xu,{color:"infoBase",id:b,width:68,height:68,position:"absolute",rounding:"circle",dangerouslySetInlineStyle:{__style:{left:`${g}px`,top:`${g}px`,transform:"scale(0)"}}}),(0,s.jsx)(a.xu,{id:w,width:66,height:66,position:"absolute",rounding:"circle",opacity:1,dangerouslySetInlineStyle:{__style:{borderWidth:"2px",borderStyle:"solid",borderColor:"#0074e8",left:`${v}px`,top:`${v}px`,transform:"scale(0)"}}}),(0,s.jsx)(a.xu,{alignItems:"center",color:"infoBase",direction:"column",display:"flex",height:_,justifyContent:"center",minHeight:_,minWidth:_,position:"absolute",rounding:"circle",width:_,children:(0,s.jsx)(a.JO,{accessibilityLabel:this.props.i18n._('Check icon', 'Label for check icon on toast shown after board create', 'Label for check icon on toast shown after board create'),color:"inverse",icon:"check",size:30})})]})]})))}componentDidMount(){this.delayTimer=setTimeout(this.playAnimation,700)}componentWillUnmount(){this.delayTimer&&clearTimeout(this.delayTimer),this.requestAnimationFrameId&&window.cancelAnimationFrame(this.requestAnimationFrameId)}render(){const{isRepinToExistingBoard:e,button:t}=this.props,i=e;return(0,s.jsx)(l,{button:t,headerText:this.getHeaderText(),icon:this.getIconProps(),iconOverride:i?void 0:this.renderAnimatedIcon(),subHeaderText:this.getSubHeaderText()})}}function C(e){const{duration:t,onHide:i}=e,o=(0,u.ZP)(),[r,l]=(0,n.useState)(!1),[h,m]=(0,n.useState)(!1),_=(0,n.useRef)(),g=()=>{l(!0),_.current=setTimeout(i,200)},v=()=>{_.current&&clearTimeout(_.current)};(0,d.Z)((()=>(setTimeout((()=>m(!0)),100),_.current=setTimeout(g,t||p.w),v)));let f=(0,s.jsx)(A,{...e,i18n:o});return e.href&&(f=(0,s.jsx)(a.rU,{href:e.href,onClick:g,rounding:"pill",tapStyle:"none",children:f})),(0,s.jsx)(c.Z,{children:(0,s.jsx)(a.mh,{children:(0,s.jsx)(a.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...E({hiding:r,visible:h})}},justifyContent:"center",position:"fixed",width:"100%",display:"flex",zIndex:p.k,children:f})})})}},56632:(e,t,i)=>{i.d(t,{L:()=>u,q:()=>p});var n=i(223019),o=i(883654),r=i(258430),a=i(898781),s=i(883119),l=i(785893);const c=()=>{const e=(0,a.ZP)();return e._('Sweet save!', 'Header text on toast that appears after user creates their first board', 'Header text on toast that appears after user creates their first board')},d=()=>{const e=(0,a.ZP)();return e._('All your boards live on your profile', 'Subheader text on toast that appears after user creates their first board', 'Subheader text on toast that appears after user creates their first board')},u=e=>({duration:5e3,thumbnail:(0,l.jsx)(s.xu,{"data-test-id":"pin-save-toast",width:48,height:48,children:(0,l.jsx)(r.Z,{boardId:e})})}),p=({boardId:e,isFBC:t,isTop:i,pinId:r})=>{return{...(a=r?"pin":"board",u=null!=r?r:e,{duration:5e3,thumbnail:(0,l.jsx)(s.xu,{"data-test-id":"pin-save-toast",children:"pin"===a?(0,l.jsx)(o.Z,{borderRadius:4,pinId:u}):(0,l.jsx)(n.Z,{boardId:u,type:"thumbnail"})})}),...t?{text:[(0,l.jsx)(c,{},"0"),(0,l.jsx)(d,{},"1")]}:Object.freeze({}),top:i?28:void 0};var a,u}},662089:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(702664),o=i(461355),r=i(343341),a=i(639952);function s(){const e=(0,n.useDispatch)(),{showToast:t,showOneToast:i}=(0,r.F9)();return{showToast:t,showOneToast:i,showRepinConfirmation:(i,n)=>{n||e((0,a.WF)()),setTimeout((()=>{n||e((0,a.a5)()),t(i)}),o.z)}}}},979736:(e,t,i)=>{i.d(t,{Z:()=>U});var n=i(667294),o=i(427806),r=i(167234),a=i(180549),s=i(247568),l=i(572551),c=i(656226),d=i(898781),u=i(784590),p=i(444445),h=i(883119),m=i(785893);const _=({data:e,itemIdx:t})=>(0,m.jsx)(c.default,{pin:e,pinId:e.id,authDesktopSurface:"RelatedProductsFeed",slotIndex:t,viewParameter:3334,viewType:72});function g({resourceOptions:e}){const t=(0,d.ZP)(),i=(0,u.Z)({name:"VisualLiveSearchProductFeedResource",options:e}),{data:o,isAtEnd:r,isLoaded:a,isFetching:s,fetchMore:c}=i,g=(0,n.useRef)(null);if(!a)return(0,m.jsx)(h.kC,{alignItems:"stretch",alignSelf:"center",justifyContent:"center",children:(0,m.jsx)(h.$j,{accessibilityLabel:t._('Loading related products', 'Label for loading spinner', 'Label for loading spinner'),show:!0})});const v=Array.isArray(o)?o:null==o?void 0:o.results;return(0,m.jsx)(h.xu,{display:"flex",maxWidth:"100%",ref:g,children:v&&(0,m.jsx)(l.default,{columnWidth:p.yF,isAtEnd:r,isFetching:s,Item:_,items:v,loadItems:()=>{s||r||c()},paddingStyle:"simplified",scrollContainerRef:g,virtualize:!1})})}var v=i(362810),f=i(361259);class y extends n.PureComponent{constructor(...e){var t,i,n;super(...e),n=({data:e,itemIdx:t})=>{const{resourceOptions:{image_signature:i},visualLiveSearchResource:n}=this.props,o=n&&n.data&&n.data.search_identifier,r=`${window.location.pathname}products/${window.location.search}`;return"story"===e.type?(0,m.jsx)(v.Z,{story:e,dangerouslySetActionUrl:r,slotIndex:t}):(0,m.jsx)(c.default,{pin:e,pinId:e.id,authDesktopSurface:"FlashlightResultGrid",auxData:{search_identifier:o,image_signature:i},slotIndex:t,viewData:{search_identifier:o},viewParameter:3050,viewType:72})},(i="renderItem")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}componentDidMount(){const{visualLiveSearchResource:e,onSearchIdChange:t}=this.props,i=e&&e.data&&e.data.search_identifier;i&&t(i)}componentDidUpdate({visualLiveSearchResource:{data:e}}){const{visualLiveSearchResource:{data:t}}=this.props,i=t&&t.search_identifier,n=e&&e.search_identifier;i&&i!==n&&this.props.onSearchIdChange(i)}render(){const{hasSimplifiedPinGridExpLoaded:e,visualLiveSearchResource:t}=this.props,{data:i,isFetching:n,fetchMore:o}=t,r=i&&i.results,a=i&&i.search_identifier;return(0,m.jsxs)(h.xu,{children:[r&&a&&(0,m.jsx)(h.xu,{children:(0,m.jsx)(h.Rk,{columnWidth:p.yF,Item:this.renderItem,gutterWidth:p.P2,items:r,loadItems:o,minCols:1,scrollContainer:()=>window})}),(0,m.jsx)(h.$j,{accessibilityLabel:this.props.i18n._('Loading search results...', 'Accessibility label for loading visual search results', 'Accessibility label for loading visual search results'),show:n||!a||!e})]})}}function x(e){const t=(0,d.ZP)(),i=(0,u.Z)({name:"VisualLiveSearchResource",options:e.resourceOptions}),{hasSimplifiedPinGridExpLoaded:n}=(0,f.$)();return(0,m.jsx)(y,{...e,visualLiveSearchResource:i,hasSimplifiedPinGridExpLoaded:n,i18n:t})}var b=i(99739),w=i(305791),P=i(975540),S=i(94047),T=i(297852),I=i(618446),k=i.n(I),E=i(430323),A=i(229428),C=i(697335),j=i(407043),R=i(780280),D=i(276775);function O(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let L=0,M="";class N extends n.Component{constructor(...e){super(...e),O(this,"state",{searchId:""}),O(this,"saveFlashlightImageContainerRef",(e=>{this.flashlightImageContainerRef=e})),O(this,"handleCropperChange",(({origCrop:e,cropSource:t})=>{const{pinId:i,history:n,imageSignature:o}=this.props;(0,T.Z)({cropArea:e,pinId:i,cropSource:t,isUnified:!1,imageSignature:o})!==window.location.pathname+window.location.search&&n.replace({pathname:`/pin/${i}/visual-search/`,query:{...e,cropSource:t,imageSignature:o},search:(0,S.Z)({cropArea:e,cropSource:t,imageSignature:o}),state:{internalNavigation:!0}})})),O(this,"handleSearchIdChange",(e=>{this.setState({searchId:e})}))}componentDidMount(){const{initialCropArea:e,pinResource:{data:t},pinId:i,history:n,view:o,imageSignature:r,logContextEvent:a}=this.props;if(!e&&t){const a=(0,b.Z)({initialCropArea:e,pin:t,imageSignature:r}),s=(0,T.Z)({cropArea:a,pinId:i,view:o,imageSignature:r});n.replace(s)}this.flashlightImageContainerRef&&M===i&&(this.flashlightImageContainerRef.scrollTop=L),a({event_type:13,view_type:72,view_parameter:3050,view_data:{pin_id:i}})}componentDidUpdate(e){k()(e.initialCropArea,this.props.initialCropArea)||this.setState({searchId:""})}componentWillUnmount(){const{pinId:e}=this.props;this.flashlightImageContainerRef&&(L=this.flashlightImageContainerRef.scrollTop,M=e)}getResourceOptions({pinId:e,cropArea:t,width:i,height:n,cropSource:o,imageSignature:r}){return{pin_id:e,image_signature:r,crop:(0,P.Z)({cropArea:t,scaledWidth:i,scaledHeight:n}),crop_source:o}}renderSpinner(){return(0,m.jsx)(h.$j,{accessibilityLabel:this.props.i18n._('Loading visual search...', 'Accessibility label for loading visual search page', 'Accessibility label for loading visual search page'),show:!0})}renderFlashlight(){const{pinResource:{data:e},initialCropArea:t,initialCropSource:i,location:l,requestContext:c,view:d,imageSignature:u,history:p}=this.props;if(!e)return null;const{id:_,image_signature:v}=e,f=u||v,{width:y,height:P,url:S}=(0,w.Z)({pin:e,imageSignature:f});""===S&&p.push(`/pin/${_}/visual-search/`);const T=(0,b.Z)({initialCropArea:t,pin:e,imageSignature:f}),I=i||5,k=this.getResourceOptions({pinId:_,cropArea:T,width:y,height:P,cropSource:I,imageSignature:f}),E=y+20,j=!(l&&l.state&&l.state.internalNavigation),R=!!e.visual_objects&&f===v&&(0,A.m)(e.visual_objects)||[],D=c&&c.isRTL||!1,O=E+16;return(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)(o.Z,{text:this.props.i18n._('Visual Search Page', 'pin.flashlight.accessibilityhiddenheading', 'accessibility label for flashlight page')}),(0,m.jsx)(r.Z,{position:"fixed",style:{width:"100%",zIndex:3,backgroundColor:"#ffffff"},children:(0,m.jsxs)(h.xu,{width:"100%",paddingY:3,paddingX:9,display:"flex",alignItems:"center",children:[(0,m.jsx)(h.xu,{position:"absolute",children:(0,m.jsx)(a.Z,{pinId:e.id})}),(0,m.jsx)(h.xu,{flex:"grow",children:(0,m.jsx)(h.xv,{align:"center",weight:"bold",children:(0,m.jsx)("span",{className:"deprecatedTextSizeXL",children:"products"===d?this.props.i18n._('Shop similar items', 'Header explaining results of flashlight products search', 'Header explaining results of flashlight products search'):this.props.i18n._('More Ideas', 'Header explaining results of flashlight search', 'Header explaining results of flashlight search')})})})]})}),(0,m.jsx)(C.c,{children:t=>{var i;return"products"===d?(0,m.jsxs)(h.xu,{dangerouslySetInlineStyle:{__style:{marginTop:60}},children:[(0,m.jsx)(g,{resourceOptions:k}),";"]}):(0,m.jsxs)(h.xu,{display:"flex",paddingX:12,children:[(0,m.jsx)(h.xu,{bottom:!0,overflow:"auto",position:"fixed",dangerouslySetInlineStyle:{__style:{width:E,height:"inherit",top:t+60,marginBottom:10}},ref:this.saveFlashlightImageContainerRef,children:(0,m.jsx)(h.xu,{"data-test-id":"flashlight-enabled-image",dangerouslySetInlineStyle:{__style:{width:y,height:P}},children:(0,m.jsxs)(h.zd,{height:P,rounding:2,width:y,children:[(0,m.jsx)(h.Ee,{alt:null!==(i=e.description)&&void 0!==i?i:"",naturalHeight:P,naturalWidth:y,src:S}),(0,m.jsx)(s.Z,{showAnimation:j,imageSignature:f,imageSize:{h:P,w:y},initialCropArea:T,onChange:this.handleCropperChange,pin:e,spotlightAreas:R})]})})}),(0,m.jsx)(h.xu,{position:"relative",width:"100%",dangerouslySetInlineStyle:{__style:{top:60,marginLeft:D?void 0:O,marginRight:D?O:void 0}},children:(0,m.jsx)(x,{resourceOptions:k,onSearchIdChange:this.handleSearchIdChange})})]})}})]})}render(){const{pinResource:{isLoaded:e}}=this.props,{searchId:t}=this.state;return(0,m.jsx)(E.Z,{view:72,objectId:t,children:(0,m.jsx)(h.xu,{children:e?this.renderFlashlight():this.renderSpinner()})})}}function z(e){const{logContextEvent:t}=(0,j.v)(),i=(0,d.ZP)(),n=(0,u.Z)({name:"PinResource",options:{id:e.pinId,field_set_key:"detailed",fetch_visual_search_objects:!0}});return(0,m.jsx)(N,{...e,history:(0,D.useHistory)(),location:(0,D.useLocation)(),pinResource:n,requestContext:(0,R.B)(),i18n:i,logContextEvent:t})}var F=i(418614),Z=i(826067);const B=(...e)=>e.every(Number.isFinite);function U(){const{id:e}=(0,D.useParams)(),t=(0,D.useLocation)(),i=(0,Z.mB)(t.search),n=t.pathname.includes("/products");(0,F.Z)({name:"PinResource",getOptions:({routeData:{params:{id:e}}})=>({id:e,field_set_key:"detailed",fetch_visual_search_objects:!0})});const{x:o,y:r,w:a,h:s,cropSource:l}=function(e){return Object.keys(e).reduce(((t,i)=>({...t,[i]:parseInt(e[i],10)})),{})}(i),{q:c,rs:d,imageSignature:u}=i;return(0,m.jsx)(z,{initialCropArea:B(o,r,a,s)?{x:o,y:r,w:a,h:s}:void 0,initialCropSource:l||void 0,pinId:null!=e?e:"",searchQuery:c,trafficSource:d,view:n?"products":"flashlight",imageSignature:u})}},655428:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(883119),o=i(785893);function r({borderRadius:e,description:t,imageUrl:i,imageHeight:r,imageWidth:a}){return(0,o.jsx)(n.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,dangerouslySetInlineStyle:{__style:{borderRadius:e}},overflow:"hidden",children:(0,o.jsx)(n.Ee,{alt:null!=t?t:"",src:null!=i?i:"",fit:"cover",naturalHeight:null!=r?r:1,naturalWidth:null!=a?a:1,color:"#767676"})})}},883654:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(655428),o=i(606441),r=i(785893);function a({borderRadius:e,pinId:t,adhocPinData:i}){var a,s;const l=(0,o.N)(t)||i;if(!l)return null;const c=l.images&&(l.images.orig||l.images["736x"]||l.images["290x"]||l.images["236x"]);return(0,r.jsx)(n.Z,{borderRadius:e,description:l.description,imageUrl:(null==c?void 0:c.url)||(null==i?void 0:i.image_large_url),imageHeight:(null==c?void 0:c.height)||(null==i||null===(a=i.image_large_size_pixels)||void 0===a?void 0:a.height),imageWidth:(null==c?void 0:c.width)||(null==i||null===(s=i.image_large_size_pixels)||void 0===s?void 0:s.width)})}},990823:(e,t,i)=>{i.d(t,{ZP:()=>l,tY:()=>d,Yh:()=>c});var n=i(702664),o=i(784590),r=i(19121);const a=0,s=1;function l(e){var t;const i=(0,r.Z)(),n=i.isAuth&&i.id===e,a=(0,o.Z)(!i.isAuth||n?null:{name:"UserResource",options:{field_set_key:"quicksave",user_id:e}});return{showEnabledSaveBehavior:n&&i.has_quicksave_board||!(!i.isAuth||null===(t=(null!=a?a:{}).data)||void 0===t||!t.has_quicksave_board)}}function c(e){var t;const i=(0,n.useDispatch)(),a=(0,r.Z)(),s=a.isAuth&&!!a.boardCount&&a.boardCount<5&&e,l=(0,o.Z)(s&&e?{name:"UserResource",options:{field_set_key:"save_behavior",user_id:a.isAuth&&a.id}}:null);return a.isAuth&&void 0===a.save_behavior&&l&&null!==(t=l.data)&&void 0!==t&&t.id&&i({type:"UPDATE_USER_SAVE_BEHAVIOR",payload:{saveBehavior:l.data.save_behavior}}),{showEnabledSaveBehavior:s}}function d(e){const t=(0,r.Z)();let i;return e&&(t.save_behavior===a?i={type:"classic"}:t.save_behavior===s&&(i={type:"inline"})),{saveBehaviorType:i}}},239682:(e,t,i)=>{function n(e,t,i){return{privacy_filter:t?"secret":"public",sort:i||"last_pinned_to",field_set_key:"profile_grid_item",username:e}}i.d(t,{Z:()=>n})},59644:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t)=>`${e}:${t||""}`},240265:(e,t,i)=>{i.d(t,{O:()=>s,Q:()=>l});var n=i(59644),o=i(414327),r=i(956800);const a=["alphabetical","last_pinned_to","oldest","newest","group_boards_at_top","custom"],s={name:"BoardsResource",key:"boardsResource",options:({boardOrder:e,filterStories:t,mixPublicSecret:i,username:n},o)=>({privacy_filter:"all",sort:e||"last_pinned_to",field_set_key:"profile_grid_item",filter_stories:t,username:n,page_size:25,group_by:i?"mix_public_private":"visibility",include_archived:!0,redux_normalize_feed:!0,...o?{orbac_subject_id:o}:Object.freeze({})})},l=e=>a.reduce(((t,i)=>{const a=[(0,r.N8)("profileBoards",(0,n.Z)(e,i))];return[!0,!1].forEach((t=>{[!0,!1].forEach((n=>{a.push((0,o.jB)(s.name,s.options({username:e,boardOrder:i,mixPublicSecret:t,filterStories:n})))}))})),t.concat(a)}),[])},436395:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(784590),o=i(276775);function r(){const{username:e}=(0,o.useParams)();return(0,n.Z)(null==e?null:{name:"UserResource",options:{username:e,field_set_key:"profile"}})}},254176:(e,t,i)=>{i.d(t,{$z:()=>D,Br:()=>h,Cr:()=>I,K8:()=>y,KQ:()=>L,L1:()=>N,OA:()=>M,Tq:()=>v,Xi:()=>j,YQ:()=>O,YV:()=>T,ZP:()=>k,aX:()=>E,eo:()=>_,fJ:()=>F,md:()=>m,oG:()=>g,oL:()=>A,of:()=>x,xH:()=>f,xQ:()=>b,xR:()=>R,xk:()=>P,yT:()=>p,zS:()=>z});var n=i(27255),o=i(239682),r=i(172071),a=i(422946),s=i(379725),l=i(240265),c=i(414327),d=i(6637),u=i(956800);function p(e){return{type:"BOARD_UPDATE_COMPLETE",payload:{board:e}}}function h(e){return{type:"BOARD_PIN_COUNT_CHANGED",payload:e}}function m(e,t){return{type:"BOARD_FOLLOW",payload:{boardId:e,value:t}}}function _({viewingUserId:e,viewingUsername:t,boardId:i,boardPinCount:n}){return{type:"BOARD_DELETE",payload:{viewingUserId:e,viewingUsername:t,boardId:i,boardPinCount:n}}}const g=(e,t)=>i=>i((0,s.U)("BoardResource",{options:{board_id:e,field_set_key:t}}));function v(e,t,i){return(0,s.U)("BoardResource",{options:{board_id:e,field_set_key:t,...i?{orbac_subject_id:i}:{}}})}function f(e,t,i){return n=>d.Z.create("BoardsMergeResource",{source_board_id:e,target_board_id:t,...i?{orbac_subject_id:i}:{}}).callUpdate().then((()=>Promise.all([n(_({boardId:e})),n(v(t,"pin_count")),n((0,u.N8)(a.DV.BOARD_SECTIONS,t))])))}function y(e){return t=>{e&&(0,l.Q)(e).forEach((e=>{t(e)}))}}const x=e=>({type:"BOARD_DISMISS_SENSITIVITY_SCREEN",payload:{boardId:e}}),b=e=>g(e,"pin_count");function w(e,t){return{type:"BOARD_ARCHIVE",payload:{boardId:e,username:t}}}function P(e,t){return i=>(i(w(e)),d.Z.create("BoardArchiveResource",{boardId:e,orbacSubjectId:t}).callUpdate())}function S(e){return{type:"BOARD_UNARCHIVE",payload:{boardId:e}}}function T(e,t){return i=>(i(S(e)),d.Z.create("BoardArchiveResource",{boardId:e,orbacSubjectId:t}).callDelete())}const I=(e,t)=>({type:"BOARD_COVER_IMAGE_UPDATED",payload:{boardId:e,coverPin:t}}),k=e=>({type:"BOARD_DISABLE_MORE_IDEAS_BADGING",payload:{boardId:e}});function E(e,t,i){const r={name:e,privacy:n.Z.BoardPrivacy.PUBLIC,username:t,...i?{orbac_subject_id:i}:Object.freeze({})};return e=>d.Z.create("BoardResource",r).callCreate().then((i=>{const n=i.resource_response.data;return e(t&&(0,c.jB)("BoardsResource",(0,o.Z)(t,!1))),n}))}function A(e={},t,i){return{type:"BOARD_CREATE_COMPLETE",payload:{options:e,board:t},error:i}}const C=(e,t,i,n)=>({type:"BOARD_COLLABORATOR_ADD",payload:{boardId:e,viewingUser:t,status:i,collaboratingUsers:n}}),j=(e,t=!1,i)=>n=>(n(((e,t,i)=>({type:"BOARD_INVITE_APPROVED_BY_VIEWER",payload:{boardId:e,isRequestToJoin:t,collaboratingUser:i}}))(e,t,i)),d.Z.create("BoardInviteResource",{board_id:e,invited_user_id:null==i?void 0:i.id}).callUpdate()),R=(e,t)=>i=>(i(((e,t)=>({type:"BOARD_INVITE_DENIED_BY_VIEWER",payload:{boardId:e,userId:t}}))(e,t)),d.Z.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callDelete()),D=(e,t,i)=>n=>(n(C(e,t,"new",i)),d.Z.create("BoardInviteResource",{board_id:e,invited_user_ids:i.map((({id:e})=>e))}).callCreate()),O=(e,t,i,n,o)=>r=>{var a,s;const l="accepted"===t?"BoardCollaboratorResource":"BoardInviteResource";return r(((e,t,i)=>({type:"BOARD_COLLABORATOR_DELETE",payload:{boardId:e,userId:t,viewingUser:i}}))(e,null!==(a=null==n?void 0:n.id)&&void 0!==a?a:"",i)),d.Z.create(l,{board_id:e,field_set_key:"boardEdit",invited_user_id:null!==(s=null==n?void 0:n.id)&&void 0!==s?s:"",...o?{orbac_subject_id:o}:{}}).callDelete().catch((()=>r(C(e,i,t,[n]))))},L=(e,t)=>i=>d.Z.create("SocialSearchCampaignResource",{boardId:e}).callGet().then((n=>{if(!n||!n.resource_response)return{};const o=n.resource_response.data||{},a=(o.model||{}).custom_properties||{},{campaign_id:s="unknown"}=a,l=o.display_data||{},c=!!o.display_data,d=l.header_image_mobile,u=l.header_background_color,p=l.text_icon_color,h={boardId:e,isSocialSeasonalBoard:c,socialHeaderBgImage:d,socialHeaderBgColor:u,textIconColor:p};return r.Z.increment(`mweb.seasonal_board.${s}.${t}.land`),i((e=>({type:"SET_SOCIAL_SEASONAL_BOARD",payload:e}))(h))})),M=(e,t)=>()=>d.Z.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate(),N=(e,t,i,n)=>o=>{const r=d.Z.create("BoardResource",{board_id:i}).callDelete();return o(_({viewingUserId:e,viewingUsername:t,boardId:i,boardPinCount:n})),r},z=(e,t)=>i=>d.Z.create("BoardArchiveResource",{boardId:e}).callUpdate().then((n=>(i((0,u.Qv)("archived-boards",[{id:e,type:"board"}])),i(w(e,t)),n))),F=(e,t)=>i=>d.Z.create("BoardArchiveResource",{boardId:e}).callDelete().then((n=>(i((0,u.Qv)(`profile-boards:${t}`,[{id:e,type:"board"}])),i(S(e)),n)))},712055:(e,t,i)=>{i.d(t,{Z:()=>a,f:()=>s});var n=i(6637),o=i(254176);function r(e){return n.Z.create("BoardFollowResource",{board_id:e})}function a(e){return t=>{r(e).callCreate().catch((()=>{t((0,o.md)(e,!1))})),t((0,o.md)(e,!0))}}function s(e){return t=>{r(e).callDelete().catch((()=>{t((0,o.md)(e,!0))})),t((0,o.md)(e,!1))}}},956800:(e,t,i)=>{function n(e){return{type:"FEED_ITEM_REORDERED",payload:e}}function o(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}i.d(t,{EX:()=>a,N8:()=>o,Qv:()=>r,_f:()=>n,vX:()=>s});const r=(e,t,i=Object.freeze({}))=>({type:"APPEND_FEED_ITEMS",payload:{id:e,options:i,items:t}});function a(e){return{type:"FEED_ITEMS_REMOVED",payload:e}}function s(e){return{type:"FEED_ITEMS_ADDED",payload:e}}},29857:(e,t,i)=>{i.d(t,{r:()=>n});const n=(e,t)=>({type:"SET_ACTIVE_HOMEFEED_TAB",payload:{boardId:e,index:t}})},177891:(e,t,i)=>{i.d(t,{a:()=>n,k:()=>o});const n=e=>({type:"ONE_TAP_SAVE",payload:e}),o=e=>({type:"ONE_TAP_UNSAVE",payload:e})},447948:(e,t,i)=>{function n(e,t){return{type:"CHANGE_CAROUSEL_SLOT_INDEX",payload:{id:e,index:t}}}function o(e,t){return{type:"SET_PIN_COMMENTS_DISABLED",payload:{id:e,pinCommentsDisabled:t}}}function r(e,t,i,n,o){return{type:"PIN_SAVE",payload:{id:e,boardId:t,title:i,url:n,localPinId:o}}}function a(e){return{type:"PIN_UNSAVE",payload:{id:e}}}i.d(t,{Gb:()=>a,I1:()=>d,Ib:()=>p,NA:()=>c,Ur:()=>r,Vw:()=>l,b9:()=>m,fH:()=>g,i0:()=>h,mO:()=>o,q1:()=>u,t_:()=>s,yR:()=>n,yj:()=>_});const s=(e,t,i)=>({type:"PIN_UNDO_SAVE",payload:{pinId:e,boardId:t,boardSectionId:i}});function l(e){return{type:"PIN_SHOW_SUGGESTED_CREATOR_RECS",payload:{id:e,value:!0}}}function c({id:e,text:t,undoAction:i,undoActionOptions:n,undoText:o}){return{type:"PIN_SHOW_UNDO_AND_FEEDBACK",payload:{id:e,value:!0,text:t,undoAction:i,undoActionOptions:n,undoText:o}}}function d(e){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!1}}}function u(e,t){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!0,text:t}}}function p(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e,value:!0}}}function h(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e,value:!1}}}function m(e){return{type:"PIN_SHOW_AD_REASONS_MODAL",payload:{id:e,value:!0}}}function _(e){return{payload:{id:e,value:!1},type:"PIN_SHOW_AD_REASONS_MODAL"}}const g=(e,t)=>({type:"PIN_FEEDBACK",payload:{id:e,value:t}})},12918:(e,t,i)=>{i.d(t,{M:()=>l,i:()=>c});var n=i(483025),o=i(414327),r=i(782677),a=i(987197),s=i(6637);const l=(e,t,i,n)=>({type:"PIN_ADD",payload:{pinId:e,boardId:t,boardSectionId:i,pinnerId:n}}),c=e=>t=>{const{method:i,guid:c,image_base64:d,image_url:u}=e;return((e,t)=>new Promise((i=>{e?(0,a.eR)(e).then((e=>{i(e)})):i(t)})))(d,u).then((a=>{const d={...e,method:"button"!==i||c?i:"button_external",image_url:a,image_base64:void 0},u="PinResource";return s.Z.create(u,d).callCreate().then((e=>{const i=(0,r.Fv)(e.resource_response.data,n.Z.PinResource);t((0,o.XM)(u,d,e,i));const a=e.resource_response.data,{board:{id:s},pinner:{id:c},section:p}=a,h=p&&p.id;return t(l(a.id,s,h,c)),e}))}))}},139574:(e,t,i)=>{i.d(t,{L:()=>s,q:()=>l});var n=i(422946),o=i(956800),r=i(254176),a=i(6637);function s(e){return t=>{const{inSelectAll:i,selectedPinIds:s,orbacSubjectId:l,source:{boardId:c,sectionId:d}}=e,u=i?"BulkEditSelectAllResource":"BulkEditResource",p={board_id:c,section_id:d,pin_ids:s,orbac_subject_id:l};return t((0,r.xQ)(c)),t((0,o.EX)({feedId:d||c,feedType:d?n.DV.BOARD_SECTION_PINS:n.DV.BOARDFEED,inverseSelection:i,itemIds:s,itemType:"pin"})),a.Z.create(u,p).callDelete()}}const l=({pinId:e,boardId:t,boardSectionId:i,clientTrackingParams:n})=>(o,r)=>{const s=a.Z.create("PinResource",{id:e,client_tracking_params:n}).callDelete(),{session:{userId:l}}=r();return o(((e,t,i,n)=>({type:"PIN_DELETE",payload:{pinId:e,boardId:t,boardSectionId:i,userId:n}}))(e,t,i,l)),s}},749147:(e,t,i)=>{i.d(t,{Bp:()=>s,XY:()=>a,dr:()=>r});var n=i(349741),o=i(6637);function r(e){return{type:"PIN_QUICK_SAVE",payload:e}}function a(e){return{type:"UPDATE_PINS_WITH_QUICKSAVE_REPIN",payload:{newPin:e}}}const s=({history:e,i18n:t,logContextEvent:i,onSuccess:r,onUndo:a,originalPinId:s,pinId:l,trackingParams:c,disableRepinAnimation:d,saveToProfileToastExpGroup:u,showRepinConfirmation:p})=>(h,m)=>{const{pins:_,session:g}=m(),{userId:v}=g,f=_[l],y={name:t._('Quick Saves', 'quickSave.boardName', 'Name of the auto-created board in quicksave experience.'),layout:"quick_saves",protected:!1,return_existing:!0,user_id:v};return o.Z.create("BoardResource",y).callCreate().then((o=>{const l=o.resource_response.data;return new n.Z({boardId:l.id,dispatch:h,isQuickSave:!0,history:e,i18n:t,onSuccess:r,onUndo:a,originalPinId:s,pin:f,resourceName:"RepinResource",saveToProfileToastExpGroup:u,section:void 0,showRepinToasts:e=>p?p(e,d):void 0,trackingParams:c,userId:g.userId}).processRepin(i)}))}},850431:(e,t,i)=>{i.d(t,{w:()=>r});var n=i(349741),o=i(956800);const r=({pinId:e,boardId:t,i18n:i,logContextEvent:r,onSuccess:a,onUndo:s,originalPinId:l,saveToProfileToastExpGroup:c,showRepinConfirmation:d,showToast:u,section:p,trackingParams:h,isOneTapSave:m,viewType:_,historyPush:g})=>(v,f)=>{var y,x,b,w,P;const{pins:S,session:T,feeds:I}=f(),k=S[e];t&&((null===(y=null!==(x=null==k?void 0:k.shopping_flags)&&void 0!==x?x:[])||void 0===y?void 0:y.length)>0||null!=k&&k.rich_summary&&(null===(b=null!==(w=null==k||null===(P=k.rich_summary)||void 0===P?void 0:P.products)&&void 0!==w?w:[])||void 0===b?void 0:b.length)>0)&&(I[`board-shop-saved-preview:${t}`]&&v((0,o.Qv)(`board-shop-saved-preview:${t}`,[k],{isPrepend:!0})),I[`board-shop-saved:${t}`]&&v((0,o.Qv)(`board-shop-saved:${t}`,[k],{isPrepend:!0})));return new n.Z({boardId:t,dispatch:v,i18n:i,isLegoSaveStyle:!0,isOneTapSave:m,onSuccess:a,onUndo:s,originalPinId:l,pin:k,resourceName:"RepinResource",saveToProfileToastExpGroup:c,section:p,showRepinToasts:e=>d?d(e):u?u(e):void 0,trackingParams:h,userId:T.userId,viewType:_,historyPush:g}).processRepin(r)}},639952:(e,t,i)=>{i.d(t,{Cp:()=>u,FK:()=>d,H5:()=>k,MI:()=>x,Mj:()=>T,O0:()=>f,QZ:()=>c,W:()=>P,WF:()=>_,Wz:()=>E,YV:()=>m,a5:()=>g,dz:()=>w,e0:()=>v,e2:()=>l,gH:()=>y,iW:()=>S,n1:()=>s,rm:()=>h,wb:()=>I,xu:()=>b});var n=i(172071),o=i(524309),r=i(53987),a=i(962832);const s=()=>({type:"DISMISS_UNAUTH_SAVE"}),l=()=>({type:"COMPLETE_UNAUTH_SAVE_ACTION"}),c=e=>({type:"SET_UNAUTH_SAVE_PIN_ID",payload:{unauthSavePinId:e}}),d=()=>({type:"HIDE_NAV_FOOTER"}),u=()=>({type:"SHOW_NAV_FOOTER"}),p=e=>({type:"SET_SESSION_DATA",payload:e}),h=e=>({type:"SET_LOGIN_SIGNUP_FROM",payload:{from:e}}),m=()=>e=>{e(p({preparingNewVersion:!0})),(0,a.Ng)().catch((()=>(n.Z.increment("mweb_service_worker.prepareNewVersion.error",1),(0,a.Dm)()))).finally((()=>{n.Z.increment("mweb.new_version.refresh",1),e(p({newVersionAvailable:!0,preparingNewVersion:!1}))})),(0,o.Qi)()},_=()=>({type:"SHOW_REPIN_ANIMATION"}),g=()=>({type:"HIDE_REPIN_ANIMATION"}),v=e=>({type:"SET_NUM_SIGNUP_STEPS",payload:{steps:e}}),f=()=>({type:"SET_OWN_PROFILE_PINS_REFRESH"}),y=e=>({type:"SHOW_NUX_HOMEFEED_LOADER",payload:e}),x=e=>({type:"SHOW_BIZ_NUX_HOMEFEED_LOADER",payload:e}),b=e=>({type:"SET_VIEWED_IMAGE",payload:{viewedImageSignature:e}}),w=e=>({type:"SET_VIEWED_SHARED_PINS",payload:{pins:e}}),P=()=>({type:"DISMISS_UNAUTH_APP_UPSELL"}),S=e=>e?{type:"LOGGED_OUT_USER_INFO_FOUND",payload:e}:{type:"LOGGED_OUT_USER_INFO_NOT_FOUND"},T=(e,t,i)=>n=>n(((e,t,i)=>({type:"SET_SHARE_ON_BOARD_PAGE",payload:{isShareMenuOpen:e,objectType:t,objectId:i}}))(e,t,i)),I=()=>({type:"STOP_SCROLL_TO_CLOSEUP_PIN"}),k=e=>({type:"UPDATE_USER_FIRST_HOME_FEED_REQUEST_AFTER_NUX",payload:e}),E=(e,t)=>{let i;return i=e?(0,r.bo)(e)?"today":(0,r.dr)(e)?"ideas":t&&(0,r.dZ)(e,t)?"own_section":t&&(0,r.J)(e,t)?"own_board":(0,r.OJ)(e)?"section":(0,r.am)(e)?"board":(0,r.L6)(e)?"closeup":(0,r.C$)(e)?"home":(0,r.cD)(e)?"profile":(0,r.En)(e)?"search":(0,r.$V)(e)?"topic":"":"",{type:"SET_LANDING_PAGE_TYPE",payload:i}}},70090:(e,t,i)=>{i.d(t,{ZN:()=>a,bJ:()=>l,fv:()=>s,hr:()=>r,lD:()=>c});var n=i(6637);function o(e,t){return n.Z.create("InterestFollowResource",{interest_id:e,interest_list:"favorited",referrer:t})}const r=(e,t)=>({type:"TOPIC_FOLLOW",payload:{id:e,value:t}}),a=(e,t)=>i=>{o(e,t).callCreate().catch((()=>i(r(e,!1)))),i(r(e,!0))},s=(e,t)=>i=>{o(e,t).callDelete().catch((()=>i(r(e,!0)))),i(r(e,!1))},l=e=>t=>{const i=e.reduce(((e,t)=>(e[t.id]=!t.is_followed,e)),{});return n.Z.create("UpdateFollowedInterestsResource",{updated_interest_follows:i}).callUpdate().then((()=>{e.forEach((({id:e,is_followed:i})=>{t(r(e,!i))}))}))},c=(e,t="")=>i=>n.Z.create("UpdateFollowedInterestsResource",{referrer:t,updated_interest_follows:e}).callUpdate().then((()=>{Object.keys(e).forEach((t=>{const n=e[t];i(r(t,n))}))}))},461773:(e,t,i)=>{i.d(t,{KF:()=>c,ZN:()=>a,fv:()=>l,kE:()=>u,yA:()=>s});var n=i(6637),o=i(90326);function r(e,t){return n.Z.create("UserFollowResource",{user_id:e,aux_data:t?{pin_id:t}:void 0})}function a(e,t=null){return i=>{r(e,t).callCreate().catch((()=>i((0,o.P_)(e,!1)))),i((0,o.P_)(e,!0))}}function s(e,t=null){return async i=>{i((0,o.P_)(e,!0)),await r(e,t).callCreate().catch((t=>{throw i((0,o.P_)(e,!1)),t}))}}function l(e,t=null){return i=>{r(e,t).callDelete().catch((()=>i((0,o.P_)(e,!0)))),i((0,o.P_)(e,!1))}}function c(e,t=null){return async i=>{i((0,o.P_)(e,!1)),await r(e,t).callDelete().catch((t=>{throw i((0,o.P_)(e,!0)),t}))}}const d=(e,t)=>({type:"USER_BULK_FOLLOW",payload:{ids:e,value:t}}),u=e=>t=>{e.length>0&&(n.Z.create("ApiResource",{url:"/v3/users/follow/",data:{followee_ids:e.join(",")}}).callUpdate().catch((()=>t(d(e,!1)))),t(d(e,!0)))}},90326:(e,t,i)=>{i.d(t,{Ge:()=>s,JS:()=>o,P_:()=>r,h2:()=>l,h6:()=>c});var n=i(6637);function o(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}const r=(e,t)=>({type:"USER_FOLLOW",payload:{id:e,value:t}}),a=(e,t)=>({type:"USER_BLOCK",payload:{id:e,value:t}}),s=(e,t)=>i=>(i(a(e,!0)),n.Z.create("UserBlockResource",{blocked_user_id:e,orbac_subject_id:t}).callCreate().catch((()=>i(a(e,!1))))),l=e=>t=>(t(a(e,!1)),n.Z.create("UserBlockResource",{blocked_user_id:e}).callDelete().catch((()=>t(a(e,!0)))));function c(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}},483025:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(819063);const o={AggregatedCommentResource:n.rm,AggregatedCommentFeedResource:n.LR,AggregatedCommentReplyResource:n.rm,AggregatedCommentReplyFeedResource:n.LR,AggregatedActivityFeedResource:n.LR,BestPinsFeedAltResource:n.LR,BoardArchiveResource:n.LR,BoardCollaboratorsResource:n.LR,BoardContentRecommendationResource:n.LR,BoardFeedResource:n.LR,BoardFollowingResource:n.LR,BoardInviteResource:n.sf,BoardInvitesResource:n.Ht,BoardlessPinsResource:n.LR,BoardPickerBoardsResource:{all_boards:n.LR,boards_shortlist:n.LR},BoardSectionEditResource:n._F,BoardSectionsRepinResource:n.LR,BoardSectionsResource:n.LR,BoardsFeedResource:n.LR,BoardResource:n.IY,BoardSectionResource:n._F,BoardSectionPinsResource:n.LR,BoardToolsFeedResource:n.LR,ContactRequestsResource:n.LR,ConversationsResource:n.LR,ConversationMessagesResource:n.dq,DidItCommentsResource:n.LR,DidItLikedByResource:n.Gn,DidItUserFeedResource:n.LR,ExploreArticleBlockPinResource:n.LR,ExploreArticleBlockSearchResource:n.LR,ExploreArticleBlockUserResource:n.LR,ExploreArticleBlockUserDidItDataResource:n.LR,ExploreArticleResource:n.yg,FollowingFeedResource:n.LR,HolidaySpotlightRelatedFeedResource:n.LR,HolidaySpotlightResource:n.LR,InterestFollowingResource:n.LR,InterestResource:n.cC,MoreIdeasTabsBoardsResource:n.LR,NewsHubResource:n.LR,NewsHubDetailsResource:n.LR,NewsHubSummaryResource:n.t6,NuxInterestsResource:n.LR,NuxTopicToCreatorsResource:n.Gn,PinResource:n.Cj,PinCatalogResource:n.LR,PinsFromBrandResource:n.LR,ReactionsResource:n.fE,RelatedArticlesResource:n.LR,RelatedInterestsResource:n.LR,RelatedModulesResource:n.LR,RelatedPinFeedResource:n.LR,RelatedProductFeedResource:n.LR,RelatedStreamResource:n.LR,RepinResource:n.Cj,BaseSearchResource:{results:n.LR},SearchResource:n.LR,SectionToolsFeedResource:n.LR,ShareSuggestionsTypeaheadResource:{items:n.LR},ShoppingFeedModularizedResource:n.LR,StoryFeedResource:n.LR,StoryPinTaggedProductsResource:n.LR,SuggestedCreatorFollowsResource:n.Gn,TodayArticleFeedResource:n.LR,IdeasHubTodayArticlesResource:n.LR,TodayArticleResource:n.iF,TodayTabInterestFeedResource:n.LR,TodayTabResource:n.LR,TopicFeedResource:n.LR,UnifiedCommentsResource:n.LR,UserActivityPinsResource:n.LR,UserFollowingResource:n.LR,UserRecentActivityResource:n.LR,UserSimilarBusinessesResource:n.LR,UserHomefeedResource:n.LR,UserPinsResource:n.LR,UserSettingsResource:n.EA,UserStoryPinsFeedResource:n.LR,UserResource:n.EA,VideosFeedResource:n.LR,VisualLiveSearchResource:{results:n.LR},VisualLiveSearchProductFeedResource:n.LR,VisualSearchFlashlightUnifiedResource:n.LR,SeoTier1CandidateResource:n.LR}},819063:(e,t,i)=>{i.d(t,{Cj:()=>c,EA:()=>r,Gn:()=>T,Ht:()=>S,IY:()=>l,LR:()=>k,_F:()=>p,cC:()=>y,dq:()=>m,fE:()=>u,iF:()=>f,rm:()=>a,sN:()=>I,sf:()=>x,t6:()=>P,yg:()=>g});var n=i(782677);const o=Object.freeze({aggregatedComment:"aggregatedComments",article:"articles",board:"boards",boardsection:"boardsections",contactrequest:"contactrequests",conversation:"conversations",conversationMessage:"conversationMessages",inbox:"inbox",notification:"notifications",pin:"pins",reaction:"reactions",story:"stories",todayArticle:"todayArticles",topic:"topics",triedit:"triedits",user:"users",invite:"collaboratorinvite"}),r=new n.fK.Entity(o.user),a=new n.fK.Entity(o.aggregatedComment,{user:r,tagged_users:[r]}),s=new n.fK.Entity(o.article,{curator:r}),l=new n.fK.Entity(o.board),c=new n.fK.Entity(o.pin),d=new n.fK.Entity(o.reaction,{user:r}),u=new n.fK.Array(d),p=new n.fK.Entity(o.boardsection),h=new n.fK.Entity(o.conversationMessage,{sender:r,users:[r],board:l,pin:c,user:r}),m=new n.fK.Array(h),_=new n.fK.Entity(o.contactrequest),g=new n.fK.Entity(o.story,{cover_pin:c,user:r}),v=new n.fK.Entity(o.triedit,{pin:c,user:r}),f=new n.fK.Entity(o.todayArticle,{article_creator_user:r,content_pin:c,content_pin_official_user:r,video_pin:c}),y=new n.fK.Entity(o.topic,{},{processStrategy:(e,t,i)=>({...e,slug:e.slug?e.slug:e.url_name?e.url_name.includes(":")?e.url_name.split(":")[1]:e.url_name:""})}),x=new n.fK.Entity(o.invite,{invited_by_user:r,invited_user:r,board:l},{idAttribute:e=>`${e.board.id}:${e.invited_user.id}`}),b=e=>{switch(e.type){case"aggregatedcomment":return"aggregatedComment";case"conversationMessage":return"conversationMessage";case"explorearticle":return"article";case"news":return"notification";case"interest":return"topic";case"userdiditdata":return"triedit";case"board_section":return"boardsection";case"klp_featured_data":return"topic";case"todayarticle":return"todayArticle";default:return e.type}},w=new n.fK.Union({user:r,board:l,invite:x,pin:c,topic:y,triedit:v},b),P=new n.fK.Entity(o.notification,{content_items:[{content_object:w}],header_icon_objects:[w]}),S=new n.fK.Array(x),T=new n.fK.Array(r),I=new n.fK.Array(l),k=new n.fK.Array({aggregatedComment:a,article:s,board:l,boardsection:p,contactrequest:_,conversationMessage:h,notification:P,pin:c,story:g,todayArticle:f,topic:y,triedit:v,user:r},b,(e=>{switch(e.type){case"collaboratorinvite":return e.board.id;case"category":return"key";default:return"id"}}));g.define({objects:k})},422946:(e,t,i)=>{i.d(t,{DV:()=>d,J:()=>_,ZP:()=>y});var n=i(59644),o=i(932995),r=i(483025),a=i(998651),s=i(648284),l=i(819063),c=i(338739);const d={AGGREGATED_COMMENTS:"aggregatedComments",AGGREGATED_COMMENT_REPLIES:"aggregated-comment-replies",BOARDFEED:"boardfeed",BOARDLESS_PINS:"boardlessPins",BOARD_SECTIONS:"boardSections",BOARD_SECTION_PINS:"board-section-pins",CALL_TO_CREATE_RESPONSES_FEED:"callToCreateResponsesFeed",STORY_PINS_FEED:"story-pins-feed",PROFILE_PINS_FEED:"profile-pins-feed",PROFILE_BOARDS:"profileBoards",SEARCH_PINS:"searchPins",STORY_PIN_DATA:"storyPinData",TODAY_ARTICLE_INTEREST_FEED:"todayArticleInterestFeed",TODAY_TAB:"todayTabFeed",UNIFIED_COMMENTS:"unified-comments",TRIED_IT_FEED:"trieditfeed"},u=new Set(["PinResource","RepinResource"]),p={ApiResource:e=>{return"/v3/orientation/nux_creator_recommendations/"===(null==e?void 0:e.url)?"nux-creator-recommendations":null!=e&&e.url.match(/\/v3\/call_to_create_pins\/([0-9]|[a-z]|[A-Z])+\/pins\//)?`call-to-create-pins:${e.pin_id}`:"/v3/users/me/interests/"===(null==e?void 0:e.url)?`recommended-interests:${null===(t=e.data)||void 0===t?void 0:t.blend_type}`:"";var t},AggregatedActivityFeedResource:e=>`trieditfeed:${e.aggregated_pin_data_id}`,AggregatedCommentFeedResource:e=>`aggregated-comments:${e.objectId}`,AggregatedCommentReplyFeedResource:e=>`${d.AGGREGATED_COMMENT_REPLIES}:${e.objectId}`,BoardlessPinsResource:e=>`boardless-pins:${e.userId}`,BestPinsFeedAltResource:e=>`idea-page-best-pins:${e.interest}`,BoardArchiveResource:e=>"archived-boards",BoardCollaboratorsResource:e=>`board-collaborators:${e.board_id}`,BoardContentRecommendationResource:e=>`recommendation-feed:${e.id}`,BoardFeedResource:e=>`boardfeed:${e.board_id}`,BoardSectionsRepinResource:e=>`board-sections:${e.board_id}`,BoardSectionsResource:e=>`board-sections:${e.board_id}`,BoardSectionPinsResource:e=>`board-section-pins:${e.section_id}`,BoardsFeedResource:e=>`profile-boards:${e.username}`,BoardToolsFeedResource:e=>`board-tools:${e.boardId}`,ConversationsResource:e=>"conversations",DidItLikedByResource:e=>`triedit-likes:${e.didItDataId}`,DidItUserFeedResource:e=>`profile-tried:${e.username}`,ExploreArticleBlockSearchResource:e=>`explore-search:${e.article_id}:${e.block_id}`,ExploreArticleBlockUserResource:e=>`explore-user:${e.article_id}:${e.block_id}`,ExploreArticleBlockPinResource:e=>`explore-pin:${e.article_id}:${e.block_id}`,ExploreArticleBlockUserDidItDataResource:e=>`explore-did_it:${e.article_id}:${e.block_id}`,ExploreArticleResource:({response:e})=>{if(!e)return"";const t="explore_tab_pin".length,i=e.resource_response.data,{story_type:n}=i?i.objects[0]:{story_type:""};return`explore-${n.slice(t)}:${i.id}`},FollowingFeedResource:()=>"following",HolidaySpotlightRelatedFeedResource:e=>`holiday-spotlight-related:${e.storyType}`,HolidaySpotlightResource:e=>`holiday-spotlight:${e.storyType}`,InterestResource:e=>`klp-pins:${e.interest}`,MoreIdeasTabsBoardsResource:()=>"homefeed-more-ideas-tabs",NewsHubResource:()=>"notifications",NewsHubDetailsResource:e=>`newshubdetail:${e.news_id}`,NuxInterestsResource:e=>"nuxTopics",PinsFromBrandResource:e=>`brand-pins:${e.pin}`,ReactionsResource:e=>`reactions:${e.pin_id}`,RelatedArticlesResource:e=>`related-articles:${e.article_id}`,RelatedModulesResource:e=>`related-modules:${e.pin_id}`,RelatedPinFeedResource:e=>`related-pins:${e.pin}`,RelatedProductFeedResource:e=>"pin"===e.shop_source?`closeup-related-products:${e.pin}`:`related-products:${e.pin}`,RelatedStreamResource:e=>`related-story-pins:${e.pinId}`,SearchResource:e=>{const t=`search:${e.scope}:${e.query}:${e.filters||""}:${e.article||""}`;return e.auto_correction_disabled?`${t}:auto-correction-disabled`:t},BaseSearchResource:e=>{const t=`search:${e.scope}:${e.query}:${e.filters||""}:${e.appliedProductFilters}:${e.article||""}`;return e.auto_correction_disabled?`${t}:auto-correction-disabled`:t},SectionToolsFeedResource:e=>`section-tools:${e.sectionId}`,ShareSuggestionsTypeaheadResource:e=>`share-suggestions:${e.board||e.user}:${e.term}`,ShoppingFeedModularizedResource:e=>e.saved_products_only?`board-shop-saved:${e.board_id}`:`board-shop-related:${e.board_id}`,StoryFeedResource:e=>`story-feed:${e.feed_type}:${e.request_params}`,SuggestedCreatorFollowsResource:()=>"suggested-creator-follows",StoryPinTaggedProductsResource:()=>"story-pin-tagged-products",TodayArticleFeedResource:e=>`today-article:${e.id}`,IdeasHubTodayArticlesResource:e=>`today-article:${e.interest_id}`,TodayTabInterestFeedResource:e=>`today-article-interestfeed:${e.interest_id}`,TodayTabResource:()=>"today-tab",SeoTier1CandidateResource:()=>"tier1-feed",UnifiedCommentsResource:e=>`unified-comments:${e.aggregated_pin_id}`,UserActivityPinsResource:e=>`profile-pins-feed:${e.user_id}`,UserHomefeedResource:e=>e.pin_quiz?"pin-quiz":"homefeed",UserFollowingResource:e=>`user-following:${e.username}`,UserRecentActivityResource:()=>"user-recent-activity",UserSimilarBusinessesResource:e=>`user-similar-business:${e.username}`,UserStoryPinsFeedResource:e=>`story-pins-feed:${e.user_id}`,VideosFeedResource:e=>"videos-feed",VisualLiveSearchResource:e=>`visual-search:${e.pin_id}:${e.crop.x}${e.crop.y}${e.crop.w}${e.crop.h}`,VisualLiveSearchProductFeedResource:e=>`visual-search-products:${e.pin_id}:${e.crop.x}${e.crop.y}${e.crop.w}${e.crop.h}`,VisualSearchFlashlightUnifiedResource:e=>`related-products-unified:${e.pin_id}`,BoardFollowingResource:e=>`board-following:${e.username}`,InterestFollowingResource:e=>`topic-following:${e.username}`,UserPinsResource:e=>`profile-pins:${e.username}`,TopicFeedResource:e=>e.best_pins?`best-topic-pins:${e.interest}`:`topic-pins:${e.interest}`},h={ApiResource:({options:e})=>null!=e&&e.url.match(/\/v3\/call_to_create_pins\/([0-9]|[a-z]|[A-Z])+\/pins\//)?{type:d.CALL_TO_CREATE_RESPONSES_FEED,id:e.pin_id}:null,AggregatedActivityFeedResource:({options:{aggregated_pin_data_id:e}})=>({type:d.TRIED_IT_FEED,id:e}),AggregatedCommentFeedResource:({options:{objectId:e}})=>({type:d.AGGREGATED_COMMENTS,id:e}),AggregatedCommentReplyFeedResource:({options:{isUnifiedComment:e,objectId:t}})=>({type:e?d.AGGREGATED_COMMENT_REPLIES:d.AGGREGATED_COMMENTS,id:t,reversed:!0}),BoardFeedResource:({options:{board_id:e}})=>({type:d.BOARDFEED,id:e}),BoardlessPinsResource:({options:{userId:e}})=>({type:d.BOARDLESS_PINS,id:e}),BoardSectionPinsResource:({options:{section_id:e}})=>({type:d.BOARD_SECTION_PINS,id:e}),BoardSectionsResource:({options:{board_id:e}})=>({type:d.BOARD_SECTIONS,id:e}),BoardsResource:({options:{username:e,sort:t}})=>({type:d.PROFILE_BOARDS,id:(0,n.Z)(e,t)}),BaseSearchResource:({options:{auto_correction_disabled:e,appliedProductFilters:t,scope:i,filters:n,query_pin_sigs:o,query:r,user:l},response:c})=>{var u;return{type:d.SEARCH_PINS,id:(0,s.Tb)({appliedProductFilters:t,autoCorrectionDisabled:e,filters:n,query:r,selectedPinImgSig:o,scope:i,user:l}),items:null!==(u=c.resource_response.data)&&void 0!==u&&u.results?(0,a.LM)(c.resource_response.data.results).filteredResults:[]}},DidItCommentsResource:({options:{objectId:e}})=>({type:d.AGGREGATED_COMMENTS,id:e,reversed:!0}),DidItUserFeedResource:({options:{username:e}})=>({type:d.TRIED_IT_FEED,id:e}),IdeasHubTodayArticlesResource:({options:{interest_id:e}})=>({type:d.TODAY_TAB,id:e}),RelatedArticlesResource:({options:{article_id:e}})=>({type:d.TODAY_TAB,id:e}),StoryPinDraftsResource:({options:{userId:e}})=>({type:d.STORY_PIN_DATA,id:e}),TodayTabInterestFeedResource:({options:{interest_id:e}})=>({type:d.TODAY_ARTICLE_INTEREST_FEED,id:e}),TodayTabResource:()=>({type:d.TODAY_TAB,id:"todayTab"}),UnifiedCommentsPreviewResource:({options:{aggregated_pin_id:e}})=>({type:d.UNIFIED_COMMENTS,id:e}),UnifiedCommentsResource:({options:{aggregated_pin_id:e,is_reversed:t}})=>({type:d.UNIFIED_COMMENTS,id:e,reversed:t}),UserActivityPinsResource:({options:{user_id:e}})=>({type:d.PROFILE_PINS_FEED,id:e}),UserStoryPinsFeedResource:({response:e,options:{user_id:t}})=>({type:d.STORY_PINS_FEED,id:t,items:e.resource_response.data||[]})},m=(e,{pinId:t,oldFeedId:i,newFeedId:n})=>i===n?e:((e,{pinId:t,feedId:i})=>e[i]?{...e,[i]:[{type:"pin",id:t},...e[i]]}:e)(((e,{pinId:t,feedId:i})=>e[i]?{...e,[i]:e[i].filter((e=>!("pin"===e.type&&e.id===t)))}:e)(e,{pinId:t,feedId:i}),{pinId:t,feedId:n}),_=(e,t)=>e in p?p[e](t):null,g=(e,t)=>t?`board-section-pins:${t}`:`boardfeed:${e}`,v=(e,t)=>e.map((({id:e,schema:i})=>i?{id:e,type:i,trackingParams:"pin"===i?t.pins[e].tracking_params:void 0,user_id:void 0}:null)).filter(Boolean),f=(e,t,i)=>Object.keys(e).reduce(((n,o)=>{const r=e[o]||[],a=r.filter((e=>!(e.type===t&&e.id===i)));return r.length!==a.length&&(n[o]=a),n}),{...e}),y=(e={},t)=>{switch(t.type){case c.zP:case c.aW:{const{payload:n}=t,{resource:o,options:a,normalizedResponse:s,schema:u}=n;if(s&&o in p){const i=((e,t,i)=>{const n=i||r.Z[e];if(n===l.LR)return t.result;if(n===l.sN)return t.result.map((e=>({id:e,schema:"board"})));if(n===l.Gn)return t.result.map((e=>({id:e,schema:"user"})));if(n===l.Ht)return t.result.map((e=>({id:e,schema:"invite"})));if(n===l.fE)return t.result.map((e=>({id:e,schema:"reaction"})));if("object"==typeof n){const e=Object.entries(n).find((([e,t])=>t===l.LR));if(e)return t.result[e[0]]}return null})(o,s,u);if(i&&Array.isArray(i)){const n=p[o](a);if("ShoppingFeedModularizedResource"===o){const{board_id:t,saved_products_only:n}=null!=a?a:{},o=`board-shop-related:${t}`,r=`board-shop-saved:${t}`,l=`board-shop-saved-preview:${t}`,c=[...e[o]||[]],d=[...e[r]||[]],u=[...e[l]||[]];return v(i,s.entities).forEach((e=>{var i;n?d.push(e):s.entities.pins&&(null===(i=s.entities.pins[e.id])||void 0===i?void 0:i.board)===t?u.push(e):c.push(e)})),{...e,[o]:c,[r]:d,[l]:u}}if("BoardToolsFeedResource"===o||"SectionToolsFeedResource"===o)return{...e,[n]:i};{const o=(t.type===c.aW&&e[n]||[]).concat(v(i,s.entities));return{...e,[n]:o}}}}else{var i;const o=n.response.resource_response.data;if(null===(i=n.options)||void 0===i||!i.redux_normalize_feed)return e;const r=h[n.resource](n);if(r){const{type:i,id:n,items:a,reversed:s}=r;let l=(a||o||[]).map((e=>((e,t)=>{switch(e.type){case"story":return{id:e.id,type:"story",story_type:e.story_type};case"module":return{id:e.id,type:"module",name:e.name};case"user":return{id:e.id,type:"user"};case"board":return t===d.PROFILE_BOARDS?{id:e.id,type:"board",onProfile:!0,profileGroup:e.archived_by_me_at?"archived":e.privacy||"public"}:{id:e.id,type:"board",onProfile:!1};case"board_section":return{type:"board_section",id:e.id};case"triedit":return{type:"triedit",id:e.id};case"aggregatedcomment":return{type:"aggregatedcomment",id:e.id};case"home_feed_tab":return{type:"home_feed_tab",id:e.id,name:e.name};case"storypindata":return{id:e.id,type:"storypindata"};case"todayarticle":return{type:"todayarticle",id:e.id};case"unifiedcommentspreview":return"userdiditdata"===e.unified_comment.type?{type:"triedit",id:e.unified_comment.id}:{type:"aggregatedcomment",id:e.unified_comment.id};default:return{type:"pin",id:e.id}}})(e,i)));s&&(l=l.reverse());const u=`${i}:${n}`,p=e[u];if(p||t.type!==c.aW){const i=p||[];let n=l;return t.type===c.aW&&(n=s?l.concat(i):i.concat(l)),{...e,[u]:n}}}}break}case"FEED_ITEM_REORDERED":{const{payload:{feedType:i,feedId:n,itemType:r,targetItemId:a,sourceItemId:s}}=t,l=`${i}:${n}`,c=e[l]||[];let u=-1,p=-1;if([d.BOARDFEED,d.BOARD_SECTION_PINS,d.BOARD_SECTIONS,"profileBoards"].includes(i)&&(u=c.findIndex((e=>e.type===r&&e.id===s)),p=c.findIndex((e=>e.type===r&&e.id===a))),-1!==u&&-1!==p)return{...e,[l]:(0,o.Z)(c,u,p)};break}case"FEED_ITEMS_REMOVED":{const{payload:{feedType:i,feedId:n,inverseSelection:o,itemType:r,itemIds:a=[]}}=t,s=`${i}:${n}`,l=e[s]||[];if(l&&l.length>0&&(i===d.BOARD_SECTION_PINS||i===d.BOARDFEED)){const t=l.filter((e=>{const t=a.includes(e.id);return!(e.type===r&&(o&&!t||!o&&t))})),i=!!t.find((e=>"pin"===e.type));return{...e,[s]:i?t:[]}}if(l&&l.length>0&&i===d.BOARD_SECTIONS){const t=l.filter((e=>{const t=a.includes(e.id);return!(e.type===r&&t)}));return{...e,[s]:t}}if(l&&l.length>0&&(i===d.AGGREGATED_COMMENTS||i===d.BOARDLESS_PINS||i===d.PROFILE_PINS_FEED||i===d.STORY_PINS_FEED||i===d.UNIFIED_COMMENTS||i===d.TRIED_IT_FEED||i===d.STORY_PIN_DATA)){const t=l.filter((e=>{const t=a.includes(e.id);return!(e.type===r&&t)}));return{...e,[s]:t}}break}case"FEED_ITEMS_ADDED":{const{payload:{feedType:i,feedId:n,itemType:o,itemIds:r=[],prepend:a}}=t,s=`${i}:${n}`,l=e[s]||[];if(l&&(i===d.BOARD_SECTION_PINS||i===d.BOARDFEED||i===d.BOARDLESS_PINS)){const t=r.map((e=>({id:e,type:o})));let i=0;"story"===(l[0]||{}).type&&(i=1),"story"===(l[1]||{}).type&&(i=2);const n=[...l.slice(0,i),...t,...l.slice(i)];return{...e,[s]:n}}if(l&&i===d.BOARD_SECTIONS){const t=[...r].reverse().map((e=>({id:e,type:"board_section"}))),i=l?[...t,...l]:[...t];return{...e,[s]:i}}if(i===d.AGGREGATED_COMMENTS||i===d.AGGREGATED_COMMENT_REPLIES||i===d.PROFILE_PINS_FEED||i===d.STORY_PINS_FEED||i===d.UNIFIED_COMMENTS){const t=r.map((e=>({id:e,type:o}))),i=l?[...a?t:l,...a?l:t]:t;return{...e,[s]:i}}if(i===d.TRIED_IT_FEED){const t=r.map((e=>({id:e,type:o}))),i=l?[...t,...l]:t;return{...e,[s]:i}}break}case"FEED_INVALIDATE":{const{payload:{feedType:i,feedId:n}}=t,o=`${i}:${n}`;if(e[o]||[])return{...e,[o]:null};break}case"APPEND_FEED_ITEMS":{const{payload:{id:i,items:n,options:o}}=t,r=e[i];if(r){let t;return t=o.isPrepend?r[0]&&"story"===r[0].type?[].concat(r[0],n,r.slice(1)):n.concat(r):r.concat(n),{...e,[i]:t}}return{...e,[i]:n}}case"PIN_DELETE":{const{payload:{pinId:i}}=t;return f(e,"pin",i)}case"BOARD_ARCHIVE":{const{payload:{boardId:i,username:n}}=t,o=`profile-boards:${null!=n?n:""}`;if(e[o])return{...e,[o]:e[o].filter((e=>e.id!==i))};break}case"BOARD_UNARCHIVE":{const{payload:{boardId:i}}=t,n="archived-boards";if(e[n])return{...e,[n]:e[n].filter((e=>e.id!==i))};break}case"BOARD_DELETE":{const{payload:{boardId:i}}=t;return f(e,"board",i)}case"BOARD_SECTION_DELETE":{const{payload:{boardSectionId:i}}=t;return f(e,"boardsection",i)}case"PINS_MOVE":{const{payload:{source:i,target:n,pinIds:o,userId:r}}=t,a=i.boardlessPins&&r&&`boardless-pins:${r}`||i.boardId&&g(i.boardId,i.sectionId),s=g(n.boardId,n.sectionId);return o.reduce(((e,t)=>m(e,{pinId:t,oldFeedId:a,newFeedId:s})),e)}case"PINS_MOVE_ALL":{const{payload:{source:i,target:n,excludePinIds:o}}=t,r=g(i.boardId,i.sectionId),a=g(n.boardId,n.sectionId),s={...e,[r]:o.map((e=>({type:"pin",id:e})))};return delete s[a],s}case"PIN_EDIT":{const{payload:{pinId:i,boardId:n,section:o,source:{boardId:r,sectionId:a}}}=t,s=g(r,a),l=g(n,null==o?void 0:o.id);return m(e,{pinId:i,oldFeedId:s,newFeedId:l})}case c.AF:if(u.has(t.payload.resource)){const i=t.payload.response.resource_response.data,n=i.board;let o;if("quick_saves"===n.layout)o=`boardless-pins:${t.payload.options.user_id}`;else{const e=t.payload.options.section;o=e?`board-section-pins:${e}`:`boardfeed:${n.id}`}if(e[o]){const t={...e},n={id:i.id,type:"pin",trackingParams:null==i?void 0:i.tracking_params};return t[o]=[n].concat(e[o]),t}}if("BoardSectionResource"===t.payload.resource&&t.payload.normalizedResponse){const i=t.payload.normalizedResponse.result,n=`board-sections:${t.payload.normalizedResponse.entities.boardsections[i].board}`;if(e[n]){const t={...e},o={id:i,type:"boardsection"};return t[n]=[o].concat(e[n]),t}}if("AggregatedCommentResource"===t.payload.resource&&t.payload.normalizedResponse){const i={id:t.payload.normalizedResponse.result,type:"aggregatedcomment"},n=["aggregated-comments","unified-comments"];let o={...e};for(const r of n){const n=`${r}:${t.payload.options.objectId}`;e[n]&&(o={...o,[n]:[i].concat(o[n])})}return o}if("AggregatedCommentReplyResource"===t.payload.resource&&t.payload.normalizedResponse){const i=`${d.AGGREGATED_COMMENT_REPLIES}:${t.payload.options.objectId}`;return{...e,[i]:[...e[i]||[],{id:t.payload.normalizedResponse.result,type:"aggregatedComment"}]}}if("ReactionsResource"===t.payload.resource&&t.payload.normalizedResponse){const{reaction_pin_id:i}=t.payload.options;if("reaction"===t.payload.options.action_type){const n=`reactions:${t.payload.options.pin_id}`,o={...e},r={id:`${i}:${t.payload.options.user_id}`,type:"reaction",trackingParams:void 0};return o[n]=[r].concat(e[n]),o}if("unreaction"===t.payload.options.action_type){const n=`${i}:${t.payload.options.user_id}`;return f(e,"reaction",n)}}break;case"COMPLETE_STORY":{const{payload:{storyId:i}}=t;return f(e,"story",i)}}return e}},852025:(e,t,i)=>{i.d(t,{k:()=>r,s:()=>a});var n=i(667294);const o=(0,n.createContext)(Object.freeze({})),r=o.Provider;function a(){return(0,n.useContext)(o)}},596493:(e,t,i)=>{i.d(t,{Ac:()=>r,c7:()=>o,cg:()=>n});const n=-1,o=5,r=6},675752:(e,t,i)=>{i.d(t,{A:()=>n});const n=e=>{const t=e.rich_metadata;return t?t.products?144:t.article?141:t.recipe?145:139:140}},962551:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(643010),o=i(883119),r=i(785893);function a({guide:e,guidedQuery:t,isSlot0Style:i=!1}){const{dominant_color:a,display:s}=e,l=(0,r.jsx)(o.iP,{role:"link",tapStyle:"none",rounding:"pill",href:`/search/pins/?rs=guide&q=${encodeURIComponent(t)}`,children:(0,r.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{backgroundSize:"cover",backgroundColor:a,whiteSpace:i?void 0:"nowrap"}},"data-test-id":"search-guide",minWidth:i?void 0:84,padding:4,rounding:"pill",children:(0,r.jsx)(o.xv,{align:i?"start":"center",color:i?(0,n.Yc)()?"inverse":"default":"inverse",lineClamp:i?2:void 0,size:"200",weight:i?"normal":"bold",children:s})})});return i?l:(0,r.jsx)(o.xu,{flex:"none",marginStart:-7,paddingX:4,children:l})}const s=-1,l=0;function c({guides:e,isSlot0Style:t=!1,query:i}){const n=({position:e,term:t})=>e===s?t:e===l?`${t} ${i}`:`${i} ${t}`,c=()=>e.map((e=>(0,r.jsx)(a,{guide:e,guidedQuery:n(e),isSlot0Style:t},e.display)));return t?(0,r.jsx)(o.xu,{padding:2,children:(0,r.jsx)(o.kC,{width:"100%",gap:{row:0,column:1},direction:"column",alignItems:"start",children:c()})}):(0,r.jsx)(o.xu,{overflow:"hidden",width:"calc(100vw - 16px)",children:(0,r.jsx)(o.xu,{display:"flex",marginBottom:-2,marginStart:-4,overflow:"auto",paddingX:7,paddingY:2,position:"relative",width:"100vw",children:c()})})}},475970:(e,t,i)=>{i.r(t),i.d(t,{default:()=>x});var n=i(667294),o=i(898781),r=i(883119),a=i(785893);function s({size:e,iconColor:t,backgroundColor:i,disabled:n,onClick:s}){const l=(0,o.ZP)(),c=48===e?"lg":"xl";return(0,a.jsx)(r.hU,{accessibilityLabel:l._('Copy Link', 'shareMenu.icon.accessibilityLabel.copy', 'button to let users copy link directly'),bgColor:i,icon:"link",iconColor:t||i&&!["white","lightGray","transparent"].includes(i)?t:"gray",size:c,disabled:n,onClick:s})}var l=i(172071),c=i(375436),d=i(67428),u=i(499128),p=i(53987),h=i(867060),m=i(407043),_=i(773285),g=i(276775),v=i(343341),f=i(743473),y=i(827896);function x({backgroundColor:e,iconColor:t,iconSize:i,iconWrapperWidth:x,isCloseupActionBar:b,marginEnd:w,onClick:P,sharedObject:S,spaceBelowIcon:T,viewType:I,viewParameter:k,relayEnvironment:E}){const A=(0,o.ZP)(),{logContextEvent:C}=(0,m.v)(),{checkExperiment:j}=(0,_.F)(),R=j("web_share_menu_logging").anyEnabled,D=(0,v.F9)(),[O,L]=(0,n.useState)(""),[M,N]=(0,n.useState)(!1),[z,F]=(0,n.useState)(!1),Z=(0,g.useLocation)(),B=(0,y.Z)(),U=A._('Link copied!', 'shareSheet.socialBar.copyLinkButton.LinkCopied', 'Notification link was copied to clipboard'),H=e=>{b?navigator.clipboard.writeText(e).then((()=>{var e;e=A._('Copied link to your clipboard to share', 'web.unauth.pinbar.copylink', 'Message to indicate link has been copied'),D.showToast((({hideToast:t})=>(0,a.jsx)(r.xu,{top:!0,children:(0,a.jsx)(u.ZP,{duration:3e3,onHide:t,text:e})})))})):navigator.clipboard.writeText(e).then((()=>{F(!0),setTimeout((()=>{F(!1)}),3e3)}))},V=async()=>{if(O)return void H(O);N(!0);const e=(e=>{let t;if("pin"===S.type&&S.id){const e={shouldTrackForPrevLocation:!0};t=B(S.id,e)}return{invite_category:3,invite_channel:e,object_type:S.type,object_id:S.id,name:S.name,description:S.description||"",path:S.url,picture:S.imageUrl,client_tracking_params:t}})(12);f.Z.createShareInviteData(e,E).then((t=>{const{invite_url:i}=t;N(!1),i&&(L(i),f.Z.logShareInvite(e,t,E),H(i))}))},W=()=>{if(V(),R){const e=h.y[S.type];e||l.Z.increment("social.web.copyLinkButton.sharedObject.type",void 0,{type:S.type}),b&&C({event_type:101,component:14147,element:13103,object_id_str:S.id,view_type:I,view_parameter:k,aux_data:e?{invite_object:e}:void 0}),P&&P()}};return(0,p.am)(Z)&&b&&j("web_copy_link_btn_replace").anyEnabled?(0,a.jsx)(r.xu,{marginStart:1,children:(0,a.jsx)(r.zx,{accessibilityLabel:A._('Copy link', 'shareSheet.socialBar.copyLinkButton.CopyLink', 'Copy Pin URL to clipboard'),text:A._('Copy link', 'shareSheet.socialBar.copyLinkButton.CopyLink', 'Copy Pin URL to clipboard'),onClick:()=>W(),size:"lg",color:"gray",fullWidth:!0})}):(0,a.jsxs)(d.Z,{isCloseupActionBar:!0,width:x||i,marginEnd:w||!1,children:[(0,a.jsx)(r.xu,{alignItems:b?"center":"stretch",display:b?"flex":"block",marginBottom:T,width:b?"100%":"auto",children:(0,a.jsx)(r.kC,{alignItems:"center",direction:"column",justifyContent:"center",width:i,children:(0,a.jsx)(s,{backgroundColor:e,iconColor:t,size:i,onClick:W,disabled:M})})}),!b&&(0,a.jsx)(c.Z,{text:z?U:A._('Copy link', 'shareSheet.socialBar.copyLinkButton.CopyLink', 'Copy Pin URL to clipboard')})]})}},750869:(e,t,i)=>{i.d(t,{d:()=>n});const n={BOARD:"board",PIN:"pin",DID_IT:"did_it",PINNER:"pinner",USER:"user",TODAY_ARTICLE:"today_article"}},827021:(e,t,i)=>{i.r(t),i.d(t,{default:()=>he});var n=i(667294),o=i(172071),r=i(116303),a=i(898781),s=i(977558),l=i(349700),c=i(407043),d=i(773285),u=i(883119);const p={FONT_SIZE:"300",ITEM_SIZE:56,ITEM_PADDING:30,SPACE_BELOW_ITEM:2,ITEM_ROW_HEIGHT:98,SECTION_LABEL_HEIGHT:64,MAX_CONTACTS_SHOWN:5,SHARE_SHEET_PADDING_X:3,SHARE_SHEET_PADDING_Y:2},h={FONT_SIZE:"200",ITEM_SIZE:48,ITEM_PADDING:26,SPACE_BELOW_ITEM:2,ITEM_ROW_HEIGHT:81,SECTION_LABEL_HEIGHT:49,MAX_CONTACTS_SHOWN:4,SHARE_SHEET_PADDING_X:3,SHARE_SHEET_PADDING_Y:1},m=(p.MAX_CONTACTS_SHOWN+1)*(p.ITEM_SIZE+p.ITEM_PADDING)+2*p.SHARE_SHEET_PADDING_X*4,_=(h.MAX_CONTACTS_SHOWN+1)*(h.ITEM_SIZE+h.ITEM_PADDING)+2*h.SHARE_SHEET_PADDING_X*4,g="error";var v=i(785893);function f({idx:e,item:t,onSendMessage:i,onViewConversation:o,sentHistory:m}){var _;const f=(0,a.ZP)(),{logContextEvent:y}=(0,c.v)(),[x,b]=(0,n.useState)(!1),w=t.id||"string"==typeof t.email&&t.email||"",P=m[w]===g,S=Object.prototype.hasOwnProperty.call(m,w)&&!P,T=null!==(_=m[w])&&void 0!==_?_:"";(0,n.useEffect)((()=>{P&&b(!1)}),[P]);let I="";const{full_name:k,email:E}=t;"string"!=typeof k||k.match(/^\s*$/)?"string"!=typeof E||E.match(/^\s*$/)||(I=E):I=k;let A="";S?A=f._('View chat', 'shareSheet.ContactItem.viewChat', 'View current chat'):x&&(A=f._('Sent', 'shareSheet.ContactItem.sent', 'Item has been sent to contact'));const{checkExperiment:C}=(0,d.F)(),j=C("web_sharesheet_resize").anyEnabled?h:p;return(0,v.jsx)(u.xu,{alignItems:"center","data-test-id":"sharesheet-contact-item",display:"flex",direction:"column",width:j.ITEM_SIZE+j.ITEM_PADDING,children:(0,v.jsx)(u.xu,{display:"inlineBlock",role:"button",children:(0,v.jsxs)(u.iP,{onTap:S?()=>o(T):()=>{y({event_type:101,component:13029,element:1039,aux_data:{result_index:e+1,rs:t.debug_reason.reason}}),b(!0),i(t)},children:[(0,v.jsxs)(u.xu,{alignItems:"center","data-test-id":x?"sharesheet-viewchat-link":"sharesheet-contact-item-button",display:"flex",height:j.ITEM_SIZE,justifyContent:"center",marginBottom:j.SPACE_BELOW_ITEM,width:j.ITEM_SIZE,children:[x&&(0,v.jsx)(u.xu,{alignItems:"center",color:"transparentDarkGray","data-test-id":"sharesheet-contact-item-sent-icon",display:"flex",height:j.ITEM_SIZE,justifyContent:"center",position:"absolute",rounding:"circle",width:j.ITEM_SIZE,zIndex:new u.Ry(s.fe),children:(0,v.jsx)(u.JO,{accessibilityLabel:(0,l.Wc)(f._('Sent to {{recipientName}}', 'shareSheet.ContactItem.sentIcon.accessibilityLabel', 'Accessibility label for sent icon over user avatar, recipientName: message recipient'),{recipientName:I}),icon:"check",color:"light",size:24})}),(0,v.jsx)(r.Z,{size:"fit",src:t.image_large_url,name:I})]}),(0,v.jsxs)(u.xu,{"data-test-id":"sharesheet-contact-item-label",width:j.ITEM_SIZE,children:[(0,v.jsx)(u.xv,{lineClamp:1,size:"100",align:"center",children:I}),(0,v.jsx)(u.xv,{color:"subtle",size:"100",align:"center",children:A})]})]})})})}var y=i(784590),x=i(313951),b=i(17676);function w(e){var t;const{logContextEvent:i}=(0,c.v)(),o=(0,a.ZP)(),{onHide:r,onSendMessage:s,onShowImportContacts:l,objectAttachment:m,sentHistory:_}=e,{checkExperiment:g}=(0,d.F)(),w=g("web_sharesheet_resize").anyEnabled?h:p,{isLoaded:P}=(0,y.Z)({name:"ShareSuggestionsResource",options:{field_set_key:"default"},noCache:!0}),{shareSuggestions:S}=(0,b.E)(),T=(null===(t=S[""])||void 0===t?void 0:t.slice(0,w.MAX_CONTACTS_SHOWN))||[],I=T.length>0;(0,n.useEffect)((()=>{if(P){i({event_type:I?7511:7512,component:56,view_type:70,view_parameter:256})}}),[I,i,P]);const{dropdownOpen:k,conversationOpen:E,newMessageOpen:A}=(0,x.Z5)(),C=e=>{E(e),k(),r()},j=T.map(((e,t)=>{const i=`${e.id||e.email||t}`,n={item:e,idx:t,onSendMessage:s,onViewConversation:C,sentHistory:_};return(0,v.jsx)(f,{...n},i)})),R=(0,d.F)().checkExperiment("web_sharesheet_resize").anyEnabled,D=!I&&!P;return(0,v.jsxs)(u.kC,{direction:"column",children:[(0,v.jsx)(u.kC,{alignItems:"center",height:w.SECTION_LABEL_HEIGHT,justifyContent:"center",children:(0,v.jsx)(u.xv,{align:"center",size:w.FONT_SIZE,weight:"bold",children:o._('Send on Pinterest', 'ContactsSuggestions.Header.text', 'Header for contact suggestion section of the share menu')})}),(0,v.jsx)(u.xu,{display:"flex",height:w.ITEM_ROW_HEIGHT,justifyContent:D?"center":void 0,marginBottom:5,children:D?(0,v.jsx)(u.xu,{paddingY:2,children:(0,v.jsx)(u.$j,{accessibilityLabel:o._('Loading Conversation Messages', 'SendObject.contactList.spinner', 'Spinner that indicates then the contact list is being loaded'),show:!0})}):(0,v.jsxs)(u.kC,{direction:"row",children:[(0,v.jsxs)(u.kC,{alignItems:"center",direction:"column",justifyContent:"start",width:w.ITEM_SIZE+w.ITEM_PADDING,children:[(0,v.jsx)(u.xu,{height:w.ITEM_SIZE,marginBottom:w.SPACE_BELOW_ITEM,width:w.ITEM_SIZE,children:(0,v.jsx)(u.hU,{accessibilityLabel:o._('Search for users', 'ContactsSuggestsions.SearchIcon.accessibilityLabel', 'Accessibility label for search icon in Contacts Suggestions list'),bgColor:"lightGray",icon:"search",iconColor:"darkGray",onClick:()=>{A(m),k(),r()},size:R?"lg":"xl"})}),(0,v.jsx)(u.xv,{lineClamp:1,size:"100",children:o._('Search', 'ContactsSuggestions.SearchOption.text', 'Label for search icon in Contacts Suggestions list')})]}),I?j:(0,v.jsxs)(u.kC,{alignItems:"center",direction:"column",justifyContent:"start",width:w.ITEM_SIZE+w.ITEM_PADDING,children:[(0,v.jsx)(u.xu,{height:w.ITEM_SIZE,marginBottom:w.SPACE_BELOW_ITEM,width:w.ITEM_SIZE,children:(0,v.jsx)(u.hU,{accessibilityLabel:o._('Search for users', 'ContactsSuggestsions.SearchIcon.accessibilityLabel', 'Accessibility label for search icon in Contacts Suggestions list'),bgColor:"lightGray",icon:"people",iconColor:"darkGray",onClick:l,size:R?"lg":"xl"})}),(0,v.jsx)(u.xv,{lineClamp:1,size:"100",children:o._('Import', 'ContactsSuggestions.ImportOption.text', 'Label for import contacts icon in Contacts Suggestions list')})]})]})})]})}function P(e){switch(e){case"AuthHomefeed":return 13;case"BaseBoardPinGrid":return 5;case"BoardMoreIdeasTabContent":return 23;case"ConversationView":return 19;case"FollowingFeedGrid":return 21;case"ProfilePromotablePinCard":return 1;case"RelatedPinGrid":case"RelatedProductsFeed":return 14;case"RelatedProductsExploreTab":return 4;case"ShoppingPackageItem":case"ShoppingSquareGridProductDetailPage":case"ShoppingGridShippedMetadata":case"ProductPinsFeed":return 27;case"StoryPinFeedGrid":return 28;case"TodayArticleFeed":return 20;case"UserProfilePinGrid":default:return e}}var S=i(936776),T=i(750869);function I(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class k extends n.Component{constructor(...e){super(...e),I(this,"state",{textValue:this.props.initialTextValue||"",emailValue:""}),I(this,"handleSendEmail",((e,t)=>{if(e){const i={type:"email_share_suggestion",id:"",email:e,debug_reason:{reason:"",readable_reason:""}};this.props.onSendMessage(i,t)}})),I(this,"handleTextValueChange",(({value:e})=>{this.setState({textValue:e})})),I(this,"handleEmailValueChange",(({value:e})=>{this.setState({emailValue:e})}))}renderCloseButton(){const{i18n:e,onCancelDraft:t}=this.props;return(0,v.jsx)(u.hU,{accessibilityLabel:e._('Cancel share to user', 'accessibility label for close button', 'accessibility label for close button'),icon:"arrow-back",onClick:t,size:"sm",iconColor:"gray"})}render(){const{width:e}=this.props;return(0,v.jsxs)(u.xu,{display:"flex",direction:"column",column:12,paddingX:4,paddingY:2,width:e,color:"default",children:[(0,v.jsxs)(u.xu,{display:"flex",alignItems:"center",paddingY:4,children:[this.renderCloseButton(),(0,v.jsx)(u.xu,{flex:"grow",marginEnd:8,children:(0,v.jsx)(u.xv,{align:"center",weight:"bold",children:this.props.i18n._('Send to', 'shareSheet.SendToEmail.label', 'Send to label')})})]}),(0,v.jsxs)(u.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[(0,v.jsx)(u.xu,{paddingY:1,marginBottom:4,children:(0,v.jsx)(u.Kx,{id:"email",onChange:this.handleEmailValueChange,placeholder:this.props.i18n._('Enter email address', 'Email address to send to', 'Email address to send to'),value:this.state.emailValue||"",rows:1})}),(0,v.jsx)(u.Kx,{id:"sendObjectMessage",onChange:this.handleTextValueChange,placeholder:this.props.i18n._('Add a message', 'shareSheet.SendToEmail.textareaPlaceholder', 'Placeholder that tells user this is where they can add a messaage'),value:this.state.textValue||""}),(0,v.jsx)(u.xu,{paddingY:4,display:"flex",justifyContent:"center",children:(0,v.jsx)(u.zx,{size:"lg",color:"red",onClick:()=>this.handleSendEmail(this.state.emailValue||"",this.state.textValue||""),type:"submit",text:this.props.i18n._('Send', 'shareSheet.SendToEmail.sendButton', 'Button that sends out to email'),disabled:!(0,S.Z)(this.state.emailValue)})})]})]})}}function E(e){const t=(0,a.ZP)();return(0,v.jsx)(k,{...e,i18n:t})}var A=i(567831),C=i(475970),j=i(31149),R=i(107193),D=i(659522),O=i(331744),L=i(757146);function M({size:e=48}){return(0,v.jsxs)("svg",{width:e,height:e,viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",display:"block",children:[(0,v.jsx)("rect",{width:"56",height:"56",rx:"28",fill:"#fff"}),(0,v.jsx)("rect",{x:".5",y:".5",width:"55",height:"55",rx:"27.5",stroke:"#767676",strokeOpacity:".4"}),(0,v.jsx)("path",{d:"M39 19.5c0 1.381-1.119 2.5-2.5 2.5S34 20.881 34 19.5s1.119-2.5 2.5-2.5 2.5 1.119 2.5 2.5ZM18.5 28c0-.69-.56-1.25-1.25-1.25S16 27.31 16 28s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25ZM26.75 38.75c0-.69.56-1.25 1.25-1.25s1.25.56 1.25 1.25S28.69 40 28 40s-1.25-.56-1.25-1.25Z",fill:"#E60023"}),(0,v.jsx)("path",{d:"M29.25 17.25c0 .69-.56 1.25-1.25 1.25s-1.25-.56-1.25-1.25S27.31 16 28 16s1.25.56 1.25 1.25ZM17 36.5c0-1.381 1.119-2.5 2.5-2.5s2.5 1.119 2.5 2.5-1.119 2.5-2.5 2.5-2.5-1.119-2.5-2.5ZM38.75 26.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25S40 28.69 40 28s-.56-1.25-1.25-1.25Z",fill:"#FFD63F"}),(0,v.jsx)("path",{d:"M19.5 22c1.381 0 2.5-1.119 2.5-2.5S20.881 17 19.5 17 17 18.119 17 19.5s1.119 2.5 2.5 2.5ZM36.5 34c-1.381 0-2.5 1.119-2.5 2.5s1.119 2.5 2.5 2.5 2.5-1.119 2.5-2.5-1.119-2.5-2.5-2.5Z",fill:"#46CC88"}),(0,v.jsx)("path",{d:"M28 21c-3.866 0-7 3.134-7 7s3.134 7 7 7 7-3.134 7-7-3.134-7-7-7Z",fill:"#3869FF"})]})}var N=i(375436),z=i(67428),F=i(19121);function Z({iconSize:e,iconWrapperWidth:t,marginBottom:i,marginEnd:n,onCreatePincodeClick:o,sharedObject:r}){const s=(0,a.ZP)(),l=(0,F.Z)();return o&&[T.d.BOARD,T.d.PINNER,T.d.USER].includes(r.type)&&l.isAuth&&(r.id===l.id||l.isEmployee)?(0,v.jsxs)(z.Z,{width:t,marginEnd:n,children:[(0,v.jsx)(u.xu,{marginBottom:i,children:(0,v.jsx)(u.iP,{fullWidth:!1,onTap:o,children:(0,v.jsx)(M,{size:e})})}),(0,v.jsx)(N.Z,{text:s._('Pincode', 'Share via pincode', 'Share via pincode')})]},"pincode"):null}var B=i(464240),U=i(22641),H=i(167912),V=i(780280),W=i(743473),$=i(827896),G=i(867060),K=i(343341);function q(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Y={backgroundColor:"#ffffff",border:"none",padding:0},X=new Set(["JP","TW","TH"]),J=(e,t)=>{(0,R.default)((t=>{t&&(t.getUserID()?e():t.login((()=>{e()})))}),t)};class Q extends n.Component{constructor(...e){super(...e),q(this,"state",{whatsappInviteData:null,inviteData:null,whatsappURL:"",whatsAppLogged:!1,copyLinkLogged:!1}),q(this,"logShareInviteLink",(()=>{const{copyLinkLogged:e,inviteData:t}=this.state,i=this.getShareOptions(12);e||(W.Z.logShareInvite(i,t,this.props.relayEnvironment),this.setState({copyLinkLogged:!0}))}))}componentDidMount(){this.getWhatsAppURL()}getShareOptions(e){let t;const{sharedObject:i,getClientTrackingParams:n}=this.props;if("pin"===i.type&&i.id){const e={shouldTrackForPrevLocation:!0};t=n(i.id,e)}return{invite_category:3,invite_channel:e,object_type:i.type,object_id:i.id,name:i.name,description:i.description||"",path:i.url,picture:i.imageUrl,client_tracking_params:t}}getWhatsAppURL(){const e=this.getShareOptions(10);W.Z.createShareInviteData(e,this.props.relayEnvironment).then((e=>{const t=`${e.title}\n${e.invite_url}`;if(t){const i=encodeURIComponent(t);this.setState({whatsappInviteData:e,whatsappURL:"https://web.whatsapp.com/send?text="+i})}else this.setState({whatsappURL:"https://web.whatsapp.com/send?text="+(0,A.Z)(this.props.sharedObject.url)})}))}checkWritePermissions(){return!!this.props.viewer.isWriteBanned}handleSocialShareClick(e,t){if(this.checkWritePermissions())return;const{onCreatePincodeClick:i,onExternalSend:n,logContextEvent:r,viewType:a,viewParameter:s,inShareMenuLoggingExp:l,sharedObject:c}=this.props;let d=l?G.c[t]:46;"facebook"===e||5===t?(this.openFacebookDialog(),l||(d=257)):"twitter"===e||9===t?(this.openTwitterDialog(),l||(d=256)):"messenger"===e||6===t?(this.openFbMessengerDialog(),l||(d=950)):"whatsapp"===e||10===t?(this.openWhatsAppDialog(),l||(d=951)):"pincode"===e||16===t?i&&i():"copylink"===e||12===t?(this.openShareUrlLink(),l||(d=100)):"email"===e||1===t?(this.openEmailDialog(),l||(d=258)):"line"!==e&&8!==t||(this.openLineDialog(),l||(d=952)),n&&n();const u=G.y[c.type];u||o.Z.increment("social.web.legoShareSocialBar.sharedObject.type",void 0,{type:c.type}),r({event_type:101,component:l?14121:153,element:d,object_id_str:l?c.id:void 0,view_type:l?a:void 0,view_parameter:l?s:void 0,aux_data:l?{invite_object:u}:void 0})}openEmailDialog(){this.props.onEmailIconClick()}openFacebookDialog(){const{unauthId:e,viewer:t}=this.props;J((()=>{W.Z.shareFacebookInvite({options:this.getShareOptions(5),unauthId:e,viewer:t},this.props.relayEnvironment)}),t)}openFbMessengerDialog(){const{unauthId:e,viewer:t}=this.props;J((()=>{W.Z.shareFbMessengerInvite({options:this.getShareOptions(6),unauthId:e,viewer:t},this.props.relayEnvironment)}),t)}openWhatsAppDialog(){const e=this.getShareOptions(10);this.state.whatsAppLogged||(W.Z.logShareInvite(e,this.state.whatsappInviteData,this.props.relayEnvironment),this.setState({whatsAppLogged:!0}))}openShareUrlLink(){this.logShareInviteLink()}openTwitterDialog(){W.Z.shareTwitterInvite(this.getShareOptions(9),this.props.relayEnvironment)}openLineDialog(){W.Z.shareLineInvite(this.getShareOptions(8),this.props.relayEnvironment)}renderEmail(){const{inResizeShareSheetExp:e}=this.props,t=e?h:p,i=t.ITEM_SIZE,n=t.ITEM_SIZE+t.ITEM_PADDING,o=t.SPACE_BELOW_ITEM;return(0,v.jsxs)(z.Z,{width:n,marginEnd:!1,children:[(0,v.jsx)(u.xu,{display:"inlineBlock",marginBottom:o,children:(0,v.jsx)("button",{"aria-label":this.props.i18n._('Share on Email', 'sharesheet.shareSocialBar.ShareEmail', 'Button that will share via Email'),onClick:()=>this.handleSocialShareClick("email",1),style:Y,children:(0,v.jsx)(j.Z,{size:i})})}),(0,v.jsx)(N.Z,{text:this.props.i18n._('Email', 'Share via email', 'Share via email')})]},"email")}renderShareOptions(){const{i18n:e,onCreatePincodeClick:t,sharedObject:i,showLineShare:o,showMessengerShare:r,isPublisherSharingObject:a,viewType:s,viewParameter:l,inResizeShareSheetExp:c}=this.props,d=c?h:p,m=d.ITEM_SIZE,_=d.ITEM_SIZE+d.ITEM_PADDING,g=d.SPACE_BELOW_ITEM;return(0,v.jsx)(n.Fragment,{children:(0,v.jsxs)(u.kC,{justifyContent:"start",wrap:c,children:[o&&(0,v.jsxs)(z.Z,{width:_,marginEnd:o,children:[(0,v.jsx)(u.xu,{marginBottom:g,children:(0,v.jsx)("button",{"aria-label":e._('Share on LINE', 'sharesheet.shareSocialBar.ShareLine', 'Button that will share via Line'),onClick:()=>this.handleSocialShareClick("line",8),style:Y,children:(0,v.jsx)(O.Z,{size:m})})}),(0,v.jsx)(N.Z,{text:e._('LINE', 'sharesheet.shareSocialBar.ShareLineLabel', 'Line button label')})]}),(0,v.jsxs)(z.Z,{width:_,marginEnd:!1,children:[(0,v.jsx)(u.xu,{marginBottom:g,children:(0,v.jsx)("button",{"aria-label":e._('Share on WhatsApp', 'sharesheet.shareSocialBar.ShareWhatsapp', 'Button that will share via WhatsApp'),onClick:()=>this.handleSocialShareClick("whatsapp",10),style:Y,tabIndex:"-1",children:(0,v.jsx)(u.iP,{rounding:"circle",role:"link",href:this.state.whatsappURL,target:"blank",children:(0,v.jsx)(U.Z,{size:m})})})}),(0,v.jsx)(N.Z,{text:e._('WhatsApp', 'sharesheet.shareSocialBar.ShareWhatsappLabel', 'WhatsApp button label')})]}),r&&(0,v.jsxs)(z.Z,{width:_,marginEnd:!1,children:[(0,v.jsx)(u.xu,{marginBottom:g,children:(0,v.jsx)("button",{"aria-label":e._('Share on Messenger', 'sharesheet.shareSocialBar.ShareMessenger', 'Button that will share via Messenger'),onClick:()=>this.handleSocialShareClick("messenger",6),style:Y,children:(0,v.jsx)(L.Z,{size:m})})}),(0,v.jsx)(N.Z,{text:e._('Messenger', 'sharesheet.shareSocialBar.ShareMessengerLabel', 'Messenger button label')})]}),(0,v.jsxs)(z.Z,{width:_,marginEnd:!1,children:[(0,v.jsx)(u.xu,{marginBottom:g,children:(0,v.jsx)("button",{"aria-label":e._('Share on Facebook', 'sharesheet.shareSocialBar.ShareFacebook', 'Button that will share via Facebook'),onClick:()=>this.handleSocialShareClick("facebook",5),style:Y,children:(0,v.jsx)(D.Z,{size:m})})}),(0,v.jsx)(N.Z,{text:e._('Facebook', 'sharesheet.shareSocialBar.ShareFacebookLabel', 'Facebook button label')})]}),(0,v.jsxs)(z.Z,{width:_,marginEnd:!1,children:[(0,v.jsx)(u.xu,{marginBottom:g,children:(0,v.jsx)("button",{"aria-label":e._('Share on Twitter', 'sharesheet.shareSocialBar.ShareTwitter', 'Button that will share via Twitter'),onClick:()=>this.handleSocialShareClick("twitter",9),style:Y,"data-test-id":"twitter-share-icon",children:(0,v.jsx)(B.Z,{size:m})})}),(0,v.jsx)(N.Z,{text:e._('Twitter', 'sharesheet.shareSocialBar.ShareTwitterLabel', 'Twitter button label')})]}),(0,v.jsxs)(n.Fragment,{children:[(0,v.jsx)(Z,{iconSize:m,iconWrapperWidth:_,marginBottom:g,marginEnd:!1,onCreatePincodeClick:t,sharedObject:i}),(0,v.jsx)(C.default,{sharedObject:i,backgroundColor:"lightGray",iconColor:"darkGray",iconSize:m,iconWrapperWidth:_,marginEnd:o,onClick:()=>this.handleSocialShareClick("copylink",12),isCloseupActionBar:!1,spaceBelowIcon:g,viewType:s,viewParameter:l,relayEnvironment:this.props.relayEnvironment},"copylink"),!a&&this.renderEmail()]})]})})}render(){const{paddingX:e,inResizeShareSheetExp:t}=this.props,i=t?h:p;return(0,v.jsxs)(u.xu,{paddingX:e,children:[(0,v.jsx)(u.kC,{alignContent:"center",alignItems:"center",height:i.SECTION_LABEL_HEIGHT,justifyContent:"center",children:(0,v.jsx)(u.xv,{size:i.FONT_SIZE,weight:"bold",children:this.props.i18n._('Share', 'Sharesheet.ShareSocialBar', 'Externally share a Pin/Board/profile')})}),(0,v.jsx)(u.kC,{alignContent:"start",alignItems:"stretch",justifyContent:"start",minHeight:i.ITEM_ROW_HEIGHT,children:this.renderShareOptions()})]})}}function ee(e){const{logContextEvent:t}=(0,c.v)(),{checkExperiment:i}=(0,d.F)(),n=(0,a.ZP)(),o=(0,F.Z)(),r=o.isAuth&&X.has(o.country),s=i("web_messenger_share_channel").anyEnabled,l=(0,V.B)(),u=i("web_share_menu_logging").anyEnabled,p=i("web_sharesheet_resize").anyEnabled,h=i("graphql_migration_sharesheet_sgrowth_web").anyEnabled,m=(0,H.useRelayEnvironment)();return(0,v.jsx)(Q,{...e,toastManagerContext:(0,K.F9)(),viewer:(0,F.Z)(),showLineShare:r,showMessengerShare:s,i18n:n,logContextEvent:t,unauthId:l.unauthId,inShareMenuLoggingExp:u,inResizeShareSheetExp:p,shareSheetExpEnabled:h,relayEnvironment:h?m:void 0,getClientTrackingParams:(0,$.Z)()})}var te=i(6637),ie=i(499128),ne=i(717615),oe=i(231947),re=i(697247);const ae=(e,t)=>{const i={};return e.forEach((e=>{i[e]=t})),i};function se(e){const{logContextEvent:t}=(0,c.v)(),i=(0,a.ZP)(),[r,s]=(0,n.useState)(!1),[l,f]=(0,n.useState)(null),[y,b]=(0,n.useState)({}),[S]=(0,n.useState)(((e,t)=>"today_article"===e?t._('Check out this article on Pinterest!', 'sendObject.initialTextValue.todayArticle', 'pre-populated share message when a user tries to send a Today Article'):"")(e.sendType,i)),{showOneToast:T}=(0,K.F9)(),{surface:I}=(0,re.$)(),k=(0,F.Z)(),A=(0,ne.Z)(),{conversationCreate:C}=(0,x.Z5)(),j=(0,x.NG)(),R=(0,n.useRef)();(0,n.useEffect)((()=>{var e;return null===(e=R.current)||void 0===e?void 0:e.focus()}),[]);const D=(i,n)=>{s(!1),e.onMessageSent(),((i,n)=>{const{sharedObject:r}=e,a=r.id;o.Z.increment("web.sharesheet.internal.send",1,{status:"success"}),t({event_type:180,element:276,object_id_str:a,aux_data:{conversation_id:i,pin_id:n}})})(i,n)},O=(e,t)=>{o.Z.increment("web.sharesheet.internal.send",1,{status:"fail"}),b({...y,...ae(e,g)});const i=t.message_detail||t.message;i&&T((({hideToast:e})=>(0,v.jsx)(ie.ZP,{variant:"error",duration:5e3,onHide:e,text:i})))},L=async(t,i,n)=>{const{sharedObject:o,sendType:r}=e,a=o.id,s={emails:i,user_ids:t,text:n,source:P(I)};s[r]=a;const l=te.Z.create("ConversationsResource",s),c=t.length>0?t:i;try{const e=await l.callCreate(),t=e&&e.resource_response.data;C(t),D(t.id,"pin"===r?a:null),b({...y,...ae(c,t.id)})}catch(d){O(c,d)}},M=(i,n)=>{"conversation_share_suggestion"===i.type?((t,i,n)=>{const{sharedObject:o,sendType:r}=e;let a;switch(r){case"pin":a="pinId";break;case"board":a="boardId";break;case"did_it":a="didItId";break;case"user":case"pinner":a="userId"}const s=a?j(t,{text:i,[a]:o.id,source:P(I)},void 0,k):void 0;s&&s.then((()=>{D(t,"pin"===r?o.id:null),b({...y,[t]:t})})).catch((e=>{O([t],e)}))})(i.id,n):"user_share_suggestion"===i.type&&i.username?L([i.id],[],n):L([],[i.email],n),t({event_type:101,component:56,element:276})},{onCreatePincodeClick:N,onShowImport:z,sendType:Z,sharedObject:B,onHide:U,onExternalSend:H,viewType:V,viewParameter:W}=e,$="user"===e.sendType&&(0,oe.q6)(k,e.sharedObject.id,A),G=("board"===e.sendType||"pin"===e.sendType)&&void 0!==e.sharedObject.ownerId&&(0,oe.q6)(k,e.sharedObject.ownerId,A),q=$||G,{checkExperiment:Y}=(0,d.F)(),X=Y("web_sharesheet_resize").anyEnabled,J=X?h:p,Q=X?_:m;return r&&"email"===l?(0,v.jsx)(E,{initialTextValue:S,objectId:B.id,objectType:Z,onCancelDraft:()=>{s(!1),f(null)},onHide:U,onSendMessage:M,width:Q}):(0,v.jsxs)(u.xu,{color:"default",paddingX:J.SHARE_SHEET_PADDING_X,paddingY:J.SHARE_SHEET_PADDING_Y,width:Q,tabIndex:0,ref:R,children:[(0,v.jsx)(ee,{onCreatePincodeClick:N,onEmailIconClick:()=>{s(!0),f("email")},onExternalSend:H,onHide:U,sharedObject:B,isPublisherSharingObject:q,viewType:V,viewParameter:W}),!q&&(0,v.jsxs)(n.Fragment,{children:[(0,v.jsx)(u.xu,{paddingY:1,paddingX:3,children:(0,v.jsx)(u.iz,{})}),(0,v.jsx)(w,{objectAttachment:{type:Z,id:B.id},onHide:U,onSendMessage:M,onShowImportContacts:z,sentHistory:y})]})]})}var le=i(177471);const ce=["facebook","google"];function de(e,t){return"facebook"===e?t._('Facebook', ' - ', ' -- '):"google"===e?t._('Google', ' - ', ' -- '):t._('Other', ' - ', ' -- ')}function ue(e,t,i){return"facebook"===e?i._('Friends who are on Pinterest', ' - ', ' -- '):"google"===e&&t&&-1!==t.indexOf("@gmail")?t:null}function pe({onBack:e}){const t=(0,a.ZP)(),i=(0,F.Z)(),n=i.isAuth?i.email:null,o=ce.filter((e=>!i.isAuth||!1===i.socialNetwork[e].connected)),r=(0,le.k)();return(0,v.jsx)(u.xu,{paddingX:1,paddingY:2,children:(0,v.jsxs)(u.kC,{gap:{row:0,column:2},direction:"column",children:[(0,v.jsxs)(u.kC,{gap:{row:2,column:0},alignItems:"center",children:[(0,v.jsx)(u.hU,{accessibilityLabel:t._('Back', ' - ', ' -- '),icon:"arrow-back",iconColor:"darkGray",onClick:e,size:"md"}),(0,v.jsx)(u.xv,{size:"300",weight:"bold",children:t._('Upload contacts from...', ' - ', ' -- ')})]}),(0,v.jsx)(u.kC,{direction:"column",gap:{row:0,column:4},children:o.map((e=>(0,v.jsx)(u.xu,{paddingX:2,children:(0,v.jsxs)(u.iP,{onTap:()=>(e=>{r.handleConnect(e,!0,Object.freeze({}),t)})(e),children:[(0,v.jsx)(u.xv,{size:"200",children:de(e,t)}),(0,v.jsx)(u.xv,{size:"200",children:ue(e,n,t)})]})},e)))})]})})}function he({element:e,onCreatePincodeClick:t,onExternalSend:i,onHide:r,sendType:a,sharedObject:l,viewType:p,viewParameter:h}){const{logContextEvent:m}=(0,c.v)(),[_,g]=(0,n.useState)(!1),{checkExperiment:f}=(0,d.F)(),y=f("web_share_menu_logging").anyEnabled,x=(0,n.useRef)(!1);(0,n.useEffect)((()=>{const t=G.y[a];return t||o.Z.increment("social.web.sendObjectWrapper.sendType",void 0,{type:a}),m({event_type:7120,component:y?14121:void 0,object_id_str:l.id,element:y?e:void 0,view_type:p,view_parameter:h,aux_data:y?{invite_object:t}:void 0}),()=>{y||m({event_type:7121,object_id_str:l.id,view_type:p,view_parameter:h});const e=x.current?7493:7492;m({event_type:e,component:y?14121:void 0,object_id_str:y?l.id:void 0,element:y?13097:void 0,view_type:p,view_parameter:h,aux_data:y?{invite_object:t}:void 0})}}),[]);const b=()=>{g(!0)},w=()=>{g(!1)},P=()=>{x.current=!0},S=()=>{x.current=!0,i&&i()};return _?(0,v.jsx)(pe,{onBack:w}):(0,v.jsx)(u.xu,{overflow:"hidden",rounding:4,zIndex:new u.Ry(s.fe-1),color:"default",children:(0,v.jsx)(se,{onCreatePincodeClick:t,onHide:r,onShowImport:b,onMessageSent:P,onExternalSend:S,sendType:a,sharedObject:l,viewType:p,viewParameter:h})})}},375436:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(207112),o=i(883119),r=i(785893);const a=({text:e})=>(0,r.jsx)(o.xv,{align:"center",size:"100",children:(0,r.jsx)(n.Z,{maxWidthPx:128,maxHeightPx:50,children:e})})},67428:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(883119),o=i(785893);const r=({width:e,marginEnd:t,children:i,isCloseupActionBar:r})=>(0,o.jsx)(n.xu,{alignItems:"center",direction:"column",display:"flex",marginEnd:t?2:0,width:e,marginBottom:r?0:5,children:i})},905732:(e,t,i)=>{i.d(t,{Z:()=>xe});var n=i(667294),o=i(79113),r=i(245376),a=i(116303),s=i(63552),l=i(898781),c=i(112690),d=i(883119),u=i(785893);function p({cropSource:e,domainFilters:t,handleDomain:i,pinId:o}){const p=(0,l.ZP)(),h=(0,c.Z)();(0,n.useEffect)((()=>{h({event_type:120,component:13469,view_parameter:3396,view_type:72,aux_data:{commerce_data:JSON.stringify({source:(0,r.Z)(e)})}})}),[]);return(0,u.jsxs)(d.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[(0,u.jsx)(d.xu,{paddingY:4,children:(0,u.jsx)(d.xv,{children:p._('Merchants', 'FeedFiltering.DomainFilter.Merchants', 'Area that lists the Merchants filters')})}),t.map(((e,t)=>(0,u.jsx)(s.Z,{onTouch:()=>{var n,r;i(t),r=null!==(n=e.domain)&&void 0!==n?n:"",h({event_type:102,component:13469,view_parameter:3396,view_type:72,element:11376,aux_data:{pin_id:o,commerce_data:JSON.stringify({select:!0,domain:r})}})},pressState:"none",children:(0,u.jsxs)(d.xu,{alignItems:"center",display:"flex",marginBottom:3,children:[(0,u.jsx)(d.xu,{marginEnd:2,children:(0,u.jsx)(a.Z,{name:e.label||"",size:"sm",src:e.image_url})}),(0,u.jsx)(d.xu,{flex:"grow",children:(0,u.jsx)(d.xv,{children:e.label})}),e.selected?(0,u.jsx)(d.xu,{children:(0,u.jsx)(d.JO,{accessibilityLabel:p._('checked merchant filter', 'FeedFiltering.DomainFilters.MerchantsCheckmark', 'checkmark when merchant is selected'),color:"default",icon:"check"})}):null]},e.domain)},e.domain)))]})}var h=i(702664),m=i(892819),_=i(643010),g=i(542473),v=i.n(g),f=Math.sqrt(50),y=Math.sqrt(10),x=Math.sqrt(2);function b(e,t,i){var n,o,r,a,s=-1;if(i=+i,(e=+e)===(t=+t)&&i>0)return[e];if((n=t<e)&&(o=e,e=t,t=o),0===(a=function(e,t,i){var n=(t-e)/Math.max(0,i),o=Math.floor(Math.log(n)/Math.LN10),r=n/Math.pow(10,o);return o>=0?(r>=f?10:r>=y?5:r>=x?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(r>=f?10:r>=y?5:r>=x?2:1)}(e,t,i))||!isFinite(a))return[];if(a>0){let i=Math.round(e/a),n=Math.round(t/a);for(i*a<e&&++i,n*a>t&&--n,r=new Array(o=n-i+1);++s<o;)r[s]=(i+s)*a}else{a=-a;let i=Math.round(e*a),n=Math.round(t*a);for(i/a<e&&++i,n/a>t&&--n,r=new Array(o=n-i+1);++s<o;)r[s]=(i+s)/a}return n&&r.reverse(),r}function w(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function P(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?w(Object(i),!0).forEach((function(t){k(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):w(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function I(e,t,i){return t&&T(e.prototype,t),i&&T(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function k(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=A(e);if(t){var o=A(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return R(this,i)}}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==i)return;var n,o,r=[],a=!0,s=!1;try{for(i=i.call(e);!(a=(n=i.next()).done)&&(r.push(n.value),!t||r.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==i.return||i.return()}finally{if(s)throw o}}return r}(e,t)||M(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||M(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){if(e){if("string"==typeof e)return N(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?N(e,t):void 0}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var z="react-compound-slider:";function F(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,i){return t.val>i.val?e?-1:1:i.val>t.val?e?1:-1:0}}function Z(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.findIndex((function(e){return e.key===t}));if(-1!==o){var r=e[o],a=r.key,s=r.val;return s===i?e:[].concat(L(e.slice(0,o)),[{key:a,val:i}],L(e.slice(o+1))).sort(F(n))}return e}function B(e,t){if(!e)return[0,0];var i=e.getBoundingClientRect();return[t?i.top:i.left,t?i.bottom:i.right]}function U(e){var t=e.type,i=void 0===t?"":t,n=e.touches;return!n||n.length>1||"touchend"===i.toLowerCase()&&n.length>0}function H(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=0,r=e.map((function(e){var t=i.getValue(e);return e!==t&&(o+=1,v()(!n,"".concat(z," Invalid value encountered. Changing ").concat(e," to ").concat(t,"."))),t})).map((function(e,t){return{key:"$$-".concat(t),val:e}})).sort(F(t));return{handles:r,changes:o}}function W(e,t){return t}function $(e,t){for(var i=0;i<e.length;i++){if(e[i].key!==t[i].key)return e;if(t[i+1]&&t[i].val===t[i+1].val)return e}return t}function G(e,t,i,n,o){for(var r=-1,a=!0,s=0;s<e.length;s++){var l=e[s],c=t[s];if(!c||c.key!==l.key)return e;c.val!==l.val&&(r=s,a=c.val-l.val>0)}if(-1===r)return e;for(var d=a?i:-i,u=0;u<t.length;u++){var p=t[u],h=t[u+1];if(h&&p.val===h.val){if(u===r){var m=h.val+d;if(o(m)===m){var _=G(t,Z(t,h.key,h.val+d,n),i,n,o);return _===t?e:_}return e}var g=p.val+d;if(o(g)===g){var v=G(t,Z(t,p.key,p.val+d,n),i,n,o);return v===t?e:v}return e}}return t}function K(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return t.forEach((function(t){return t&&t(e)}))}}var q=function(){return{value:0,percent:0}},Y=function(e){E(i,e);var t=D(i);function i(){var e;S(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).getRailProps=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.props,n=i.emitMouse,o=i.emitTouch;return P(P({},t),{},{onMouseDown:K(t&&t.onMouseDown,n),onTouchStart:K(t&&t.onTouchStart,o)})},e}return I(i,[{key:"render",value:function(){var e=this.getRailProps,t=this.props,i=t.getEventData,o=t.activeHandleID,r=void 0===o?"":o,a=(0,t.children)({getEventData:i||q,activeHandleID:r,getRailProps:e});return a&&n.Children.only(a)}}]),i}(n.Component),X=function(e){E(i,e);var t=D(i);function i(){var e;S(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).autofocus=function(e){e.target instanceof HTMLElement&&e.target.focus()},e.getHandleProps=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.props,o=n.emitKeyboard,r=n.emitMouse,a=n.emitTouch;return P(P({},i),{},{onKeyDown:K(i&&i.onKeyDown,(function(e){return o&&o(e,t)})),onMouseDown:K(i&&i.onMouseDown,e.autofocus,(function(e){return r&&r(e,t)})),onTouchStart:K(i&&i.onTouchStart,(function(e){return a&&a(e,t)}))})},e}return I(i,[{key:"render",value:function(){var e=this.getHandleProps,t=this.props,i=t.activeHandleID,o=void 0===i?"":i,r=t.children,a=t.handles,s=r({handles:void 0===a?[]:a,activeHandleID:o,getHandleProps:e});return s&&n.Children.only(s)}}]),i}(n.Component),J=function(){function e(){S(this,e),this.interpolator=void 0,this.domain=[0,1],this.range=[0,1],this.domain=[0,1],this.range=[0,1],this.interpolator=null}return I(e,[{key:"createInterpolator",value:function(e,t){var i=this,n=e[0],o=e[1],r=t[0],a=t[1];return o<n?function(e){return i.interpolateValue(a,r)(i.deinterpolateValue(o,n)(e))}:function(e){return i.interpolateValue(r,a)(i.deinterpolateValue(n,o)(e))}}},{key:"interpolateValue",value:function(e,t){return t-=e=+e,function(i){return e+t*i}}},{key:"deinterpolateValue",value:function(e,t){return(t-=e=+e)?function(i){return(i-e)/t}:function(){return t}}},{key:"rescale",value:function(){return this.interpolator=null,this}},{key:"getValue",value:function(e){var t=this.domain,i=this.range;return(this.interpolator||(this.interpolator=this.createInterpolator(t,i)))(+e)}},{key:"setDomain",value:function(e){return this.domain=[e[0],e[1]],this.rescale(),this}},{key:"getDomain",value:function(){return this.domain}},{key:"setRange",value:function(e){return this.range=[e[0],e[1]],this}},{key:"getRange",value:function(){return this.range}},{key:"getTicks",value:function(e){var t=this.domain;return b(t[0],t[t.length-1],e||10)}}]),e}(),Q=function(){return{value:0,percent:0}},ee=function(e){E(i,e);var t=D(i);function i(){return S(this,i),t.apply(this,arguments)}return I(i,[{key:"render",value:function(){var e=this.props,t=e.children,i=e.values,o=e.scale,r=void 0===o?new J:o,a=e.count,s=void 0===a?10:a,l=e.getEventData,c=void 0===l?Q:l,d=e.activeHandleID,u=t({getEventData:c,activeHandleID:void 0===d?"":d,ticks:(i||r.getTicks(s)).map((function(e){return{id:"$$-".concat(e),value:e,percent:r.getValue(e)}}))});return u&&n.Children.only(u)}}]),i}(n.Component),te=function(){return{value:0,percent:0}},ie=function(e){E(i,e);var t=D(i);function i(){var e;S(this,i);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).getTrackProps=function(t){var i=e.props,n=i.emitMouse,o=i.emitTouch;return P(P({},t||{}),{},{onMouseDown:K(t&&t.onMouseDown,n),onTouchStart:K(t&&t.onTouchStart,o)})},e}return I(i,[{key:"render",value:function(){for(var e=this.getTrackProps,t=this.props,i=t.children,o=t.left,r=void 0===o||o,a=t.right,s=void 0===a||a,l=t.scale,c=void 0===l?new J:l,d=t.handles,u=void 0===d?[]:d,p=t.getEventData,h=void 0===p?te:p,m=t.activeHandleID,_=void 0===m?"":m,g=c.getDomain(),v=[],f=0;f<u.length+1;f++){var y=u[f-1],x=u[f];0===f&&!0===r?y={id:"$",value:g[0],percent:0}:f===u.length&&!0===s&&(x={id:"$",value:g[1],percent:100}),y&&x&&v.push({id:"".concat(y.id,"-").concat(x.id),source:y,target:x})}var b=i({getEventData:h,activeHandleID:_,tracks:v,getTrackProps:e});return b&&n.Children.only(b)}}]),i}(n.Component);function ne(e,t,i){return Math.min(Math.max(e,t),i)}var oe=I((function e(){var t=this;S(this,e),this.step=1,this.domain=[0,1],this.range=[0,1],this.setDomain=function(e){return t.domain=[e[0],e[1]],t},this.setRange=function(e){return t.range=[e[0],e[1]],t},this.setStep=function(e){return t.step=e,t},this.getValue=function(e){var i=O(t.domain,2),n=i[0],o=i[1],r=O(t.range,2),a=r[0],s=r[1],l=t.step,c=(ne(e,n,o)-n)/(o-n);return ne(l*Math.round(c*(s-a)/l)+a,a<s?a:s,s>a?s:a)}})),re="undefined"!=typeof window&&"undefined"!=typeof document,ae=function(){},se=function(e,t,i,n){var o=n?e-t:e+t;return n?Math.max(i[0],o):Math.min(i[1],o)},le=function(e,t,i,n){var o=n?e+t:e-t;return n?Math.min(i[1],o):Math.max(i[0],o)},ce=[0,100],de=function(e){E(i,e);var t=D(i);function i(){var e;S(this,i);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={step:.1,values:[],domain:ce,handles:[],reversed:!1,activeHandleID:"",valueToPerc:null,valueToStep:null,pixelToStep:null},e.slider=n.createRef(),e.onKeyDown=function(t,i){var n=["ArrowRight","ArrowUp"],o=["ArrowDown","ArrowLeft"],r=j(e),a=r.state.handles,s=r.props,l=s.step,c=void 0===l?.1:l,d=s.reversed,u=void 0!==d&&d,p=s.vertical,h=void 0!==p&&p,m=s.domain,_=void 0===m?[0,100]:m,g=t.key||"".concat(t.keyCode);if(n.concat(o).includes(g)){if(h){var v=[o,n];n=v[0],o=v[1]}t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault();var f=a.find((function(e){return e.key===i}));if(f){var y=f.val,x=y;n.includes(g)?x=se(y,c,_,u):o.includes(g)&&(x=le(y,c,_,u));var b=a.map((function(e){return e.key===i?{key:e.key,val:x}:e}));e.submitUpdate(b,!0)}}},e.onMouseDown=function(t,i){e.onStart(t,i,!1)},e.onTouchStart=function(t,i){U(t)||e.onStart(t,i,!0)},e.getEventData=function(t,i){var n,o=j(e),r=o.state,a=r.pixelToStep,s=r.valueToPerc,l=o.props.vertical;return a.setDomain(B(e.slider.current,l)),i&&t instanceof TouchEvent?n=a.getValue(H(l,t)):t instanceof MouseEvent&&(n=a.getValue(l?t.clientY:t.pageX)),{value:n,percent:s.getValue(n)}},e.onMouseMove=function(t){var i=j(e),n=i.state,o=n.handles,r=n.pixelToStep,a=n.activeHandleID,s=void 0===a?"":a,l=i.props,c=l.vertical,d=l.reversed,u=void 0!==d&&d;r.setDomain(B(e.slider.current,c));var p=Z(o,s,r.getValue(c?t.clientY:t.pageX),u);e.submitUpdate(p)},e.onTouchMove=function(t){var i=j(e),n=i.state,o=n.handles,r=n.pixelToStep,a=n.activeHandleID,s=i.props,l=s.vertical,c=s.reversed;if(null!==r&&!U(t)){r.setDomain(B(e.slider.current,l));var d=Z(o,a,r.getValue(H(l,t)),c);e.submitUpdate(d)}},e.onMouseUp=function(){var t=j(e),i=t.state,n=i.handles,o=void 0===n?[]:n,r=i.activeHandleID,a=t.props,s=a.onChange,l=void 0===s?ae:s,c=a.onSlideEnd,d=void 0===c?ae:c;l(o.map((function(e){return e.val}))),d(o.map((function(e){return e.val})),{activeHandleID:r}),e.setState({activeHandleID:""}),re&&(document.removeEventListener("mousemove",e.onMouseMove),document.removeEventListener("mouseup",e.onMouseUp))},e.onTouchEnd=function(){var t=j(e),i=t.state,n=i.handles,o=i.activeHandleID,r=t.props,a=r.onChange,s=void 0===a?ae:a,l=r.onSlideEnd,c=void 0===l?ae:l;s(n.map((function(e){return e.val}))),c(n.map((function(e){return e.val})),{activeHandleID:o}),e.setState({activeHandleID:""}),re&&(document.removeEventListener("touchmove",e.onTouchMove),document.removeEventListener("touchend",e.onTouchEnd))},e}return I(i,[{key:"componentDidMount",value:function(){var e=this.state.pixelToStep,t=this.props.vertical;e.setDomain(B(this.slider.current,t))}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"removeListeners",value:function(){re&&(document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"onStart",value:function(e,t,i){var n=this.state.handles,o=this.props.onSlideStart,r=void 0===o?ae:o;i||e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),n.find((function(e){return e.key===t}))?(this.setState({activeHandleID:t}),r(n.map((function(e){return e.val})),{activeHandleID:t}),i?this.addTouchEvents():this.addMouseEvents()):(this.setState({activeHandleID:""}),this.handleRailAndTrackClicks(e,i))}},{key:"handleRailAndTrackClicks",value:function(e,t){var i,n=this,o=this.state,r=o.handles,a=o.pixelToStep,s=this.props,l=s.vertical,c=s.reversed,d=void 0!==c&&c,u=this.slider;a.setDomain(B(u.current,l)),i=t?a.getValue(H(l,e)):a.getValue(l?e.clientY:e.pageX);for(var p="",h=1/0,m=0;m<r.length;m++){var _=r[m],g=_.key,v=_.val,f=Math.abs(v-i);f<h&&(p=g,h=f)}var y=Z(r,p,i,d);this.setState({activeHandleID:p},(function(){n.submitUpdate(y,!0),t?n.addTouchEvents():n.addMouseEvents()}))}},{key:"addMouseEvents",value:function(){re&&(document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp))}},{key:"addTouchEvents",value:function(){re&&(document.addEventListener("touchmove",this.onTouchMove),document.addEventListener("touchend",this.onTouchEnd))}},{key:"submitUpdate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.props,n=i.mode,o=void 0===n?1:n,r=i.step,a=void 0===r?.1:r,s=i.onUpdate,l=void 0===s?ae:s,c=i.onChange,d=void 0===c?ae:c,u=i.reversed,p=void 0!==u&&u,h=this.state.valueToStep.getValue;this.setState((function(i){var n=i.handles,r=[];if("function"==typeof o)r=o(n,e,a,p,h),v()(Array.isArray(r),"Custom mode function did not return an array.");else switch(o){case 1:r=W(0,e);break;case 2:r=$(n,e);break;case 3:r=G(n,e,a,p,h);break;default:r=e,v()(!1,"".concat(z," Invalid mode value."))}return l(r.map((function(e){return e.val}))),t&&d(r.map((function(e){return e.val}))),{handles:r}}))}},{key:"render",value:function(){var e=this,t=this.state,i=t.handles,o=t.valueToPerc,r=t.activeHandleID,a=this.props,s=a.className,l=a.rootStyle,c=void 0===l?{}:l,d=a.rootProps,u=void 0===d?{}:d,p=a.component,h=void 0===p?"div":p,m=a.disabled,_=void 0!==m&&m,g=a.flatten,v=void 0!==g&&g,f=i.map((function(e){var t=e.key,i=e.val;return{id:t,value:i,percent:o.getValue(i)}})),y=n.Children.map(this.props.children,(function(t){return!0===function(e){if(!(0,n.isValidElement)(e))return!1;var t=e.type,i=t?t.name:"";return i===X.name||i===Y.name||i===ee.name||i===ie.name}(t)?n.cloneElement(t,{scale:o,handles:f,activeHandleID:r,getEventData:e.getEventData,emitKeyboard:_?ae:e.onKeyDown,emitMouse:_?ae:e.onMouseDown,emitTouch:_?ae:e.onTouchStart}):t}));return v?n.createElement(n.Fragment,null,n.createElement(h,P(P({},u),{},{style:c,className:s,ref:this.slider})),y):n.createElement(n.Fragment,null,n.createElement(h,P(P({},u),{},{style:c,className:s,ref:this.slider}),y))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var i,n,o=e.step,r=void 0===o?.1:o,a=e.values,s=e.domain,l=void 0===s?ce:s,c=e.reversed,d=void 0!==c&&c,u=e.onUpdate,p=void 0===u?ae:u,h=e.onChange,m=void 0===h?ae:h,_=e.warnOnChanges,g=void 0!==_&&_,f=t.valueToPerc,y=t.valueToStep,x=t.pixelToStep,b={};if(f&&y&&x||(f=new J,y=new oe,x=new oe,b.valueToPerc=f,b.valueToStep=y,b.pixelToStep=x),t.domain===ce||null===t.step||null===t.domain||null===t.reversed||r!==t.step||l[0]!==t.domain[0]||l[1]!==t.domain[1]||d!==t.reversed){var w=O(l,2),P=w[0],S=w[1];y.setStep(r).setRange([P,S]).setDomain([P,S]),!0===d?(f.setDomain([P,S]).setRange([100,0]),x.setStep(r).setRange([S,P])):(f.setDomain([P,S]).setRange([0,100]),x.setStep(r).setRange([P,S])),v()(S>P,"".concat(z," Max must be greater than min (even if reversed). Max is ").concat(S,". Min is ").concat(P,"."));var T=V(a||t.values,d,y,g),I=T.handles;(T.changes||void 0===a||a===t.values)&&(p(I.map((function(e){return e.val}))),m(I.map((function(e){return e.val})))),b.step=r,b.values=a,b.domain=l===ce?L(l):l,b.handles=I,b.reversed=d}else if(i=a,n=t.values,!(i===n||i.length===n.length&&i.reduce(function(e){return function(t,i,n){return t&&e[n]===i}}(n),!0))){var k=V(a,d,y,g),E=k.handles;k.changes&&(p(E.map((function(e){return e.val}))),m(E.map((function(e){return e.val})))),b.values=a,b.handles=E}return Object.keys(b).length?b:null}}]),i}(n.PureComponent);const ue=({domain:[e,t],handle:{id:i,value:n,percent:o},getHandleProps:r,touched:a,activeHandleID:s})=>(0,u.jsx)("div",{"aria-valuemax":t,"aria-valuemin":e,"aria-valuenow":n,role:"slider",style:{left:`${o}%`,position:"absolute",marginLeft:"-11px",marginTop:"-5px",border:"1px solid white",zIndex:2,width:15,height:15,cursor:"pointer",borderRadius:"50%",boxShadow:"1px 1px 1px 1px rgba(0, 0, 0, 0.2)",backgroundColor:"black",transform:a&&s===i?"scale(2)":""},...r(i)}),pe=({source:e,target:t,getTrackProps:i,backgroundColor:n})=>(0,u.jsx)("div",{style:{position:"absolute",height:5,zIndex:1,backgroundColor:n||"black",borderRadius:7,cursor:"pointer",left:`${e.percent}%`,width:t.percent-e.percent+"%"},...i()});const he=function({cropSource:e,currencyType:t,minPrice:i,maxPrice:o,lowerBound:a,upperBound:s,handlePriceChange:p}){const g=(0,l.ZP)(),v=(0,m.Z)(),f=(0,c.Z)(),{locale:y}=(0,h.useSelector)((({session:e})=>e)),x={position:"absolute",width:"100%",height:5,borderRadius:7,cursor:"pointer",backgroundColor:(0,_.Yc)()?"#454545":"lightGrey"},b=[Math.ceil(a),Math.ceil(s)],w=[Math.ceil(i),Math.ceil(o)],[P,S]=(0,n.useState)([!1,!1]);(0,n.useEffect)((()=>{f({event_type:120,component:13468,view_parameter:3396,view_type:72,aux_data:{commerce_data:JSON.stringify({source:(0,r.Z)(e)})}})}),[]);const T={currency:t,style:"currency",minimum_fraction_digits:0,maximum_fraction_digits:2};return(0,u.jsxs)(n.Fragment,{children:[(0,u.jsx)(d.xu,{paddingY:4,children:(0,u.jsx)(d.xv,{children:g._('Price range', 'FeedFiltering.PriceFilter.PriceRange', 'Area that lists the price slider')})}),(0,u.jsxs)(d.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:3,children:[(0,u.jsx)(d.xv,{weight:"bold",children:(0,u.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{transform:P[0]?"translateZ(0) translateY(0) scale(1.25)":""}},children:v(y,w[0],T)})}),(0,u.jsx)(d.xv,{weight:"bold",children:(0,u.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{transform:P[1]?"translateZ(0) translateY(0) scale(1.25)":"",textAlign:"right"}},children:v(y,w[1],{...T,uplimit:s})})})]},"priceSliderValues"),(0,u.jsxs)(de,{domain:b,mode:2,onChange:()=>{S([!1,!1])},onUpdate:e=>{p(e);const[t,i]=w,[n,o]=e;t!==n?S([!0,!1]):i!==o&&S([!1,!0])},rootStyle:{margin:"5%",position:"relative",width:"90%"},step:1,values:w,children:[(0,u.jsx)(Y,{children:({getRailProps:e})=>(0,u.jsx)("div",{style:x,...e()})}),(0,u.jsx)(X,{children:({handles:e,getHandleProps:t,activeHandleID:i})=>(0,u.jsx)("div",{className:"slider-handles",children:e.map(((e,n)=>(0,u.jsx)(ue,{activeHandleID:i,domain:b,getHandleProps:t,handle:e,touched:P[n]},e.id)))})}),(0,u.jsx)(ie,{left:!1,right:!1,children:({tracks:e,getTrackProps:t})=>(0,u.jsx)("div",{className:"slider-tracks",children:e.map((({id:e,source:i,target:n})=>(0,u.jsx)(pe,{getTrackProps:t,source:i,target:n,backgroundColor:(0,_.Yc)()?"white":"black"},e)))})})]}),(0,u.jsx)(d.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginTop:12,children:(0,u.jsx)(d.xv,{children:g._('Drag to change price', 'FeedFiltering.PriceFilter.PriceDragText', 'Area that instructs how to use price slider')})})]})};function me({domains:e,prices:t}){let i=0;if(e){i+=(e.split(",")||[]).length}return t&&t.length>0&&(i+=1),i}function _e(e){return e?e.filter((e=>e.selected)).map((e=>e.domain)).join(","):null}function ge({minPrice:e,maxPrice:t,priceFilters:i}){const{min_value:n,suggested_max_value:o}=i||{};return e!==n||t!==o?[e,t]:[]}function ve({currentPrice:e,currencyType:t,lowerBound:i,upperBound:n,handlePriceChange:o,cropSource:r}){const a=e[0],s=e[1];return(0,u.jsx)(he,{cropSource:r,currencyType:t,handlePriceChange:o,lowerBound:i,maxPrice:s,minPrice:a,upperBound:n})}const fe=function({cropSource:e,initialProductFilters:t,pinId:i,productFilters:o,submitFilters:r,updateNumberFiltersApplied:a}){const s=(0,l.ZP)(),h=(0,c.Z)(),m=o.domainFilters,_=o.priceFilters,{min_value:g,suggested_max_value:v,currency_type:f}=_||{},y=null==t?void 0:t.domains;let x=[];y&&(x=y.split(",")),m&&m.forEach((e=>{e.selected=x.includes(e.domain)}));const[b,w]=(null==t?void 0:t.prices)||[],P=b||g,S=w||v,[T,I]=(0,n.useState)(m),[k,E]=(0,n.useState)([P,S]);return(0,n.useEffect)((()=>{I(m),E([P,S]),a(me({domains:_e(m)||"",prices:ge({minPrice:P,maxPrice:S,priceFilters:_})}))}),[m,P,S]),(0,u.jsxs)(n.Fragment,{children:[(0,u.jsxs)(d.xu,{children:[_&&Object.values(_).length>0&&(0,u.jsx)(ve,{cropSource:e,currencyType:f,currentPrice:k,handlePriceChange:e=>{E(e)},lowerBound:g,upperBound:v}),T&&(0,u.jsx)(p,{cropSource:e,domainFilters:T,handleDomain:e=>{if(!T)return;const t=!T[e].selected,i=[...T.slice(0,e),{...T[e],selected:t},...T.slice(e+1)];I(i)},pinId:i})]}),(0,u.jsx)(d.kC,{alignItems:"center",justifyContent:"center",children:(0,u.jsx)(d.zx,{color:"red",onClick:()=>{h({event_type:102,view_parameter:3396,view_type:72,element:11546});const e=_e(T)||"",[t,i]=k,n={domains:e,prices:ge({minPrice:t,maxPrice:i,priceFilters:_})};r(n),a(me(n))},size:"lg",text:s._('Confirm', 'FeedFilterContainer.FeedFiltering.ConfirmButton', 'Confirms filter selection'),type:"submit"})})]})},ye=({heading:e,onDismiss:t,onReset:i})=>{const n=(0,l.ZP)();return(0,u.jsx)(d.xu,{children:(0,u.jsxs)(d.kC,{alignItems:"center",flex:"grow",justifyContent:"start",children:[(0,u.jsx)(d.kC,{alignItems:"center",justifyContent:"start",children:(0,u.jsx)(d.hU,{accessibilityLabel:n._('Close', 'SlidingModal.FeedFilterContainer.IconButton', 'Close filters menu'),icon:"cancel",onClick:t,padding:5,size:"lg",iconColor:"gray"})}),(0,u.jsx)(d.kC,{alignItems:"center",flex:"grow",justifyContent:"center",children:(0,u.jsx)(d.xv,{align:"center",weight:"bold",children:e})}),(0,u.jsx)(d.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{marginRight:15}},display:"flex",children:(0,u.jsx)(d.zx,{fullWidth:!0,onClick:i,text:n._('Reset', 'SlidingModal.FeedFilterContainer.ResetButton', 'Reset filters')})})]})})};const xe=function({closeFiltersModal:e,cropSource:t,initialProductFilters:i,isOpen:a,pinId:s,productFilters:p,submitFilters:h,updateNumberFiltersApplied:m}){const _=(0,l.ZP)(),g=(0,c.Z)();return(0,n.useEffect)((()=>{g({event_type:13,view_parameter:3396,view_type:72,aux_data:{commerce_data:JSON.stringify({source:(0,r.Z)(t)})}})}),[]),(0,u.jsx)(d.xu,{marginEnd:2,children:(0,u.jsxs)(o.Z,{allowClickAndDrag:!0,isOpen:a,accessibilityModalLabel:_._('Filters', 'flashlightPage.slidingModal.accessibilityModalLabel', 'Modal label for product filters'),children:[(0,u.jsx)(ye,{heading:_._('Filters', 'flashlightPage.slidingModal.heading', 'heading for this mobile modal'),onDismiss:e,onReset:()=>{const t={domains:"",prices:[]};h(t),m(me(t)),e(),g({event_type:102,view_parameter:3396,view_type:72,element:11545})}}),(0,u.jsx)(d.xu,{paddingX:5,paddingY:5,children:(0,u.jsx)(fe,{cropSource:t,initialProductFilters:i,productFilters:p,pinId:s,submitFilters:({domains:t,prices:i})=>{h({domains:t,prices:i}),e()},updateNumberFiltersApplied:m})})]})})}},163321:(e,t,i)=>{i.d(t,{Z:()=>_,e:()=>p});var n=i(702664),o=i(240684),r=i(46584),a=i(131108),s=i(599997),l=i(883119),c=i(332611),d=i(785893);const u=(0,o.ZP)({resolved:{},chunkName:()=>"storyPins-duplo-HlsVideoContainer",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>i.e(19596).then(i.bind(i,881999)),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return i(t)},resolve(){return 881999}}),p=Object.freeze({white:"inverse",black:"default"}),h={defaultOverlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"}};function m({titleText:e,videoPin:t,videoPlaceholderImage:i}){return(0,d.jsx)(u,{fallback:(0,d.jsx)(l.Ee,{alt:e||"",color:"rgb(111, 91, 77)",fit:"cover",naturalHeight:3,naturalWidth:2,src:i||t.metadata.thumbnail}),aspectRatio:s.q4,controls:!1,poster:i||t.metadata.thumbnail,src:t.url})}function _({buttonAction:e,buttonCustomization:t,buttonText:i,experience:o,hideCompleteButton:u,imageAlt:p,imageUrl:_,openNewTab:g,storyType:v,titleText:f,titleTextColor:y,titleTextCustomization:x,videoPin:b,videoPlaceholderImage:w}){var P;const S=(0,n.useDispatch)(),{experience_id:T,placement_id:I}=o||{},k=(0,r.Z)({onVisibilityChanged:e=>{e&&o&&"viewed"!==o.status&&(o.status="viewed",S((0,c.UT)(I,T,!1,!0)))}}),E=(0,s.zn)(v),A=E?a.f8:a.hm,C=E?a.sH:a.HI,j=!E,{color:R,fontStyle:D,fontWeight:O,horizontalAlignment:L,fontSize:M}=(0,s.Mf)(x||{},"mweb"),{button_background_color:N,button_text_color:z}=t||{};return(0,d.jsx)(l.xu,{position:"relative",padding:1,marginBottom:2,ref:k,children:(0,d.jsxs)(l.rU,{accessibilityLabel:f,href:e,onClick:({dangerouslyDisableOnNavigation:e})=>{e(),o&&S((0,c.CK)(I,T,!1,!0))},target:g?"blank":null,children:[(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{paddingTop:"calc(150%)"}},position:"relative",children:(0,d.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:{WebkitMaskImage:"-webkit-radial-gradient(white, black)"}},top:!0,right:!0,bottom:!0,left:!0,overflow:"hidden",position:"absolute",rounding:4,children:[(0,d.jsx)(l.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:"feed_card_video"===v&&b?(0,d.jsx)(m,{titleText:f,videoPin:b,videoPlaceholderImage:w}):_&&(0,d.jsx)(l.Ee,{alt:p||f||"",color:"rgb(111, 91, 77)",naturalHeight:4,naturalWidth:3,src:_,fit:"cover"})}),j&&(0,d.jsx)(l.xu,{height:"100%",width:"100%",dangerouslySetInlineStyle:{__style:h.defaultOverlay},position:"absolute",top:!0,left:!0}),(0,d.jsx)(A,{children:(0,d.jsx)(l.xv,{align:L,color:y,italic:"italics"===D,weight:O,children:(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{color:null!==(P=R||y)&&void 0!==P?P:void 0,fontSize:M}},children:f})})})]})}),!u&&(0,d.jsx)(C,{children:(0,d.jsx)(l.xu,{display:"flex",rounding:"pill",color:E?"default":"secondary",dangerouslySetInlineStyle:{__style:{backgroundColor:N}},justifyContent:"center",alignItems:"center",paddingX:2,height:48,children:(0,d.jsx)(l.xv,{weight:"bold",size:"200",lineClamp:1,children:(0,d.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{color:z}},children:i})})})})]})})}},954134:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),o=i(702664),r=i(149230),a=i(902462),s=i(112690),l=i(861411),c=i(883119),d=i(785893);function u({auxData:e,slotIndex:t,storyId:i,trafficSource:u,viewParameter:p,viewType:h}){const m=(0,s.Z)(),_=(0,o.useSelector)((({stories:e,pins:t})=>e[i].objects.map((e=>t[e.id])))),g=(0,o.useSelector)((({stories:e})=>e[i])),{action:v,story_type:f,title:y}=g,x=_.map((({type:e,id:t})=>e+":"+t)).join("|"),b={story_type:f,story_id:i,content_ids:x,...e};return(0,d.jsx)(l.Hs,{loggingId:i,objectIdStr:i,viewParameter:p,viewType:h,slotIndex:t,component:200,auxData:b,children:(0,d.jsxs)(n.Fragment,{children:[y&&(0,d.jsx)(c.xu,{display:"flex",marginBottom:2,justifyContent:"center",alignItems:"center",children:(0,d.jsx)(c.xv,{weight:"bold",children:y.format})}),(0,d.jsx)(c.kC,{wrap:!0,children:_.map((e=>(0,d.jsx)(c.kC.Item,{flexBasis:"50%",maxWidth:"50%",children:(0,d.jsx)(a.default,{auxData:b,componentType:0,pinId:e.id,slotIndex:t,trafficSource:u,viewParameter:p,viewType:h})},e.id)))}),v&&v.url&&(0,d.jsx)(c.xu,{display:"flex",width:"100%",justifyContent:"center",marginTop:1,children:(0,d.jsx)(c.zx,{role:"link",accessibilityLabel:v.text,color:"gray",onClick:()=>{m({view_type:h,view_parameter:p,aux_data:b,event_type:102})},text:v.text,href:v.url,rel:(0,r.Z)(v.url)?"nofollow":void 0,target:(0,r.Z)(v.url)?"blank":void 0,size:"md"})})]})})}},394663:(e,t,i)=>{i.d(t,{Z:()=>Te});var n=i(667294),o=i(702664),r=i(598615),a=i(445345),s=i(819764),l=i(898781),c=i(957161),d=i(773285),u=i(883119),p=i(785893);function h(){const e=(0,l.ZP)(),{checkExperiment:t}=(0,d.F)(),{locale:i,userAgentPlatform:h}=(0,o.useSelector)((({session:e})=>e));(0,n.useEffect)((()=>{"enabled_no_double"===t("mweb_hf_story_app_upsell2").group&&(0,c.Nh)("appUpsell",Date.now())}),[]);const m="ios"===h;return(0,p.jsxs)(u.xu,{color:"infoBase",marginBottom:5,marginStart:2,marginEnd:2,marginTop:3,padding:3,rounding:2,children:[(0,p.jsx)(u.xv,{color:"inverse",weight:"bold",children:m?e._('Pinterest works best if you switch to our iPhone app', 'app upsell', 'app upsell'):e._('Pinterest works best if you switch to our Android app', 'app upsell', 'app upsell')}),(0,p.jsx)(u.xu,{marginTop:3,children:(0,p.jsx)(r.Z,{componentType:14159,within:"app-upsell-story",children:({handleOpenApp:e})=>(0,p.jsx)(u.iP,{onTap:()=>e({deepLinkUri:"/"}),children:m?(0,p.jsx)(s.Z,{locale:i}):(0,p.jsx)(a.Z,{locale:i})})})})]})}var m=i(57791),_=i(698330);const g={defaultOverlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"}};function v({buttonAction:e,buttonText:t,imageUrl:i,brands:n}){const o=(0,_.kW)(),r=n.slice(0,3).map((e=>{var t,i;return{name:null!==(t=o[e.id].username)&&void 0!==t?t:"",src:null!==(i=o[e.id].image_medium_url)&&void 0!==i?i:""}}));return(0,p.jsx)(u.xu,{position:"relative",padding:1,marginBottom:2,children:(0,p.jsxs)(m.MZ,{to:e,children:[(0,p.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{paddingTop:"calc(100%)"}},position:"relative",children:(0,p.jsxs)(u.xu,{dangerouslySetInlineStyle:{__style:{WebkitMaskImage:"-webkit-radial-gradient(white, black)"}},top:!0,right:!0,bottom:!0,left:!0,overflow:"hidden",position:"absolute",rounding:4,children:[(0,p.jsx)(u.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:i&&(0,p.jsx)(u.Ee,{alt:t,color:"rgb(111, 91, 77)",naturalHeight:1,naturalWidth:1,src:i,fit:"cover"})}),(0,p.jsx)(u.xu,{height:"100%",width:"100%",dangerouslySetInlineStyle:{__style:g.defaultOverlay},position:"absolute",top:!0,left:!0}),(0,p.jsx)(u.xu,{width:"100%",position:"absolute",bottom:!0,paddingY:6,display:"flex",justifyContent:"center",children:(0,p.jsx)(u.xu,{width:24*(2*r.length+1),height:64,children:(0,p.jsx)(u.HE,{accessibilityLabel:"",collaborators:r})})})]})}),(0,p.jsx)(u.xu,{"aria-hidden":"true",width:"100%",display:"flex",rounding:"pill",color:"secondary",justifyContent:"center",alignItems:"center",paddingX:2,height:48,marginTop:2,children:(0,p.jsx)(u.xv,{weight:"bold",children:(0,p.jsx)(u.xu,{children:t})})})]})})}var f=i(368156),y=i(995389);const x="49.5%";function b({buttonAction:e,buttonText:t,colors:i}){const n=(0,o.useSelector)((({pins:e})=>i.slice(0,4).map((t=>{var i;return{...null===(i=e[t.id].images)||void 0===i?void 0:i["736x"],title:e[t.id].description}}))));if(i.length<4)return null;const r=e=>{var t,i,n,o;return(0,p.jsx)(u.xu,{width:x,height:"100%",children:(0,p.jsx)(u.Ee,{alt:null!==(t=e.title)&&void 0!==t?t:"",color:"rgb(111, 91, 77)",naturalHeight:null!==(i=e.height)&&void 0!==i?i:1,naturalWidth:null!==(n=e.width)&&void 0!==n?n:1,src:null!==(o=e.url)&&void 0!==o?o:"",fit:"cover"})})};return(0,p.jsx)(u.xu,{position:"relative",padding:1,marginBottom:2,children:(0,p.jsxs)(m.MZ,{to:e,children:[(0,p.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{paddingTop:"calc(100%)"}},position:"relative",children:(0,p.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{WebkitMaskImage:"-webkit-radial-gradient(white, black)"}},top:!0,right:!0,bottom:!0,left:!0,overflow:"hidden",position:"absolute",rounding:4,children:(0,p.jsx)(u.xu,{height:"100%",width:"100%",rounding:4,direction:"column",display:"flex",justifyContent:"between",children:[n.slice(0,2),n.slice(2,4)].map((e=>(0,p.jsx)(u.kC,{width:"100%",height:x,justifyContent:"between",children:e.map(r)})))})})}),(0,p.jsx)(u.xu,{width:"100%",display:"flex",rounding:"pill",color:"secondary",justifyContent:"center",alignItems:"center",paddingX:2,height:48,marginTop:2,children:(0,p.jsx)(u.xv,{weight:"bold",children:(0,p.jsx)(u.xu,{children:t})})})]})})}var w=i(116303);const P=(0,o.connect)((({pins:e},t)=>({pin:e[t.id]})),(()=>({})))((({isFirstChild:e,pin:t})=>{var i;if(!t)return null;const n=null===(i=t.images)||void 0===i?void 0:i["170x"];if(!n)return null;const o=t.pinner,{full_name:r,image_medium_url:a}=o||{},{dominant_color:s}=t,{height:l,width:c,url:d}=n;return(0,p.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{paddingRight:8,paddingLeft:e?8:void 0}},children:(0,p.jsxs)(u.xu,{position:"relative",children:[(0,p.jsx)(u.xu,{height:144,overflow:"hidden",rounding:4,width:108,children:(0,p.jsx)(u.Ee,{alt:t.title||"",color:null!=s?s:"",fit:"cover",naturalHeight:null!=l?l:1,naturalWidth:null!=c?c:1,src:null!=d?d:""})}),a&&(0,p.jsx)(u.xu,{alignItems:"center",bottom:!0,display:"flex",height:0,justifyContent:"center",left:!0,position:"absolute",right:!0,children:(0,p.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{border:"1px solid white"}},height:60,rounding:"circle",width:60,children:(0,p.jsx)(w.Z,{name:null!=r?r:"",src:a})})})]})})}));function S({pinIds:e}){const t=e.concat(e).concat(e).concat(e);return(0,p.jsx)(u.xu,{height:174,overflow:"hidden",width:"100%",children:(0,p.jsx)(u.xu,{overflow:"scroll",children:(0,p.jsx)(u.kC,{alignItems:"stretch",justifyContent:"start",direction:"row",height:184,children:t.map(((e,t)=>(0,p.jsx)(P,{id:e,isFirstChild:0===t},e)))})})})}var T=i(63552),I=i(112690),k=i(861411);const E="creator_spotlight_";function A({id:e}){const t=(0,I.Z)(),i=(0,o.useSelector)((({stories:t})=>t[e]));if(!i||"social_seasonal_pin"===i.story_type)return null;const{button_text:n,objects:r,story_type:a,subtitle:s,title:l,background_colour:c,display_options:d}=i,{title_text_color:h,subtitle_text_color:m}=d;if(!a.startsWith(E)||!r||r.length<3)return null;const _=`/creator-spotlight/${a.slice(E.length)}`;return(0,p.jsx)(u.xu,{marginBottom:3,children:(0,p.jsx)(k.Hs,{loggingId:e,objectIdStr:e,viewParameter:43,viewType:2,slotIndex:0,component:13484,auxData:{story_type:a},children:(0,p.jsx)(u.iP,{onTap:()=>{t({view_type:2,view_parameter:43,component:13484,object_id_str:e,aux_data:{story_type:a},event_type:102})},tapStyle:"none",role:"link",href:_,rounding:2,children:(0,p.jsx)(u.xu,{rounding:2,overflow:"hidden",display:"flex",dangerouslySetInlineStyle:{__style:{backgroundColor:c}},children:(0,p.jsx)(u.xu,{width:"100%",height:"100%",children:(0,p.jsxs)(u.xu,{alignItems:"center",direction:"column",display:"flex",height:"100%",justifyContent:"between",paddingY:4,children:[(!!s||!!l)&&(0,p.jsxs)(u.kC,{alignItems:"center",direction:"column",justifyContent:"center",children:[l&&l.format&&(0,p.jsx)(u.X6,{size:"400",children:(0,p.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{color:h}},children:l.format})}),s&&s.format&&(0,p.jsx)(u.xv,{align:"center",children:(0,p.jsx)(u.xu,{marginTop:1,dangerouslySetInlineStyle:{__style:{color:m}},children:s.format})})]}),(0,p.jsx)(u.xu,{paddingY:2,marginTop:2,width:"100%",children:(0,p.jsx)(S,{pinIds:r.map((e=>e.id))})}),n&&n.format&&(0,p.jsx)(u.xu,{display:"inlineBlock",children:(0,p.jsx)(T.Z,{pressState:"compress",children:(0,p.jsx)(u.xu,{color:"primary",rounding:"pill",position:"relative",children:(0,p.jsx)(u.xu,{paddingX:5,paddingY:5,children:(0,p.jsx)(u.xv,{color:"inverse",weight:"bold",children:n.format})})})})})]})})})})})})}var C=i(319915),j=i(121093),R=i(19121),D=i(276775);function O({pin:e,width:t,height:i,showDivider:n}){var o,r,a,s,l,c,d;const h=null===(o=e.images)||void 0===o?void 0:o["236x"];return(0,p.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:n?{borderRight:"2px solid #fff"}:{}},children:(0,p.jsx)(u.GH,{contentAspectRatio:(null!==(r=null==h?void 0:h.width)&&void 0!==r?r:1)/(null!==(a=null==h?void 0:h.height)&&void 0!==a?a:1),height:i,width:t,children:(0,p.jsx)(u.Ee,{alt:null!==(s=e.description)&&void 0!==s?s:"",naturalWidth:null!==(l=null==h?void 0:h.width)&&void 0!==l?l:1,naturalHeight:null!==(c=null==h?void 0:h.height)&&void 0!==c?c:1,src:null!==(d=null==h?void 0:h.url)&&void 0!==d?d:""})})})}function L({storyId:e,slotIndex:t}){const i=(0,D.useHistory)(),r=(0,D.useLocation)(),{isAuth:a}=(0,R.Z)(),{checkExperiment:s}=(0,d.F)(),[l,c]=(0,n.useState)(0),h=(0,n.useRef)(),m=(0,I.Z)();(0,n.useLayoutEffect)((()=>{const e=h.current;e&&c(e.offsetWidth)}),[]);const _=(0,o.useSelector)((({stories:t})=>t[e])),g=(0,o.useSelector)((({pins:e})=>_.objects.map((t=>e[t.id])))).slice(0,2),{story_type:v,action:f}=_,y=`${r.pathname}products/${r.search}`,x=()=>{m({component:200,event_type:102,view_parameter:3050,view_type:72}),i.push(y)};return s(a?"mweb_deprecated_impression_tracker_story_impression_auth":"mweb_deprecated_impression_tracker_story_impression_unauth").anyEnabled?(0,p.jsx)(k.qS,{auxData:{story_type:v,content_ids:g.map((e=>e.id)),story_id:e},component:200,loggingId:e,objectIdStr:e,slotIndex:t,viewParameter:3050,viewType:72,children:({impressionTrackerRef:e})=>l?(0,p.jsx)(u.xu,{padding:2,ref:e,children:(0,p.jsx)(u.zd,{rounding:2,children:(0,p.jsxs)(u.iP,{onTap:x,children:[(0,p.jsx)(u.xu,{display:"flex",justifyContent:"center",alignItems:"center",color:"secondary",children:g.map(((e,t)=>(0,p.jsx)(O,{pin:e,width:(l-16)/2-1,height:l-16,showDivider:!t},e.id)))}),(0,p.jsx)(u.xu,{position:"absolute",top:!0,left:!0,width:"100%",height:"100%",children:(0,p.jsx)(u.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:(0,p.jsx)(u.xu,{rounding:"pill",paddingX:4,paddingY:2,display:"flex",justifyContent:"center",alignItems:"center",color:"secondary",children:(0,p.jsx)(u.xv,{weight:"bold",children:f.text})})})})]})})}):(0,p.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:"100%"}},position:"relative"})}):(0,p.jsx)(k.Hs,{auxData:{story_type:v,content_ids:g.map((e=>e.id)),story_id:e},component:200,loggingId:e,objectIdStr:e,slotIndex:t,viewParameter:3050,viewType:72,children:l?(0,p.jsx)(u.xu,{padding:2,children:(0,p.jsx)(u.zd,{rounding:2,children:(0,p.jsxs)(u.iP,{onTap:x,children:[(0,p.jsx)(u.xu,{display:"flex",justifyContent:"center",alignItems:"center",color:"secondary",children:g.map(((e,t)=>(0,p.jsx)(O,{pin:e,width:(l-16)/2-1,height:l-16,showDivider:!t},e.id)))}),(0,p.jsx)(u.xu,{position:"absolute",top:!0,left:!0,width:"100%",height:"100%",children:(0,p.jsx)(u.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:(0,p.jsx)(u.xu,{rounding:"pill",paddingX:4,paddingY:2,display:"flex",justifyContent:"center",alignItems:"center",color:"secondary",children:(0,p.jsx)(u.xv,{weight:"bold",children:f.text})})})})]})})}):(0,p.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:"100%"}},position:"relative",ref:h})})}var M=i(131230),N=i(954134),z=i(687866);const F=["shop_tab_upsell","user_style_story_v2"];function Z({auxData:e,slotIndex:t,storyId:i,storyType:n,trafficSource:r,viewParameter:a,viewType:s}){const l=(0,o.useSelector)((({stories:e})=>{var t;return null===(t=e[i].objects[0])||void 0===t?void 0:t.schema})),c=(0,o.useSelector)((({stories:e})=>{var t;return null===(t=e[i])||void 0===t?void 0:t.title}));if(F.includes(n))return(0,p.jsx)(M.Z,{auxData:e,slotIndex:t,storyId:i,storyType:n,viewParameter:a,viewType:s});switch(l){case"pin":return(0,p.jsx)(N.Z,{auxData:e,slotIndex:t,storyId:i,trafficSource:r,viewParameter:a,viewType:s});case"article":return(0,p.jsx)(f.Z,{auxData:e,pattern:[z.UG.extra_small],slotIndex:t,storyId:i,viewParameter:a,viewType:s});default:return c&&(0,p.jsx)(u.xu,{display:"flex",marginBottom:2,justifyContent:"center",alignItems:"center",children:(0,p.jsx)(u.xv,{weight:"bold",children:c.format})})}}var B=i(700398),U=i(491563);function H({slotIndex:e,storyId:t,exactMatch:i=!1}){const{isAuth:r}=(0,R.Z)(),{checkExperiment:a}=(0,d.F)(),{action:s,aux_fields:l,objects:c,story_type:h,title:m}=(0,o.useSelector)((({stories:e})=>e[t])),_=c[0].id,g=(0,o.useSelector)((({pins:e})=>c.slice(1,3).map((({id:t})=>e[t]))));return!i&&g.length<2?null:a(r?"mweb_deprecated_impression_tracker_story_impression_auth":"mweb_deprecated_impression_tracker_story_impression_unauth").anyEnabled?(0,p.jsx)(k.qS,{auxData:{content_ids:g.map((({id:e})=>e)),story_id:t,story_type:h,...l},component:200,loggingId:t,objectIdStr:t,slotIndex:e,viewParameter:43,viewType:2,children:({impressionTrackerRef:e})=>(0,p.jsxs)(u.xu,{ref:e,children:[m&&(0,p.jsx)(u.xu,{paddingY:1,marginTop:2,children:(0,p.jsx)(u.xv,{align:"center",children:m.format})}),(0,p.jsx)(U.Z,{action:s,auxData:l,isPinnerAuthorityHero:i,userId:_,userPins:i?void 0:g,userSearchRepStyle:i,viewParameter:43,viewType:2})]})}):(0,p.jsx)(k.Hs,{auxData:{content_ids:g.map((({id:e})=>e)),story_id:t,story_type:h,...l},component:200,loggingId:t,objectIdStr:t,slotIndex:e,viewParameter:43,viewType:2,children:(0,p.jsxs)(n.Fragment,{children:[m&&(0,p.jsx)(u.xu,{paddingY:1,marginTop:2,children:(0,p.jsx)(u.xv,{align:"center",children:m.format})}),(0,p.jsx)(U.Z,{action:s,auxData:l,isPinnerAuthorityHero:i,userId:_,userPins:i?void 0:g,userSearchRepStyle:i,viewParameter:43,viewType:2})]})})}var V=i(947599),W=i(962551),$=i(826067);const G=["#CFFFCA","#D7EDFF","#DAD4FF","#DAFFF6","#FFE2EB","#FFE4C1","#FFFD92"],K=e=>G[e.charCodeAt(0)%G.length];function q({guides:e,storyId:t,slotIndex:i,title:o}){var r;const{isAuth:a}=(0,R.Z)(),{checkExperiment:s}=(0,d.F)(),l=null!==(r=(0,$.mB)((0,D.useLocation)().search).q)&&void 0!==r?r:"";return s(a?"mweb_deprecated_impression_tracker_story_impression_auth":"mweb_deprecated_impression_tracker_story_impression_unauth").anyEnabled?(0,p.jsx)(k.qS,{auxData:{story_type:"search_guides"},component:200,loggingId:t,objectIdStr:t,slotIndex:i,viewParameter:43,viewType:2,children:({impressionTrackerRef:t})=>(0,p.jsxs)(u.xu,{ref:t,children:[o&&o.format&&(0,p.jsx)(u.xu,{paddingY:1,marginTop:2,children:(0,p.jsx)(u.xv,{align:"center",children:o.format})}),(0,p.jsx)(W.Z,{guides:e.map((e=>({display:e.display,dominant_color:K(e.display),position:-1,term:e.term}))),isSlot0Style:!0,query:l})]})}):(0,p.jsx)(k.Hs,{auxData:{story_type:"search_guides"},component:200,loggingId:t,objectIdStr:t,slotIndex:i,viewParameter:43,viewType:2,children:(0,p.jsxs)(n.Fragment,{children:[o&&o.format&&(0,p.jsx)(u.xu,{paddingY:1,marginTop:2,children:(0,p.jsx)(u.xv,{align:"center",children:o.format})}),(0,p.jsx)(W.Z,{guides:e.map((e=>({display:e.display,dominant_color:K(e.display),position:-1,term:e.term}))),isSlot0Style:!0,query:l})]})})}class Y extends n.PureComponent{render(){const{seasonalBlob:e,size:t}=this.props,{story_title:i,pin_image:n,pin_image_gif:o,user_name:r,board_name:a,header_background_color:s,textIconColor:l}=e,c=s||"orchid",d=this.props.i18n._('Take a look', 'Button text asking users to take a look at Seasonal pages', 'Button text asking users to take a look at Seasonal pages'),h=r&&a?`/${r}/${a}`:"/pinterestindonesia/happy-halloween/",_=i||"unknown",g=o||n||"",v=l||"white";return(0,p.jsx)(u.zd,{rounding:2,children:(0,p.jsx)(u.xu,{padding:3,children:(0,p.jsx)(m.MZ,{to:h,isAppUpsellDisabled:!0,onTouch:()=>{},children:(0,p.jsx)(u.xu,{children:(0,p.jsx)(u.xu,{display:"flex",margin:-1,height:t,children:(0,p.jsx)(u.xu,{width:"100%",children:(0,p.jsxs)(u.zd,{rounding:2,height:"100%",children:[(0,p.jsx)(u.xu,{height:t,children:(0,p.jsx)(u.Ee,{alt:_,color:c,fit:"cover",naturalHeight:1,naturalWidth:1,src:g})}),(0,p.jsx)(u.xu,{height:t,position:"absolute",top:!0,left:!0}),(0,p.jsx)(u.xu,{position:"absolute",top:!0,left:!0,right:!0,overflow:"hidden",paddingX:2,paddingY:4,dangerouslySetInlineStyle:{__style:{lineHeight:"19px"}},children:(0,p.jsx)(u.xv,{color:v,weight:"bold",children:_})}),(0,p.jsx)(u.xu,{position:"absolute",bottom:!0,left:!0,right:!0,padding:2,marginStart:"auto",marginEnd:"auto",children:(0,p.jsx)(u.zx,{fullWidth:!0,size:"sm",text:d})})]})})})})})})})}}const X=(0,o.connect)((({stories:e},t)=>({seasonalBlob:e[t.storyId].custom_properties,storyType:e[t.storyId].story_type,referringSource:e[t.storyId].referring_source})),(()=>({})))((function(e){const t=(0,l.ZP)();return(0,p.jsx)(Y,{...e,i18n:t})}));var J=i(502962);function Q({storyId:e,viewParameter:t,viewType:i}){const r=(0,I.Z)(),a=(0,o.useSelector)((({stories:t})=>t[e])),s=(0,o.useSelector)((({session:e})=>e.isTablet)),l=a.objects;return(0,n.useEffect)((()=>{r({event_type:9024,view_type:i,view_parameter:t})}),[]),a?(0,p.jsxs)(n.Fragment,{children:[(0,p.jsx)(u.iz,{}),(0,p.jsxs)(u.xu,{paddingY:1,children:[(0,p.jsx)(u.xu,{paddingY:2,marginTop:3,children:(0,p.jsx)(u.X6,{align:"center",size:"400",children:a.title.format})}),1===l.length?(0,p.jsx)(u.xu,{width:s?400:"auto",paddingY:2,margin:"auto",children:(0,p.jsx)(J.Z,{id:l[0].id,gridIndex:0,viewParameter:t,viewType:i})}):(0,p.jsx)(u.xu,{overflow:"auto",children:(0,p.jsx)(u.kC,{alignItems:"stretch",justifyContent:"start",width:"fit-content",children:l.map(((e,n)=>(0,p.jsx)(u.xu,{width:s?400:"80vw",marginStart:0===n?0:2,paddingY:2,children:(0,p.jsx)(J.Z,{id:e.id,gridIndex:n,viewParameter:t,viewType:i})},e.id)))})})]})]}):null}var ee=i(938917);const te=(0,o.connect)((({pins:e},t)=>({pin:e[t.id]})),(()=>({})))((({pin:e})=>{var t;if(!e)return null;const i=e.images&&(e.images.orig||e.images["736x"]||e.images["290x"]||e.images["236x"]);return(0,p.jsx)(u.zd,{wash:!0,height:de,width:de,children:(0,p.jsx)(u.xu,{height:de,position:"relative",width:de,children:(0,p.jsx)(u.Ee,{alt:e.description||"",src:null!==(t=null==i?void 0:i.url)&&void 0!==t?t:"",fit:"cover",naturalHeight:1,naturalWidth:1,color:e.dominant_color||"#767676"})})})}));var ie=i(886076),ne=i(830157),oe=i(62409),re=i(349700),ae=i(643010);const se=(0,o.connect)(((e,t)=>({pin:e.pins[t.pinId]})),(()=>({})))((({pin:e,shouldRoundPrice:t,showSalePrice:i})=>{if(!e)return null;const n=(0,oe.kb)(e);if(!n||!n.price)return null;const o=n.price||n.max_price,r=n.standard_price,a=/^(\$\d+)(\.?\d\d)*$/g,s=r&&a.exec(r),l=a.exec(o),c=(0,ae.Yc)()?"rgba(0, 0, 0, 0.7)":"rgba(255, 255, 255, 0.8)",d=(0,ae.Yc)()?"light":"dark";return(0,p.jsxs)(u.xu,{rounding:"pill",paddingX:2,paddingY:0,dangerouslySetInlineStyle:{__style:{backgroundColor:c,paddingTop:"3px",paddingBottom:"3px"}},"data-test-id":"MwebPricePill",display:"inlineBlock",children:[i&&s&&(0,p.jsxs)(u.xv,{align:"center",size:"100",weight:"bold",color:"subtle",inline:!0,children:[(0,p.jsx)("s",{children:(0,re.nk)("{{ priceRounded }}",{priceRounded:s[1]})})," "]}),(0,p.jsx)(u.xv,{align:"center",size:"100",weight:"bold",color:d,inline:!0,children:(i&&r||t)&&l&&l[1]?(0,re.nk)("{{ priceRounded }}",{priceRounded:l[1]}):o})]})}));var le=i(512176),ce=i(407043);const de=114;function ue({handleClick:e,isVerifiedMerchant:t,marginTop:i=12,pins:n,showVerifiedBadge:o,showVerifiedIdentityBadge:r,storyAction:a,storyType:s,title:l,viewParameter:c,trackingParams:d}){const{logContextEvent:h}=(0,ce.v)(),m=(0,D.useHistory)(),{text:_}=a||{};return(0,p.jsxs)(u.xu,{marginTop:i,"data-test-id":"lego-closeup-related-module-contents",width:"100%",children:[l&&(0,p.jsxs)(u.xu,{alignItems:"center",display:"flex",justifyContent:"center",marginTop:4,children:[(0,p.jsx)(u.xv,{weight:"bold",children:l}),o&&(0,p.jsx)(u.xu,{marginStart:1,children:(0,p.jsx)(le.Z,{size:"sm",isVerifiedMerchant:t,showVerifiedIdentity:r})})]}),(0,p.jsx)(u.xu,{display:"flex",marginTop:4,justifyContent:"center",children:n.map(((e,t)=>(0,p.jsx)(k.GR,{viewType:3,loggingId:e.id,viewParameter:c,component:xe[s],auxData:{commerce_data:(0,ie.Z)({isEligibleForPdp:e.is_eligible_for_pdp,isOosProduct:e.is_oos_product,isStaleProduct:e.is_stale_product,pinShoppingFlags:e.shopping_flags})},slotIndex:t,children:(0,p.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{willChange:"transform"}},display:"flex",marginEnd:2!==t?2:0,overflow:"hidden",position:"relative",rounding:4,width:de,children:(0,p.jsxs)(u.iP,{onTap:()=>(e=>{const t=(0,ne.Z)(d,e.tracking_params);h({component:xe[s],element:ye[s],event_type:101,view_type:3,view_parameter:c,object_id_str:e.id,clientTrackingParams:t,aux_data:{closeup_navigation_type:"click",commerce_data:(0,ie.Z)({isEligibleForPdp:e.is_eligible_for_pdp,isOosProduct:e.is_oos_product,isStaleProduct:e.is_stale_product,pinShoppingFlags:e.shopping_flags}),cosmic_ray_count:"5",image_signature:e.image_signature}}),h({component:13680,event_type:101,view_type:3,view_parameter:c,aux_data:{commerce_data:(0,ie.Z)({isEligibleForPdp:e.is_eligible_for_pdp,isOosProduct:e.is_oos_product,isStaleProduct:e.is_stale_product,pinShoppingFlags:e.shopping_flags})}}),m.push(`/pin/${e.id}/`,{trackingParams:d})})(e),children:[(0,p.jsx)(te,{id:e.id}),(0,p.jsx)(u.xu,{position:"absolute",marginTop:2,marginStart:2,top:!0,children:(0,p.jsx)(se,{pinId:e.id,shouldRoundPrice:!0})})]})})},e.id)))}),_&&(0,p.jsx)(u.xu,{display:"flex",marginTop:4,marginBottom:4,justifyContent:"center",children:(0,p.jsx)(u.zx,{onClick:e,size:"lg",text:_})})]})}var pe=i(722767);function he({componentType:e,handleClick:t,isVerifiedMerchant:i,marginTop:o,objects:r,showVerifiedBadge:a,showVerifiedIdentityBadge:s,storyAction:l,storyType:c,title:d,viewParameter:u,trackingParams:h}){const[m,_]=(0,n.useState)(!1),g=(0,I.Z)();if(!r||!Array.isArray(r))return null;const v=r.filter((e=>"pin"===e.schema));if(v.length<3)return null;const f=Array.from(new Array(3)).map(((e,t)=>v[t]));return(0,p.jsx)(pe.Z,{options:{threshold:0},onVisibilityChange:t=>{const{intersectionRatio:i}=t[0];i>0&&!m&&(g({event_type:3400,view_type:3,view_parameter:u,component:e}),_(!0))},children:(0,p.jsx)(ue,{handleClick:t,isVerifiedMerchant:i,marginTop:o,pins:f,showVerifiedBadge:a,showVerifiedIdentityBadge:s,storyAction:l,storyType:c,title:d,viewParameter:u,trackingParams:h})})}var me=i(982828);const _e=()=>{};function ge({marginTop:e=12,onRelatedPinsTitleEnter:t,onRelatedPinsTitleExit:i,onRelatedPinsInView:o,title:r}){return r?(0,p.jsx)(n.Fragment,{children:(0,p.jsx)(u.xu,{marginTop:e,marginBottom:2,children:(0,p.jsx)(me.Z,{onEnter:t||_e,onExit:i||_e,onView:o||_e,children:(0,p.jsx)(u.xv,{size:"300",align:"center",weight:"bold",children:r})})})}):null}var ve=i(350118);const fe=["related_domain_collage","related_modules_header","related_products_collage","related_products_feed_header"],ye={related_domain_collage:11830,related_domain_collage_similar:11829},xe={related_domain_collage:13327,related_domain_collage_similar:13882,related_products_collage:13176,related_products_feed_header:13176};const be=function(e){var t,i;const{marginTop:r,onRelatedPinsTitleEnter:a,onRelatedPinsTitleExit:s,onRelatedPinsInView:l,pinId:c,searchQuery:h,slotIndex:m,storyId:_,trafficSource:g,viewType:v,viewParameter:f}=e,y=(0,ve.S6)()(c),{logContextEvent:x}=(0,ce.v)(),{isAuth:b}=(0,R.Z)(),{checkExperiment:w}=(0,d.F)(),P=(0,D.useHistory)(),S=null==y?void 0:y.is_eligible_for_pdp,T=(0,n.useMemo)((()=>S?8:0===r||r?r:12),[r,S]),I=(0,o.useSelector)((({stories:e})=>e[_]));if(!I)return null;const{action:E,content_ids:A,objects:C,story_type:j,title:{format:O},tracking_params:L}=I,M=xe[j];if("related_modules_header"===j||"related_products_feed_header"===j)return w(b?"mweb_deprecated_impression_tracker_story_impression_auth":"mweb_deprecated_impression_tracker_story_impression_unauth").anyEnabled?(0,p.jsx)(k.qS,{auxData:{story_id:_,story_type:j},loggingId:_,objectIdStr:_,slotIndex:m,viewParameter:f,viewType:v,component:M,children:({impressionTrackerRef:e})=>(0,p.jsx)(u.xu,{ref:e,children:(0,p.jsx)(ge,{marginTop:T,onRelatedPinsTitleEnter:a,onRelatedPinsTitleExit:s,onRelatedPinsInView:l,title:O})})}):(0,p.jsx)(k.Hs,{auxData:{story_id:_,story_type:j},loggingId:_,objectIdStr:_,slotIndex:m,viewParameter:f,viewType:v,component:M,children:(0,p.jsx)(ge,{marginTop:T,onRelatedPinsTitleEnter:a,onRelatedPinsTitleExit:s,onRelatedPinsInView:l,title:O})});const{url:N}=E||{};if(!y||!c||!N)return null;const z=function(e,t){const i=e?`q=${e}`:null,n=t&&"unknown"!==t?`rs=${t}`:null;let o="";return i&&n?o=`?${i}&${n}`:!i&&n&&(o=`?${n}`),o}(h,g);let F=`${N}${z}`;"related_products_collage"===j&&(F=z?`/pin/${c}/visual-search/${z}source=shopping&tab=1`:`/pin/${c}/visual-search/?source=shopping&tab=1`);const Z=(A||[]).map((e=>`pin:${e}`)).join("|"),B=()=>{const e="related_domain_collage"===j?"related_domain_collage_similar":j;x({aux_data:{content_ids:Z,story_id:_,story_type:j},component:xe[e],element:ye[e],event_type:101,object_id_str:c,view_type:3,view_parameter:f}),x({aux_data:{commerce_data:(0,ie.Z)({isEligibleForPdp:y.is_eligible_for_pdp,isOosProduct:y.is_oos_product,isStaleProduct:y.is_stale_product,pinShoppingFlags:y.shopping_flags})},component:13680,event_type:101,object_id_str:c,view_type:3,view_parameter:f}),P.push(F)};let U,H;if("related_domain_collage"===j){var V;const e=(null===(V=y.link_domain)||void 0===V?void 0:V.official_user)||{};U=e.is_verified_merchant,H=e.verified_identity}return w(b?"mweb_deprecated_impression_tracker_story_impression_auth":"mweb_deprecated_impression_tracker_story_impression_unauth").anyEnabled?(0,p.jsx)(k.qS,{auxData:{content_ids:Z,story_id:_,story_type:j},component:M,loggingId:_,objectIdStr:_,slotIndex:m,viewParameter:f,viewType:v,children:({impressionTrackerRef:e})=>{var t,i;return(0,p.jsx)(u.xu,{ref:e,children:(0,p.jsx)(he,{componentType:M,handleClick:B,isVerifiedMerchant:U,objects:C,showVerifiedBadge:U||(null===(t=H)||void 0===t?void 0:t.verified),showVerifiedIdentityBadge:!U&&(null===(i=H)||void 0===i?void 0:i.verified),storyAction:E,title:O,viewParameter:f,trackingParams:L,storyType:j,marginTop:T})})}}):(0,p.jsx)(k.Hs,{auxData:{content_ids:Z,story_id:_,story_type:j},component:M,loggingId:_,objectIdStr:_,slotIndex:m,viewParameter:f,viewType:v,children:(0,p.jsx)(he,{componentType:M,handleClick:B,isVerifiedMerchant:U,objects:C,showVerifiedBadge:U||(null===(t=H)||void 0===t?void 0:t.verified),showVerifiedIdentityBadge:!U&&(null===(i=H)||void 0===i?void 0:i.verified),storyAction:E,title:O,viewParameter:f,trackingParams:L,storyType:j,marginTop:T})})};var we=i(163321);const Pe=["shop_tab_upsell","story_pins_search_upsell","structured_search_bubble","user_style_story_v2"],Se=(0,n.lazy)((()=>i.e(93810).then(i.bind(i,896731))));function Te({auxData:e,fullWidth:t,isMwebStructuredFeedExpEnabled:i,marginTop:n,onRelatedPinsTitleEnter:r,onRelatedPinsTitleExit:a,onRelatedPinsInView:s,pinId:l,slotIndex:c,storyData:d,storyId:m,trafficSource:_,viewParameter:g,viewType:x}){const w=(0,o.useSelector)((({stories:e})=>e[m])),P=d||w,S=(0,ee.Z)();if(!P||!P.story_type)return null;const{action:T,container_type:I,custom_properties:k,display_options:E,experience:R,story_type:D,title:O,objects:M}=P;if(t)return i&&(0,B.Z)(P.container_type)?(0,p.jsx)(u.xu,{marginBottom:5,children:(0,p.jsx)(C.Z,{name:"SafeSuspense_MobileApp_StructuredFeedStoryModule",children:(0,p.jsx)(V.Z,{children:(0,p.jsx)(Se,{surface:"ShoppingDynamicHeightGrid",view:3,componentFallback:13176,viewParameter:g,initialSlotIndex:c,story:P})})})}):Pe.includes(D)&&0===E.num_columns_requested?(0,p.jsx)(u.xu,{marginBottom:5,children:(0,p.jsx)(Z,{auxData:e,slotIndex:c,storyId:m,storyType:D,trafficSource:_,viewParameter:g,viewType:x})}):D.startsWith("creator_spotlight_")?(0,p.jsx)(u.xu,{marginBottom:5,children:(0,p.jsx)(A,{id:m})}):fe.includes(D)&&l?(0,p.jsx)(be,{onRelatedPinsTitleEnter:r,onRelatedPinsTitleExit:a,onRelatedPinsInView:s,pinId:l,storyId:m,slotIndex:c,viewParameter:g,viewType:x,marginTop:n}):D.startsWith("related_articles")?(0,p.jsx)(Q,{storyId:m,viewType:x,viewParameter:g}):D.startsWith("SKIN_TONE_FILTER_QUERIES")?(0,p.jsx)(y.Z,{title:O}):D.startsWith("search_pinner_authority_hero")?(0,p.jsx)(H,{storyId:m,slotIndex:0,exactMatch:!0}):null;if(Pe.includes(D)&&0===(null==E?void 0:E.num_columns_requested))return null;switch(I){case 56:return(0,p.jsx)(u.xu,{padding:2,children:(0,p.jsx)(f.Z,{slotIndex:c,storyId:m,viewType:x,viewParameter:g})})}switch(D){case"app_upsell":return S?(0,p.jsx)(j.Z,{experience:R,eligibleIds:[R.experience_id],children:(0,p.jsx)(h,{})}):null;case"feed_card_default":case"feed_card_video":return(0,p.jsx)(we.Z,{buttonAction:T.url,buttonCustomization:k.button_customization,buttonText:T.text,experience:R,hideCompleteButton:k.hide_complete_button,imageAlt:k.image_alt,imageUrl:k.image,openNewTab:k.open_new_tab,storyType:D,titleText:O.format,titleTextColor:we.e[E.title_text_color],titleTextCustomization:k.title_text_customization,videoPin:k.video_pin,videoPlaceholderImage:k.video_placeholder_image});case"user_brand_story":case"user_color_story":case"general_shopping_upsell":return(0,p.jsx)(we.Z,{buttonAction:T.url,buttonText:T.text,imageAlt:k.image_alt,imageUrl:k.image,storyType:D,titleText:O.format,titleTextColor:we.e[E.title_text_color]});case"user_brand_story_v1":return(0,p.jsx)(v,{buttonAction:T.url,buttonText:T.text,imageUrl:k.image,brands:M});case"user_color_story_v1":return(0,p.jsx)(b,{buttonAction:T.url,buttonText:T.text,colors:M});case"BUBBLE_ONE_COL":return(0,p.jsx)(u.xu,{padding:2,children:(0,p.jsx)(f.Z,{slotIndex:c,storyId:m,viewType:x,viewParameter:g})});case"social_seasonal_pin":return(0,p.jsx)(X,{slotIndex:c,storyId:m,viewType:x,viewParameter:g,size:290});case"pinner_authority":case"pinner_authority_unified":return(0,p.jsx)(H,{storyId:m,slotIndex:c});case"stela_in_flashlight_onecol":return(0,p.jsx)(L,{storyId:m,slotIndex:c});case"search_guides":return(0,p.jsx)(q,{guides:P.objects,slotIndex:c,storyId:m,title:O});default:return null}}},687866:(e,t,i)=>{i.d(t,{UG:()=>u,ZP:()=>h,aG:()=>p});var n=i(667294),o=i(116303),r=i(898781),a=i(52022),s=i(57791),l=i(940882),c=i(883119),d=i(785893);const u={large:"large",medium:"medium",small:"small",extra_small:"extra_small",article:"article",interest:"interest"},p={bubbleOverlay:{__style:{backgroundColor:"rgba(0, 0, 0, 0.3)"}}};function h({backgroundColor:e,bubbleId:t,bubbleUrl:i,coverImageUrl:h,curator:m,font:_,format:g,height:v,identifierIconType:f,onTap:y,pwtSurfaceContext:x,referringSource:b,subtitle:w,title:P,buttonFormat:S,contentAlign:T="center",textAlign:I="center",width:k="100%"}){const E=(0,r.ZP)(),A=(0,a.Z)(),[C,j]=(0,n.useState)("string"==typeof v?void 0:v),R=e=>{if(e){const t=e.offsetWidth,i="string"==typeof v?Number.parseFloat(v):100;j(t*i/100)}};if(!C)return(0,d.jsx)(c.xu,{ref:R,dangerouslySetInlineStyle:{__style:{paddingBottom:"string"==typeof v?Number.parseFloat(v)+"%":"100%",width:k}}});const D=g===u.article,O=g===u.interest,L=_||C>250&&"lg"||C>140&&g&&[u.medium,u.small,u.article].includes(g)&&"md"||C<120&&g&&g===u.small&&"xs"||"sm";return(0,d.jsx)(c.xu,{position:"relative","data-test-id":"search-suggestion","data-test-type":b,children:(0,d.jsx)(s.MZ,{to:i,isAppUpsellDisabled:!0,onTouch:()=>{y&&(A({action:"click",item:"search-suggestion"}),y(t))},rounding:4,children:(0,d.jsxs)(c.zd,{rounding:4,children:[(0,d.jsx)(c.xu,{width:k,height:C,children:h&&(0,d.jsx)(c.Ee,{alt:"",color:e,fit:"cover",naturalHeight:1,naturalWidth:1,onLoad:()=>{x&&x.markConstraintComplete("RenderSearchLandingPageBubbles")},role:"presentation",src:h})}),(0,d.jsx)(c.xu,{dangerouslySetInlineStyle:p.bubbleOverlay,height:C,width:k,position:"absolute",top:!0,left:!0}),m&&!D&&(0,d.jsx)(c.xu,{position:"absolute",top:!0,left:!0,padding:2,children:(0,d.jsx)(o.Z,{outline:!0,size:"xs",src:m.image_small_url,name:m.full_name})}),!!f&&f!==l.J&&(0,d.jsx)(c.xu,{alignItems:"center",color:"default",display:"flex",height:24,justifyContent:"center",left:!0,margin:2,opacity:.8,position:"absolute",rounding:"circle",top:!0,width:24,children:(0,d.jsx)(c.JO,{icon:(0,l.Z)(f),accessibilityLabel:E._('Shopping icon', 'bubble.shoppingIcon.label', 'Accessibility label for bubble shopping Icon'),color:"default",size:12})}),(0,d.jsx)(c.xu,{display:"flex",position:"absolute",top:!0,width:k,height:C,padding:D||O?6:C>100?3:1,alignItems:D||O?"end":"center",justifyContent:T,children:(0,d.jsxs)(c.kC,{alignItems:"stretch",justifyContent:"start",direction:"column",children:[w&&(0,d.jsx)(c.xv,{align:I,color:"light",size:"lg"===L?"300":"100",overflow:"normal",children:w}),["lg","md"].includes(L)?(0,d.jsx)(c.X6,{align:I,size:"md"===L&&O?"500":"lg"===L?"600":"400",color:"light",overflow:"normal",children:P}):(0,d.jsx)(c.xv,{align:I,color:"light",size:"sm"===L?"300":"100",overflow:"normal",weight:"bold",children:P}),m&&D&&(0,d.jsxs)(c.xu,{display:"flex",justifyContent:"center",alignItems:"center",marginTop:4,children:[(0,d.jsx)(c.xu,{marginEnd:2,children:(0,d.jsx)(o.Z,{outline:!0,size:"xs",src:m.image_small_url,name:m.full_name})}),(0,d.jsx)(c.xv,{size:"100",color:"light",weight:"bold",children:m.full_name})]}),S&&(0,d.jsx)(c.xu,{marginTop:4,children:(0,d.jsx)(c.zx,{role:"link",text:S.text,href:S.href,size:S.size,accessibilityLabel:S.accessibilityLabel})})]})})]})})})}},368156:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(667294),o=i(702664),r=i(30439),a=i(149230),s=i(112690),l=i(861411),c=i(698330),d=i(940882),u=i(883119),p=i(785893);function h(e){const{auxData:t,pattern:i,slotIndex:h,storyId:m,viewType:_,viewParameter:g}=e,v=(0,c.mN)(),f=(0,s.Z)(),y=(0,o.useSelector)((({stories:e,articles:t})=>e[m].objects.map((e=>{const i=t[e.id];return i.curator&&"string"==typeof i.curator?{...i,curator:v(i.curator)}:i})))),x=(0,o.useSelector)((({stories:e})=>e[m])),{story_type:b,referring_source:w,title:P,display_options:S,action:T}=x,{identifier_icon_name:I}=S||{},k=y.map((({type:e,id:t})=>e+":"+t)).join("|"),E={story_type:b,story_id:m,content_ids:k,...t};return(0,p.jsx)(l.Hs,{loggingId:m,objectIdStr:m,viewParameter:g,viewType:_,slotIndex:h,component:200,auxData:E,children:(0,p.jsxs)(n.Fragment,{children:[P&&(0,p.jsxs)(u.xu,{display:"flex",marginBottom:2,justifyContent:"center",alignItems:"center",children:["number"==typeof I&&I!==d.J&&(0,p.jsx)(u.xu,{marginEnd:2,dangerouslySetInlineStyle:{__style:{paddingTop:1}},children:(0,p.jsx)(u.JO,{accessibilityLabel:"",color:"default",icon:(0,d.Z)(I),size:14})}),(0,p.jsx)(u.xv,{weight:"bold",children:P.format})]}),(0,p.jsx)(r.Z,{bubbles:y,pattern:i,referringSource:w,storyId:m,storyType:b,viewParameter:g,viewType:_}),T&&T.url&&(0,p.jsx)(u.xu,{display:"flex",width:"100%",justifyContent:"center",marginTop:1,children:(0,p.jsx)(u.zx,{role:"link",accessibilityLabel:T.text,color:"gray",onClick:()=>{f({view_type:_,view_parameter:g,aux_data:E,event_type:102})},text:T.text,href:T.url,rel:(0,a.Z)(T.url)?"nofollow":void 0,target:(0,a.Z)(T.url)?"blank":void 0,size:"md"})})]})})}},30439:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(936819),o=i(883119),r=i(687866),a=i(785893);function s(e){const{bubbles:t,onTouch:i,pattern:s=[r.UG.medium],pwtSurfaceContext:l,referringSource:c,storyId:d,storyType:u,viewParameter:p,viewType:h}=e,m=t.map((({type:e,id:t})=>e+":"+t)).join("|");return(0,a.jsx)(o.kC,{alignItems:"stretch",justifyContent:"between",width:"100%",wrap:!0,children:t.map(((e,t)=>{const _=s[t%s.length];return(0,a.jsx)(o.xu,{paddingY:1,width:[r.UG.small,r.UG.extra_small].includes(_)?"calc(50% - 4px)":"100%",children:(0,a.jsx)(n.Z,{auxData:{content_ids:m,story_type:u,grid_index:t},bubble:e,format:_,height:([r.UG.medium,r.UG.extra_small].includes(_)?"50%":_===r.UG.article&&"73%")||"100%",onTouch:i,pwtSurfaceContext:l,referringSource:c,slotIndex:t,storyId:d,viewParameter:p,viewType:h})},`bubble-${t}`)}))})}},212651:(e,t,i)=>{i.d(t,{Z:()=>S});var n=i(667294),o=i(936819),r=i(164985),a=i(687866),s=i(785893);function l({bubble:e,font:t,height:i,width:n="100%",onTouch:o}){const{id:r,url:l,title:c,dominant_color_css:d,image_urls:u,buttonText:p}=e;if(!c||!r||!u)return null;const h={text:p,accessibilityLabel:p,href:l,size:"md"};return(0,s.jsx)(a.ZP,{backgroundColor:null!=d?d:void 0,bubbleId:r,bubbleUrl:l,coverImageUrl:u[0],font:t,format:"interest",height:i,title:c,width:n,contentAlign:"start",textAlign:"start",buttonFormat:h,onTap:()=>o&&o({query:c})})}var c=i(902462),d=i(407043),u=i(366428),p=i(883119);function h({bubble:e,component:t,height:i,slotIndex:o,storyId:r,storyType:a,viewParameter:l,viewType:c}){var h;const{logContextEvent:m}=(0,d.v)(),[_,g]=(0,n.useState)("string"==typeof i?void 0:i),v=e=>{if(e){const t=e.offsetWidth,n="string"==typeof i?Number.parseFloat(i):100;g(t*n/100)}},{action:f,aux_fields:y,cover_images:x,dominant_colors:b,title:w,id:P}=e,S=(0,u.Z)({componentType:null!=t?t:void 0,contextLogData:{story_type:a},impressionType:"Article",loggingId:P,slotIndex:o,viewParameter:l,viewType:c});if(!_)return(0,s.jsx)(p.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:"string"==typeof i?Number.parseFloat(i)+"%":"100%"}},ref:v,width:"100%"});if(!x||x.length<=0||!w)return null;const{button_background_color:T,button_text_color:I}=y,k=x.slice(0,2).map((e=>{var t;return null===(t=e["474x"]||e["236x"])||void 0===t?void 0:t.url}));return(0,s.jsx)(p.iP,{role:"link",href:null!==(h=null==f?void 0:f.url)&&void 0!==h?h:"",onTap:()=>{m({aux_data:{story_id:r,story_type:"user_style_story_v2"},component:200,event_type:102,view_parameter:l,view_type:c})},rounding:4,children:(0,s.jsxs)(p.xu,{alignItems:"center",display:"flex",height:_,justifyContent:"center",overflow:"hidden",position:"relative",ref:S,rounding:4,width:"100%",children:[(0,s.jsx)(p.kC,{width:"100%",children:k.map(((e,t)=>(0,s.jsx)(p.zd,{height:_,wash:!0,width:2===k.length?"50%":"100%",children:(0,s.jsx)(p.Ee,{alt:"",color:(null!=b?b:[])[t],fit:"cover",naturalHeight:1,naturalWidth:1,role:"presentation",src:null!=e?e:""})},t)))}),(0,s.jsx)(p.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:T}},paddingX:4,paddingY:3,position:"absolute",rounding:"pill",children:(0,s.jsx)(p.xv,{align:"center",weight:"bold",children:(0,s.jsx)("p",{style:{color:I,margin:"0"},children:w.format})})})]})})}var m=i(112690),_=i(52022),g=i(57791),v=i(784641),f=i(643010),y=i(861411);const x=["#FFF8FA","#F8F7FF","#F7FBFF","#F7FDFC","#F6FDF5","#FFFEDB","#FFF6EB"];function b({backgroundColor:e,coverImageUrl:t,height:i,pwtTrackImageLoad:o,subtitle:r,title:l,width:c}){return(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(p.xu,{width:c,height:i,children:(0,s.jsx)(p.Ee,{alt:"",color:e,fit:"cover",naturalHeight:1,naturalWidth:1,onLoad:o,role:"presentation",src:t})}),(0,s.jsx)(p.xu,{dangerouslySetInlineStyle:a.aG.bubbleOverlay,height:i,left:!0,position:"absolute",top:!0,width:c}),(0,s.jsx)(p.xu,{alignItems:"center",display:"flex",height:i,justifyContent:"center",marginTop:4,padding:8,position:"absolute",top:!0,width:c,children:(0,s.jsxs)(p.kC,{alignItems:"stretch",direction:"column",gap:{row:0,column:1},justifyContent:"start",children:[r&&(0,s.jsx)(p.xv,{align:"center",color:"light",lineClamp:1,size:"300",overflow:"normal",children:r}),(0,s.jsx)(p.X6,{accessibilityLevel:1,align:"center",color:"light",lineClamp:3,size:"400",overflow:"normal",children:l})]})})]})}function w({backgroundColor:e,coverImageUrl:t,height:i,imgBackgroundColor:o,isDarkBackground:r,pwtTrackImageLoad:l,subtitle:c,title:d,width:u}){return(0,s.jsxs)(n.Fragment,{children:[(0,s.jsxs)(p.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:e||x[d.charCodeAt(0)%x.length]}},height:i,position:"relative",width:u,children:[(0,f.Yc)()&&(0,s.jsx)(p.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.3)"}},height:"100%",left:!0,position:"absolute",top:!0,width:"100%"}),(0,s.jsx)(p.xu,{alignItems:"center",display:"flex",height:.6*i,justifyContent:"center",marginTop:8,padding:8,position:"absolute",top:!0,width:u,children:(0,s.jsxs)(p.kC,{alignItems:"stretch",direction:"column",gap:{row:0,column:1},justifyContent:"start",children:[c&&(0,s.jsx)(p.xv,{align:"center",color:r?"light":"dark",overflow:"normal",size:"300",children:c}),(0,s.jsx)(p.X6,{accessibilityLevel:1,align:"center",color:r?"light":"dark",overflow:"normal",size:"400",children:d})]})})]}),(0,s.jsx)(p.xu,{alignItems:"end",bottom:!0,display:"flex",height:.5*i,marginBottom:-5,justifyContent:"center",position:"absolute",width:u,children:t.slice(0,3).map(((e,t)=>(0,s.jsx)(p.xu,{dangerouslySetInlineStyle:a.aG.bubbleOverlay,height:1===t?"100%":"80%",overflow:"hidden",rounding:4,width:1===t?"36%":"28.8%",zIndex:1===t?new p.Ry(1):void 0,marginStart:0!==t?-5:void 0,children:(0,s.jsx)(p.Ee,{alt:"",color:o,fit:"cover",naturalHeight:1,naturalWidth:1,onLoad:l,role:"presentation",src:e})},`TripleImageBubble-${t}`)))})]})}function P({auxData:e,bubble:t,immersiveHeader:i,onTouch:o,pwtSurfaceContext:r,referringSource:l,slotIndex:c,storyId:d,storyType:u,viewParameter:h,viewType:f}){const{article_creator_user:x,display_color:P,dominant_color_css:S,feed_source:T,has_dark_display_color:I=!1,id:k,image_urls:E,is_product_pin_feed:A,subtitle:C,title:j}=t,R=x&&x.full_name&&x.image_small_url?{full_name:x.full_name,image_small_url:x.image_small_url}:void 0,D=(0,m.Z)(),O=(0,_.Z)(),[L,M]=(0,n.useState)();if(!j||!k||!E)return null;const N=(0,v.T7)(null!=T?T:1,null!=A&&A,j,k),z=()=>{O({action:"click",item:"search-suggestion"}),D({view_type:f,view_parameter:h,object_id_str:k,component:13525,event_type:102,aux_data:{grid_index:c,story_id:d,story_type:u,today_article_id:k}}),o&&o({query:j})},F="100%",Z=e=>{if(e){const t=e.offsetWidth,i=Number.parseFloat("85%");M(t*i/100)}};if(!L)return(0,s.jsx)(p.xu,{ref:Z,dangerouslySetInlineStyle:{__style:{paddingBottom:Number.parseFloat("85%")+"%",width:F}}});const B=()=>{r&&r.markConstraintComplete("RenderSearchLandingPageBubbles")};return(0,s.jsx)(y.Y4,{auxData:{grid_index:c.toString(),story_id:d,story_type:u,today_article_id:k,...e},component:13525,impressionData:{storyIdStr:d},loggingId:d,objectIdStr:d,slotIndex:c,viewParameter:h,viewType:f,children:({impressionTrackerRef:e})=>i?(0,s.jsx)(p.xu,{"data-test-id":"search-suggestion","data-test-type":l,position:"relative",ref:e,children:(0,s.jsx)(g.MZ,{to:N,isAppUpsellDisabled:!0,onTouch:z,children:E.length>=3?(0,s.jsx)(w,{backgroundColor:P,coverImageUrl:E,height:L,imgBackgroundColor:null!=S?S:void 0,isDarkBackground:I,pwtTrackImageLoad:B,subtitle:null!=C?C:"",title:j,width:F}):(0,s.jsx)(b,{backgroundColor:null!=S?S:void 0,coverImageUrl:E[0],height:L,pwtTrackImageLoad:B,subtitle:null!=C?C:"",title:j,width:F})})}):(0,s.jsx)(a.ZP,{backgroundColor:S||"",bubbleId:k,bubbleUrl:N,curator:R,coverImageUrl:E[0],format:a.UG.article,height:"75%",onTap:z,pwtSurfaceContext:r,title:j,width:F})})}function S(e){const{action:t,bubbles:i,component:a,format:d,onTouch:u,pwtSurfaceContext:_,query:g,referringSource:v,storyId:f,storyType:y,viewParameter:x,viewType:b}=e,w=i.filter((e=>null!=e)),S=w.map((({type:e,id:t})=>`${null!=e?e:""}:${null!=t?t:""}`)).join("|"),T="slp_immersive_header"===y,I="user_style_story_v2"===y,k="shop_tab_upsell"===y,E="interest"===w[0].type,A=(0,n.useRef)(),C=(0,n.useRef)(),[j,R]=(0,n.useState)(0),{windowWidth:D}=(0,r.Z)(),O=T?D:D-32,L=w.length,M=k?"50%":"100%",[N,z]=(0,n.useState)(T||E),[F,Z]=(0,n.useState)(!1),B=(0,m.Z)();return(0,n.useEffect)((()=>{const e=A.current,t=C.current;if(!e)return;const i=t=>{e.scrollTo({top:0,left:t,behavior:"smooth"})};let n;const o=()=>{clearTimeout(n),z(!1),Z(!0),setTimeout((()=>{var e;let n=-(null!==(e=null==t?void 0:t.getBoundingClientRect().left)&&void 0!==e?e:0);n=T?n:n+16;const o=Math.floor((n+O/2)/O);i(o!==L-1||T?o*O:o*O-4),R(o)}),500)},r=()=>{const e=j===L-1?0:j+1;return i(e*O),R(e),n=setTimeout(r,4e3),()=>clearTimeout(n)};return N?(e.addEventListener("touchend",o),n=setTimeout(r,4e3)):F&&e.addEventListener("touchend",o),()=>{clearTimeout(n),N&&e.removeEventListener("touchend",o)}})),(0,s.jsxs)(n.Fragment,{children:[(0,s.jsx)(p.xu,{marginEnd:-4,marginStart:-4,overflow:"hidden",width:"100vw",children:(0,s.jsx)(p.xu,{display:"flex",marginBottom:-2,overflow:"scrollX",paddingX:T?void 0:E?3:4,paddingY:T?void 0:3,ref:A,children:w.map(((e,i)=>{var n;const{type:r,schema:m}=e;let k=null;switch(r||m){case"explorearticle":k=I?(0,s.jsx)(h,{bubble:e,component:a,height:"75%",storyId:f,slotIndex:i,storyType:y,viewParameter:x,viewType:b}):(0,s.jsx)(o.Z,{auxData:{content_ids:S,story_type:y},bubble:e,format:d,height:"75%",onTouch:u,pwtSurfaceContext:_,referringSource:v,slotIndex:i,storyId:f,viewParameter:x,viewType:b});break;case"todayarticle":k=(0,s.jsx)(P,{auxData:{content_ids:S,story_type:y},bubble:e,immersiveHeader:T,onTouch:u,pwtSurfaceContext:_,referringSource:v,slotIndex:i,storyId:f,storyType:y,viewParameter:x,viewType:b});break;case"interest":k=(0,s.jsx)(l,{bubble:e,font:"md",height:"65%",onTouch:u});break;case"pin":k=i===w.length-1&&t?(0,s.jsx)(p.iP,{href:t.url,onTap:()=>{B({view_type:b,view_parameter:x,component:a,element:179,event_type:102,aux_data:{content_ids:S,entered_query:g,grid_index:i,story_type:y}})},role:"link",rounding:4,children:(0,s.jsxs)(p.xu,{dangerouslySetInlineStyle:{__style:{paddingTop:"calc(100%)"}},position:"relative",children:[(0,s.jsx)(p.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,s.jsx)(c.default,{auxData:{content_ids:S,entered_query:g,grid_index:i,story_type:y},componentType:a||14026,imageOnlyOption:"image-only",duploIsSquarePin:!0,pinId:e.id,slotIndex:i,viewParameter:x,viewType:b})}),(0,s.jsx)(p.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.4)"}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,rounding:4,top:!0,children:(0,s.jsx)(p.zx,{accessibilityLabel:t.text,size:"sm",text:t.text})})]})}):(0,s.jsx)(c.default,{auxData:{content_ids:S,entered_query:g,grid_index:i,story_type:y},componentType:a||14026,duploIsSquarePin:!0,pinId:e.id,slotIndex:i,trafficSource:"shop_feed",viewParameter:x,viewType:b})}return(0,s.jsx)(p.xu,{flex:"none",paddingX:T?void 0:1,ref:0===i?C:void 0,width:M,children:k},`bubble-${null!==(n=e.id)&&void 0!==n?n:""}`)}))})}),(T||E)&&(0,s.jsx)(p.xu,{marginBottom:T?5:-2,marginTop:T?-6:1,position:"relative",zIndex:new p.Ry(100),children:(0,s.jsx)(p.kC,{alignItems:"center",direction:"row",gap:{row:2,column:0},justifyContent:"center",children:[...Array(L).keys()].map((e=>{const t=j===e?"tertiary":"lightWash";return(0,s.jsx)(p.xu,{color:t,height:6,rounding:"circle",width:6},`indicator-dot-${e}`)}))})})]})}},131230:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(702664),o=i(212651),r=i(366428),a=i(883119),s=i(785893);function l({auxData:e,slotIndex:t,storyId:i,storyType:l,viewParameter:c,viewType:d}){var u;const p=(0,n.useSelector)((({stories:e})=>e[i])),{action:h,display_options:m,objects:_,title:g}=p,v=null==m||null===(u=m.content_display)||void 0===u?void 0:u.component_type,f=(null==e?void 0:e.entered_query)||"",y={entered_query:f,grid_index:t,story_id:i,story_type:l},x=(0,r.Z)({componentType:v,contextLogData:y,impressionType:"Story",loggingId:i,slotIndex:t,viewParameter:c,viewType:d}),b=(0,n.useSelector)((({articles:e})=>_.map((t=>{switch(t.schema){case"article":return e[t.id];case"pin":return t;default:return null}}))));return(0,s.jsxs)(a.xu,{ref:x,children:[g&&(0,s.jsx)(a.xu,{display:"flex",marginBottom:2,justifyContent:"center",alignItems:"center",children:(0,s.jsx)(a.xv,{weight:"bold",children:g.format})}),(0,s.jsx)(o.Z,{action:h,bubbles:b,component:v,query:f,storyId:i,storyType:l,viewParameter:c,viewType:d})]})}},936819:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(112690),o=i(861411),r=i(826067),a=i(687866),s=i(613316),l=i(785893);function c({auxData:e,bubble:t,font:i,format:c,height:d,onTouch:u,pwtSurfaceContext:p,referringSource:h,slotIndex:m,storyId:_,viewParameter:g,viewType:v,width:f="100%"}){var y;const{action:x,cover_images:b,curator:w,dominant_colors:P,id:S,identifier_icon_type:T,story_category:I,title:k}=t,E=(0,n.Z)();if(!b||!k)return null;const A=w&&w.full_name&&w.image_small_url?{full_name:w.full_name,image_small_url:w.image_small_url}:void 0,C=null===(y=b[0]&&(b[0]["474x"]||b[0]["236x"]))||void 0===y?void 0:y.url,j=k.format,R=(null==x?void 0:x.url)||(({storyCategory:e,query:t,referringSource:i,bubbleId:n,storyId:o,title:a})=>{const l=null!=e&&(0,s.y)(e),c=(0,r.XP)({q:t,rs:i||void 0,b_id:n,source_id:o}),d=l&&a?(0,s.x)({title:a,id:n,articleType:"discover"}):`/discover/article/${n}/`;return l?d:"/search/pins/"+(c?"?"+c:"")})({storyCategory:I,query:j,referringSource:h,bubbleId:S,storyId:_,title:j}),D=c===a.UG.article?13865:200,O=c===a.UG.article?102:6940,L=P&&P.length?P[0]:void 0;return(0,l.jsx)(o.fv,{auxData:{story_id:_,...e},impressionData:{storyCategory:I,storyIdStr:_},impressionType:"articleImpressions",loggingId:_,slotIndex:m,viewParameter:g,viewType:v,children:(0,l.jsx)(a.ZP,{backgroundColor:L,bubbleId:S,bubbleUrl:R,coverImageUrl:C,curator:A,font:i,format:c,height:d,identifierIconType:T,onTap:t=>{E({component:D,event_type:O,object_id_str:t,view_parameter:g,view_type:v,aux_data:{article_id:t,grid_index:m,...e}}),u&&u({query:j})},pwtSurfaceContext:p,referringSource:h,title:j,width:f})})}},248299:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(166300),o=i(898781),r=i(883119),a=i(785893);function s({isPinRep:e}){const t=(0,o.ZP)(),i=e?"default":"inverse",s=(0,a.jsx)(r.xu,{padding:e?1:0,"data-test-id":"unavailable-pin",children:(0,a.jsx)(r.xu,{color:e?"secondary":"dark",top:!0,height:e?314:"100vh",position:e?"static":"absolute",rounding:e?4:0,width:"100%",children:(0,a.jsxs)(r.kC,{height:"100%",direction:"column",justifyContent:"center",alignItems:"center",children:[(0,a.jsx)(r.xu,{paddingY:4,children:(0,a.jsx)(r.JO,{accessibilityLabel:t._('Pin not available', 'story-pin.Closeup.UnavailableStoryPin.icon.accessibilityLabel', 'Accessibility label on icon'),color:i,icon:"alert",size:20})}),(0,a.jsx)(r.xv,{align:"center",color:i,weight:"bold",children:t._('Unavailable', 'story-pin.Closeup.UnavailableStoryPin.Unavailable', 'Text on an unavailable idea Pin that has been deleted')}),(0,a.jsx)(r.xu,{paddingY:1,children:(0,a.jsx)(r.xv,{align:"center",color:i,children:t._('Removed by the creator', 'story-pin.Closeup.UnavailableStoryPin.Removed', 'Text on an unavailable idea Pin explaining it has been removed by its creator')})})]})})});return e?s:(0,a.jsx)(r.xu,{height:"100vh",children:(0,a.jsx)(n.Z,{children:s})})}},201155:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(883119),o=i(785893);function r({ideaPinImages:e}){const t={1:28,2:40,3:48},i=e.map(((e,t)=>{var i,r,a;return(0,o.jsx)(n.xu,{height:48,width:28,color:"default",borderStyle:"sm",overflow:"hidden",rounding:2,dangerouslySetInlineStyle:{__style:{borderColor:"white",marginInlineEnd:"-17px",WebkitMaskImage:"-webkit-radial-gradient(white, black)",zIndex:t}},children:(0,o.jsx)(n.Ee,{alt:"",src:null!==(i=null==e?void 0:e.url)&&void 0!==i?i:"",color:"#696969",fit:"cover",naturalHeight:null!==(r=null==e?void 0:e.height)&&void 0!==r?r:1,naturalWidth:null!==(a=null==e?void 0:e.width)&&void 0!==a?a:1})},t)}));return(0,o.jsx)(n.kC,{justifyContent:"center",children:(0,o.jsx)(n.kC,{justifyContent:"start",width:t[e.length],children:i})})}var a=i(499128),s=i(898781),l=i(784590),c=i(50286);function d({handleHide:e,text:t,userId:i,href:d,imageUrl:u}){const p=(0,s.ZP)(),h=(0,c.HG)(),m=(0,l.Z)({name:"UserStoryPinsFeedResource",options:{data:{filter_version:2,public_only:!0},field_set_key:"partner_grid_item",user_id:i}}),_=Array.isArray(t)?t.join(" "):t;if(0===(m.data||[]).length){const t=u?(0,o.jsx)(n.xu,{height:48,overflow:"hidden",width:48,children:(0,o.jsx)(n.Ee,{alt:p._('Image of who you followed', 'userFollowingToast.thumbnail.userImage', 'Profile thumbnail of the user you followed'),fit:"cover",naturalHeight:1,naturalWidth:1,src:u})}):void 0;return(0,o.jsx)(a.ZP,{duration:5e3,onHide:e,text:_,href:d,iconThumbnail:t,thumbnailShape:"circle"})}const g=(m.data||[]).slice(0,3).map((e=>{var t;return null===(t=e.images)||void 0===t?void 0:t[h?"236x":"170x"]})),v=(0,o.jsx)(r,{ideaPinImages:g});return(0,o.jsx)(a.ZP,{href:d,duration:5e3,onHide:e,iconThumbnail:v,text:_,thumbnailShape:"square"})}},258430:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(883119),o=i(130460),r=i(785893);function a({boardId:e}){var t;const i=(0,o.gC)()(e),a=null!=i&&i.images&&i.images["170x"]?i.images["170x"][0]:void 0;return e&&a?(0,r.jsx)(n.Ee,{alt:"Pin image",color:"#efefef",fit:"cover",naturalHeight:1,naturalWidth:1,src:null!==(t=a.url)&&void 0!==t?t:""}):null}},759929:(e,t,i)=>{i.d(t,{k:()=>a,w:()=>r});var n=i(379764),o=i(883119);const r=2e3,a=new o.H3([n.Z])},909792:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(531029),o=i(198125),r=i(50286),a=i(883119),s=i(785893);const l=({imageUrls:e,subtitle:t,subtitleSize:i,subtitleWeight:l,title:c,titleSize:d})=>{var u;const p=(0,r.HG)(),{isHovering:h,handleMouseEnter:m,handleMouseLeave:_}=(0,o.Z)();return!e||e.length<=0?null:(0,s.jsxs)(a.xu,{borderStyle:"shadow",color:"default",overflow:"hidden",position:"relative",rounding:8,dangerouslySetInlineStyle:{__style:{paddingTop:"75%"}},onMouseEnter:p?m:void 0,onMouseLeave:p?_:void 0,children:[h&&(0,s.jsx)(n.Z,{}),(0,s.jsx)(a.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:(0,s.jsx)(a.Ee,{alt:c,color:"#767676",fit:"cover",naturalHeight:1,naturalWidth:1,src:null!==(u=e[0])&&void 0!==u?u:"",children:(0,s.jsx)(a.xu,{height:"100%",width:"100%",dangerouslySetInlineStyle:{__style:{background:"linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.4) 100%)"}},display:"flex",alignItems:"end",paddingY:6,paddingX:5,children:(0,s.jsxs)(a.kC,{alignItems:"stretch",direction:"column",justifyContent:"center",width:"100%",children:[t&&(0,s.jsx)(a.xu,{marginBottom:1,children:(0,s.jsx)(a.xv,{color:"light",size:i,align:"center",weight:l,children:t})}),(0,s.jsx)(a.X6,{color:"light",size:d,align:"center",children:c})]})})})})]})}},736609:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(830157),o=i(531029),r=i(326860),a=i(198125),s=i(861411),l=i(50286),c=i(276775),d=i(883119),u=i(785893);const p=function({articleId:e,creatorId:t,creatorFullName:i,creatorImgSrc:p,creatorIsVerified:h,gridIndex:m,imageHeight:_,imageWidth:g,imageUrl:v,pinId:f,showCreator:y,trackingParams:x,title:b,viewParameter:w,viewType:P}){const S=(0,c.useLocation)(),{isHovering:T,handleMouseEnter:I,handleMouseLeave:k}=(0,a.Z)(),E=(0,l.HG)();return(0,u.jsxs)(d.xu,{borderStyle:"shadow",position:"relative",color:"default",onMouseEnter:E?I:void 0,onMouseLeave:E?k:void 0,overflow:"hidden",rounding:8,children:[T&&(0,u.jsx)(o.Z,{}),(0,u.jsx)(s.dL,{auxData:{grid_index:m,today_article_id:e},loggingId:f,objectIdStr:f,slotIndex:m,impressionData:{imageURL:v},component:13525,trackingParams:(0,n.Z)((S.state||{}).trackingParams,x),viewParameter:w,viewType:P,children:({impressionTrackerRef:e})=>(0,u.jsx)(d.xu,{position:"relative",dangerouslySetInlineStyle:{__style:{paddingTop:"number"==typeof _&&"number"==typeof g?_/g*100+"%":"100%"}},ref:e,children:(0,u.jsx)(d.xu,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,children:(0,u.jsx)(d.Ee,{alt:b,color:"#767676",fit:"cover",naturalHeight:1,naturalWidth:1,src:null!=v?v:""})})})}),(0,u.jsxs)(d.xu,{paddingX:6,paddingY:4,display:"flex",justifyContent:"center",direction:"column",children:[(0,u.jsx)(d.X6,{align:"center",size:"400",children:b}),y&&(t||i)&&(0,u.jsx)(d.xu,{display:"flex",marginTop:3,justifyContent:"center",children:(0,u.jsx)(r.Z,{userId:t,creatorFullName:i,creatorImgSrc:p,creatorIsVerified:h})})]})]})}},91937:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(116303),o=i(830157),r=i(167525),a=i(861411),s=i(276775),l=i(883119),c=i(785893);const d=({articleId:e,gridIndex:t,hasPinnerAttribution:i,imageHeight:d,imageWidth:u,imageUrl:p,pageCount:h,pinId:m,pinnerImageSrc:_,pinnerName:g,pinTrackingParams:v,title:f,viewParameter:y,viewType:x})=>{const b=(0,s.useLocation)();return(0,c.jsxs)(l.xu,{borderStyle:"shadow",color:"default",overflow:"hidden",paddingY:6,rounding:8,children:[(0,c.jsx)(l.xu,{paddingX:6,display:"flex",justifyContent:"center",children:(0,c.jsx)(l.X6,{align:"center",size:"400",children:f})}),(0,c.jsx)(a.dL,{auxData:{grid_index:t,today_article_id:e},loggingId:m,objectIdStr:m,slotIndex:t,impressionData:{imageURL:p},component:13525,trackingParams:(0,o.Z)((b.state||{}).trackingParams,v),viewParameter:y,viewType:x,children:({impressionTrackerRef:e})=>(0,c.jsxs)(l.xu,{marginTop:4,paddingX:12,ref:e,children:[(0,c.jsx)(l.zd,{rounding:8,children:(0,c.jsx)(l.xu,{position:"relative",dangerouslySetInlineStyle:{__style:{paddingTop:"number"==typeof d&&"number"==typeof u?d/u*100+"%":"100%"}},children:(0,c.jsx)(l.xu,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,children:(0,c.jsx)(l.Ee,{alt:"",color:"#767676",fit:"cover",naturalHeight:1,naturalWidth:1,src:null!=p?p:"",children:(0,c.jsx)(l.xu,{position:"relative",marginStart:1,marginTop:1,children:(0,c.jsx)(r.Z,{icon:"idea-pin",text:h.toString()})})})})})}),i&&(0,c.jsxs)(l.xu,{alignItems:"center",display:"flex",marginTop:2,maxWidth:"100%",children:[(0,c.jsx)(l.xu,{flex:"none",height:44,width:44,marginEnd:2,children:(0,c.jsx)(n.Z,{name:"",outline:!0,size:"fit",src:_})}),(0,c.jsx)(l.xv,{lineClamp:1,children:g})]})]})})]})}},371172:(e,t,i)=>{i.d(t,{Z:()=>h});var n=i(830157),o=i(531029),r=i(326860),a=i(198125),s=i(619519),l=i(861411),c=i(50286),d=i(276775),u=i(883119),p=i(785893);const h=function({articleId:e,creatorId:t,creatorFullName:i,creatorImgSrc:h,creatorIsVerified:m,gridIndex:_,height:g,pinDescription:v,pinImageHeight:f,pinImageUrl:y,pinImageWidth:x,showCreator:b,thumbnail:w,title:P,trackingParams:S,url:T,videoPinId:I,viewParameter:k,viewType:E,width:A}){const C=(0,d.useLocation)(),j=(0,c.HG)(),{isHovering:R,handleMouseEnter:D,handleMouseLeave:O}=(0,a.Z)();return(0,p.jsxs)(u.xu,{borderStyle:"shadow",color:"default",direction:"column",display:"flex",flex:"none",overflow:"hidden",rounding:8,dangerouslySetInlineStyle:{__style:{transform:"translate3d(0, 0, 0)"}},onMouseEnter:j?D:void 0,onMouseLeave:j?O:void 0,children:[R&&(0,p.jsx)(o.Z,{}),(0,p.jsx)(l.dL,{auxData:{grid_index:_,today_article_id:e},loggingId:I,objectIdStr:I,slotIndex:_,impressionData:{imageURL:y},component:13525,trackingParams:(0,n.Z)((C.state||{}).trackingParams,S),viewParameter:k,viewType:E,children:({impressionTrackerRef:e})=>(0,p.jsx)(u.xu,{ref:e,children:(0,p.jsx)(s.Z,{height:g,thumbnail:w,url:T,width:A,pinDescription:v,pinImageUrl:y,pinImageHeight:f,pinImageWidth:x})})}),(0,p.jsxs)(u.xu,{paddingX:6,paddingY:4,display:"flex",justifyContent:"center",direction:"column",children:[(0,p.jsx)(u.X6,{align:"center",size:"400",children:P}),b&&(t||i)&&(0,p.jsx)(u.xu,{display:"flex",marginTop:3,justifyContent:"center",children:(0,p.jsx)(r.Z,{userId:t,creatorFullName:i,creatorImgSrc:h,creatorIsVerified:m})})]})]})}},591289:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(531029),o=i(198125),r=i(50286),a=i(276602),s=i(883119),l=i(785893);function c({imageUrls:e,rounding:t,subtitle:i,subtitleSize:c,title:d,titleSize:u}){const p=(0,r.HG)(),h=(0,a.EV)();let m=0;const _=()=>{m-=1,0===m&&(null==h||h.markConstraintComplete("idea_module_loaded"))},{isHovering:g,handleMouseEnter:v,handleMouseLeave:f}=(0,o.Z)();if(!e||e.length<=0)return null;const y=e.slice(0,3);return h&&(m=y.length),(0,l.jsxs)(s.xu,{borderStyle:"shadow",color:"default",overflow:"hidden",position:"relative",rounding:null!=t?t:8,dangerouslySetInlineStyle:{__style:{paddingTop:"75%"}},onMouseEnter:p?v:void 0,onMouseLeave:p?f:void 0,children:[g&&(0,l.jsx)(n.Z,{}),(0,l.jsxs)(s.xu,{display:"flex",direction:"column",position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:[(0,l.jsx)(s.kC,{alignItems:"stretch",justifyContent:"start",height:"100%",width:"100%",children:y.map(((e,t)=>(0,l.jsx)(s.xu,{width:100/y.length+"%",dangerouslySetInlineStyle:{__style:{WebkitMaskImage:"-webkit-radial-gradient(white, black)"}},children:(0,l.jsx)(s.Ee,{alt:"",color:"#767676",fit:"cover",naturalHeight:1,naturalWidth:1,role:"presentation",src:null!=e?e:"",onLoad:_})},t)))}),(0,l.jsxs)(s.xu,{flex:"none",paddingX:5,paddingY:6,width:"100%",children:[i&&(0,l.jsx)(s.xu,{marginBottom:1,children:(0,l.jsx)(s.xv,{size:c,align:"center",weight:p?"bold":"normal",children:i})}),(0,l.jsx)(s.X6,{size:u,align:"center",children:d})]})]})]})}},228153:(e,t,i)=>{i.d(t,{i:()=>S,y:()=>b});var n,o=i(725214),r=i(909792),a=i(736609),s=i(91937),l=i(371172),c=i(591289),d=i(112690),u=i(52022),p=i(861411),h=i(276775),m=i(50286),_=i(780280),g=i(784641),v=i(883119),f=i(167912),y=i(785893);const x=new Set([3,2,6]),b=({ArticleModule:e,clientTrackingParams:t,id:i,displayType:n,gridIndex:r,isTodayArticlePage:a=!1,onArticleTapUrl:s,pinId:l,viewParameter:c,viewType:_})=>{const g=(0,h.useHistory)(),f=(0,d.Z)(),b=(0,u.Z)(),P=(0,m.HG)();return(0,y.jsx)(p.Y4,{auxData:{grid_index:r.toString(),today_article_id:i},loggingId:i,objectIdStr:i,slotIndex:r,viewParameter:c||3372,viewType:_||1,children:({impressionTrackerRef:d})=>(0,y.jsx)(v.xu,{ref:d,"data-test-id":"suggested-articles-link",children:(0,y.jsx)(w,{href:s,isTodayArticlePage:a,onTap:()=>{f({event_type:P?101:102,view_type:_||1,view_parameter:c||3372,component:13525,aux_data:{today_article_id:i,grid_index:r.toString()}}),b({action:"click",item:"suggested-articles-link"}),"number"==typeof n&&x.has(n)&&t&&l&&f({event_type:P?101:102,view_type:_||1,view_parameter:c||3372,object_id_str:l,clientTrackingParams:t,aux_data:{today_article_id:l,grid_index:r.toString(),cosmic_ray_count:"4",closeup_navigation_type:(0,o.Z)(g)}}),g.push(s)},children:e})})})},w=({children:e,href:t,isTodayArticlePage:i,onTap:n})=>{const{isAuthenticated:o}=(0,_.B)(),r=(0,m.HG)();return o?(0,y.jsx)(v.iP,{onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),n({event:e})},tapStyle:"compress",children:r?(0,y.jsx)(v.xu,{width:i?void 0:408,minHeight:i?void 0:306,children:e}):e}):(0,y.jsx)(v.iP,{href:t,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),n({event:e})},role:"link",children:r?(0,y.jsx)(v.xu,{width:i?void 0:408,minHeight:i?void 0:306,children:e}):e})},P=void 0!==n?n:n=i(584818),S=({containerKey:e,gridIndex:t,subtitleSize:i,titleSize:n,viewParameter:o,viewType:d})=>{var u,p,h,m,_,v,x,w,S,T,I,k,E,A,C,j;const{contentPinOfficialUser:R,contentPin:D,displayType:O,feedSource:L,headerPinId:M,id:N,imageUrls:z,isProductPinFeed:F,showCreator:Z,subtitle:B,title:U,videoPin:H}=(0,f.useFragment)(P,e);let V=null,W=(0,g.T7)(null!=L?L:0,null!=F&&F,null!=U?U:"",null!=N?N:"");const{description:$,images170x:G,images236x:K,images736x:q,pinner:Y,storyPinData:X,trackingParams:J}=null!=D?D:{},Q=null!==(u=null!==(p=null!==(h=null==q?void 0:q.url)&&void 0!==h?h:null==K?void 0:K.url)&&void 0!==p?p:null==G?void 0:G.url)&&void 0!==u?u:"",ee=null!==(m=null!==(_=null==q?void 0:q.width)&&void 0!==_?_:null==K?void 0:K.width)&&void 0!==m?m:null==G?void 0:G.width,te=null!==(v=null!==(x=null==q?void 0:q.height)&&void 0!==x?x:null==K?void 0:K.height)&&void 0!==v?v:null==G?void 0:G.height,{originPinner:ie}=null!=D?D:{},ne=R||ie||Y;switch(O){case 0:V=(0,y.jsx)(r.Z,{imageUrls:z,subtitle:null!=B?B:"",subtitleSize:i||"300",title:null!=U?U:"",titleSize:n||"500"});break;case 1:V=(0,y.jsx)(c.Z,{imageUrls:z,subtitle:null!=B?B:"",subtitleSize:i||"300",title:null!=U?U:"",titleSize:n||"500"});break;case 2:const{entityId:e,videos:u}=null!=H?H:{},p=null!==(w=null==u||null===(S=u.videoList)||void 0===S?void 0:S.v720P)&&void 0!==w?w:{};var oe;if(e)V=(0,y.jsx)(l.Z,{articleId:null!=N?N:"",creatorFullName:null==ne?void 0:ne.fullName,creatorImgSrc:(null==ne?void 0:ne.imageMediumUrl)||(null==ne?void 0:ne.imageSmallUrl),creatorIsVerified:Boolean(null==ne||null===(oe=ne.verifiedIdentity)||void 0===oe?void 0:oe.verified),gridIndex:t,height:p.height,pinDescription:$,pinImageUrl:Q,pinImageHeight:te,pinImageWidth:ee,showCreator:Boolean(Z),thumbnail:p.thumbnail,title:null!=U?U:"",trackingParams:J,url:p.url,videoPinId:e,viewParameter:o,viewType:d,width:p.width}),W=`/pin/${e}`;break;case 3:if(!Q)return null;V=(0,y.jsx)(a.Z,{articleId:null!=N?N:"",creatorFullName:null==ne?void 0:ne.fullName,creatorImgSrc:(null==ne?void 0:ne.imageMediumUrl)||(null==ne?void 0:ne.imageSmallUrl),creatorIsVerified:Boolean(null==ne||null===(T=ne.verifiedIdentity)||void 0===T?void 0:T.verified),imageUrl:Q,imageHeight:null!=te?te:0,imageWidth:null!=ee?ee:0,gridIndex:t,pinId:null!==(I=null==D?void 0:D.entityId)&&void 0!==I?I:"",showCreator:Boolean(Z),title:null!=U?U:"",trackingParams:J,viewParameter:o,viewType:d}),W=M?`/pin/${M}`:W;break;case 6:if(!Q)return null;const h=null!==(k=null!==(E=null==Y?void 0:Y.imageMediumUrl)&&void 0!==E?E:null==Y?void 0:Y.imageSmallUrl)&&void 0!==k?k:"",m=null!==(A=null==Y?void 0:Y.fullName)&&void 0!==A?A:"",_=Boolean(h||m);return(0,y.jsx)(s.Z,{articleId:null!=N?N:"",gridIndex:t,hasPinnerAttribution:_,imageUrl:Q,imageHeight:null!=te?te:0,imageWidth:null!=ee?ee:0,pageCount:null!==(C=null==X?void 0:X.pageCount)&&void 0!==C?C:"",pinId:null!==(j=null==D?void 0:D.entityId)&&void 0!==j?j:"",pinnerImageSrc:h,pinnerName:m,pinTrackingParams:J,title:null!=U?U:"",viewParameter:o,viewType:d});default:V=null}return V?(0,y.jsx)(b,{ArticleModule:V,displayType:O,gridIndex:t,id:null!=N?N:"",onArticleTapUrl:W,viewParameter:o,viewType:d}):null}},531029:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(883119),o=i(785893);const r=new n.Ry(1);function a(){return(0,o.jsx)(n.xu,{opacity:.1,color:"transparentDarkGray",position:"absolute",top:!0,left:!0,bottom:!0,right:!0,zIndex:r})}},326860:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(667294),o=i(116303),r=i(865607),a=i(698330),s=i(883119),l=i(785893);const c=function({userId:e,creatorFullName:t,creatorImgSrc:i,creatorIsVerified:c}){var d;const u=null!==(d=(0,a.mN)()(null!=e?e:""))&&void 0!==d?d:{},{fullNameFromStore:p,imgSrcFromStore:h,isVerifiedFromStore:m}=function(e){const{full_name:t,image_medium_url:i,image_small_url:n,verified_identity:o}=e;return{fullNameFromStore:t,imgSrcFromStore:i||n,isVerifiedFromStore:Boolean(null==o?void 0:o.verified)}}(u),_=e?p:t,g=e?h:i,v=e?m:c;return(0,l.jsx)(s.kC,{alignContent:"center",alignItems:"center",flex:"none",justifyContent:"center",width:"100%",children:_&&(0,l.jsxs)(n.Fragment,{children:[(0,l.jsx)(s.xu,{paddingX:1,children:(0,l.jsx)(o.Z,{name:_,size:"sm",src:null!=g?g:""})}),(0,l.jsx)(s.xu,{minWidth:0,paddingX:1,children:(0,l.jsx)(s.xv,{lineClamp:1,size:"300",weight:"bold",children:_})}),v&&(0,l.jsx)(s.xu,{paddingX:1,children:(0,l.jsx)(r.Z,{hasVerifiedIdentity:v,iconOnly:!0,size:"xs"})})]})})}},502962:(e,t,i)=>{i.d(t,{Z:()=>E});var n=i(702664),o=i(909792),r=i(116303),a=i(635974),s=i(531029),l=i(198125),c=i(112690),d=i(50286),u=i(780280),p=i(883119),h=i(785893);const m=Math.floor(24),_=({articleId:e,imageUrls:t,subtitle:i,title:n,viewParameter:o,viewType:_,user:g})=>{const{isAuthenticated:v}=(0,u.B)(),f=(0,d.HG)(),{isHovering:y,handleMouseEnter:x,handleMouseLeave:b}=(0,l.Z)(),w=(0,c.Z)();if(!g||!t||t.length<=0)return null;const{full_name:P,image_medium_url:S,image_small_url:T}=g,I=S||T||"",k=Math.min(t.length,3),E={aux_data:{today_article_id:e},component:13525,object_id_str:e,view_parameter:o,view_type:_};return(0,h.jsxs)(p.xu,{borderStyle:"shadow",color:"default",onMouseEnter:f?x:void 0,onMouseLeave:f?b:void 0,overflow:"hidden",rounding:8,children:[y&&(0,h.jsx)(s.Z,{}),(0,h.jsx)(p.xu,{display:"flex",position:"relative",width:"100%",dangerouslySetInlineStyle:{__style:{paddingTop:"45%"}},children:(0,h.jsx)(p.xu,{display:"flex",height:"100%",direction:"row",left:!0,position:"absolute",top:!0,width:"100%",children:t.slice(0,k).map(((e,t)=>(0,h.jsx)(p.xu,{width:100/k+"%",children:(0,h.jsx)(p.Ee,{alt:"",color:"#767676",fit:"cover",naturalHeight:1,naturalWidth:1,src:e},t)})))})}),(0,h.jsxs)(p.xu,{flex:"none",paddingX:5,paddingY:6,position:"relative",width:"100%",children:[(0,h.jsx)(p.xu,{height:48,position:"absolute",width:48,dangerouslySetInlineStyle:{__style:{left:`calc(50% - ${m}px)`,top:`-${m}px`}},children:(0,h.jsx)(r.Z,{name:null!=P?P:"",outline:!0,size:"fit",src:I})}),n&&(0,h.jsx)(p.xu,{marginTop:2,children:(0,h.jsx)(p.X6,{size:"400",align:"center",children:n})}),i&&(0,h.jsx)(p.xu,{marginTop:2,children:(0,h.jsx)(p.xv,{align:"center",size:"100",children:i})}),v&&(0,h.jsx)(p.xu,{display:"flex",justifyContent:"center",marginTop:3,children:(0,h.jsx)(a.Z,{isSecondaryButton:!0,onTap:()=>{w({...E,element:62,event_type:f?101:102})},size:"lg",user:g,viewParameter:o,viewType:_})})]})]})};var g=i(736609),v=i(784641),f=i(606441);function y({articleId:e,gridIndex:t,pinId:i,pinOfficialUserId:n,showCreator:o,title:r,viewParameter:a,viewType:s}){const l=(0,f.N)(i);if(!l)return null;const{id:c,images:d,origin_pinner:u,pinner:p,tracking_params:m}=l,_=(null==d?void 0:d["736x"])||(null==d?void 0:d["236x"])||(null==d?void 0:d["170x"]);if(!_)return null;const y=(0,v.xt)(n,null==u?void 0:u.id,null==p?void 0:p.id);return(0,h.jsx)(g.Z,{articleId:e,creatorId:y,gridIndex:t,pinId:c,imageHeight:_.height,imageUrl:_.url,imageWidth:_.width,showCreator:o,title:r,trackingParams:m,viewParameter:a,viewType:s})}var x=i(91937);const b=({articleId:e,gridIndex:t,pinId:i,title:n,viewParameter:o,viewType:r})=>{const a=(0,f.N)(i),s=null==a?void 0:a.pinner,l=null==a?void 0:a.story_pin_data;if(!a)return null;const c=(null==l?void 0:l.page_count)||"",{images:d}=a,u=(null==d?void 0:d["736x"])||(null==d?void 0:d["236x"])||(null==d?void 0:d["170x"]);if(!u)return null;const p=(null==s?void 0:s.image_medium_url)||(null==s?void 0:s.image_small_url)||"",m=(null==s?void 0:s.full_name)||"",_=Boolean(p||m);return(0,h.jsx)(x.Z,{articleId:e,imageHeight:u.height,imageWidth:u.width,imageUrl:u.url,gridIndex:t,hasPinnerAttribution:_,pageCount:c,pinId:a.id,pinnerImageSrc:p,pinnerName:m,pinTrackingParams:a.tracking_params,title:n,viewParameter:o,viewType:r})};var w=i(371172);function P({articleId:e,gridIndex:t,pinOfficialUserId:i,showCreator:n,title:o,videoPinId:r,viewParameter:a,viewType:s}){var l,c;const d=(0,f.N)(r);if(!d)return null;const{description:u,images:p,origin_pinner:m,pinner:_,tracking_params:g}=d,y=(0,v.xt)(i,null==m?void 0:m.id,null==_?void 0:_.id),x=(null==p?void 0:p["736x"])||(null==p?void 0:p["236x"])||(null==p?void 0:p["170x"])||{},{url:b,height:P,width:S}=null!=x?x:{},T=null===(l=d.videos)||void 0===l||null===(c=l.video_list)||void 0===c?void 0:c.V_720P,{height:I,thumbnail:k,url:E,width:A}=null!=T?T:{};return(0,h.jsx)(w.Z,{articleId:e,creatorId:y,gridIndex:t,height:I,pinDescription:u,pinImageHeight:P,pinImageUrl:b,pinImageWidth:S,showCreator:n,title:o,trackingParams:g,thumbnail:k,url:E,videoPinId:r,viewParameter:a,viewType:s,width:A})}var S=i(591289),T=i(228153),I=i(350118),k=i(698330);const E=({gridIndex:e,id:t,isTodayArticlePage:i,article:r,subtitleSize:a,subtitleWeight:s,titleSize:l,viewParameter:c,viewType:d})=>{const u=(0,k.kW)(),p=(0,I.AF)(),m=(0,n.useSelector)((({todayArticles:e})=>r||e[t]));if(!m)return null;const{article_creator_user:g,content_pin:f,content_pin_official_user:x,display_type:w,feed_source:E,header_pin_id:A,image_urls:C,is_product_pin_feed:j,show_creator:R,subtitle:D,title:O,video_pin:L}=m,M=u[g||""],N=f||L,z=N?p[N].tracking_params:void 0;let F=null,Z=(0,v.T7)(E,null!=j&&j,O,t);switch(w){case 0:F=(0,h.jsx)(o.Z,{imageUrls:C,subtitle:D,subtitleSize:a||"300",subtitleWeight:s,title:O,titleSize:l||"500"});break;case 1:F=(0,h.jsx)(S.Z,{imageUrls:C,subtitle:D,subtitleSize:a||"300",title:O,titleSize:l||"500"});break;case 2:L&&(F=(0,h.jsx)(P,{articleId:t,gridIndex:e,pinOfficialUserId:x,showCreator:R,title:O,videoPinId:L,viewParameter:c,viewType:d}),Z=`/pin/${L}`);break;case 3:F=(0,h.jsx)(y,{articleId:t,gridIndex:e,pinId:f,pinOfficialUserId:x,showCreator:R,title:O,viewParameter:c,viewType:d}),Z=`/pin/${A}`;break;case 6:F=(0,h.jsx)(b,{articleId:t,gridIndex:e,pinId:f,title:O,viewParameter:c,viewType:d}),Z=`/pin/${A}`;break;case 8:M?(F=(0,h.jsx)(_,{articleId:t,imageUrls:C,subtitle:D,title:O,user:M,viewParameter:c,viewType:d}),Z=`/${encodeURIComponent(M.username)}/`):F=null;break;default:F=null}return F?(0,h.jsx)(T.y,{ArticleModule:F,clientTrackingParams:z,displayType:w,gridIndex:e,id:t,isTodayArticlePage:i,onArticleTapUrl:Z,pinId:N,viewParameter:c,viewType:d}):null}},182476:(e,t,i)=>{i.d(t,{Z:()=>w});var n,o=i(702664),r=i(815613),a=i(633083),s=i(898781),l=i(892819),c=i(883119),d=i(167912),u=i(785893);const p=({backgroundColor:e,decreaseNamePadding:t,isHomefeedTuner:i,isLego:n,isSelected:o,locale:r,nameTextSize:d,renderAsPill:p,showFollowerCount:h,topicName:m,followerCount:_,image:g})=>{var v;const f=(0,s.ZP)(),y=(0,l.Z)(),x=(0,u.jsx)(c.JO,{accessibilityLabel:f._('Selected', ' - ', ' -- '),color:"inverse",icon:n?"check":"check-circle",size:n?12:24});return p?(0,u.jsx)(a.Z,{color:e||"#767676",image:g,isSelected:null!=o&&o,title:m}):(0,u.jsxs)(c.xu,{position:"relative","aria-selected":o,children:[(0,u.jsx)(c.zd,{rounding:n||i?4:2,children:(0,u.jsxs)(c.xu,{position:"relative",dangerouslySetInlineStyle:{__style:{paddingBottom:"100%"}},children:[(0,u.jsx)(c.xu,{bottom:!0,left:!0,padding:n&&o?1:0,position:"absolute",right:!0,rounding:n&&o?4:0,top:!0,children:(0,u.jsx)(c.Ee,{alt:m,color:e||"#767676",fit:"cover",naturalHeight:1,naturalWidth:1,src:null!==(v=g.url)&&void 0!==v?v:""})}),(0,u.jsx)(c.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:o?"rgba(0,0,0,0.6)":"rgba(0,0,0,0.3)",border:n&&o?"4px solid #767676":"none"}},rounding:n?4:void 0,position:"absolute",left:!0,right:!0,top:!0}),n&&o&&(0,u.jsx)(c.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{border:"2px solid #111"}},left:!0,position:"absolute",right:!0,rounding:4,top:!0})]})}),i?(0,u.jsx)(c.xu,{top:!0,bottom:!0,left:!0,right:!0,padding:2,position:"absolute",display:"flex",alignContent:"center",justifyContent:"center",alignItems:"center",children:(0,u.jsx)(c.xv,{align:"center",color:"light",size:d,weight:"bold",children:m})}):(0,u.jsxs)(c.xu,{bottom:!0,left:!0,padding:t?1:2,position:"absolute",right:!0,children:[(0,u.jsx)(c.xv,{color:"inverse",size:d,weight:"bold",children:m}),h&&_>=0&&(0,u.jsx)(c.xu,{paddingY:1,children:(0,u.jsxs)(c.xv,{color:"inverse",size:"100",children:[(0,u.jsx)(c.xv,{color:"inverse",inline:!0,size:"100",weight:"bold",children:y(r,_,{shortform:!0,shortform_maximum_fraction_digits:1})}),f._('followers', ' - ', ' -- ')]})})]}),o&&(0,u.jsx)(c.xu,{margin:2,position:"absolute",right:!0,top:!0,children:n?(0,u.jsx)(c.xu,{alignItems:"center",color:"selected",display:"flex",height:24,justifyContent:"center",rounding:2,width:24,children:x}):x})]})},h=void 0!==n?n:n=i(133132),m=({topicRef:e,...t})=>{var i,n,o,r,a,s;const l=(0,d.useFragment)(h,e),c=l.images?{url:null!==(i=l.images.url)&&void 0!==i?i:"",width:null!==(n=l.images.width)&&void 0!==n?n:0,height:null!==(o=l.images.height)&&void 0!==o?o:0,dominant_color:"",type:""}:{dominant_color:"",height:0,type:"",url:"",width:0};return(0,u.jsx)(p,{backgroundColor:null!==(r=l.background_color)&&void 0!==r?r:"",topicName:null!==(a=l.name)&&void 0!==a?a:"",followerCount:null!==(s=l.follower_count)&&void 0!==s?s:0,image:c,...t})},_=({topic:e,topicBlob:t,topicInfoForContextualExp:i,...n})=>{const o=i||e||t||{},r=o.images["236x"]||o.images["400x"]||o.images["474x"]||o.images.orig||{height:1,url:"",width:1},a=o.follower_count||-1;return(0,u.jsx)(p,{backgroundColor:o.background_color,topicName:o.name,followerCount:a,image:r,...n})};var g,v=i(70090);const f=({decreaseNamePadding:e=!1,isHomefeedTuner:t,isLego:i,isSelected:n=!1,nameTextSize:a="lg",onTouch:s,padding:l=2,renderAsPill:d,showFollowButton:p=!1,showFollowerCount:h=!1,shouldClickthrough:g=!1,topic:f,viewParameter:y,viewType:x,enabledHomeFeedTunerDesignChanges:b})=>{const w=(0,o.useDispatch)(),P=(0,o.useSelector)((({session:e})=>e.locale)),S=(0,u.jsxs)(c.xu,{"data-test-id":"nux-picker-topic",children:["graphql"!==f.type?(0,u.jsx)(_,{decreaseNamePadding:e,isHomefeedTuner:t,isLego:i,isSelected:n,locale:P,nameTextSize:a,renderAsPill:d,showFollowerCount:h,topic:f.topic,topicBlob:f.topicBlob,topicInfoForContextualExp:f.topicInfoForContextualExp}):(0,u.jsx)(m,{decreaseNamePadding:e,isHomefeedTuner:t,isLego:i,isSelected:n,locale:P,nameTextSize:a,renderAsPill:d,showFollowerCount:h,topicRef:f.topicRef}),!!f&&p&&(0,u.jsx)(c.xu,{paddingY:2,children:(0,u.jsx)(r.Z,{textType:t?"AddRemove":"FollowFollowing",followEventType:601,id:f.id,invertColors:t,inline:t&&b,isFollowed:f.is_followed,onFollow:e=>w((0,v.ZN)(e)),onUnfollow:e=>w((0,v.fv)(e)),size:"md",unfollowEventType:602,viewParameter:y||void 0,viewType:x||void 0})})]});let T="/";return f&&(T=`/topics/${f.id}`),g&&f.slug?(0,u.jsx)(c.iP,{role:"link",onTap:({event:e})=>{null==s||s(e)},tapStyle:"compress",rounding:2,href:T,children:(0,u.jsx)(c.xu,{padding:l,children:S})}):S},y=void 0!==g?g:g=i(964820),x=({topicRef:e,decreaseNamePadding:t=!1,isHomefeedTuner:i,isLego:n,isSelected:o=!1,nameTextSize:r="lg",onTouch:a,padding:s=2,renderAsPill:l,showFollowButton:c=!1,showFollowerCount:p=!1,shouldClickthrough:h=!1,viewParameter:m,viewType:_,enabledHomeFeedTunerDesignChanges:g})=>{var v,x;const b=(0,d.useFragment)(y,e);return(0,u.jsx)(f,{decreaseNamePadding:t,isHomefeedTuner:i,isLego:n,isSelected:o,nameTextSize:r,onTouch:a,padding:s,renderAsPill:l,showFollowButton:c,showFollowerCount:p,shouldClickthrough:h,viewParameter:m,viewType:_,enabledHomeFeedTunerDesignChanges:g,topic:{id:null!==(v=b.entityId)&&void 0!==v?v:"",type:"graphql",is_followed:null!==(x=b.is_followed)&&void 0!==x&&x,topicRef:b}})},b=({id:e,topic:t,topicBlob:i,topicInfoForContextualExp:n,decreaseNamePadding:r=!1,isHomefeedTuner:a,isLego:s,isSelected:l=!1,nameTextSize:c="lg",onTouch:d,padding:p=2,renderAsPill:h,showFollowButton:m=!1,showFollowerCount:_=!1,shouldClickthrough:g=!1,viewParameter:v,viewType:y,enabledHomeFeedTunerDesignChanges:x})=>{const b=(0,o.useSelector)((({topics:t})=>t[e])),w=null!=t?t:b;return(0,u.jsx)(f,{decreaseNamePadding:r,isHomefeedTuner:a,isLego:s,isSelected:l,nameTextSize:c,onTouch:d,padding:p,renderAsPill:h,showFollowButton:m,showFollowerCount:_,shouldClickthrough:g,viewParameter:v,viewType:y,enabledHomeFeedTunerDesignChanges:x,topic:{id:e,is_followed:!(null==w||!w.is_followed),topic:w,topicBlob:i,topicInfoForContextualExp:n,type:"resource"}})},w=({decreaseNamePadding:e=!1,isHomefeedTuner:t,isLego:i,isSelected:n=!1,nameTextSize:o="lg",onTouch:r,padding:a=2,renderAsPill:s,showFollowButton:l=!1,showFollowerCount:c=!1,shouldClickthrough:d=!1,viewParameter:p,viewType:h,enabledHomeFeedTunerDesignChanges:m,..._})=>_.topicRef?(0,u.jsx)(x,{decreaseNamePadding:e,isHomefeedTuner:t,isLego:i,isSelected:n,nameTextSize:o,onTouch:r,padding:a,renderAsPill:s,showFollowButton:l,showFollowerCount:c,shouldClickthrough:d,viewParameter:p,viewType:h,topicRef:_.topicRef,enabledHomeFeedTunerDesignChanges:m}):(0,u.jsx)(b,{id:_.id,decreaseNamePadding:e,isHomefeedTuner:t,isLego:i,isSelected:n,nameTextSize:o,onTouch:r,padding:a,renderAsPill:s,showFollowButton:l,showFollowerCount:c,shouldClickthrough:d,topic:_.topic,topicBlob:_.topicBlob,topicInfoForContextualExp:_.topicInfoForContextualExp,viewParameter:p,viewType:h,enabledHomeFeedTunerDesignChanges:m})},430235:(e,t,i)=>{i.d(t,{Z:()=>P});var n,o=i(667294),r=i(248975),a=i(862628),s=i(898781),l=i(759177),c=i(667679),d=i(62409),u=i(349700),p=i(867820),h=i(350118),m=i(276775),_=i(883119),g=i(167912),v=i(785893);const f=({children:e,onTap:t})=>{const[i,n]=(0,o.useState)(!1);return(0,v.jsx)(_.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:i?"rgba(0, 0, 0, 0.06)":void 0}},rounding:2,paddingX:3,paddingY:2,role:"listitem",children:(0,v.jsx)(_.iP,{onTap:t,onBlur:()=>n(!1),onFocus:()=>n(!0),onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:e})})},y=void 0!==n?n:n=i(12617);function x({desktopContextMenuState:e,isMainPinImage:t,source:i,images:n,embedSrc:l,embedType:d,sourceUserUsername:h,sourceUserFullname:g,pinJoinVisualAnnotation:y,pinJoinSeoBreadcrumbName:x,pinJoinSeoBreadcrumbUrl:b,pinId:w,pinLink:P}){var S;const T=(0,s.ZP)(),I=(0,m.useHistory)(),k=(0,r.Z)({images:n,embedSrc:l,embedType:d}),E=x,A=b,C=null!==(S=null==y?void 0:y[0])&&void 0!==S?S:void 0,j=(0,a.Z)(C),R=`/search/pins/?q=${encodeURIComponent(j)}&rs=image_only_attribution`,D=(0,c.Z)(),O="dweb.plp.ellipsis.button"===i;return k?(0,v.jsxs)(_.xu,{"data-test-id":"desktop-context-menu",position:"fixed",dangerouslySetInlineStyle:{__style:{top:`${e.yPosition}px`,left:`${e.xPosition}px`}},zIndex:new _.Ry(99999),color:"default",rounding:2,borderStyle:"shadow",display:"flex",direction:"column",paddingY:3,paddingX:2,maxWidth:250,children:[(0,v.jsx)(_.xu,{rounding:2,paddingX:3,paddingY:2,role:"img",children:(0,v.jsx)(_.JO,{icon:"pinterest",accessibilityLabel:T._('Pinterest logo', 'dweb.unauth.context_menu.pinterest_logo', 'Pinterest logo in the context menu'),color:"brandPrimary"})}),(0,v.jsx)(f,{onTap:()=>{(0,p.My)("dweb.unauth.context_menu.save_image"),D({reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"tap_unauth_context_menu_download_image",desktopOptions:{modalType:"signup",modalOptions:{source:"saveButtonExp",container:"save",savePinId:w}}})},children:(0,v.jsx)(_.xv,{size:"200",weight:"bold",children:T._('Save image', 'dweb.unauth.context_menu.link.save_image', 'Link to save the image')})}),!(t||O&&!P)&&(0,v.jsx)(f,{onTap:()=>{(0,p.My)(O?"dweb.unauth.context_menu.open_plp_new_tab.from.ellipsis.button":"dweb.unauth.context_menu.open_plp_new_tab"),window.open(O?P:`/pin/${w}/`),O||D({reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"tap_unauth_context_menu_open_plp_new_tab",desktopOptions:{modalType:"login"}})},children:(0,v.jsx)(_.xv,{size:"200",weight:"bold",children:T._('Open link in new tab', 'dweb.unauth.context_menu.link.plp_new_tab', 'Link to open the pin in a new tab')})}),(C||!(!E||!A))&&(0,v.jsx)(f,{onTap:()=>{(0,p.My)("dweb.unauth.context_menu.see_more_pins"),A?I.push(`${A}`):I.push(R)},children:E?(0,v.jsx)(_.xv,{size:"200",weight:"bold",lineClamp:2,children:(0,u.nk)(T._('See more ideas about {{levelOneInterestName}}', 'dweb.unauth.context_menu.link.see_more_ideas.l1', 'Link to see similar pins'),{levelOneInterestName:E})}):(0,v.jsx)(_.xv,{size:"200",weight:"bold",lineClamp:2,children:(0,u.nk)(T._('See more ideas about {{interestTag}}', 'dweb.unauth.context_menu.link.see_more_ideas.interest_tag', 'Link to see similar pins'),{interestTag:C})})}),!(!g||!h)&&(0,v.jsx)(f,{onTap:()=>{(0,p.My)("dweb.unauth.context_menu.more_from_creator"),I.push(`/${h}/`)},children:(0,v.jsx)(_.xv,{size:"200",weight:"bold",lineClamp:2,children:(0,u.nk)(T._('See more from {{full_name}}', 'dweb.unauth.context_menu.link.more_from_creator', 'Link to see more ideas from this creator'),{full_name:g})})}),(0,v.jsx)(o.Fragment,{children:(0,v.jsx)(f,{onTap:()=>{(0,p.My)("dweb.unauth.context_menu.login_signup"),D({reason:"CLICK_LOGIN_OR_SIGNUP",attributionLabel:"tap_unauth_context_menu_login_signup",desktopOptions:{modalType:"login"}})},children:(0,v.jsx)(_.xv,{size:"200",weight:"bold",children:T._('Log in or sign up for more', 'dweb.unauth.context_menu.link.login_signup', 'Link to log in or sign up')})})})]}):null}function b({graphqlRef:e,pinId:t,useNativeCreatorAsPinner:i,...n}){var o,r,a,s,c;const d=(0,g.useFragment)(y,e),u=(0,l.Z)(d);let p;var h,m;(p=null!=d&&d.nativeCreator?d.nativeCreator:null!=d&&d.linkDomain?d.linkDomain.officialUser:(null==d?void 0:d.originPinner)||(null==d?void 0:d.pinner),p)||(p=null!==(h=null==d||null===(m=d.linkDomain)||void 0===m?void 0:m.officialUser)&&void 0!==h?h:null==d?void 0:d.pinner);return(0,v.jsx)(x,{...n,embedSrc:(null==d?void 0:d.embed)&&d.embed.src,embedType:(null==d?void 0:d.embed)&&d.embed.type,images:u,sourceUserUsername:null===(o=p)||void 0===o?void 0:o.username,sourceUserFullname:null===(r=p)||void 0===r?void 0:r.fullName,pinJoinVisualAnnotation:null==d||null===(a=d.pinJoin)||void 0===a?void 0:a.visualAnnotation,pinJoinSeoBreadcrumbName:(null==d||null===(s=d.pinJoin)||void 0===s?void 0:s.seoBreadcrumbs)&&(d.pinJoin.seoBreadcrumbs.length>0?d.pinJoin.seoBreadcrumbs[0].name:null),pinJoinSeoBreadcrumbUrl:(null==d||null===(c=d.pinJoin)||void 0===c?void 0:c.seoBreadcrumbs)&&(d.pinJoin.seoBreadcrumbs.length>0?d.pinJoin.seoBreadcrumbs[0].url:null),pinId:t})}function w({graphqlRef:e,pinId:t,useNativeCreatorAsPinner:i,...n}){var o,r,a,s,l,c;const u=(0,h.S6)()(t);let p=(0,d.wS)(u);var m,_;p||(p=null!==(m=null==u||null===(_=u.link_domain)||void 0===_?void 0:_.official_user)&&void 0!==m?m:null==u?void 0:u.pinner);const{full_name:g,username:f}=null!==(o=p)&&void 0!==o?o:{};return(0,v.jsx)(x,{...n,embedSrc:null==u||null===(r=u.embed)||void 0===r?void 0:r.src,embedType:null==u||null===(a=u.embed)||void 0===a?void 0:a.type,images:null==u?void 0:u.images,sourceUserUsername:g,sourceUserFullname:f,pinJoinVisualAnnotation:null==u||null===(s=u.pin_join)||void 0===s?void 0:s.visual_annotation,pinJoinSeoBreadcrumbName:(null==u||null===(l=u.pin_join)||void 0===l?void 0:l.seo_breadcrumbs)&&(u.pin_join.seo_breadcrumbs.length>0?u.pin_join.seo_breadcrumbs[0].name:null),pinJoinSeoBreadcrumbUrl:(null==u||null===(c=u.pin_join)||void 0===c?void 0:c.seo_breadcrumbs)&&(u.pin_join.seo_breadcrumbs.length>0?u.pin_join.seo_breadcrumbs[0].url:null),pinId:t})}function P(e){return e.graphqlRef?(0,v.jsx)(b,{...e}):(0,v.jsx)(w,{...e})}},447409:(e,t,i)=>{i.d(t,{n:()=>P,Z:()=>S});var n=i(702664),o=i(598615),r=i(821997),a=i(966476);const s=({children:e,fallback:t})=>(()=>{const e=(0,n.useSelector)((e=>{var t;return!(null==e||null===(t=e.session)||void 0===t||!t.isSeoBot)})),t=(0,a.Z)();return!e&&!t})()?t||null:e;var l=i(938917),c=i(898781),d=i(893101),u=i(112690),p=i(867820),h=i(780280);var m=i(52022),_=i(643010),g=i(948376),v=i(773285),f=i(385740),y=i(53987),x=i(883119),b=i(276775),w=i(785893);const P=56;function S(){const e=(0,c.ZP)(),t=(0,b.useLocation)(),i=(0,b.useHistory)(),{viewType:a,viewParameter:S}=(0,f.SU)(),{userAgentPlatform:T,userAgent:I}=(0,n.useSelector)((({session:e})=>e)),k=(0,g.Rp)({platform:T,userAgent:I}),E=(0,d.Z)(),A=function(){const{isBot:e}=(0,h.B)();return(t,i)=>{e||(0,p.NC)(t,i)}}(),C=(0,l.Z)(),{checkExperiment:j}=(0,v.F)(),R=(0,u.Z)(),D=(0,m.Z)(),O=e._('Log in', 'Label for log in button', 'Label for log in button'),L=e._('Sign up', 'Text on button on the top bar that leads users to signing up.', 'Text on button on the top bar that leads users to signing up.'),M=e._('Download', 'mweb.unauth.interstitial_upsell.download_button_text', 'CTA on the app interstitial upsell to install the app'),N=!k&&!(0,y.Xn)(t),z=((0,y.dr)(t)||(0,y.$Y)(t)||(0,y.E0)(t))&&!j("lex_follow_button").group.includes("main_cta"),F=!C||E||z?"signup":"download",Z=(N?O.length:0)+("signup"===F?L.length:0)+("download"===F?M.length:0);return(0,w.jsx)(x.xu,{dangerouslySetInlineStyle:{__style:{boxShadow:"0 1px 0 0 rgba(0, 0, 0, 0.08)",backgroundColor:(0,_.Yc)()?"#333":"white",transition:"all 225ms cubic-bezier(0.0,0.0,0.2,1) 500ms",transform:"translateY(0)"}},top:!0,left:!0,width:"100vw",position:"relative",paddingX:3,children:(0,w.jsxs)(x.xu,{alignItems:"center","data-test-id":"unauth-header",direction:"row",display:"flex",justifyContent:"between",children:[(0,w.jsx)(x.iP,{accessibilityLabel:e._('Pinterest App', 'Pinterest icon for app upsell', 'Pinterest icon for app upsell'),onTap:()=>{D({action:"click",within:"unauth-header",item:"pinterest-logo"})},children:(0,w.jsxs)(x.xu,{alignItems:"center",display:"flex",direction:"row",marginEnd:3,children:[(0,w.jsx)(x.xu,{alignItems:"center",display:"flex",height:P,justifyContent:"center",rounding:2,"data-test-id":"pinterest-logo-icon",children:(0,w.jsx)(x.iP,{role:"link",tapStyle:"none",href:"/",children:k?(0,w.jsx)(r.Z,{size:24}):(0,w.jsx)(x.hU,{icon:"pinterest",iconColor:"red",padding:1,size:"xl",accessibilityLabel:e._('Pinterest App', 'Pinterest icon for app upsell', 'Pinterest icon for app upsell')})})}),(0,w.jsx)(x.xu,{paddingY:2,paddingX:1,"data-test-id":"pinterest-logo-text",children:Z<18&&(0,w.jsxs)(x.xu,{children:[(0,w.jsx)(x.X6,{color:"error",size:"400",overflow:"normal",children:k?e._('Pinterest Lite', 'Pinterest lite brand for the app upsell', 'Pinterest lite brand for the app upsell'):e._('Pinterest', 'Pinterest brand for the app upsell', 'Pinterest brand for the app upsell')}),k&&(0,w.jsx)(x.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-wrap"}},children:(0,w.jsx)(x.xu,{children:(0,w.jsx)(x.xv,{inline:!0,size:"100",color:"subtle",children:e._('Save space on your device', 'Unauth app upsell copy that describe Pinterest product core value to users', 'Unauth app upsell copy that describe Pinterest product core value to users')})})})]})})]})}),(0,w.jsx)(s,{children:(0,w.jsxs)(x.xu,{marginEnd:0,flex:"none",alignItems:"center",display:"flex",direction:"row","data-test-id":"UnauthAppUpsellButton",children:[N&&(0,w.jsx)(x.xu,{"data-test-id":"login-button",children:(0,w.jsx)(x.zx,{fullWidth:!0,color:"white",onClick:()=>{D({action:"click",within:"unauth-header",item:"login-button"}),R({component:13198,element:30,event_type:102,view_type:a,view_parameter:S}),A("press_header_login"),R({event_type:10241,element:30,component:14213,view_type:a,view_parameter:S,aux_data:{upsell_reason:"tap_unauth_header_login"}}),i.push("/login",t.state)},size:"md",text:O})}),"signup"===F?(0,w.jsx)(x.xu,{"data-test-id":"signup-button",children:(0,w.jsx)(x.zx,{fullWidth:!0,color:z?"red":"gray",onClick:()=>{D({action:"click",within:"unauth-header",item:"signup-button"}),R({component:13198,element:31,event_type:102,view_type:a,view_parameter:S}),A("press_header_signup"),R({event_type:10241,element:31,component:14215,view_type:a,view_parameter:S,aux_data:{upsell_reason:"tap_unauth_header_signup"}}),i.push("/signup",t.state)},size:"md",text:L})}):(0,w.jsx)(x.xu,{"data-test-id":"download-button",children:(0,w.jsx)(o.Z,{componentType:14161,within:"unauth-header",children:({handleOpenApp:e})=>(0,w.jsx)(x.zx,{fullWidth:!0,color:(0,y.j8)(t)||j("lex_follow_button").group.includes("main_cta")?"gray":"red",onClick:()=>e(),size:"md",text:M})})})]})})]})})}},874317:(e,t,i)=>{i.d(t,{Yw:()=>S,ZP:()=>A,nt:()=>P});var n,o=i(598615),r=i(326960),a=i(248975),s=i(63552),l=i(862628),c=i(938917),d=i(898781),u=i(759177),p=i(667679),h=i(62409),m=i(349700),_=i(867820),g=i(538232),v=i(773285),f=i(350118),y=i(276775),x=i(883119),b=i(167912),w=i(785893);const P=250,S={WebkitTouchCallout:"none",WebkitUserSelect:"none",MozUserSelect:"none",MsUserSelect:"none",KhtmlUserSelect:"none",UserSelect:"none"},T=void 0!==n?n:n=i(167074);function I({mwebContextMenuState:e,openShareModal:t,setMwebContextMenuState:i,pinId:n,images:u,embedSrc:h,embedType:f,sourceUserUsername:b,sourceUserFullname:S,pinDownloadFilename:T,pinImageSignature:I,pinJoinVisualAnnotation:k,pinJoinSeoBreadcrumbName:E,pinJoinSeoBreadcrumbUrl:A}){var C;const j=(0,d.ZP)(),R=(0,y.useHistory)(),D=(0,a.Z)({images:u,embedSrc:h,embedType:f}),{isChromeOnIOS:O}=(0,g.R)(),L=E,M=A,N=null!==(C=null==k?void 0:k[0])&&void 0!==C?C:void 0,z=(0,l.Z)(N),F=`/search/pins/?q=${encodeURIComponent(z)}&rs=image_only_attribution`,Z=(0,p.Z)(),B=(0,g.R)(),{checkExperiment:U}=(0,v.F)(),H=(0,c.Z)();return D?(0,w.jsxs)(x.xu,{"data-test-id":"mobile-context-menu",position:"absolute",dangerouslySetInlineStyle:{__style:{top:`${e.yPosition}px`,left:`${e.xPosition}px`}},zIndex:new x.Ry(99999),color:"default",rounding:2,borderStyle:"shadow",display:"flex",direction:"column",paddingY:3,paddingX:2,maxWidth:P,children:[(0,w.jsxs)(x.xu,{rounding:2,paddingX:3,paddingY:2,role:"img",direction:"row",display:"flex",alignItems:"center",justifyContent:"between",children:[(0,w.jsx)(x.JO,{icon:"pinterest",accessibilityLabel:j._('Pinterest logo', 'unauth.mweb.context_menu.pinterest_logo', 'Pinterest logo in the context menu'),color:"brandPrimary"}),(0,w.jsx)(x.xu,{alignSelf:"end","data-test-id":"mobile-context-menu-cancel-button",children:(0,w.jsx)(x.iP,{onTap:({event:e})=>{e.stopPropagation(),i(null)},children:(0,w.jsx)(x.JO,{icon:"cancel",accessibilityLabel:j._('Dismiss mweb context menu', 'unauth.mweb.context_menu.dismiss', 'Dismiss icon in mweb context menu')})})})]}),"main"===e.context&&H&&U("mweb_main_pin_ltcm_open_in_app").anyEnabled&&(0,w.jsx)(o.Z,{componentType:18,within:"mweb-context-menu",children:({handleOpenApp:e})=>(0,w.jsx)(x.xu,{rounding:2,paddingX:3,paddingY:2,role:"listitem",children:(0,w.jsx)(x.iP,{onTap:({event:t})=>{t.stopPropagation(),i(null),e({deepLinkUri:`/pin/${n}/`}),(0,_.My)("unauth.mweb.context_menu.open_in_app")},children:(0,w.jsx)(x.xv,{size:"200",weight:"bold",children:j._('Open in App', 'unauth.mweb.context_menu.link.open_in_app', 'Link to open the pin in Pinterest app')})})})}),["download","short_d"].includes(e.context)&&I?(0,w.jsx)(x.xu,{rounding:2,paddingX:3,paddingY:2,role:"listitem",children:(0,w.jsx)(r.Z,{imgSrc:D,isChromeOnIOS:O,filename:T,pinId:n,viewType:3,imageSignature:I,children:e=>(0,w.jsx)(s.Z,{pressState:"none",onTouch:t=>{e().then((()=>{t.stopPropagation(),i(null),(0,_.My)("unauth.mweb.context_menu.download_image")}))},children:(0,w.jsx)(x.xv,{size:"200",weight:"bold",children:j._('Download image', 'unauth.mweb.related_pin.context_menu.link.download_image', 'Link to download image')})})})}):(0,w.jsx)(x.xu,{rounding:2,paddingX:3,paddingY:2,role:"listitem",children:(0,w.jsx)(x.iP,{onTap:({event:e})=>{e.stopPropagation(),i(null),(0,_.My)("unauth.mweb.context_menu.save_image"),e&&B.saveButtonConfig.onSaveButtonClick(e)},children:(0,w.jsx)(x.xv,{size:"200",weight:"bold",children:j._('Save image', 'unauth.mweb.context_menu.link.save_image', 'Link to save image')})})}),["download","save","short_s","short_d"].includes(e.context)&&(0,w.jsx)(x.xu,{rounding:2,paddingX:3,paddingY:2,role:"listitem",children:(0,w.jsx)(x.iP,{onTap:({event:e})=>{e.stopPropagation(),i(null),t&&t(!0),(0,_.My)("unauth.mweb.context_menu.share_related_pin")},children:(0,w.jsx)(x.xv,{size:"200",weight:"bold",children:j._('Share image', 'unauth.mweb.context_menu.link.share_menu', 'Link to open the share menu')})})}),(0,w.jsx)(x.xu,{rounding:2,paddingX:3,paddingY:2,role:"listitem",children:(0,w.jsx)(x.iP,{onTap:({event:e})=>{e.stopPropagation(),i(null),(0,_.My)("unauth.mweb.context_menu.open_plp_new_tab"),window.open(`/pin/${n}/`)},children:(0,w.jsx)(x.xv,{size:"200",weight:"bold",children:j._('Open link in new tab', 'unauth.mweb.context_menu.link.plp_new_tab', 'Link to open the pin in a new tab')})})}),["download","save","main"].includes(e.context)&&(N||!(!L||!M))&&(0,w.jsx)(x.xu,{rounding:2,paddingX:3,paddingY:2,role:"listitem",children:(0,w.jsx)(x.iP,{onTap:()=>{(0,_.My)("unauth.mweb.context_menu.see_more_pins"),R.push(M?`${M}`:F)},children:L?(0,w.jsx)(x.xv,{size:"200",weight:"bold",lineClamp:2,children:(0,m.nk)(j._('See more ideas about {{levelOneInterestName}}', 'unauth.mweb.context_menu.link.see_more_ideas.l1', 'Link to see similar pins'),{levelOneInterestName:L})}):(0,w.jsx)(x.xv,{size:"200",weight:"bold",lineClamp:2,children:(0,m.nk)(j._('See more ideas about {{interestTag}}', 'unauth.mweb.context_menu.link.see_more_ideas.interest_tag', 'Link to see similar pins'),{interestTag:N})})})}),["download","save","main"].includes(e.context)&&!(!S||!b)&&(0,w.jsx)(x.xu,{rounding:2,paddingX:3,paddingY:2,role:"listitem",children:(0,w.jsx)(x.iP,{onTap:()=>{(0,_.My)("unauth.mweb.context_menu.more_from_creator"),R.push(`/${b}/`)},children:(0,w.jsx)(x.xv,{size:"200",weight:"bold",lineClamp:2,children:(0,m.nk)(j._('See more from {{full_name}}', 'unauth.context_menu.link.more_from_creator', 'Link to see more ideas from this creator'),{full_name:S})})})}),(0,w.jsx)(x.xu,{rounding:2,paddingX:3,paddingY:2,role:"listitem",children:(0,w.jsx)(x.iP,{onTap:({event:e})=>{e.stopPropagation(),i(null),(0,_.My)("unauth.mweb.context_menu.login_signup"),Z({reason:"CLICK_LOGIN_OR_SIGNUP",attributionLabel:"tap_unauth_context_menu_login_signup"})},children:(0,w.jsx)(x.xv,{size:"200",weight:"bold",children:j._('Log in or sign up for more', 'unauth.mweb.context_menu.link.login_signup', 'Link to log in or sign up')})})})]}):null}function k({graphqlRef:e,pinId:t,...i}){var n,o,r,a,s;const l=(0,b.useFragment)(T,e),c=(0,u.Z)(l);let d;var p,h;(d=null!=l&&l.nativeCreator?l.nativeCreator:null!=l&&l.linkDomain?l.linkDomain.officialUser:(null==l?void 0:l.originPinner)||(null==l?void 0:l.pinner),d&&"string"!=typeof d)||(d=null!==(p=null==l||null===(h=l.linkDomain)||void 0===h?void 0:h.officialUser)&&void 0!==p?p:null==l?void 0:l.pinner);const m=(null==l?void 0:l.gridTitle)||(null==l?void 0:l.closeupUnifiedDescription),_=null==l?void 0:l.imageSignature;return(0,w.jsx)(I,{...i,embedSrc:(null==l?void 0:l.embed)&&l.embed.src,embedType:(null==l?void 0:l.embed)&&l.embed.type,images:c,sourceUserUsername:null===(n=d)||void 0===n?void 0:n.username,sourceUserFullname:null===(o=d)||void 0===o?void 0:o.fullName,pinDownloadFilename:m,pinImageSignature:_,pinJoinVisualAnnotation:null==l||null===(r=l.pinJoin)||void 0===r?void 0:r.visualAnnotation,pinJoinSeoBreadcrumbName:(null==l||null===(a=l.pinJoin)||void 0===a?void 0:a.seoBreadcrumbs)&&(l.pinJoin.seoBreadcrumbs.length>0?l.pinJoin.seoBreadcrumbs[0].name:null),pinJoinSeoBreadcrumbUrl:(null==l||null===(s=l.pinJoin)||void 0===s?void 0:s.seoBreadcrumbs)&&(l.pinJoin.seoBreadcrumbs.length>0?l.pinJoin.seoBreadcrumbs[0].url:null),pinId:t})}function E({graphqlRef:e,pinId:t,...i}){var n,o,r,a,s,l;const c=(0,f.S6)()(t),d=null==c?void 0:c.pinner;let u=(0,h.wS)(c);var p,m;u&&"string"!=typeof u||(u=null!==(p=null==c||null===(m=c.link_domain)||void 0===m?void 0:m.official_user)&&void 0!==p?p:d);const{full_name:_,username:g}=null!==(n=u)&&void 0!==n?n:{},v=(null==c?void 0:c.grid_title)||(null==c?void 0:c.closeup_unified_description),y=null==c?void 0:c.image_signature;return(0,w.jsx)(I,{...i,embedSrc:null==c||null===(o=c.embed)||void 0===o?void 0:o.src,embedType:null==c||null===(r=c.embed)||void 0===r?void 0:r.type,images:null==c?void 0:c.images,sourceUserUsername:_,sourceUserFullname:g,pinDownloadFilename:v,pinImageSignature:y,pinJoinVisualAnnotation:null==c||null===(a=c.pin_join)||void 0===a?void 0:a.visual_annotation,pinJoinSeoBreadcrumbName:(null==c||null===(s=c.pin_join)||void 0===s?void 0:s.seo_breadcrumbs)&&(c.pin_join.seo_breadcrumbs.length>0?c.pin_join.seo_breadcrumbs[0].name:null),pinJoinSeoBreadcrumbUrl:(null==c||null===(l=c.pin_join)||void 0===l?void 0:l.seo_breadcrumbs)&&(c.pin_join.seo_breadcrumbs.length>0?c.pin_join.seo_breadcrumbs[0].url:null),pinId:t})}function A(e){return e.graphqlRef?(0,w.jsx)(k,{...e}):(0,w.jsx)(E,{...e})}},893101:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(702664),o=i(172071),r=i(938917),a=i(436851),s=i(948376),l=i(50286),c=i(276775),d=i(780280),u=i(56390),p=i(622096),h=i(53987);const m=()=>{const{isBot:e}=(0,d.B)(),t=(0,c.useLocation)(),{userAgentPlatform:i,userAgent:m}=(0,n.useSelector)((e=>e.session)),_=(0,r.Z)(),g=(0,l.ml)();return!e&&!(g&&!_)&&!(0,s.Rp)({platform:i,userAgent:m})&&((0,h.uM)(t)||(0,h.am)(t))&&!(0,u.P)()&&!(e=>!!(0,a.d)(e)&&((0,p.qn)("ufausfiiab")||(o.Z.increment("unauth.floating_app_upsell.suppress_for_instagram_in_app_browser"),(0,p.Nh)("ufausfiiab","1")),!0))(m)}},116674:(e,t,i)=>{i.d(t,{X:()=>d,f:()=>c});var n=i(667294);function o(e=null,t){switch(t.type){case"REPORT_CONTENT_SHOW":return{id:t.payload.id,isProduct:t.payload.isProduct,isPromoted:t.payload.isPromoted,videoDuration:t.payload.videoDuration,viewParameter:t.payload.viewParameter,viewType:t.payload.viewType,type:t.payload.type};case"REPORT_CONTENT_DISMISS":return null;default:return e}}var r=i(425288),a=i(623568),s=i(785893);const{Provider:l,useHook:c}=(0,r.Z)("ReportData");function d({children:e}){const[t,i]=(0,n.useReducer)(o,null),r=(0,n.useCallback)((()=>i({type:"REPORT_CONTENT_DISMISS"})),[]),c=(0,n.useCallback)(((e,t,n)=>i({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:n,type:"aggregatedComment"}})),[]),d=(0,n.useCallback)(((e,t,n)=>i({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:n,type:"pin"}})),[]),u=(0,n.useCallback)(((e,t,n)=>{const{id:o,videos:r}=e,s=(0,a.VX)(e),l=(0,a.jL)(e);let c;if((0,a.iR)(r)&&r){const{video_list:e={}}=r,t=e[Object.keys(e)[0]];c=t&&t.duration}i({type:"REPORT_CONTENT_SHOW",payload:{id:o,isProduct:s,isPromoted:l,videoDuration:c,viewParameter:t,viewType:n,type:"pin"}})}),[]),p=(0,n.useMemo)((()=>({reportData:t,dismiss:r,reportComment:c,reportImage:d,reportPin:u})),[t,r,c,d,u]);return(0,s.jsx)(l,{value:p,children:e})}},862193:(e,t,i)=>{i.d(t,{Z:()=>s});var n,o=i(667294),r=i(167912);const a=void 0!==n?n:n=i(569772),s=e=>{var t;const i=(0,r.useFragment)(a,e),n=null==i||null===(t=i.pinJoin)||void 0===t?void 0:t.annotationsWithLinksArray;return(0,o.useMemo)((()=>null==n?void 0:n.reduce(((e,t)=>(t.name&&(e[t.name]={name:t.name,url:t.url}),e)),{})),[n])}},491563:(e,t,i)=>{i.d(t,{Z:()=>w});var n=i(667294),o=i(702664),r=i(116303),a=i(815613),s=i(149230),l=i(898781),c=i(883119),d=i(785893);const u={__style:{backgroundColor:"rgba(0, 0, 0, 0.04)"}},p=({height:e,image:t,width:i})=>{var n,o,r;const a=(0,l.ZP)();return(0,d.jsx)(c.xu,{dangerouslySetInlineStyle:{__style:{borderRight:"1px solid white"}},children:t?(0,d.jsxs)(c.xu,{position:"relative",children:[(0,d.jsx)(c.GH,{width:i,height:e,contentAspectRatio:"number"==typeof t.height&&"number"==typeof t.width?t.width/t.height:1,children:(0,d.jsx)(c.Ee,{alt:a._('pin image', 'alt text for pin image', 'alt text for pin image'),color:t.dominant_color||void 0,naturalWidth:null!==(n=t.width)&&void 0!==n?n:1,naturalHeight:null!==(o=t.height)&&void 0!==o?o:1,src:null!==(r=t.url)&&void 0!==r?r:""})}),(0,d.jsx)(c.xu,{dangerouslySetInlineStyle:u,height:e,width:i,position:"absolute",top:!0,left:!0})]}):(0,d.jsx)(c.xu,{color:"secondary",width:i,height:e})})};var h=i(112690),m=i(892819),_=i(865673),g=i(57791),v=i(349700),f=i(698330),y=i(780280),x=i(861411),b=i(461773);function w({action:e,auxData:t,isPinnerAuthorityHero:i=!1,userSearchRepStyle:u=!1,onFollowUser:w,onUnfollowUser:P,userId:S,userPins:T,viewParameter:I,viewType:k,truncateName:E=!1}){const A=(0,l.ZP)(),C=(0,m.Z)(),j=(0,o.useDispatch)(),{locale:R}=(0,y.B)(),D=(0,h.Z)(),[O,L]=(0,n.useState)(u?window.innerWidth-16:null),M=(0,f.mN)()(S);if(!M)return null;const{contextual_pin_image_urls:N,explicitly_followed_by_me:z,follower_count:F=0,full_name:Z,image_medium_url:B,is_verified_merchant:U,recent_pin_images:H,username:V,verified_identity:W}=M,$=e=>O?(O-(e-1))/e:0,G=u?1.6*$(4):117,K=(null==T?void 0:T.map((e=>{var t;return null===(t=e.images)||void 0===t?void 0:t["236x"]})))||[],q=(null==H?void 0:H["222x"])||(null==H?void 0:H["192x"])||[];let Y=(null==N?void 0:N["222x"])||(null==N?void 0:N["192x"])||[];i&&0===Y.length&&(Y=q);const X=u&&Y.length<=0;let J=u?Y.concat(q).slice(0,4):K.concat(q).slice(0,2);0===J.length&&(J=[void 0,void 0]);const Q=!X&&(O?(0,d.jsx)(c.zd,{rounding:4,children:(0,d.jsx)(c.kC,{children:J.map(((e,t)=>(0,d.jsx)(p,{height:G,image:e,width:$(J.length)},`pinImage-${t}`)))})}):(0,d.jsx)(c.xu,{height:G,ref:e=>{e&&L(e.offsetWidth)},width:"100%"})),ee=e=>(0,d.jsx)(c.kC,{justifyContent:"center",children:(0,d.jsx)(c.xu,{marginTop:e,height:60,width:60,children:(0,d.jsx)(r.Z,{outline:!0,name:null!=Z?Z:"",src:null!=B?B:""})})}),te=e=>(0,d.jsxs)(c.kC,{direction:"column",gap:{row:0,column:1},alignItems:e,children:[(0,d.jsx)(c.kC,{alignItems:"stretch",maxWidth:(u?(O||0)/2:O)||void 0,children:(0,d.jsx)(c.xv,{align:e,weight:"bold",lineClamp:E?1:void 0,children:U||null!=W&&W.verified?(0,d.jsx)(_.Z,{badgeSize:"md",badgeSpacing:2,fullName:null!=Z?Z:"",verifiedType:U?"verifiedMerchant":"verifiedIdentity",truncate:E}):Z})}),(0,d.jsx)(c.xv,{inline:!0,size:"100",align:e,children:(0,v.nk)(A.ngettext('{{followers}} follower', '{{followers}} followers', F, 'PinnerAuthority.followersCount', 'Count of a user\'s followers'),{followers:C(R,F,{shortform:!0})})})]}),ie=(0,d.jsx)(c.kC,{justifyContent:"center",children:e&&e.url?(0,d.jsx)(c.zx,{role:"link",accessibilityLabel:e.text,color:"gray",size:"lg",text:e.text,href:e.url,onClick:()=>{D({event_type:9029,object_id_str:S,view_type:k,view_parameter:I,aux_data:t})},rel:(0,s.Z)({url:e.url})?"nofollow":void 0,target:(0,s.Z)({url:e.url})?"blank":void 0}):(0,d.jsx)(a.Z,{id:S,isSecondaryButton:!0,isFollowed:z,onFollow:e=>{w&&w(),j((0,b.ZN)(e))},onUnfollow:e=>{P&&P(),j((0,b.fv)(e))},size:"lg",followEventType:45,unfollowEventType:46,viewParameter:I,viewType:k})});return(0,d.jsx)(x.Cy,{loggingId:S,objectIdStr:S,slotIndex:0,viewParameter:I,viewType:k,children:({impressionTrackerRef:e})=>(0,d.jsx)(c.xu,{ref:e,padding:1,marginBottom:6,"data-test-id":"user-rep",children:(0,d.jsx)(g.MZ,{to:`/${V}/`,onTouch:()=>{D({event_type:43,object_id_str:S,view_parameter:I,view_type:k})},children:(0,d.jsxs)(c.kC,{direction:"column",gap:{row:0,column:2},width:"100%",children:[Q,u?(0,d.jsx)(c.xu,{width:"100%",children:(0,d.jsxs)(c.kC,{justifyContent:"between",alignItems:"center",children:[(0,d.jsxs)(c.kC,{alignItems:"center",gap:{row:2,column:0},children:[ee(),te("start")]}),ie]})}):(0,d.jsxs)(c.kC,{direction:"column",gap:{row:0,column:2},children:[ee(-10),te("center"),ie]})]})})})})}},865673:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294),o=i(512176),r=i(883119),a=i(785893);const s=function({badgeSize:e,badgeSpacing:t,fullName:i,verifiedType:s,truncate:l=!1}){const c=i.split(" "),d=c.slice(0,c.length-1).join(" "),u=" ".concat(c[c.length-1]);return l?(0,a.jsxs)(r.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,a.jsx)(r.xv,{lineClamp:1,weight:"bold",children:i}),(0,a.jsx)(r.xu,{flex:"none",position:"relative",dangerouslySetInlineStyle:{__style:{top:t}},paddingX:1,children:(0,a.jsx)(o.Z,{isVerifiedMerchant:"verifiedMerchant"===s,size:e,showVerifiedIdentity:"verifiedIdentity"===s})})]}):(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)("span",{children:d}),(0,a.jsxs)("span",{style:{whiteSpace:"nowrap"},children:[u," ",(0,a.jsx)(r.xu,{display:"inlineBlock",flex:"none",position:"relative",dangerouslySetInlineStyle:{__style:{top:t}},children:(0,a.jsx)(o.Z,{isVerifiedMerchant:"verifiedMerchant"===s,size:e,showVerifiedIdentity:"verifiedIdentity"===s})})]})]})}},152028:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(81226),o=i(898781),r=i(883119),a=i(785893);function s({duration:e}){const t=(0,o.ZP)();return(0,a.jsxs)(r.xu,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:24,justifyContent:"center",paddingX:2,rounding:"pill",children:[(0,a.jsx)(r.JO,{accessibilityLabel:t._('Video camera icon', 'Video camera indicator icon for a Pin', 'Video camera indicator icon for a Pin'),color:"light",icon:"video-camera"}),(0,a.jsx)(r.xu,{marginStart:1,children:(0,a.jsx)(r.xv,{color:"inverse",size:"100",lineClamp:1,children:(0,n.Z)(e)})})]})}},926749:(e,t,i)=>{i.d(t,{ZP:()=>S});var n=i(667294),o=i(23279),r=i.n(o),a=i(722767);function s(e){const{eventData:{videoEvent:{videoDuration:t,startTime:i,endTime:n,videoStartTime:o,videoEndTime:r,isAudible:a,height:s,width:l,playbackState:c,quartile:d,quartilePercentValue:u,windowHeight:p,windowWidth:h,viewability:m}},component:_,objectId:g,view:v,viewParameter:f,...y}=e;return{component:_,object_id_str:g,view_type:v,view_parameter:f,aux_data:{...y},event_data:{videoEventData:{videoDuration:t,time:i,endTime:n,videoTime:o,endVideoTime:r,isAudible:a,height:s,width:l,playbackState:c,quartile:d,quartilePercentValue:u,windowHeight:p,windowWidth:h,viewability:m}}}}var l=i(121630),c=i(944546),d=i(407043),u=i(158103),p=i(883119),h=i(785893);function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const _=[0,.25,.5,.75,.95,.97],g=[0,.5,.8,.99,1],v="-64px 0px 0px 0px",f={rootMargin:v,threshold:g},y={rootMargin:v,threshold:c.iM},x=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3});function b(){return(new Date).getTime()}function w(e){return!!e.volume&&e.volume>0}class P extends n.Component{constructor(e){super(e),m(this,"videoWrapperRef",(0,n.createRef)()),m(this,"handleWindowResize",(()=>{if(!this.fullscreen){const e=this.getDimensions(),{height:t,width:i}=this.currentInterval;e.height!==t||e.width!==i?this.startNewInterval(e):(this.currentInterval.windowHeight=e.windowHeight,this.currentInterval.windowWidth=e.windowWidth)}})),m(this,"handlePlayheadDown",(({event:e})=>{const{onPlayheadDown:t}=this.props;this.setState({seeking:!0}),t&&t({event:e})})),m(this,"handlePlayheadUp",(({event:e})=>{const{onPlayheadUp:t}=this.props;this.setState({seeking:!1}),t&&t({event:e})})),m(this,"handleLoop",(()=>{this.videoTime=0})),m(this,"handleTimeChange",(e=>{const{seeking:t,ready:i}=this.state;if(!this.currentInterval.videoDuration)return;const n=1e3*e.time,o=function(e,t,i,n){if(e>t)return null;if(i<=0)return null;for(const o of n){const n=o*i;if(e<=n&&t>n)return o}return null}(this.videoTime,n,this.currentInterval.videoDuration,_);if("number"==typeof o&&this.props.playing&&!t&&i){const e=b();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*o),quartilePercentValue:o})}this.videoTime=n,this.props.onTimeChange&&this.props.onTimeChange(e)})),m(this,"handleDurationChange",(e=>{this.currentInterval.videoDuration=1e3*e.duration,this.props.onDurationChange&&this.props.onDurationChange(e)})),m(this,"handleReady",(e=>{const{ready:t}=this.state;t||this.setState({ready:!0}),this.props.onReady&&this.props.onReady(e)})),m(this,"handleEnded",(e=>{this.logFourthQuartileEvent(),this.props.loop&&(this.startNewInterval(),this.currentInterval.videoStartTime=0),this.props.onEnded&&this.props.onEnded(e)})),m(this,"handleVisibilityChange",((e,t)=>{if(0===e.length)return;const i=e.slice(-1)[0],n=function(e,t){for(let i=0;i<t.length;i+=1){const n=t[i],o=t[i+1];if(null==o)return n;if(n<=e&&e<o)return n}return null}(Number.parseFloat(i.intersectionRatio.toFixed(2)),g);"number"==typeof n&&(this.visible=n>=.5),null==n||n===this.currentInterval.viewability||this.fullscreen||(0===n?this.startNewInterval({viewability:n,playbackState:x.PAUSED}):this.startNewInterval({viewability:n}))})),m(this,"handleFullscreenChange",(({event:e,fullscreen:t})=>{if(t){const{height:e,width:t}=window.screen;this.startNewInterval({height:e,width:t,windowHeight:e,windowWidth:t})}else t||this.startNewInterval(this.getDimensions());this.fullscreen=t,this.props.onFullscreenChange&&this.props.onFullscreenChange({event:e,fullscreen:t})})),m(this,"handleClose",(()=>{this.startNewInterval()})),m(this,"handleContextMenu",(e=>{e.preventDefault()})),this.state={ready:!1,seeking:!1};const t=b();this.handleWindowResize=r()(this.handleWindowResize,1e3),this.currentInterval={videoDuration:0,startTime:t,endTime:t,videoStartTime:0,videoEndTime:0,isAudible:w(e),playbackState:this.getPlaybackState(e,this.state),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},this.videoTime=0,this.fullscreen=!1,this.visible=null}componentDidMount(){this.currentInterval={...this.currentInterval,...this.getDimensions()},window.addEventListener("resize",this.handleWindowResize),window.addEventListener("beforeunload",this.handleClose)}componentDidUpdate(e,t){const i={};w(e)&&!w(this.props)?i.isAudible=!1:!w(e)&&w(this.props)&&(i.isAudible=!0);const n=this.getPlaybackState(this.props,this.state);this.getPlaybackState(e,t)!==n&&(i.playbackState=n),Object.keys(i).length>0&&this.startNewInterval(i)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("beforeunload",this.handleClose),this.startNewInterval()}getPlaybackState(e,t){return t.ready?e.playing&&!t.seeking?x.PLAYING:x.PAUSED:x.LOADING}getDimensions(){let e,t;if(this.videoWrapperRef.current){const i=this.videoWrapperRef.current;i.clientHeight&&i.clientWidth&&(e=i.clientHeight,t=i.clientWidth)}return{height:e,width:t,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}logVideoEvent(e,t){const{closeupStoryPinViewability:i,contextLogData:n,logContextEvent:o}=this.props,{height:r,width:a,windowHeight:l,windowWidth:c,viewability:d,...u}=t;if(null!=r&&null!=a&&null!=l&&null!=c&&null!=d){const t={...u,height:r,width:a,windowHeight:l,windowWidth:c,viewability:i||d};o({event_type:e,...s({...n,view:this.fullscreen?108:n.view,eventData:{videoEvent:t}})})}}logFourthQuartileEvent(){const e=b();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:4,quartilePercentValue:1})}startNewInterval(e){const t=b();this.logVideoEvent(6904,{...this.currentInterval,endTime:t,videoEndTime:this.videoTime}),this.currentInterval={...this.currentInterval,...e,startTime:t,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1}}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:o,accessibilityProgressBarLabel:r,accessibilityUnmuteLabel:s,aspectRatio:c,backgroundColor:d,captions:m,contextLogData:_,controls:g,cropHeight:v,hlsConfig:x,inAdsDesktopVideoExperiment:b,isAutoPlay:w,loop:P,objectFit:S,onLoadedChange:T,onControlsPause:I,onControlsPlay:k,onSeek:E,onVolumeChange:A,playbackRate:C,playing:j,playsInline:R,poster:D,preload:O,rootMargin:L,src:M,surface:N,videoStartTime:z,volume:F}=this.props,{seeking:Z}=this.state,B=b?y:f;return void 0!==L&&(B.rootMargin=N?(0,l.e)(N):L),(0,h.jsx)(a.Z,{options:B,onVisibilityChange:this.handleVisibilityChange,children:(0,h.jsx)(p.xu,{ref:this.videoWrapperRef,onContextMenu:this.handleContextMenu,dangerouslySetInlineStyle:{__style:v?{display:"flex",alignItems:"center",height:`${v}px`}:{}},children:(0,h.jsx)(u.default,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:o,accessibilityProgressBarLabel:r,accessibilityUnmuteLabel:s,aspectRatio:v?236/v:c,backgroundColor:d,captions:m,contextLogData:_,controls:g,hlsConfig:x,isAutoPlay:w,loop:P,objectFit:S,onDurationChange:this.handleDurationChange,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onLoadedChange:T,onLoop:this.handleLoop,onControlsPause:I,onControlsPlay:k,onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onReady:this.handleReady,onSeek:E,onTimeChange:this.handleTimeChange,onVolumeChange:A,playbackRate:C,playing:!Z&&j,onPlay:()=>{},onPlayError:()=>{},playsInline:R,poster:D,preload:O,src:M,videoStartTime:z,visible:this.visible,volume:F})})})}}function S(e){const{logContextEvent:t}=(0,d.v)();return(0,h.jsx)(P,{...e,logContextEvent:t})}m(P,"defaultProps",p.nk.defaultProps)},158103:(e,t,i)=>{i.r(t),i.d(t,{VideoWrapper:()=>w,default:()=>P,getPlaylistSourceSrc:()=>b});var n=i(667294),o=i(19121),r=i(965900),a=i(407043),s=i(773285),l=i(226347),c=i(780280),d=i(883119),u=i(969315),p=i(179888),h=i(785893);function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _(e,t){if(!e||void 0===e)return"undefined";if("string"==typeof e){let i=e;if(t){const n="control"===t?"v3.pinimg.com":"v2.pinimg.com";i=e.replace("v.pinimg.com",n)}return i}if(Array.isArray(e)&&e[0].src){let i=e[0].src;if(t){const e="control"===t?"v3.pinimg.com":"v2.pinimg.com";i=i.replace("v.pinimg.com",e)}return i}return"unsupported_type_"+typeof e}class g extends n.Component{constructor(...e){super(...e),m(this,"state",{canPlayVideo:!1,playbackState:p.Cy.DEFAULT}),m(this,"errorRetryCount",2),m(this,"hasSegmentStarted",!1),m(this,"hasPlaybackStarted",!1),m(this,"hasVideoSessionStarted",!1),m(this,"hasVideoSessionEnded",!1),m(this,"lastStallTime",null),m(this,"lastPauseTime",null),m(this,"logSessionStartOnNextPlay",!1),m(this,"playerId",""),m(this,"videoSessionId",""),m(this,"videoVisibleTime",null),m(this,"playbackPerformance",{canPlayTime:null,detailedErrors:"",errorCode:0,errorName:"",errorReason:"",hasFatalError:!1,loadStartTime:null,numberOfStalls:0,numberOfSeeks:0,playbackStartTimestamp:null,segments:[],srcString:_(this.props.src,this.props.quicExpGroup),totalStallDurationMs:0,totalPauseDurationMs:0}),m(this,"componentDidMount",(()=>{const{contextLogData:e={},playing:t}=this.props,{is_closeup_video:i=!1}=e;(0,u.tE)("videoMounted",!1,i),t&&(this.videoVisibleTime=new Date,this.logPlaybackPerformance(p.DR,{initiator:"mount"}))})),m(this,"componentDidUpdate",(e=>{const{playing:t,visible:i,appInFocus:n}=this.props;e.appInFocus&&!n&&(this.logPlaybackPerformance(p.$f,{initiator:"update"}),this.logSessionStartOnNextPlay=!0),e.visible&&!1===i&&(this.logSessionStartOnNextPlay=!1,this.updatePauseDuration(),this.logPlaybackPerformance(p.$f,{initiator:"update"})),!1===e.visible&&!0===i&&(this.videoVisibleTime=this.videoVisibleTime||new Date,t?(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(p.DR,{initiator:"update"})):this.logSessionStartOnNextPlay=!0),t&&n&&this.logSessionStartOnNextPlay&&(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(p.DR,{initiator:"update"}),this.logSessionStartOnNextPlay=!1)})),m(this,"addSegment",(()=>{const{canPlayTime:e,loadStartTime:t,segments:i,srcString:n}=this.playbackPerformance;let o=-1;e&&t&&0===i.length&&(o=e>t?e-t:0);const r=this.videoPlayerRef&&this.videoPlayerRef.video,a={indicatedKbps:-1,duration:r&&r.duration*p.gJ||-1,lastStartPlayTime:null,level:-1,numServerAddressChange:-1,observedKbps:-1,playbackStartDate:null,serverAddress:"",sourceWidth:-1,sourceHeight:-1,startupTimeMs:o,switchBitrateKbps:-1,uri:n,viewportWidth:r&&r.clientWidth||-1,viewportHeight:r&&r.clientHeight||-1,watchedDurationMs:0};i.push(a)})),m(this,"getCurrentVideoTime",(()=>this.videoPlayerRef&&this.videoPlayerRef.video?this.videoPlayerRef.video.currentTime*p.gJ:0)),m(this,"getVideoResourceTiming",(()=>{var e,t;if(null!==(e=window)&&void 0!==e&&null!==(t=e.performance)&&void 0!==t&&t.getEntriesByName&&this.playbackPerformance.srcString){const e=window.performance.getEntriesByName(this.playbackPerformance.srcString);return e.length>0&&e[0]||null}return null})),m(this,"handleCanPlayVideo",(e=>{const{contextLogData:t={},onReady:i,playing:n}=this.props,{is_closeup_video:o=!1}=t,{canPlayVideo:r}=this.state;(0,u.tE)("handleCanPlayVideo",!1,o,{firstCanPlayEvent:!r,playing:n}),this.playbackPerformance.hasFatalError=!1,r||(this.playbackPerformance.canPlayTime=new Date),this.setState({canPlayVideo:!0}),i&&i(e)})),m(this,"handleEnded",(e=>{const{loop:t,onEnded:i}=this.props,{segments:n}=this.playbackPerformance,o=n&&n[n.length-1];t&&this.videoPlayerRef&&this.videoPlayerRef.video?(this.updateWatchDurationForCurrentSegment(),o&&(o.lastStartPlayTime=0),this.hasSegmentStarted=!1):t||this.logPlaybackPerformance(p.$f,{initiator:"videoEnded",loop:t}),this.setState({playbackState:p.Cy.ENDED}),i&&i(e)})),m(this,"handleError",(()=>{var e,t,i,n,o,r,a,s;const{contextLogData:l={}}=this.props,{is_closeup_video:c=!1}=l,d=this.videoPlayerRef&&this.videoPlayerRef.video;(null==d||null===(e=d.error)||void 0===e?void 0:e.code)!==p.lG.MEDIA_ERR_ABORTED&&(this.playbackPerformance.hasFatalError=!0),this.playbackPerformance.detailedErrors+=`${this.playbackPerformance.detailedErrors.length>0?", ":""}${(null==d||null===(t=d.error)||void 0===t?void 0:t.message)||""}`,this.playbackPerformance.errorCode=(null==d||null===(i=d.error)||void 0===i?void 0:i.code)||0,this.playbackPerformance.errorName=(null==d||null===(n=d.error)||void 0===n||null===(o=n.message)||void 0===o?void 0:o.slice(0,100))||"unknown",this.playbackPerformance.errorReason=(null==d||null===(r=d.error)||void 0===r||null===(a=r.message)||void 0===a?void 0:a.slice(0,100))||"unknown";const h={errorName:this.playbackPerformance.errorCode,errorReason:this.playbackPerformance.errorName,errorRetryCount:this.errorRetryCount,playbackState:this.state.playbackState,networkState:(null==d?void 0:d.networkState)||"unknown"};switch((0,u.tE)("fatalError",!1,c,h),null==d||null===(s=d.error)||void 0===s?void 0:s.code){case p.lG.MEDIA_ERR_ABORTED:break;case p.lG.MEDIA_ERR_NETWORK:case p.lG.MEDIA_ERR_DECODE:case p.lG.MEDIA_ERR_SRC_NOT_SUPPORTED:default:this.errorRetryCount>0&&(null==d||d.load(),this.errorRetryCount-=1)}this.updateWatchDurationForCurrentSegment(),this.setState({playbackState:p.Cy.FAILED})})),m(this,"handleLoadedMetadata",(()=>{this.setState({playbackState:p.Cy.LOADED_METADATA})})),m(this,"handleLoadStart",(()=>{this.playbackPerformance.loadStartTime=new Date,this.setState({playbackState:p.Cy.LOAD_START})})),m(this,"handleLoadedData",(()=>{this.setState({playbackState:p.Cy.LOADED_DATA})})),m(this,"handlePlaying",(()=>{this.playbackPerformance.hasFatalError=!1,this.setPlaybackStartTime(),this.hasSegmentStarted||this.addSegment(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.updateStallDuration(),this.updatePauseDuration(),this.setState({playbackState:p.Cy.PLAYING}),this.props.setSeekTime&&this.props.setSeekTime(void 0)})),m(this,"handleUserPause",(e=>{const{onControlsPause:t}=this.props;this.lastPauseTime=new Date,t&&t(e)})),m(this,"handleVideoPause",(()=>{this.state.playbackState!==p.Cy.STALLING&&this.state.playbackState!==p.Cy.SEEKING&&(this.updateWatchDurationForCurrentSegment(),this.lastPauseTime||this.updateStallDuration()),this.setState({playbackState:p.Cy.PAUSED})})),m(this,"handleSeeking",(()=>{this.playbackPerformance.numberOfSeeks+=1;const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&(t.lastStartPlayTime=null),this.state.playbackState!==p.Cy.ENDED&&this.setState({playbackState:p.Cy.SEEKING})})),m(this,"handleStalled",(()=>{null===this.lastStallTime&&this.state.playbackState!==p.Cy.ENDED&&(this.lastStallTime=new Date,this.playbackPerformance.numberOfStalls+=1,this.setState({playbackState:p.Cy.STALLING}))})),m(this,"handleTimeUpdate",(e=>{const{onTimeChange:t}=this.props;t&&t(e),this.state.playbackState===p.Cy.PLAYING&&(this.updateWatchDurationForCurrentSegment(),this.setLastSegmentStartPlayTime())})),m(this,"resetPlaybackMetrics",(()=>{this.hasSegmentStarted=!0,this.hasPlaybackStarted=!1,this.hasVideoSessionStarted=!1,this.hasVideoSessionEnded=!0,this.lastStallTime=null,this.lastPauseTime=null,this.videoSessionId="",this.videoVisibleTime=null,this.logSessionStartOnNextPlay=!1;const e={...this.playbackPerformance.segments[this.playbackPerformance.segments.length-1],lastStartPlayTime:null,playbackStartDate:null,watchedDurationMs:0};this.playbackPerformance.detailedErrors="",this.playbackPerformance.errorCode=0,this.playbackPerformance.errorName="",this.playbackPerformance.errorReason="",this.playbackPerformance.hasFatalError=!1,this.playbackPerformance.numberOfStalls=0,this.playbackPerformance.numberOfSeeks=0,this.playbackPerformance.playbackStartTimestamp=null,this.playbackPerformance.totalStallDurationMs=0,this.playbackPerformance.segments=[e]})),m(this,"setLastSegmentStartPlayTime",(()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.lastStartPlayTime&&(t.lastStartPlayTime=this.getCurrentVideoTime())})),m(this,"setLastSegmentPlaybackStartDate",(()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1];t&&null===t.playbackStartDate&&(t.playbackStartDate=Date.now())})),m(this,"setPlaybackStartTime",(()=>{this.hasPlaybackStarted||(this.playbackPerformance.playbackStartTimestamp=Date.now(),this.hasPlaybackStarted=!0)})),m(this,"setVideoPlayerRef",(e=>{const{setVideoRef:t}=this.props;if(e&&(t&&t(e),this.videoPlayerRef=e,this.videoPlayerRef.video)){const e=this.videoPlayerRef.video;e.addEventListener("loadedmetadata",this.handleLoadedMetadata),e.addEventListener("loadeddata",this.handleLoadedData),e.addEventListener("pause",this.handleVideoPause),e.readyState>=3&&(this.setState({canPlayVideo:!0}),this.playbackPerformance.canPlayTime=new Date)}})),m(this,"updateStallDuration",(()=>{if(null!==this.lastStallTime){const e=this.lastStallTime;this.playbackPerformance.totalStallDurationMs+=new Date-e,this.lastStallTime=null}})),m(this,"updatePauseDuration",(()=>{if(null!==this.lastPauseTime){const e=this.lastPauseTime;this.playbackPerformance.totalPauseDurationMs+=new Date-e,this.lastPauseTime=null}})),m(this,"updateWatchDurationForCurrentSegment",(()=>{const{segments:e}=this.playbackPerformance,t=e&&e[e.length-1],i=t?t.lastStartPlayTime:null,n=this.getCurrentVideoTime();if(t&&null!==i&&"number"==typeof n&&"number"==typeof i){const e=n-i;e>0&&(t.watchedDurationMs+=e,t.lastStartPlayTime=null)}})),m(this,"logPlaybackPerformance",((e,t)=>{const{contextLogData:i={},userId:n,isAutoPlay:o,logContextEvent:r}=this.props,{is_closeup_video:a=!1}=i,{canPlayTime:s,detailedErrors:l,errorCode:c,errorName:d,errorReason:h,hasFatalError:m,loadStartTime:_,totalPauseDurationMs:g,totalStallDurationMs:v,numberOfStalls:f,numberOfSeeks:y,playbackStartTimestamp:x,segments:b,srcString:w}=this.playbackPerformance,P=this.videoPlayerRef&&this.videoPlayerRef.video,S=e===p.DR,T=S&&!this.hasVideoSessionStarted,I=!S&&!this.hasVideoSessionEnded&&this.hasVideoSessionStarted;if(P&&(T||I)){var k;let T=-1;s&&_&&(T=s>_?s-_:0);let I=-1;s&&this.videoVisibleTime&&(I=s>this.videoVisibleTime?s-this.videoVisibleTime:0),S&&(this.videoSessionId=(0,p.Y7)(n),this.playerId=this.playerId||(0,p.EB)());const E=this.getVideoResourceTiming(),A={averageVideoKbps:-1,autoplaying:o,detailedErrors:l,downloadedKiloBytes:"number"==typeof(null==E?void 0:E.decodedBodySize)&&E.decodedBodySize/p.Fm||0,errorCode:c,errorName:d,errorReason:h,fatalError:m,isCellular:!1,nativeVideoDurationMs:P.duration*p.gJ||-1,numberOfStalls:f,numberOfSeeks:y,overallPausedDurationMs:g,overallBufferDurationMs:v,overallWatchedDurationMs:-1,rebufferRate:-1,playbackSessionId:this.videoSessionId,playbackStartTimestamp:x||-1,segments:[],sessionMark:e,screenPixelScale:null!==(k=window)&&void 0!==k&&k.devicePixelRatio?window.devicePixelRatio:-1,startupPlayerWidth:P.clientWidth,startupPlayerHeight:P.clientHeight,startupTimeMs:T,startupLatencyMs:I,startupVariantKbps:-1,startupVariantWatchedDurationMs:-1,startupVariantWidth:P.videoWidth,startupVariantHeight:P.videoHeight,videoUrl:w};if(!S){this.updateWatchDurationForCurrentSegment(),this.updateStallDuration();const e=b.reduce(((e,t)=>e+(t.watchedDurationMs||0)),0);A.overallWatchedDurationMs=e,A.startupVariantWatchedDurationMs=e,A.segments=this.playbackPerformance.segments,0===e?(A.errorName="invalid_watch_duration",A.rebufferRate=-1):A.rebufferRate=v/e}(0,u.ZP)(A,!1,a,{playbackState:this.state.playbackState,...t});const{view:C,viewParameter:j,component:R,element:D,objectId:O,...L}=i;r({event_type:3606,event_data:{videoPerformanceData:A},view_type:C,view_parameter:j,component:R,element:D,object_id_str:O,aux_data:{...L,is_closeup_video:a,playback_session_id:this.videoSessionId}}),S?(this.hasVideoSessionStarted=!0,this.hasVideoSessionEnded=!1):this.resetPlaybackMetrics(),(0,u.tE)(S?"sessionStart":"sessionEnd",!1,a,{playbackState:this.state.playbackState,...t})}}))}componentWillUnmount(){const{loop:e}=this.props;this.updatePauseDuration(),this.logPlaybackPerformance(p.$f,{initiator:"unmount",loop:e})}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:o,accessibilityProgressBarLabel:r,accessibilityUnmuteLabel:a,aspectRatio:s,captions:l,controls:c,loop:u,loopOverride:p,objectFit:m,onDurationChange:g,onFullscreenChange:v,onLoadedChange:f,onControlsPlay:y,onPlayheadDown:x,onPlayheadUp:b,onSeek:w,onVolumeChange:P,playbackRate:S,playing:T,playsInline:I,poster:k,preload:E,src:A,videoStartTime:C,volume:j}=this.props,{canPlayVideo:R}=this.state;return(0,h.jsx)(d.nk,{autoplay:R&&T,accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:o,accessibilityProgressBarLabel:r,accessibilityUnmuteLabel:a,aspectRatio:s,captions:l,controls:c,loop:void 0===p?u:p,objectFit:m,onDurationChange:g,onEnded:this.handleEnded,onError:this.handleError,onFullscreenChange:v,onLoadedChange:f,onLoadStart:this.handleLoadStart,onControlsPause:this.handleUserPause,onControlsPlay:y,onPlaying:this.handlePlaying,onPlayheadDown:x,onPlayheadUp:b,onReady:this.handleCanPlayVideo,onSeek:w,onSeeking:this.handleSeeking,onStalled:this.handleStalled,onTimeChange:this.handleTimeUpdate,onVolumeChange:P,onWaiting:this.handleStalled,playbackRate:S,onPlay:()=>{},onPlayError:()=>{},playing:R&&T,playsInline:I,poster:k,preload:E,ref:this.setVideoPlayerRef,src:_(A,this.props.quicExpGroup),startTime:C||void 0,volume:j})}}const v=(0,n.memo)((function(e){const{logContextEvent:t}=(0,a.v)(),{country:i,isAuthenticated:n,isBot:d,isSocialBot:p,unauthId:m,userAgent:_}=(0,c.B)(),{browserName:v,browserVersion:f,isMobile:y}=_,{contextLogData:x={}}=e,{is_closeup_video:b=!1,view:w,viewParameter:P}=x,{appUI:{appInFocus:S}}=(0,r.I)(),{checkExperiment:T}=(0,s.F)(),{updateSeekTime:I}=(0,l.RC)();let k=null;n&&(k=T("web_video_quic").group.length?T("web_video_quic").group:null);const E=(0,o.Z)(),A={browserName:v,browserVersion:f,country:i,isAuthenticated:n,isBot:d,is_closeup_video:b,isMobile:y,isSocialBot:p,view:w,viewParameter:P};return(0,u.r$)(A),(0,h.jsx)(g,{...e,userId:E.id||m,appInFocus:S,quicExpGroup:k,logContextEvent:t,setSeekTime:I})}));var f=i(562559),y=i(366284);function x(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const b=e=>{if(Array.isArray(e)){const t=e.find((e=>"video/m3u8"===e.type));return t?t.src:void 0}return RegExp("m3u8$").test(e)?e:void 0};class w extends n.PureComponent{constructor(e){super(e),x(this,"componentDidUpdate",((e,t)=>{var i;e.videoStartTime&&this.props.videoStartTime&&e.videoStartTime<this.props.videoStartTime&&null!==(i=this.videoPlayerRef)&&void 0!==i&&i.video&&(this.videoPlayerRef.video.currentTime=this.props.videoStartTime)})),x(this,"setVideoPlayerRef",(e=>{e&&(this.videoPlayerRef=e)})),x(this,"handleOnEnded",(({event:e})=>{const{loop:t,onLoop:i,onEnded:n}=this.props;n&&(n({event:e}),this.videoPlayerRef&&this.videoPlayerRef.video&&t&&(this.videoPlayerRef.video.play(),i&&i()))}));const t=b(e.src);this.state={useHlsVideo:!e.preferMp4&&!(0,y.G6)(e.requestContext.userAgent.browserName)&&!!t}}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:o,accessibilityProgressBarLabel:r,accessibilityUnmuteLabel:a,aspectRatio:s,appInFocus:l,backgroundColor:c,captions:d,contextLogData:u,controls:p,hlsConfig:m,isAutoPlay:_,loop:g,objectFit:y,onDurationChange:x,onEnded:w,onFullscreenChange:P,onLoadedChange:S,onControlsPause:T,onControlsPlay:I,onPlayheadDown:k,onPlayheadUp:E,onReady:A,onSeek:C,onTimeChange:j,onVolumeChange:R,playbackRate:D,playing:O,playsInline:L,poster:M,preferMp4:N,preload:z,src:F,videoStartTime:Z,visible:B,volume:U}=this.props,{useHlsVideo:H}=this.state,V=b(F),W={...m,startPosition:Z||-1},$=!w&&g;return H&&V?(0,h.jsx)(f.Z,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:o,accessibilityProgressBarLabel:r,accessibilityUnmuteLabel:a,aspectRatio:s,appInFocus:l,backgroundColor:c,captions:d,contextLogData:u,controls:p,hlsConfig:W,isAutoPlay:_,loop:g,loopOverride:$,onDurationChange:x,onEnded:this.handleOnEnded,onFullscreenChange:P,onLoadedChange:S,onControlsPause:T,onControlsPlay:I,onPlayheadDown:k,onPlayheadUp:E,onReady:A,onSeek:C,onTimeChange:j,onVolumeChange:R,playbackRate:D,onPlay:()=>{},onPlayError:()=>{},playing:O,playsInline:L,poster:M,preload:z,setVideoRef:this.setVideoPlayerRef,src:V,visible:B,volume:U}):(0,h.jsx)(v,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:o,accessibilityProgressBarLabel:r,accessibilityUnmuteLabel:a,aspectRatio:s,captions:d,contextLogData:u,controls:p,isAutoPlay:_,loop:g,loopOverride:$,objectFit:y,onDurationChange:x,onEnded:this.handleOnEnded,onFullscreenChange:P,onLoadedChange:S,onControlsPause:T,onControlsPlay:I,onPlayheadDown:k,onPlayheadUp:E,onReady:A,onSeek:C,onTimeChange:j,onVolumeChange:R,playbackRate:D,onPlay:()=>{},onPlayError:()=>{},playing:O,playsInline:L,poster:M,preload:z,setVideoRef:this.setVideoPlayerRef,src:N?F:V||F,videoStartTime:Z,visible:B,volume:U})}}function P(e){const{appUI:{appInFocus:t}}=(0,r.I)(),i=(0,c.B)();return(0,h.jsx)(w,{...e,appInFocus:t,requestContext:i})}},944546:(e,t,i)=>{i.d(t,{HJ:()=>o,VS:()=>n,iM:()=>r});const n=2,o="V_HLSV3_MOBILE",r=[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2,.21,.22,.23,.24,.25,.26,.27,.28,.29,.3,.31,.32,.33,.34,.35,.36,.37,.38,.39,.4,.41,.42,.43,.44,.45,.46,.47,.48,.49,.5,.51,.52,.53,.54,.55,.56,.57,.58,.59,.6,.61,.62,.63,.64,.65,.66,.67,.68,.69,.7,.71,.72,.73,.74,.75,.76,.77,.78,.79,.8,.81,.82,.83,.84,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1]},619519:(e,t,i)=>{i.d(t,{Z:()=>d,e:()=>u});var n=i(667294),o=i(722767),r=i(655428),a=i(883119),s=i(606441),l=i(785893);function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class d extends n.PureComponent{constructor(...e){super(...e),c(this,"state",{isPlaying:!1,isVideoReady:!1,isVisibleForPlaying:!1,startLoading:!1}),c(this,"handleVisibilityChanged",(e=>{const{intersectionRatio:t}=e[0],{isPlaying:i,isVideoReady:n,startLoading:o}=this.state;t>=.8?(this.setState({isVisibleForPlaying:!0}),this.videoRef&&(o?n&&!i&&this.videoRef.play():(this.videoRef.load(),this.setState({startLoading:!0})))):(this.setState({isVisibleForPlaying:!1}),this.videoRef&&n&&this.videoRef.pause())})),c(this,"handleVideoPause",(()=>this.setState({isPlaying:!1}))),c(this,"handleVideoPlay",(()=>this.setState({isPlaying:!0}))),c(this,"getVideoRef",(e=>this.videoRef=e)),c(this,"setIsVideoReadyTrue",(()=>{this.setState({isVideoReady:!0}),this.videoRef&&!this.state.isPlaying&&this.state.isVisibleForPlaying&&this.videoRef.play()}))}render(){const{height:e,thumbnail:t,url:i,width:n,pinDescription:s,pinImageHeight:c,pinImageUrl:d,pinImageWidth:u}=this.props,p=(null!=e?e:1)/(null!=n?n:1);return i?(0,l.jsx)(o.Z,{options:{threshold:[0,.5,.8,1]},onVisibilityChange:this.handleVisibilityChanged,children:(0,l.jsx)(a.xu,{position:"relative",dangerouslySetInlineStyle:{__style:{paddingBottom:100*p+"%"}},children:(0,l.jsx)(a.xu,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,children:(0,l.jsx)("video",{height:"100%",muted:!0,onCanPlay:this.setIsVideoReadyTrue,onPause:this.handleVideoPause,onPlay:this.handleVideoPlay,playsInline:!0,poster:t,preload:"none",ref:this.getVideoRef,src:i,width:"100%"})})})}):(0,l.jsx)(a.xu,{position:"relative",dangerouslySetInlineStyle:{__style:{paddingBottom:"100%"}},children:(0,l.jsx)(r.Z,{description:s,imageUrl:d,imageHeight:c,imageWidth:u})})}}function u({pinId:e}){var t,i;const n=(0,s.N)(e);if(!n)return null;const o=n.images&&(n.images.orig||n.images["736x"]||n.images["290x"]||n.images["236x"]),{description:r}=n,{url:a,height:c,width:u}=null!=o?o:{},p=null===(t=n.videos)||void 0===t||null===(i=t.video_list)||void 0===i?void 0:i.V_720P,{height:h,thumbnail:m,url:_,width:g}=null!=p?p:{};return(0,l.jsx)(d,{height:h,thumbnail:m,url:_,width:g,pinDescription:r,pinImageUrl:a,pinImageHeight:c,pinImageWidth:u})}},294591:(e,t,i)=>{i.d(t,{Z:()=>Ve});var n=i(979736),o=i(667294),r=i(702664),a=i(427806),s=i(401412),l=i(834911),c=i(737022),d=i(542554),u=i(156637),p=i(280313),h=i(604077),m=i.n(h),_=i(777506),g=i.n(_),v=i(398789),f=i(898781),y=i(785893);function x({pin:e,url:t,viewParameter:i,closeupImageDims:n}){const o=(0,f.ZP)(),{dominant_color:r}=e,{closeupImageHeight:a,closeupImageWidth:s}=n;return(0,y.jsx)(v.Z,{alt:o._('Pin image', 'flashlight.cropper.closeupImage', 'Pin closeup image'),color:r||"#efefef",isFlashlightPage:!0,naturalHeight:a,naturalWidth:s,placeholder:t,showSpinner:!1,src:t,viewParameter:i})}var b=i(641696),w=i.n(b),P=i(105879),S=i.n(P),T=i(883119);const I=24,k=e=>{const{alt:t,src:i,top:n,left:o}=e;return(0,y.jsx)(T.xu,{position:"absolute",height:I,width:I,dangerouslySetInlineStyle:{__style:{top:n,left:o}},children:(0,y.jsx)(T.Ee,{alt:t,color:"transparent",naturalHeight:I,naturalWidth:I,src:i})})},E={backgroundColor:"#000000",opacity:"0.4"};function A({closeupImage:{url:e}={},closeupImageDims:t,cropArea:{x:i,y:n,w:r,h:a},disableBorder:s,disableHandles:l,onTouchStart:c,onTouchMove:d,onTouchEnd:u,pin:p,viewParameter:h}){const _=(0,f.ZP)(),{closeupImageWidth:v,closeupImageHeight:b}=t,P=Math.floor(b*n),I=Math.floor(v*i),A=Math.floor(b*a),C=Math.floor(v*r),j=I+C,R=P+A;return(0,y.jsxs)(T.xu,{onTouchMove:d,onTouchStart:c,onTouchEnd:u,position:"relative",children:[(0,y.jsx)(x,{pin:p,url:null!=e?e:"",viewParameter:h,closeupImageDims:t}),(0,y.jsxs)(o.Fragment,{children:[(0,y.jsx)(T.xu,{dangerouslySetInlineStyle:{__style:E},height:P,left:!0,position:"absolute",top:!0,width:"100%"}),(0,y.jsx)(T.xu,{dangerouslySetInlineStyle:{__style:{...E,top:P}},left:!0,height:A,position:"absolute",width:I}),(0,y.jsx)(T.xu,{dangerouslySetInlineStyle:{__style:{...E,top:P,left:j}},height:A,position:"absolute",right:!0}),(0,y.jsx)(T.xu,{dangerouslySetInlineStyle:{__style:{...E,top:R}},bottom:!0,left:!0,position:"absolute",width:"100%"})]}),!l&&(0,y.jsxs)(T.xu,{"data-test-id":"CropperHandles",children:[(0,y.jsx)(k,{alt:_._('Top left cropper handle', 'flashlight.cropper.topLeftHandle', 'top left handle for cropping image'),src:w(),top:P-9,left:I-9}),(0,y.jsx)(k,{alt:_._('Top right cropper handle', 'flashlight.cropper.topRightHandle', 'top right handle for cropping image'),src:S(),top:P-9,left:j-15}),(0,y.jsx)(k,{alt:_._('Bottom left cropper handle', 'flashlight.cropper.bottomLeftHandle', 'bottom left handle for cropping image'),src:m(),top:R-15,left:I-9}),(0,y.jsx)(k,{alt:_._('Bottom right cropper handle', 'flashlight.Cropper.BottomLeftHandle', 'bottom right handle for cropping image'),src:g(),top:R-15,left:j-15})]}),(0,y.jsx)(T.xu,{"data-test-id":"CroppedArea",position:"absolute",rounding:2,height:A+4,width:C+4,dangerouslySetInlineStyle:{__style:{top:P-2,left:I-2,border:s?void 0:"2px solid #ffffff"}}})]})}var C=i(523563),j=i(112690);function R({auxData:e,index:t,style:i,onClick:n,x:r,y:a,viewParameter:s}){const l=(0,f.ZP)(),c=(0,j.Z)(),d=32;return(0,o.useEffect)((()=>{c({aux_data:e,event_type:120,element:1260,view_parameter:s,view_type:72})}),[]),(0,y.jsx)("div",{"data-test-id":"dot",onClick:n,onKeyPress:n,role:"button",style:{position:"absolute",top:a-16,left:r-16,outline:"none",...i},"aria-label":l._('Select a specific item on image', 'dot.accessibilityLabel', 'Accessibility label for <Dot /> component'),tabIndex:"0",children:(0,y.jsx)(T.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.1)",width:d,height:d,border:"none",borderRadius:d,cursor:n?"pointer":"default"}},children:(0,y.jsx)(T.xu,{color:"default",position:"absolute",padding:0,display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{boxShadow:"none",width:16,height:16,border:"none",borderRadius:16,top:8,left:8}}})})})}var D=i(599611),O=i(391254),L=i(100183);const M=(0,L.Ll)(["\n  flashlightDotPop {\n      0% {\n          opacity: 0;\n          transform: scale(0);\n      }\n\n      100% {\n          opacity: 1;\n          transform: scale(1);\n      }\n  }\n","labelReveal {\n    0% {\n      transform: scale(0, 1)\n    }\n\n    100% {\n      transform: scale(1, 1)\n    }\n  }\n"]);function N({cropArea:e,closeupImageTop:t,entryPoint:i,imageHeight:n,imageTop:r,imageWidth:a,onDotTap:s,pinId:l,shouldUpdateUnifiedFeed:c,visualObjects:d,viewParameter:u}){const p=(0,j.Z)();return(0,y.jsxs)(o.Fragment,{children:[(0,y.jsx)(O.Z,{unsafeCSS:M}),d.map(((o,l)=>{const d=(0,D.Z)({cropArea:o,scaledWidth:a,scaledHeight:n}),h=Math.floor(d.x+d.w/2),m=Math.floor(d.y+r+d.h/2),_=(0,C.Z)(e,o,.04),g={animation:`flashlightDotPop 0.3s ease-out ${parseFloat((.1*l).toFixed(2))}s both`};const{x:v,y:f,w:x,h:b,is_stela:w,label:P}=o,S=m-t;return _?null:(0,y.jsx)(R,{auxData:c?{commerce_data:JSON.stringify({entrypoint:i})}:{},index:l,onClick:()=>{p({view_parameter:u,view_type:72,element:"shopping"===i?1221:1260,event_type:102,aux_data:c?{commerce_data:JSON.stringify({entrypoint:i})}:{}}),s({cropArea:{x:v,y:f,w:x,h:b},cropSource:w?4:1,label:P,reload:!0,fromUnifiedFeed:c})},style:g,x:h,y:S,viewParameter:u},l)}))]})}var z=i(618446),F=i.n(z),Z=i(691720);function B({closeupImage:e,closeupImageDims:t,cropArea:i,handleCropperChange:n,handleChangeCloseupImageTop:r,pin:a,spotlightAreas:s,viewParameter:l,viewType:c}){const d=(0,j.Z)(),[u,p]=(0,o.useState)(0),{closeupImageHeight:h,closeupImageWidth:m,closeupImageTop:_}=t;return(0,y.jsxs)(T.xu,{overflow:"hidden",position:"fixed",dangerouslySetInlineStyle:{__style:{top:_}},maxWidth:Z.g6,width:"100%",children:[(0,y.jsx)(A,{closeupImage:e,closeupImageDims:t,cropArea:i,disableBorder:!0,disableHandles:!0,onTouchStart:e=>{const{clientY:t}=e.touches[0];p(t)},onTouchMove:e=>{e.preventDefault();const{closeupImageTop:i,closeupImageMinTop:n}=t;if(r&&n){const{clientY:t}=e.touches[0];p(t);const o=t-u;r(Math.floor(Math.max(n,Math.min(0,i+o))))}},onTouchEnd:()=>{d({view_parameter:l,view_type:c,element:11677,event_type:102}),F()(i,{x:0,y:0,h:1,w:1})||n({cropArea:{x:0,y:0,h:1,w:1},cropSource:5,reload:!0,fromUnifiedFeed:!0})},pin:a,viewParameter:l}),!!s.length&&0!==h&&0!==m&&(0,y.jsx)(T.xu,{"data-test-id":"FlashlightDots",children:(0,y.jsx)(N,{cropArea:i,closeupImageTop:_,entryPoint:"shopping",imageHeight:h,imageTop:_,imageWidth:m,onDotTap:n,pinId:a.id,shouldUpdateUnifiedFeed:!0,visualObjects:s,viewParameter:l})})]})}var U=i(766935),H=i(245376),V=i(124580),W=i(63552),$=i(905732),G=i(223815),K=i(643010),q=i(826067),Y=i(867820),X=i(780280);const J=(0,L.Ll)(["\n  modalReveal {\n      0% {\n          transform: translate(0%, 100%);\n      }\n\n      100% {\n        transform: translate(0%, 0%);\n      }\n  }\n"]);function Q(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ee=()=>{};function te({filterIconShown:e,isRTL:t}){const i=t?"marginRight":"marginLeft",n=t?"marginLeft":"marginRight";return e?{[i]:38,[n]:50,marginTop:15,marginBottom:15}:{[i]:-10,[n]:50,marginTop:15,marginBottom:15}}const ie={mask:{baseStyles:{backgroundColor:"rgba(0,0,0, .5)",height:"100%",overscrollBehavior:"none",touchAction:"none",transitionProperty:"opacity",transitionTimingFunction:"ease-out",width:"100%",zIndex:1}},modal:{baseStyles:{border:(0,K.Yc)()?void 0:"1px solid #efefef",borderRadius:"16px",overscrollBehavior:"none",touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",transformOrigin:"bottom",width:"100vw",zIndex:1}}},ne=0,oe=1,re=2;class ae extends o.Component{constructor(...e){super(...e),Q(this,"state",{currentDistanceFromTop:this.props.maxDistanceFromTop?this.props.maxDistanceFromTop:-1,startY:0,scrollDirection:ne,shouldAnimate:!1,addedEvent:!1,filterModalIsOpen:!1,numberFiltersApplied:0}),Q(this,"onScroll",(0,U.Z)((()=>{const{logContextEvent:e,viewParameter:t,viewType:i}=this.props;e({event_type:110,view_parameter:t,view_type:i})}),1e3)),Q(this,"onTouchStart",(e=>{const{clientY:t}=e.touches[0];this.setState({startY:t,shouldAnimate:!1,scrollDirection:ne})})),Q(this,"onTouchMove",(e=>{!this.state.addedEvent&&this.modal&&(this.modal.addEventListener("touchmove",this.preventPullToRefresh,{passive:!1}),this.setState({addedEvent:!0})),e.preventDefault();const{clientY:t}=e.touches[0],{startY:i,currentDistanceFromTop:n}=this.state,{canMoveModal:o,entryPoint:r,onDismiss:a,logContextEvent:s,maxDistanceFromTop:l,viewParameter:c}=this.props,d=t-i;o&&void 0!==l&&(("CloseupShop"===r||"CloseUpMainPinDrawer"===r)&&d>20&&n>l&&a?(s({event_type:108,view_parameter:c,view_type:427}),this.setState({currentDistanceFromTop:l,startY:0,scrollDirection:ne},(()=>a(e)))):(d>0&&n>=0&&(n<l||"CloseupShop"===r||"CloseUpMainPinDrawer"===r)&&window.scrollY<=0||d<0&&n<=l&&n>=0)&&this.setModalPosition(t,d))})),Q(this,"onTouchEnd",(e=>{const{minDistanceFromTop:t,entryPoint:i}=this.props;this.state.addedEvent&&this.modal&&(this.modal.removeEventListener("touchmove",this.preventPullToRefresh),this.setState({addedEvent:!1})),this.props.shouldSnapToEnds&&this.state.scrollDirection===re?(this.header&&V.Z.removeObstruction("top",this.header),this.setState({currentDistanceFromTop:this.props.maxDistanceFromTop,shouldAnimate:!0}),i&&(0,Y.My)(`mweb.${i}.snap_to_bottom`)):this.props.shouldSnapToEnds&&this.state.scrollDirection===oe&&(this.setState({currentDistanceFromTop:t||0,shouldAnimate:!0}),this.header&&V.Z.addObstruction("top",this.header),i&&(0,Y.My)(`mweb.${i}.sliding_modal.snap_to_top`))})),Q(this,"handleHeaderTouch",(()=>{const{maxDistanceFromTop:e,minDistanceFromTop:t,entryPoint:i}=this.props,{currentDistanceFromTop:n,scrollDirection:o}=this.state;o===ne&&(n===e?(this.setState({currentDistanceFromTop:t||0,shouldAnimate:!0}),(0,Y.My)(`mweb.${i}.sliding_modal.header_touch.snap_to_top`)):e&&(this.setState({currentDistanceFromTop:e,shouldAnimate:!0}),(0,Y.My)(`mweb.${i}.sliding_modal.header_touch.snap_to_bottom`)))})),Q(this,"handleCloseIconTouch",(e=>{const{currentDistanceFromTop:t}=this.state,{onDismiss:i,logContextEvent:n,maxDistanceFromTop:o,viewParameter:r,viewType:a}=this.props;e.stopPropagation(),i&&(n({aux_data:{commerce_data:JSON.stringify({snapped_top:0===t})},element:75,event_type:102,view_parameter:r,view_type:a}),this.setState({currentDistanceFromTop:o,startY:0,scrollDirection:ne},(()=>i(e))))})),Q(this,"getMaskStyles",(()=>{const{entryPoint:e,overrideZDepth:t}=this.props,i=ie.mask.baseStyles;return i.zIndex=t?t-1:i.zIndex,{__style:{...i,..."CloseupShop"===e?{backgroundColor:"rgba(255,255,255, 1)",height:"50%",top:"70%"}:Object.freeze({})}}})),Q(this,"getModalStyles",(()=>{const{entryPoint:e,overrideZDepth:t,shouldSnapToEnds:i}=this.props,{currentDistanceFromTop:n,shouldAnimate:o}=this.state,r=ie.modal.baseStyles;return r.zIndex=t||r.zIndex,r.border=this.props.noBorder?void 0:r.border,{__style:{...r,boxShadow:"CloseupShop"===e?"0px 0px 8px rgba(0, 0, 0, 0.1)":void 0,animation:"modalReveal 0.3s ease-out both",zIndex:"CloseUpMainPinDrawer"===e?4:void 0,borderRadius:"CloseUpMainPinDrawer"===e?"24px":void 0,top:n>-1?n:void 0,...i&&o?{transitionDuration:"500ms",transitionProperty:"transform, opacity, top"}:Object.freeze({})}}})),Q(this,"setModalPosition",((e,t)=>{const{startY:i,currentDistanceFromTop:n}=this.state,{maxDistanceFromTop:o,snapToEndThreshold:r,entryPoint:a}=this.props;if(o){const t=e-i,s="CloseupShop"===a||"CloseUpMainPinDrawer"===a?Math.max(0,n+t):Math.min(o,Math.max(0,n+t)),l=Math.floor(s);let c=ne;if(r){const e=Math.floor(r*o),i=Math.floor((1-r)*o);t<0?c=l>i?re:oe:t>0&&(c=l>e?re:oe)}this.setState({startY:e,currentDistanceFromTop:l,scrollDirection:c})}})),Q(this,"preventBackgroundScroll",(e=>{e.preventDefault()})),Q(this,"preventPullToRefresh",(e=>{const{canMoveModal:t}=this.props,{currentDistanceFromTop:i,startY:n}=this.state,{clientY:o}=e.touches[0],r=o-n;t&&i>=0&&0===window.scrollY&&r>0&&e.preventDefault()})),Q(this,"openFiltersModal",(e=>{e.stopPropagation(),this.setState({filterModalIsOpen:!0})})),Q(this,"closeFiltersModal",(()=>{this.setState({filterModalIsOpen:!1})})),Q(this,"buttonTap",(()=>{const{cropSource:e,logContextEvent:t}=this.props;let i="";i="related_products"===(0,H.Z)(e)?3455:3456,t({event_type:102,view_parameter:i,view_type:72,element:11735})})),Q(this,"updateNumberFiltersApplied",(e=>{this.setState({numberFiltersApplied:e})}))}componentDidMount(){const{isOpen:e,entryPoint:t}=this.props;e&&V.Z.pause(),"CloseupShop"!==t&&"CloseUpMainPinDrawer"!==t||window.addEventListener("scroll",this.onScroll)}componentDidUpdate(e,t){const{domainFilters:i,priceFilters:n,cropSource:o,isOpen:r,logContextEvent:a,maxDistanceFromTop:s,setHasDraggedDrawerToFullScreen:l,minDistanceFromTop:c,entryPoint:d}=this.props,{currentDistanceFromTop:u}=this.state;if(r&&!e.isOpen?V.Z.pause():!r&&e.isOpen&&V.Z.resume(),"CloseUpMainPinDrawer"===d&&s<e.maxDistanceFromTop&&u>s&&this.handleHeaderTouch(),t.currentDistanceFromTop!==(e.minDistanceFromTop||0)&&u===(c||0)&&l&&l(!0),i&&n&&(!F()(i,e.domainFilters)||!F()(n,e.priceFilters))){let e="";e="related_products"===(0,H.Z)(o)?3455:3456,a({event_type:13,view_parameter:e,view_type:72,element:11735})}}componentWillUnmount(){const{entryPoint:e,isOpen:t}=this.props;this.header&&V.Z.removeObstruction("top",this.header),t&&V.Z.resume(),this.state.addedEvent&&this.modal&&this.modal.removeEventListener("touchmove",this.preventPullToRefresh),"CloseupShop"!==e&&"CloseupShop"!==e||window.removeEventListener("scroll",this.onScroll)}render(){const{mobileAccessibilityCloseIconLabel:e,canMoveModal:t,children:i,childPaddingX:n,childPaddingY:o,cropSource:r,domainFilters:a,entryPoint:s,heading:l,headerChildren:c,mobileHideCloseIcon:d,isOpen:u,isRTL:p,location:h,minDistanceFromTop:m,noDivider:_,noMaskOnBackground:g,onDismiss:v,pinId:f,priceFilters:x,submitFilters:b=(()=>{}),showHandle:w}=this.props,{currentDistanceFromTop:P,filterModalIsOpen:S,numberFiltersApplied:I}=this.state,k=!g||"CloseupShop"===s&&P<=0?this.getMaskStyles():{},E=this.getModalStyles(),A=v||ee,C=t&&P<=(m||0),j={};a&&(j.domainFilters=a),x&&(j.priceFilters=x);const R=Object.keys(j).length>0;return u&&(0,y.jsx)(G.Z,{allowClickAndDrag:!0,children:(0,y.jsx)(T.mh,{children:(0,y.jsxs)(T.xu,{display:"inlineBlock",role:"dialog","aria-label":l,children:[("CloseupShop"===s||"CloseUpMainPinDrawer"===s)&&(0,y.jsx)(O.Z,{unsafeCSS:J}),(0,y.jsx)(W.Z,{onTouch:A,pressState:"none",accessibilityLabel:this.props.i18n._('Close', 'duplo.sldingmodal.accessibilityCloseLabel', 'Accessibility label for close button in modal'),children:(0,y.jsx)(T.xu,{dangerouslySetInlineStyle:k,left:!0,onTouchMove:this.preventBackgroundScroll,position:"fixed",top:!0})}),(0,y.jsx)(T.xu,{ref:e=>this.modal=e,children:(0,y.jsx)(T.xu,{bottom:!0,color:"default",dangerouslySetInlineStyle:E,left:!0,onTouchEnd:this.onTouchEnd,onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,position:C?"absolute":"fixed",children:(0,y.jsx)(W.Z,{onTouch:this.handleHeaderTouch,pressState:"none",accessibilityLabel:this.props.i18n._('View all search results', 'SlidingModal.Header.a11yLabel', 'Accessibility label for header of search results in flashlight'),children:(0,y.jsxs)(T.xu,{position:"relative",children:[w&&(0,y.jsx)(T.xu,{display:"flex",top:!0,marginTop:2,justifyContent:"center",children:(0,y.jsx)("svg",{width:"40",height:"4",viewBox:"0 0 40 4",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,y.jsx)("rect",{width:"40",height:"4",rx:"2",fill:"#767676"})})}),e&&!d&&(0,y.jsx)(T.Le,{top:0,children:(0,y.jsxs)(T.xu,{ref:e=>{this.header=e},color:"default",rounding:"CloseUpMainPinDrawer"===s?6:2,marginBottom:"CloseUpMainPinDrawer"===s?-5:void 0,children:[(0,y.jsxs)(T.kC,{alignItems:"center",flex:"grow",justifyContent:"start",children:[(0,y.jsx)(T.kC,{alignItems:"center",justifyContent:"start",children:(0,y.jsx)(T.hU,{accessibilityLabel:e,icon:"CloseupShop"===s||"CloseUpMainPinDrawer"===s?"cancel":"arrow-back",iconColor:"CloseUpMainPinDrawer"===s?"darkGray":"gray",onClick:({event:e})=>this.handleCloseIconTouch(e),padding:5,size:"lg"})}),(0,y.jsx)(T.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:te({filterIconShown:R,isRTL:p})},"data-test-id":"slidingModalHeader",display:"flex",flex:"grow",justifyContent:"center",children:(0,y.jsx)(T.X6,{align:"center",size:"400",accessibilityLevel:2,children:l})}),R&&(0,y.jsxs)(T.xu,{children:[(0,y.jsxs)(T.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:[I>0?(0,y.jsx)(T.xv,{weight:"bold",children:I}):null,(0,y.jsx)(T.hU,{accessibilityLabel:this.props.i18n._('Filters', 'flashlightPage.slidingModal.filterIconButton', 'Icon button appears when filters are available'),iconColor:"darkGray",icon:"filter",onClick:({event:e})=>{this.openFiltersModal(e),this.buttonTap()},size:"md"})]}),(0,y.jsx)($.Z,{closeFiltersModal:this.closeFiltersModal,cropSource:r,initialProductFilters:{domains:(0,q.mB)(null==h?void 0:h.search).domains,prices:[parseInt((0,q.mB)(null==h?void 0:h.search).min,10),parseInt((0,q.mB)(null==h?void 0:h.search).max,10)]},isOpen:S,pinId:f,productFilters:j,submitFilters:b,updateNumberFiltersApplied:this.updateNumberFiltersApplied})]})]}),c||null,!_&&(0,y.jsx)(T.iz,{})]})}),(0,y.jsx)(T.xu,{overflow:C?"auto":void 0,paddingX:n,paddingY:o,children:i})]})})})})]})})})}}Q(ae,"defaultProps",{childPaddingX:3,childPaddingY:3});const se=(0,r.connect)((function({productFilters:e},{filterFeedKey:t}){let i={};return t&&(i=e[t]||{}),{categoryFilters:i.categoryFilters,domainFilters:i.domainFilters,priceFilters:i.priceFilters}}),(()=>({})))((function(e){const t=(0,f.ZP)(),i=(0,j.Z)(),{isRTL:n}=(0,X.B)();return(0,y.jsx)(ae,{...e,i18n:t,isRTL:n,logContextEvent:i})}));var le=i(430323),ce=i(784590),de=i(19121);const ue=12,pe={OUTSIDE:0,INSIDE:1,LEFT_CROPPER:2,RIGHT_CROPPER:3,TOP_CROPPER:4,BOTTOM_CROPPER:5,TOP_LEFT_HANDLE:6,TOP_RIGHT_HANDLE:7,BOTTOM_LEFT_HANDLE:8,BOTTOM_RIGHT_HANDLE:9,NONE:10};function he({closeupImage:e,closeupImageDims:t,cropArea:i,entryPoint:n,handleCropperChange:r,handleChangeCloseupImageTop:a,isShoppingResults:s,pin:l,spotlightAreas:c,viewParameter:d}){const{id:u}=l,p=(0,o.useRef)(),[h,m]=(0,o.useState)(0),[_,g]=(0,o.useState)(0),[v,f]=(0,o.useState)(pe.NONE),x=(0,j.Z)(),{x:b,y:w,w:P,h:S}=i,{closeupImageTop:k,closeupImageMinTop:E,closeupImageWidth:C,closeupImageHeight:R,minCropperWidthRatio:D,minCropperHeightRatio:O}=t,L={top:k};return(0,y.jsxs)(T.xu,{overflow:"hidden",position:"fixed",dangerouslySetInlineStyle:{__style:L},ref:p,maxWidth:Z.g6,width:"100%",children:[(0,y.jsx)(A,{closeupImage:e,closeupImageDims:t,cropArea:i,onTouchStart:e=>{const{clientX:t,clientY:i}=e.touches[0];m(t),g(i),f(pe.NONE)},onTouchMove:e=>{const{clientX:t,clientY:i}=e.touches[0];m(t),g(i);const n=P>=.8&&S>=.8?5:6;if(v===pe.NONE){const e=((e,t)=>{const i=t-k,n=e-(p.current?p.current.getBoundingClientRect().left:0),o=R*w,r=R*(w+S),a=C*b,s=C*(P+b);return i>o+ue&&i<r-ue&&n>a+ue&&n<s-ue?pe.INSIDE:n<=a+ue&&n>=a-ue&&i>=o+15&&i<=r-15?pe.LEFT_CROPPER:n<=s+ue&&n>=s-ue&&i>=o+15&&i<=r-15?pe.RIGHT_CROPPER:n<=s-15&&n>=a+15&&i>=o-ue&&i<=o+ue?pe.TOP_CROPPER:n<=s-15&&n>=a+15&&i>=r-ue&&i<=r+ue?pe.BOTTOM_CROPPER:n<=a-9+I&&n>=a-ue&&i>=o-ue&&i<=o+I-9?pe.TOP_LEFT_HANDLE:n<=s+ue&&n>=s-15&&i>=o-ue&&i<=o+I-9?pe.TOP_RIGHT_HANDLE:n<=a-9+I&&n>=a-ue&&i>=r-15&&i<=r+ue?pe.BOTTOM_LEFT_HANDLE:n<=s+ue&&n>=s-15&&i>=r-15&&i<=r+ue?pe.BOTTOM_RIGHT_HANDLE:pe.OUTSIDE})(t,i);f(e)}if(void 0!==D&&void 0!==O&&void 0!==E){const e=i-_,o=(t-h)/C,s=e/R,l=Math.min(b+P-D,Math.max(0,b+o)),c=P+(b-l),d=Math.min(w+S-O,Math.max(0,w+s)),u=S+(w-d),p=Math.min(1-b,Math.max(D,P+o)),m=Math.min(1-w,Math.max(O,S+s));switch(v){case pe.OUTSIDE:a(Math.floor(Math.max(E,Math.min(0,k+e))));break;case pe.INSIDE:r({cropArea:{x:Math.max(0,Math.min(1-P,b+o)),y:Math.max(0,Math.min(1-S,w+s))},cropSource:n,reload:!1});break;case pe.LEFT_CROPPER:r({cropArea:{x:l,w:c},cropSource:n,reload:!1});break;case pe.RIGHT_CROPPER:r({cropArea:{w:p},cropSource:n,reload:!1});break;case pe.TOP_CROPPER:r({cropArea:{y:d,h:u},cropSource:n,reload:!1});break;case pe.BOTTOM_CROPPER:r({cropArea:{h:m},cropSource:n,reload:!1});break;case pe.TOP_LEFT_HANDLE:r({cropArea:{x:l,w:c,y:d,h:u},cropSource:n,reload:!1});break;case pe.TOP_RIGHT_HANDLE:r({cropArea:{w:p,y:d,h:u},cropSource:n,reload:!1});break;case pe.BOTTOM_LEFT_HANDLE:r({cropArea:{h:m,x:l,w:c},cropSource:n,reload:!1});break;case pe.BOTTOM_RIGHT_HANDLE:r({cropArea:{h:m,w:p},cropSource:n,reload:!1})}}},onTouchEnd:()=>{if(![pe.NONE,pe.OUTSIDE].includes(v)){const e=v===pe.INSIDE?7603:7604;x({event_type:e,view_parameter:d,view_type:72})}r({cropArea:{x:b,y:w,w:P,h:S},cropSource:6,fromUnifiedFeed:!1,reload:!0})},pin:l,viewParameter:d}),!!c.length&&0!==R&&0!==C&&(0,y.jsx)(T.xu,{"data-test-id":"FlashlightDots",children:(0,y.jsx)(N,{cropArea:i,closeupImageTop:k,entryPoint:n,imageHeight:R,imageWidth:C,imageTop:k,onDotTap:r,pinId:u,shouldUpdateUnifiedFeed:!1,visualObjects:c,viewParameter:d})})]})}var me=i(479739),_e=i(586542);var ge=i(629337),ve=i(229428),fe=i(276602),ye=i(276775);var xe=i(422946),be=i(558068);function we(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Pe=.1,Se=({cropSource:e,h:t,pinId:i,w:n,x:o,y:r,imageSignature:a})=>{var s;const l={name:"VisualLiveSearchResource",options:{pin_id:i,crop:{x:o,y:r,w:n,h:t},crop_source:e,image_signature:a}};return(0,y.jsx)(ge.ZP,{resourceConfig:l,feedItemProps:{viewParameter:3050,viewType:72},feedKey:null!==(s=(0,xe.J)(l.name,l.options))&&void 0!==s?s:"",trafficSource:"flashlight"})},Te=(0,me.CQ)((e=>`visual-search:${e}`)),Ie=(0,me.CQ)((e=>`related-products-unified:${e}`)),ke=(0,s.Z)({feedKey:({match:e})=>`related-products-unified:${e.params.id}`,resourceName:"VisualSearchFlashlightUnifiedResource",trafficSource:({isShopping:e})=>e?"shop_feed":"flashlight",resourceOptions:({match:e,crop:t,cropSource:i,isShopping:n,entrySource:o,location:r,domains:a,minPrice:s,maxPrice:l})=>({crop:t,crop_source:i,pin_id:e.params.id,search_query:(0,q.mB)(r.search).q,source:(0,q.mB)(r.search).rs,is_shopping:n,entry_source:o,domains:a||"",price_min:s,price_max:l}),feedItemProps:({entryPoint:e,isShopping:t,stelaResults:i,viewParameter:n})=>({auxData:{commerce_data:JSON.stringify({entrypoint:e,pin_is_stela:i.some((e=>!0===e.is_stela))})},viewType:72,viewParameter:n})}),Ee=(e,t)=>{var i;if(!t)return null===(i=e.images)||void 0===i?void 0:i["736x"];const{carousel_slots:n=[]}=(0,l.Z)({carouselData:e.carousel_data,images:e.images,richMetadata:e.rich_metadata,richSummary:e.rich_summary})||{},o=n.find((e=>t===e.image_signature));return o?{...(0,c.Z)(o.images)}:void 0};class Ae extends o.PureComponent{constructor(e){super(e),we(this,"getCropperDimens",(({closeupImageHeight:e,modalTop:t,shouldSetState:i})=>{const{location:{search:n}}=this.props,{h:o,y:r,source:a}=(0,q.mB)(n),s="shopping"===a,l=s?1:.4,c=s?0:Pe;let d=o?Number(o):l,u=r?Number(r):c;e>0&&t>0&&!s&&(o||(d=(t-2*t*Pe)/e),r||(u=t*Pe/e));const p={h:d,y:u};return i&&this.setState({...p}),p})),we(this,"getCloseupImageWidth",(()=>Math.min(Z.g6,window.innerWidth))),we(this,"getCloseupImageHeight",((e,t)=>Math.floor(this.getCloseupImageWidth()/t*e))),we(this,"getModalHeight",((e,t)=>{const i=Math.floor(.6*window.innerHeight);return Math.min(i,this.getCloseupImageHeight(e,t))})),we(this,"getCloseupImageDims",((e,t)=>{const{pin:i}=this.props;let n=0,o=0;let r=0;if(i&&i.images){var a,s,l,c;const e=Ee(i,t);n=this.getCloseupImageWidth(),o=this.getCloseupImageHeight(null!==(a=null==e?void 0:e.height)&&void 0!==a?a:1,null!==(s=null==e?void 0:e.width)&&void 0!==s?s:1),r=this.getModalHeight(null!==(l=null==e?void 0:e.height)&&void 0!==l?l:1,null!==(c=null==e?void 0:e.width)&&void 0!==c?c:1)}const d={closeupImageWidth:n,closeupImageHeight:o,closeupImageMinTop:r-o,closeupImageTop:0,minCropperWidthRatio:n?50/n:0,minCropperHeightRatio:o?50/o:0,modalTop:r};return e&&this.setState({closeupImageDims:{...d}}),d})),we(this,"handleChangeCloseupImageTop",(e=>{this.setState((({closeupImageDims:t})=>({closeupImageDims:{...t,closeupImageTop:e}})))})),we(this,"handleCropperChange",(({cropArea:e,cropSource:t,fromUnifiedFeed:i,reload:n})=>{const o={...e,cropSource:t,domains:"",prices:[]};if(n){const{pin:e}=this.props;this.setState(o,(()=>this.reloadResults(e.id,i)))}else this.setState(o)})),we(this,"reloadResults",((e,t)=>{const{x:i,y:n,h:o,w:r,selectedTabIndex:a}=this.state,{history:s,location:{search:l}}=this.props,{source:c}=(0,q.mB)(l),d=c?"&source=shopping":"";this.props.reloadFlashlightAnnotations(e),t?((0,ge.cV)(`related-products-unified:${e}`),s.replace(`/pin/${e}/visual-search/?x=${i}&y=${n}&h=${o}&w=${r}${d}&tab=${a}`)):((0,ge.cV)(`visual-search:${e}`),s.replace(`/pin/${e}/visual-search/?x=${i}&y=${n}&h=${o}&w=${r}&tab=${a}`))})),we(this,"preventDefault",(e=>{e.preventDefault()}));const{location:{search:t}}=e,{x:i,w:n,h:o,source:r,tab:a,domains:s,min:l,max:c,image_signature:d}=(0,q.mB)(t),u="shopping"===r,p=this.getCloseupImageDims(!1,d);p.closeupImageTop=0;const{closeupImageHeight:h,modalTop:m}=p,_=this.getCropperDimens({closeupImageHeight:h,modalTop:m,shouldSetState:!1}),g=u?0:Pe;let v=0;!a||"1"!==a&&"0"!==a||(v="1"===a?1:0);let f=5;n&&o&&(f=Number(n)>=.8&&Number(o)>=.8?5:6),this.state={closeupImageDims:p,cropSource:f,selectedTabIndex:v,domains:s,prices:[parseInt(l,10),parseInt(c,10)],..._,x:i?Number(i):g,w:n?Number(n):1-2*g,imageSignature:d}}componentDidMount(){window.addEventListener("touchmove",this.preventDefault,{passive:!0}),this.props.setCropSource(this.state.cropSource)}componentDidUpdate(e){const{pin:t,flashlightFeedItems:i,flashlightUnifiedFeedItems:n,pwtSurfaceContext:o}=this.props,{imageSignature:r}=this.state;if((i&&i.length>0||n&&n.length>0)&&o&&o.markConstraintComplete("VisualSearchFeedLoaded"),t&&!e.pin){const e=this.getCloseupImageDims(!0,r),{closeupImageHeight:t,modalTop:i}=e;this.getCropperDimens({closeupImageHeight:t,modalTop:i,shouldSetState:!0})}}componentWillUnmount(){window.removeEventListener("touchmove",this.preventDefault)}render(){const{pin:e,history:t,previous:i,location:n,isAuthenticated:o}=this.props,{x:r,y:s,w:l,h:c,closeupImageDims:p,cropSource:h,domains:m,selectedTabIndex:_,prices:g,imageSignature:v}=this.state;if(!e||0===p.modalTop)return null;const{id:f,visual_objects:x=[]}=e,b=Ee(e,v),w=v?[]:(0,ve.m)(x),P=(0,ve.k)(x),S={x:r,y:s,w:l,h:c},{source:I}=(0,q.mB)(n.search),k=I||"flashlight",E="shopping"===k,A=((e,t)=>1===e?4===t?3456:3455:3050)(_,h),[C,j]=g,R=String(1===_),D=`related-products-unified:${f}:${r}:${s}:${l}:${c}:${R}`,O=o?(p.modalTop||0)-5:p.closeupImageHeight||0;return(0,y.jsx)(u.Z,{viewType:72,viewParameter:A,auxData:E?{commerce_data:JSON.stringify({entrypoint:k,pin_is_stela:w.some((e=>!0===e.is_stela))})}:void 0,children:(0,y.jsx)(le.Z,{view:72,children:(0,y.jsxs)(d.default,{hasFixedHeader:!0,hasGutter:!1,children:[(0,y.jsx)(a.Z,{text:this.props.i18n._('Visual Search Page', 'flashlight.accessibilityhiddenheading.fullpage', 'accessibility label for flashlight page')}),(0,y.jsxs)(T.xu,{color:"default",dangerouslySetInlineStyle:{__style:{overscrollBehavior:"none",touchAction:"none"}},height:"100vw",margin:"auto",maxWidth:Z.g6,children:[E?(0,y.jsx)(B,{closeupImage:b,closeupImageDims:p,cropArea:S,handleChangeCloseupImageTop:this.handleChangeCloseupImageTop,handleCropperChange:this.handleCropperChange,pin:e,spotlightAreas:P,viewParameter:A,viewType:72}):(0,y.jsx)(he,{closeupImage:b,closeupImageDims:p,cropArea:S,entryPoint:k,handleChangeCloseupImageTop:this.handleChangeCloseupImageTop,handleCropperChange:this.handleCropperChange,isShoppingResults:1===_,pin:e,spotlightAreas:w,viewParameter:A}),(0,y.jsx)(se,{mobileAccessibilityCloseIconLabel:this.props.i18n._('Close visual search results', 'close visual search results and go back to pin', 'close visual search results and go back to pin'),canMoveModal:!0,childPaddingX:0,childPaddingY:0,cropSource:h,entryPoint:k,filterFeedKey:D,heading:E?this.props.i18n._('Shop now', 'flashlight.slidingModal.shoppingHeader', 'Visual product results'):this.props.i18n._('Visual search', 'Visual search results', 'Visual search results'),isOpen:!0,location:n,maxDistanceFromTop:O,minDistanceFromTop:35,noBorder:!0,noDivider:!0,noMaskOnBackground:!0,onDismiss:()=>{0!==i.length?t.goBack():t.replace(`/pin/${f}/`)},pinId:f,shouldSnapToEnds:!0,snapToEndThreshold:.3,viewParameter:A,viewType:72,children:(0,y.jsx)(T.xu,{color:"default",paddingX:3,children:E?(0,y.jsx)(ke,{crop:S,cropSource:h,domains:m,entryPoint:k,isShopping:1===_,logFeed:E,maxPrice:j,minPrice:C,stelaResults:w,viewParameter:A}):Se({cropSource:h,h:c,pinId:f,w:l,x:r,y:s,imageSignature:v})})})]})]})})})}}function Ce(e){const t=(0,f.ZP)(),i=(0,fe.EV)();return(0,y.jsx)(Ae,{...e,i18n:t,pwtSurfaceContext:i})}function je(){var e;const t=(0,r.useDispatch)(),i=(0,ye.useHistory)(),{previous:n}=(0,be.Hv)(),o=(0,ye.useLocation)(),a=(0,ye.useRouteMatch)(),{isAuth:s}=(0,de.Z)(),l=null!==(e=a.params.id)&&void 0!==e?e:"",{data:c}=(0,ce.Z)({name:"PinResource",options:{id:l,field_set_key:"detailed",fetch_visual_search_objects:!0,is_mobile_fork:!0}}),d=(0,r.useSelector)((({pins:e})=>e[l])),u=null!=c?c:d,h=(0,r.useSelector)((e=>Te(e,l))),m=(0,r.useSelector)((e=>Ie(e,l)));return(0,y.jsx)(p.Z,{constraints:["VisualSearchFeedLoaded"],surface:"flashlight",children:(0,y.jsx)(Ce,{flashlightFeedItems:h,flashlightUnifiedFeedItems:m,history:i,previous:n,isAuthenticated:s,location:o,pin:u,reloadFlashlightAnnotations:e=>t((0,_e.By)(e)),setCropSource:e=>t((e=>({type:"SET_FLASHLIGHT_CROP_SOURCE",payload:{cropSource:e}}))(e))})})}var Re=i(23086),De=i(247568),Oe=i(975540),Le=i(94047),Me=i(297852);const Ne=e=>{const{images:t,image_signature:i}=e,n=(null==t?void 0:t["564x"])&&t.orig,{url:o}=null!=n?n:{};let{width:r,height:a}=null!=n?n:{};return"number"==typeof r&&"number"==typeof a&&r>564&&(a*=564/r,r=564),{width:r,height:a,url:o,imageSignature:i}},ze=({initialCropArea:e,pin:t})=>{let i;if(e)i={...e};else{const{visual_objects:e}=t,{width:n=1,height:o=1}=Ne(t);if(e&&e.length){const{x:t,y:r,w:a,h:s}=e[0];i=(0,D.Z)({cropArea:{x:t,y:r,w:a,h:s},scaledWidth:n,scaledHeight:o})}else{const[e,t]=[n/6,o/6],[r,a]=[n-2*e,o-2*t];i={x:e,y:t,w:r,h:a}}}return{x:Math.floor(i.x),y:Math.floor(i.y),w:Math.floor(i.w),h:Math.floor(i.h)}};let Fe=0,Ze="";const Be=({resourceOptions:e})=>{var t;return(0,y.jsx)(ge.ZP,{resourceConfig:{name:"VisualLiveSearchResource",options:e},feedItemProps:{imageOnly:!0,viewParameter:3050,viewType:72},feedKey:null!==(t=(0,xe.J)("VisualLiveSearchResource",e))&&void 0!==t?t:"",trafficSource:"flashlight"})};function Ue(){const e=(0,f.ZP)(),{isRTL:t}=(0,X.B)(),i=(0,j.Z)(),n=(0,ye.useHistory)(),r=(0,ye.useLocation)(),a=(0,ye.useRouteMatch)(),{id:s}=a.params,l=(0,q.mB)(r.search),c=parseInt(l.x,10),d=parseInt(l.y,10),u=parseInt(l.w,10),p=parseInt(l.h,10),h=((...e)=>e.every(Number.isInteger))(c,d,u,p)?{x:c,y:d,w:u,h:p}:void 0,m=(e=>{const t=parseInt(e,10);switch(t){case 1:case 2:case 3:case 4:case 5:case 6:return t;default:return}})(l.cropSource),_=(0,ce.Z)({name:"PinResource",options:{id:s,field_set_key:"detailed",fetch_visual_search_objects:!0}}),g=(0,o.useRef)(null),{data:v,isLoaded:x}=_;if((0,o.useEffect)((()=>{if(!h&&v){const e=ze({initialCropArea:h,pin:v}),t=(0,Me.Z)({cropArea:e,pinId:s});n.replace(t)}const e=g.current;return e&&Ze===s&&(e.scrollTop=Fe),i({event_type:13,view_type:72,view_parameter:3050,view_data:{pin_id:s}}),(0,Y.My)("unauth.flashlight_page"),()=>{g&&g.current&&(Fe=g.current.scrollTop,Ze=s)}}),[]),!x)return(0,y.jsx)(le.Z,{view:72,objectId:"",children:(0,y.jsx)(T.xu,{children:(0,y.jsx)(T.$j,{accessibilityLabel:e._('Loading visual search...', 'Accessibility label for loading visual search page', 'Accessibility label for loading visual search page'),show:!0})})});if(!v)return null;const{width:b,height:w,url:P}=Ne(v),S=ze({initialCropArea:h,pin:v}),I=!(r.state&&r.state.internalNavigation),k=(null!=b?b:1)+24;return(0,y.jsx)(le.Z,{view:72,objectId:"",children:(0,y.jsx)(T.xu,{children:(0,y.jsxs)(T.xu,{display:"flex",paddingX:12,children:[(0,y.jsxs)(T.xu,{height:"100vh",marginEnd:3,marginStart:3,overflow:"scroll",position:"fixed",ref:g,zIndex:new T.Ry(600),children:[(0,y.jsx)(T.xu,{"data-test-id":"flashlight-enabled-image",dangerouslySetInlineStyle:{__style:{width:b,height:w}},children:(0,y.jsxs)(T.zd,{height:w,rounding:2,width:b,children:[(0,y.jsx)(T.Ee,{alt:v.description,naturalHeight:null!=w?w:1,naturalWidth:null!=b?b:1,src:null!=P?P:""}),(0,y.jsx)(De.Z,{showAnimation:I,imageSignature:v.image_signature,imageSize:{h:w,w:b},initialCropArea:S,onChange:({origCrop:e,cropSource:t})=>{const i=(0,Me.Z)({cropArea:e,pinId:s,cropSource:t}),o=window.location.pathname+window.location.search;(0,Y.My)("unauth.flashlight_page.cropper_changed"),i!==o&&s&&n.replace({pathname:`/pin/${s}/visual-search/`,search:(0,Le.Z)({cropArea:e,cropSource:t}),state:{internalNavigation:!0}})},pin:v,spotlightAreas:v.visual_objects})]})}),(0,y.jsx)(T.xu,{position:"relative","data-test-id":"closeupDescription",display:"flex",direction:"column",maxWidth:null!=b?b:1,margin:5,children:(0,y.jsx)(Re.Z,{pin:v,pageType:{isAuth:!1,page:"flashlight"},viewportSize:"narrow"})})]}),(0,y.jsx)(T.xu,{position:"relative",width:"100%",dangerouslySetInlineStyle:{__style:t?{marginRight:`${k}px`}:{marginLeft:`${k}px`}},children:(0,y.jsxs)(T.xu,{children:[(0,y.jsx)(T.xu,{width:"100%",paddingY:3,paddingX:9,display:"flex",alignItems:"center",children:(0,y.jsx)(T.xu,{flex:"grow",children:(0,y.jsx)(T.xv,{align:"center",weight:"bold",children:(0,y.jsx)("span",{className:"deprecatedTextSizeXL",children:e._('Visually similar results', 'Header explaining results of flashlight search', 'Header explaining results of flashlight search')})})})}),(0,y.jsx)(Be,{resourceOptions:{pin_id:v.id,image_signature:v.image_signature,crop:(0,Oe.Z)({cropArea:S,scaledWidth:b,scaledHeight:w}),crop_source:m||5}})]})})]})})})}var He=i(50286);const Ve=function(){const e=(0,He.HG)(),t=(0,de.Z)();return e?t.isAuth?(0,y.jsx)(n.Z,{}):(0,y.jsx)(Ue,{}):(0,y.jsx)(je,{})}},395164:(e,t,i)=>{i.d(t,{T:()=>s,Z:()=>l});var n=i(635240),o=i(226198),r=i(314880);const a=[];function s(e){let t;try{t=JSON.stringify({errorObj:e})}catch(c){t=JSON.stringify({errorObj:{message:e.message,name:"logToServer stringify exception"}})}const i=(s={report_context:JSON.stringify({current_url:window.location.href,client_version:(0,n.Z)()}),report_data:t},Object.keys(s).map((e=>e+"="+encodeURIComponent(s[e]))).join("&"));var s;const l=window.btoa(i);if(-1===a.indexOf(l)){const e=new XMLHttpRequest;e.open("post","/_/_/logClientError/",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded");const t=(0,r.H)();t&&e.setRequestHeader("X-Pinterest-PWS-Handler",t),e.setRequestHeader("X-CSRFToken",function(e){const t=("; "+document.cookie).split("; "+e.name+"=");return 2===t.length?t.pop().split(";").shift():""}(o.fS)),e.send(i),a.push(l)}a.length>100&&a.shift()}function l(){window.addEventListener("error",(e=>{const t=e.error||{};s({extraData:t.extraData,name:t.name,message:t.message||e.message,stack:t.stack,filename:e.filename,line:e.lineno,column:e.colno})})),window.addEventListener("unhandledrejection",(e=>{var t,i,n,o,r;if(!(e&&e.reason&&e.reason instanceof Error))return;const{reason:a}=e,l="string"==typeof a.message?a.message:String(a);s({name:null!==(t=a.name)&&void 0!==t?t:"unhandledrejection",message:l,message_detail:a.message_detail,original_message:a.original_message,stack:a.stack,filename:a.fileName,line:null!==(i=null!==(n=a.lineno)&&void 0!==n?n:a.line)&&void 0!==i?i:a.lineNumber,column:null!==(o=null!==(r=a.column)&&void 0!==r?r:a.colno)&&void 0!==o?o:a.columnNumber})}))}},314880:(e,t,i)=>{i.d(t,{H:()=>o,V:()=>r});let n=null;function o(){return n}function r(e){n=e}},610977:(e,t,i)=>{i.d(t,{DC:()=>r,dV:()=>n,gD:()=>o,go:()=>a});const n="__PWS_ROOT__",o="__PWS_DATA__",r="__PWS_ERROR__",a="__GRAPHQL_DATA__"},635240:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(610977);let o="";function r(){return function(){if(o.length>0)return o;{const e=document.getElementById(n.gD);if(!e)throw new Error(`Unable to retrieve appVersion because #${n.gD} was not found in the DOM.`);const t=e.textContent.indexOf('"appVersion"');if(t>-1){const i=t+14,n=t+21;return o=e.textContent.slice(i,n),o}throw new Error("Unable to retrieve appVersion because appVersion property was not found in PWS DATA.")}}()}},464228:(e,t,i)=>{i.d(t,{P:()=>r,Z:()=>a});var n=i(667294);const o=(0,n.createContext)();function r(){return(0,n.useContext)(o)}const a=o}},e=>{e.O(0,[14865],(()=>{[97270,46760,92982,78120,66286,48035,5035,75690,43473,51672,22347,22538,1593].map(e.E)}),5);e.O(0,[97270,83119,67631,26467,97226,20786,52857,8824],(()=>{return t=269458,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/pin/[id]/visual-search-83a4bb284e25e6e4.mjs.map